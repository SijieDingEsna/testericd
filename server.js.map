{"version":3,"sources":["webpack:///webpack/bootstrap 6c48f15ac1167e498fc6","webpack:///C:/escloud/Logan/src/server.js","webpack:///C:/escloud/Logan/src/modules/logger/index.js","webpack:///C:/escloud/Logan/src/utils/serverConstants.js","webpack:///C:/escloud/Logan/src/errors/errors.js","webpack:///C:/escloud/Logan/src/config.js","webpack:///external \"mongoose\"","webpack:///C:/escloud/Logan/src/utils/serverHelper.js","webpack:///C:/escloud/Logan/src/api/viewBase/viewBase.js","webpack:///C:/escloud/Logan/src/utils/dbwrapper.js","webpack:///external \"async\"","webpack:///external \"express\"","webpack:///external \"lodash\"","webpack:///external \"util\"","webpack:///C:/escloud/Logan/src/api/message/message.model.js","webpack:///C:/escloud/Logan/src/api/user/user.model.js","webpack:///C:/escloud/Logan/src/auth/auth.service.js","webpack:///C:/escloud/Logan/src/api/message/message.event.js","webpack:///C:/escloud/Logan/src/flux/constants/MessageConstants.js","webpack:///C:/escloud/Logan/src/api/topic/topic.model.js","webpack:///external \"request\"","webpack:///external \"path\"","webpack:///external \"process\"","webpack:///C:/escloud/Logan/src/api/taskqueue/taskqueue.backend.js","webpack:///C:/escloud/Logan/src/api/user/user.backend.js","webpack:///C:/escloud/Logan/src/auth/authorizers.js","webpack:///external \"passport\"","webpack:///C:/escloud/Logan/src/api/message/message.backend.js","webpack:///C:/escloud/Logan/src/config-env/environment/index.js","webpack:///C:/escloud/Logan/src/modules/file/index.js","webpack:///external \"jsonwebtoken\"","webpack:///C:/escloud/Logan/src/api/anonymous/anonymous.model.js","webpack:///C:/escloud/Logan/src/api/user/user.event.js","webpack:///C:/escloud/Logan/src/modules/analytics/google/constants.js","webpack:///C:/escloud/Logan/src/modules/analytics/google/index.js","webpack:///C:/escloud/Logan/src/modules/file/gcs/config.js","webpack:///external \"crypto\"","webpack:///C:/escloud/Logan/src/api/fileviewer/converter_helper.js","webpack:///C:/escloud/Logan/src/api/fileviewer/fileview.common.js","webpack:///C:/escloud/Logan/src/config-env/environment/config-helper.js","webpack:///C:/escloud/Logan/src/flux/constants/MeetingConstants.js","webpack:///C:/escloud/Logan/src/modules/utils/index.js","webpack:///./~/react-interpolate-component/~/fbjs/lib/keyMirror.js","webpack:///external \"escape-string-regexp\"","webpack:///external \"fs\"","webpack:///external \"gcloud/lib/storage\"","webpack:///external \"querystring\"","webpack:///C:/escloud/Logan/src/api/notify/topicuser.model.js","webpack:///C:/escloud/Logan/src/components/Translate/Translate.js","webpack:///C:/escloud/Logan/src/modules/memcache/index.js","webpack:///external \"ZSLogger\"","webpack:///external \"node-uuid\"","webpack:///external \"os\"","webpack:///external \"pmx\"","webpack:///C:/escloud/Logan/src/_locale/en.js","webpack:///C:/escloud/Logan/src/api/file/file.backend.js","webpack:///C:/escloud/Logan/src/api/invite/invite.backend.js","webpack:///C:/escloud/Logan/src/api/notify/notify.event.js","webpack:///C:/escloud/Logan/src/api/relation/relation.backend.js","webpack:///C:/escloud/Logan/src/api/topic/topicInvite.model.js","webpack:///C:/escloud/Logan/src/auth/oauth/accessToken/accessToken.model.js","webpack:///C:/escloud/Logan/src/flux/constants/SocketConstants.js","webpack:///C:/escloud/Logan/src/modules/email/templater.js","webpack:///C:/escloud/Logan/src/utils/Is.js","webpack:///external \"redis\"","webpack:///external \"underscore\"","webpack:///C:/escloud/Logan/src/_locale/el.js","webpack:///C:/escloud/Logan/src/api/anonymous/anonymous.event.js","webpack:///C:/escloud/Logan/src/api/company/company.model.js","webpack:///C:/escloud/Logan/src/api/enroll/enroll.event.js","webpack:///C:/escloud/Logan/src/api/enroll/enroll.model.js","webpack:///C:/escloud/Logan/src/api/notify/notify.backend.js","webpack:///C:/escloud/Logan/src/api/relation/relation.model.js","webpack:///C:/escloud/Logan/src/api/relation/relationgraph.model.js","webpack:///C:/escloud/Logan/src/api/sync/sync.backend.js","webpack:///C:/escloud/Logan/src/api/topic/index.js","webpack:///C:/escloud/Logan/src/api/topic/topic.backend.js","webpack:///C:/escloud/Logan/src/api/topic/topic.event.js","webpack:///C:/escloud/Logan/src/auth/lru.js","webpack:///C:/escloud/Logan/src/auth/permission-config.js","webpack:///C:/escloud/Logan/src/auth/permissiongroup.model.js","webpack:///C:/escloud/Logan/src/enrollAdmin.model.js","webpack:///C:/escloud/Logan/src/flux/constants/TaskConstants.js","webpack:///C:/escloud/Logan/src/modules/email/email.controller.js","webpack:///C:/escloud/Logan/src/modules/email/sendgrid.js","webpack:///C:/escloud/Logan/src/modules/file/gcs/gcs.service.js","webpack:///C:/escloud/Logan/src/routes.js","webpack:///C:/escloud/Logan/src/utils/Utils.js","webpack:///external \"moment\"","webpack:///external \"morgan\"","webpack:///external \"q\"","webpack:///external \"react\"","webpack:///C:/escloud/Logan/src/api/ams/index.js","webpack:///C:/escloud/Logan/src/api/anonymous/anonymous.controller.js","webpack:///C:/escloud/Logan/src/api/anonymous/index.js","webpack:///C:/escloud/Logan/src/api/company/company.controller.js","webpack:///C:/escloud/Logan/src/api/company/company.event.js","webpack:///C:/escloud/Logan/src/api/company/index.js","webpack:///C:/escloud/Logan/src/api/enroll/enroll.controller.js","webpack:///C:/escloud/Logan/src/api/enroll/index.js","webpack:///C:/escloud/Logan/src/api/file/file.controller.js","webpack:///C:/escloud/Logan/src/api/file/index.js","webpack:///C:/escloud/Logan/src/api/fileviewer/aspose_cloudconvert_fileview.backend.js","webpack:///C:/escloud/Logan/src/api/fileviewer/aspose_fileviewer.backend.js","webpack:///C:/escloud/Logan/src/api/fileviewer/cloudconvert_fileview.backend.js","webpack:///C:/escloud/Logan/src/api/fileviewer/convertlist_fileview.backend.js","webpack:///C:/escloud/Logan/src/api/fileviewer/fileview.backend.js","webpack:///C:/escloud/Logan/src/api/fileviewer/fileview.controller.js","webpack:///C:/escloud/Logan/src/api/fileviewer/index.js","webpack:///C:/escloud/Logan/src/api/idea/idea.backend.js","webpack:///C:/escloud/Logan/src/api/idea/idea.controller.js","webpack:///C:/escloud/Logan/src/api/idea/index.js","webpack:///C:/escloud/Logan/src/api/invite/invite.model.js","webpack:///C:/escloud/Logan/src/api/message/index.js","webpack:///C:/escloud/Logan/src/api/message/message.controller.js","webpack:///C:/escloud/Logan/src/api/message/message.socket.js","webpack:///C:/escloud/Logan/src/api/migrate/index.js","webpack:///C:/escloud/Logan/src/api/migrate/migrate.backend.js","webpack:///C:/escloud/Logan/src/api/migrate/migrate.controller.js","webpack:///C:/escloud/Logan/src/api/migrate/migrate.model.js","webpack:///C:/escloud/Logan/src/api/notify/topicuser.backend.js","webpack:///C:/escloud/Logan/src/api/sync/index.js","webpack:///C:/escloud/Logan/src/api/sync/sync.controller.js","webpack:///C:/escloud/Logan/src/api/task/index.js","webpack:///C:/escloud/Logan/src/api/task/task.backend.js","webpack:///C:/escloud/Logan/src/api/task/task.controller.js","webpack:///C:/escloud/Logan/src/api/taskqueue/index.js","webpack:///C:/escloud/Logan/src/api/taskqueue/taskqueue.controller.js","webpack:///C:/escloud/Logan/src/api/topic/topic.controller.js","webpack:///C:/escloud/Logan/src/api/user/index.js","webpack:///C:/escloud/Logan/src/api/user/user.controller.js","webpack:///C:/escloud/Logan/src/auth/index.js","webpack:///C:/escloud/Logan/src/auth/local/index.js","webpack:///C:/escloud/Logan/src/auth/local/passport.js","webpack:///C:/escloud/Logan/src/auth/oauth/accessToken/accessToken.backend.js","webpack:///C:/escloud/Logan/src/auth/oauth/accessToken/accessToken.controller.js","webpack:///C:/escloud/Logan/src/auth/oauth/index.js","webpack:///C:/escloud/Logan/src/auth/siteAdmin-config.js","webpack:///C:/escloud/Logan/src/auth/socket.auth.js","webpack:///C:/escloud/Logan/src/config-env/customizedMiddlewares.js","webpack:///C:/escloud/Logan/src/config-env/environment/clientEnvironment.js","webpack:///C:/escloud/Logan/src/config-env/environment/development.js","webpack:///C:/escloud/Logan/src/config-env/environment/logan-production.js","webpack:///C:/escloud/Logan/src/config-env/environment/logan-staging.js","webpack:///C:/escloud/Logan/src/config-env/environment/logan-testing.js","webpack:///C:/escloud/Logan/src/config-env/express.js","webpack:///C:/escloud/Logan/src/content/content.js","webpack:///C:/escloud/Logan/src/flux/constants/PresenceConstants.js","webpack:///C:/escloud/Logan/src/modules/analytics/google/config.js","webpack:///C:/escloud/Logan/src/modules/file/gcs/index.js","webpack:///C:/escloud/Logan/src/socketio.js","webpack:///C:/escloud/Logan/src/utils/P2PMediaSession/MediaSessionManager.js","webpack:///C:/escloud/Logan/src/utils/fs.js","webpack:///./src/config-env/version.json","webpack:///./~/react-interpolate-component/~/fbjs/lib/invariant.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/_locale ^\\.\\/.*$","webpack:///./src/config-env/environment ^\\.\\/.*\\.js$","webpack:///external \"agenda\"","webpack:///external \"api/message/message.socket.js\"","webpack:///external \"api/user/user.socket.js\"","webpack:///external \"babel-core/polyfill\"","webpack:///external \"body-parser\"","webpack:///external \"child_process\"","webpack:///external \"cloudconvert\"","webpack:///external \"cloudconvert/lib/process\"","webpack:///external \"composable-middleware\"","webpack:///external \"compression\"","webpack:///external \"connect-mongo\"","webpack:///external \"connect-timeout\"","webpack:///external \"cookie-parser\"","webpack:///external \"counterpart\"","webpack:///external \"errorhandler\"","webpack:///external \"events\"","webpack:///external \"express-jwt\"","webpack:///external \"express-session\"","webpack:///external \"front-matter\"","webpack:///external \"gcloud\"","webpack:///external \"googleapis\"","webpack:///external \"html-to-json\"","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///external \"jade\"","webpack:///external \"jquery\"","webpack:///external \"lru-cache\"","webpack:///external \"method-override\"","webpack:///external \"mongoose-integer\"","webpack:///external \"newrelic\"","webpack:///external \"passport-local\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-translate-component\"","webpack:///external \"sendgrid\"","webpack:///external \"socket.io\"","webpack:///external \"socket.io-redis\"","webpack:///external \"trycatch\"","webpack:///external \"url\"","webpack:///external \"winston\"","webpack:///external \"winston-loggly\"","webpack:///external \"xtend\""],"names":[],"mappings":"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CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uDAAqD;AACrD,OAAK;AACL;AACA;AACA;AACA;AACA,SAAO;AACP;AACA;;AAEA,4BAA0B;AAC1B;AACA;AACA;;AAEA,6B;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAiC,uDAAuD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAiC,uDAAuD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpBA,qC;;;;;;ACAA,4D;;;;;;ACAA,sD;;;;;;ACAA,kD;;;;;;ACAA,0C;;;;;;ACAA,4C;;;;;;ACAA,2C;;;;;;ACAA,uD;;;;;;ACAA,oD;;;;;;ACAA,0C;;;;;;ACAA,4C;;;;;;ACAA,8C;;;;;;ACAA,4C;;;;;;ACAA,0C;;;;;;ACAA,2C;;;;;;ACAA,qC;;;;;;ACAA,0C;;;;;;ACAA,8C;;;;;;ACAA,2C;;;;;;ACAA,qC;;;;;;ACAA,yC;;;;;;ACAA,2C;;;;;;ACAA,mC;;;;;;ACAA,oC;;;;;;ACAA,mC;;;;;;ACAA,qC;;;;;;ACAA,wC;;;;;;ACAA,8C;;;;;;ACAA,+C;;;;;;ACAA,uC;;;;;;ACAA,6C;;;;;;ACAA,+C;;;;;;ACAA,wD;;;;;;ACAA,uC;;;;;;ACAA,wC;;;;;;ACAA,8C;;;;;;ACAA,uC;;;;;;ACAA,kC;;;;;;ACAA,sC;;;;;;ACAA,6C;;;;;;ACAA,oC","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6c48f15ac1167e498fc6\n **/","import newrelic from 'newrelic';\nimport 'babel-core/polyfill';\nimport path from 'path';\nimport express from 'express';\nimport React from 'react';\nimport ReactDOM from 'react-dom/server';\nimport Router from './routes';\nimport config from './config';\nimport mongoose from 'mongoose';\nimport morgan from 'morgan';\nimport logger from './modules/logger';\nimport fs from 'fs';\nimport connect_timeout from 'connect-timeout';\nimport cst from './utils/serverConstants';\nimport process from 'process';\nimport ga from './modules/analytics/google';\nimport pmx from 'pmx';\n// require(\"http\").globalAgent.maxSockets = Infinity;\n\nconst app = global.server = express();\n\nif (config.env === 'logan-testing' || config.env === 'logan-staging' || config.env === 'logan-production') {\n  pmx.init({\n    http: true, // HTTP routes logging (default: true)\n    errors: true, // Exceptions loggin (default: true)\n    custom_probes: true, // Auto expose JS Loop Latency and HTTP req/s as custom metrics\n    network: true, // Network monitoring at the application level\n    ports: true\n  });\n}\n//function esReqTimeout(req, res, next){\n//  if (req.path.indexOf('/taskqueue') == -1){\n//    console.log(\"=============================>>> esReqTimeout 180000\")\n//    let req_timeout_obj = req_timeout(180000);\n//    req_timeout_obj(req, res, next)\n//  }\n//  else{\n//    console.log(\"=============================>>> esReqTimeout 240000\")\n//    let req_timeout_obj = req_timeout(240000);\n//    req_timeout_obj(req, res, next)\n//  }\n//};\napp.use(connect_timeout(cst.defaultTimeoutSeconds * 1000));\napp.set('port', (config.port || 5000));\n// express configuration\n// -----------------------------------------------------------------------------\nrequire('./config-env/express')(app);\nrequire('./config-env/customizedMiddlewares')(app);\n//\n\n//https server setup for front end\nvar server;\n\nif (config.sslServer && config.env === 'development') {\n  var options = {\n    key: fs.readFileSync(require('path').normalize(__dirname + '/..') + '/private/key.pem', 'utf8'),\n    cert: fs.readFileSync(require('path').normalize(__dirname + '/..') + '/private/key-cert.pem', 'utf8')\n  };\n  server = require('https').createServer(options, app);\n} else {\n  server = require('http').createServer(app);\n}\n\nif (!process.env[\"backserver\"]) {\n  var socketio = require('./socketio');\n  socketio.initialize(server);\n }\n\n//var socketio = require('./socketio');\n//socketio.initialize(server);\nmongoose.connect(config.mongo.uri, config.mongo.options);\n\nmongoose.connection.on('connected', function() {\n  logger.info('MongoDB connected');\n  process.env['mongoUA'] = 'connected';\n  }\n);\nmongoose.connection.on('error', function(err) {\n    logger.error('MongoDB connection error: ' + err);\n    mongoose.disconnect();\n});\nmongoose.connection.on('disconnected', function() {\n    logger.warn('MongoDB disconnected! Reconnecting in 3 seconds');\n    process.env['mongoUA'] = 'disconnected';\n    setTimeout(function () {\n        mongoose.connect(config.mongo.uri, config.mongo.options);\n    },3000);\n});\n\nrequire('./routes')(app);\n// require('./seed').generateAdminList();\n//\n\n\n//\n//\n// Start server\n// -----------------------------------------------------------------------------\n// Not expire connection by http.server way\nserver.timeout = 0;\nvar listenIP = config.ip || '0.0.0.0';\nserver.listen(app.get('port'), listenIP, () => {\n  /* eslint-disable no-console */\n  if (config.env === 'development') {\n    logger.info('The server is running at http://localhost:' + app.get('port') + ' under ' + app.get('env'));\n    logger.info('Version is ' + config.version);\n  } else {\n    logger.info('server start listening!  Environment: ' + app.get('env') + '  on Port: ' + config.port);\n    logger.info('Version is ' + config.version);\n    if (config.mongoLog) {\n      logger.info('Saving Logs');\n    }\n  }\n\n  if (process.send) {\n    process.send('online');\n  }\n});\n\n// Expose app\nexports = module.exports = app;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/server.js\n **/","'use strict';\n\nimport config from '../../config';\n\nvar pmx = require('pmx'),\n    winston = require('winston');\n    //winstonMongoDB = require('winston-mongodb').MongoDB,\n\n//var helpers = require('./helper');\n\nvar logger = new winston.Logger({\n        levels: { error: 0, warn: 1, sync: 2, info: 3, verbose: 4, debug: 5, silly: 6},\n        level: config.logLevel,\n        colors: { sync: 'cyan'},\n        exitOnError: false,\n        transports: [\n            new winston.transports.Console({\n                timestamp: true,\n                colorize: true,\n                prettyPrint: true\n            })\n        ]\n\n    });\n\nvar os = require('os');\n\n[\n    'info',\n    'debug',\n    'warn',\n    'error',\n    'sync',\n    'verbose',\n    'silly'\n].forEach(function (method) {\n    exports[method] = function () {\n        var args = Array.prototype.slice.call(arguments, 0);\n        args.unshift(method);\n//        var msg = args[0];\n//        args = Array.prototype.slice.call(args, 1);\n        var newArgs = [];\n        args.forEach(function (arg) {\n            if (typeof arg === 'undefined') {\n                return;\n            } else if (typeof arg === 'string') {\n                newArgs.push(arg);\n            } else if (!!arg && !!arg.toJSON) {\n                newArgs.push(arg.toJSON());\n            } else if (!!arg && !!arg.toString && arg.toString() !== '[object Object]') {\n                newArgs.push(arg);\n            } else {\n                newArgs.push(arg);\n            }\n        });\n        if (method === 'error' && !!config.traceOnError) {\n            var err = new Error();\n            newArgs.push(err.stack);\n            pmx.notify(newArgs);\n        }\n\n        logger.log.apply(logger, newArgs);\n    };\n});\n\nvar getLogglyCredential = function(){\n  return {\n    'token': config.logglyToken,\n    'subdomain': config.logglySubdomain\n  };\n};\n\nif (config.env != 'development' && !!config.mongoLog)\n{\n  var hostname = os.hostname();\n  console.log(\"Start writting logs to loggly now!\");\n  require('winston-loggly');\n  var tags = [os.hostname()];\n  \n  var addedtag = config.env;\n  \n  if (hostname.indexOf('socket') > 0){\n    addedtag = addedtag + '-socket';\n  }\n  if (hostname.indexOf('task') > 0){\n    addedtag = addedtag + '-task';\n  }\n  \n  if (hostname.indexOf('candidate') > 0){\n    addedtag = addedtag + '-candidate';\n  }\n  tags.push(addedtag);\n  let cred = getLogglyCredential();\n  /*  \n  logger.add(winston.transports.Loggly, {\n    token: cred.token,\n    subdomain: cred.subdomain,\n    tags: tags,\n    json:true\n  });*/\n}\n\n//if (!!config.mongoLog) {\n//    logger.add(winstonMongoDB, {\n//        db: config.logDB.uri,\n//        collection: 'logs',\n//        capped: true,\n//        storeHost: true,\n//        levels: { error: 0, warn: 1, sync: 2, info: 3, verbose: 4, debug: 5, silly: 6},\n//        level: config.logLevel,\n//        cappedSize: config.logDB.logSize         //1G for prod, 300M for rest\n//    });\n//}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/logger/index.js\n **/","/**\n * http://usejsdoc.org/\n */\n\nexports.HttpErrorStatus = 400;\nexports.HttpUnauthorizedAnonymousStatus = 4001;\nexports.HttpUnauthorizedStatus = 401;\nexports.HttpNotFoundStatus = 404;\nexports.HttpForbiddenStatus = 403;\nexports.HttpSuccessStatus = 200;\nexports.HttpCriticalErrorStatus = 500;\nexports.HttpRedirectStatus = 301;\nexports.HttpErrorTaskQueueNeverTry = 461;\nexports.HTTPSchema = 'http://';\nexports.HTTPSSchema = 'https://';\n\nexports.ES_PRODUCT_ONESNA = 'onesna';\nexports.OAuth2ScopeLogan = 'https://www.onesna.com/auth/logan';\nexports.OAuth2ScopeUserInfoEmail = 'https://www.onesna.com/auth/userinfo.email';\nexports.OAuth2ScopeUserInfoProfile = 'https://www.onesna.com/auth/userinfo.profile';\nexports.IncludeScope = 1;\nexports.NotIncludeScope = 0;\nexports.SyncOperateDelete = 2;\n\nexports.UrlApi = '/api';\nexports.UrlMessages = '/messages';\nexports.UrlMessagesFileRedirect = '/:id/files/:fileKey';\nexports.UrlMessagesFileRedirectFull = exports.UrlApi + exports.UrlMessages + exports.UrlMessagesFileRedirect;\n\nexports.StopFlag = 'Stop';\nexports.AuthenticateTypeJWT = 'jwt';\nexports.AuthenticateTypeOAuth2 = 'oauth2';\nexports.AuthenticateTypeAnonymous = 'anony';\nexports.AuthenticateTypeEsnaServer = 'esna_server';\n\nexports.MessageImageNativeLinkMimeHeader = 'image';\nexports.MessageProviderUrlLink = 'urllink';\nexports.MessageProviderNative = 'native';\nexports.TaskStatusDefault = 'pending';\n\nexports.DirectionAfter = 'after';\nexports.DirectionBefore = 'before';\n\nexports.TypeUser = 'user';\nexports.TypeAnonymous = 'anonymous';\nexports.TypeCompany = 'company';\nexports.TypeTopic = 'topic';\nexports.TypeMessage = 'message';\nexports.domainTagPrefix = String.fromCharCode(0xFE, 0xFF) + '@';\nexports.deferOutTimeout = 'timeout';\nexports.deferOutAgendaJob = 'agendaJob';\n\nexports.relationEmployee = 'employee';\nexports.relationAdmin = 'admin';\nexports.relationMember = 'member';\nexports.relationAny = 'any';\nexports.relationCreator = 'creator';\nexports.relationGuest = 'guest';\nexports.defaultTimeoutSeconds = 120;\nexports.taskRequestTimeoutSeconds = 600;\n\n\nexports.roleSiteAdmin = 'site_admin';\nexports.roleCustomerAdmin = 'customer_admin';\nexports.MigrateFailedStatus = 'failed';\n\nexports.JoinTopicOnlyMember = 1;\nexports.JoinTopicNoLimit = 0;\nexports.defaultRestrictValue = [];\n\nexports.ConvertStatusNotStart = 0;\nexports.ConvertStatusProgressing = 1;\nexports.ConvertStatusSuccess = 2;\nexports.ConvertStatusFailed = 3;\nexports.ConvertMemcacheKeyPrefix = 'fileViewConvrt_';\nexports.defaultMaxlistSize = 50;\nexports.userTagPrefix = 'u' + String.fromCharCode(0xFF, 0xFE)+' ';\nexports.topicTagPrefix = 't' + String.fromCharCode(0xFF, 0xFE)+' ';\n\nexports.previewProviderGCS='gcs';\nexports.storageProviderGCS='gcs';\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/serverConstants.js\n **/","/**\n * Created by ericd on 26/11/2015.\n */\nclass ESErrors{\n  constructor(code, message){\n    this.code = code || exports.SysUnkownError;\n    this.message = message || getMessageByCode(this.code);\n  }\n  toString(){\n    return this.message;\n  }\n}\n\nexports.SysUnkownError = 'sys_unkown_error';\nexports.SysAlreadyRegisterDeferError = 'sys_dup_register_deffer';\nexports.SysNotExistedDeferError = 'sys_not_existed_deffer';\nexports.BadRequestError = 'api_bad_request_input';\nexports.ServerInternalError = 'sys_internal_error';\nexports.AuthenticateErrorJWT = 'authen_error.jwt_auth_failed';\nexports.AuthenticateErrorOauth2 = 'authen_error.oauth2_auth_failed';\nexports.AuthenticateErrorOauth = 'authen_error.oauth_auth_failed';\nexports.AuthenticateErrorEsnaServer = 'authen_error.esnaserver_auth_failed';\nexports.AuthenticateFailed = 'authen_error';\nexports.AuthenticateErrorAnonyJWT = 'authen_error.anonymouse_jwt_auth_failed';\nexports.AuthenticateErrorAnony4001JWT = 'authen_error.anonymouse_jwt_auth_4001_failed';\nexports.AuthenticateFailedOnesnaServer = 'authen_error.onesna_servercall_authentication_failed';\nexports.AuthorizeErrorOauth2 = 'authorize_error.oauth2';\nexports.AuthorizeErrorPermission= 'authorize_error.permission';\nexports.AuthorizeErrorDeveloperAdmin = 'authorize_error.developer_admin';\n// for pre-alpha-release\nexports.AuthorizeErrorNotOnApprovedList = 'authorize_error.not_on_approved_list';\n//\nexports.AuthorizeFailed = 'authorize_error';\nexports.SyncAddAccessTokenInvalidData = 'sync_add_accesstoekn_invalid_data';\nexports.SyncAddAccessTokenFailed = 'sync_add_accesstoekn_failed';\nexports.SyncDeleteAccessTokenInvalidData = 'sync_delete_accesstoekn_invalid_data';\nexports.SyncDeleteAccessTokenFailed = 'sync_delete_accesstoekn_failed';\nexports.SignJWTFailed = 'sign_jwt_failed';\nexports.VerifyJWTFailed = 'verify_jwt_failed'\n\nexports.UploadUrlCreateFailed = 'upload_url_create_failed';\nexports.DownloadUrlCreateFailed = 'download_url_create_failed';\n\nexports.DBError = 'db_error';\nexports.DBErrorDuplicateKey = 'db_error.duplicateKey';\nexports.NotExsistedError = 'not_existed_error';\nexports.NotCreatorError = 'not_exist_creator_error';\nexports.NotParentError = 'not_exist_parent_error';\nexports.UpdateRecordWithModifiedOutdate = 'update_outdated_record';\n\nexports.OAuth2AccessTokenNotExisted = 'access_token_not_existed_error';\nexports.AccessOnesnaHappenError = 'access_onesna_happen_error';\nexports.ViewNotImplement = 'view_not_implement';\n\nexports.SchemaInvalidHeader = 'schema_invalid.';\nexports.MessageInvalidProvider = 'message_invalid.content_data_provider';\nexports.MessageInvalidPath = 'message_invalid.content_data_path';\nexports.MessageInvalidPreviewFile = 'message_invalid.content_data_previewfile';\nexports.MessageInvalidFileId = 'message_invalid.content_data_fileid';\nexports.MessageInvalidFileSize = 'message_invalid.content_data_filesize';\nexports.MessageInvalidCategory = 'message_invalid.category';\nexports.MessageNotSupportSenderType = 'message_invalid.sender.type';\nexports.MessageUnexpectedCategory = 'message_unexpected.category';\nexports.ParentMessageNotExsistedError = 'parent_message_not_existed_error';\nexports.MessageInvalidDupLike = 'message_invalid.duplicate_like_comment';\n\nexports.TaskqueueInvalidUrl = 'taskqueue_invalid.url';\nexports.TaskqueueRetry = 'taskqueue.retry';\nexports.TaskqueueEndBeforeTimout = 'taskqueue.end_before_timeout';\nexports.TaskNoRetryError = 'taskqueue.no_retry'; \nexports.RecordMigrageError = 'migrateAddRecord.failed';\n\nexports.MemcacheNotReady = 'memcache.not_ready';\nexports.NoValidateObjectType = 'relationPermission.objecttype_invalid';\n\nexports.FileCopyFailed = 'file.copy_failed';\nexports.FileCreateObjectFailed = 'file.create_fileobject_failed';\nexports.FileDeleteFailed = 'file.delete_files_failed';\nexports.NoSuchConverter = 'fileView.convert_not_implement';\nexports.AlreadyStartConvert = 'fileView.convert_already_start_convert';\nexports.SetConvertStatusFailed = 'fileView.set_convertstatus_failed';\nexports.SetPagesFailed = 'fileView.set_pages_failed';\nexports.SetPagingFailed = 'fileView.set_paging_failed';\nexports.SetProcessurlFailed = 'fileView.set_processurl_failed';\nexports.AsposeNoSIDOrKey = 'fileView.aspose_nosidorkey';\nexports.FileConvertFailed = 'fileView.convert_failed';\nexports.GetPreviewUrlFailed = 'fileView.get_previewurl_failed';\nexports.GetviewUrlsFailed = 'fileView.get_viewurls_failed';\nexports.ConvertFileCleanWorkFailed = 'fileView.convert_file_cleanwork_failed';\nexports.SyncMessageSenderFailed = 'sync_sender_msg.failed';\nexports.SyncParentMessageTitleFailed = 'sync_prt_msg_title.failed';\n\nvar ErrorDescription = {};\nErrorDescription[exports.SysUnkownError] = 'System Unkown Error';\nErrorDescription[exports.SysAlreadyRegisterDeferError] = 'The deffer already registered';\nErrorDescription[exports.SysNotExistedDeferError] = 'The deffer not existed';\n\nErrorDescription[exports.ServerInternalError] = 'Server Internal Error';\nErrorDescription[exports.DBError] = 'Database operation error';\nErrorDescription[exports.DBErrorDuplicateKey] = 'Database operation duplicate key error:';\nErrorDescription[exports.NotExsistedError] = 'Not exsist';\nErrorDescription[exports.NotCreatorError] = 'Not exsist creator';\nErrorDescription[exports.NotParentError] = 'Not exsist parent';\nErrorDescription[exports.UpdateRecordWithModifiedOutdate] = 'Update outdated record';\n\nErrorDescription[exports.OAuth2AccessTokenNotExisted] = 'Access_token not existed';\nErrorDescription[exports.AccessOnesnaHappenError] = 'Access onesna happen error';\nErrorDescription[exports.BadRequestError] = 'Api Bad Request Check Input';\nErrorDescription[exports.AuthenticateErrorJWT] = 'Authenticate Jwt token failed';\nErrorDescription[exports.AuthenticateErrorOauth2] = 'Authenticate oauth2 failed';\nErrorDescription[exports.AuthenticateErrorAnonyJWT] = 'Authenticate anonymouse jwt failed';\nErrorDescription[exports.AuthenticateErrorAnonyJWT] = 'Authenticate anonymouse jwt failed';\nErrorDescription[exports.AuthenticateErrorEsnaServer] = 'Authenticate for esan server call failed';\n\nErrorDescription[exports.AuthorizeErrorNotOnApprovedList] = 'Not on the approved list';\nErrorDescription[exports.AuthorizeErrorOauth2] = 'Authorise oauth2 failed';\nErrorDescription[exports.AuthorizeErrorPermission] = 'Authorise permission failed';\n\nErrorDescription[exports.SyncAddAccessTokenInvalidData] = 'Invalid data for adding accesstoken by synchronizing way';\nErrorDescription[exports.SyncAddAccessTokenFailed] = 'When adding access token by synchronizing way failed';\nErrorDescription[exports.SyncDeleteAccessTokenInvalidData] = 'Invalid data for deleting accesstoken by synchronizing way';\nErrorDescription[exports.SyncDeleteAccessTokenFailed] = 'When deleteing access token by synchronizing way failed';\nErrorDescription[exports.SignJWTFailed] = 'Sign a jwt token failed';\nErrorDescription[exports.VerifyJWTFailed] = 'Verify a jwt token failed';\n\nErrorDescription[exports.UploadUrlCreateFailed] = 'Create upload url failed!';\nErrorDescription[exports.DownloadUrlCreateFailed] = 'Create download url failed!';\n\nErrorDescription[exports.ViewNotImplement] = 'View not implement';\n\nErrorDescription[exports.MessageInvalidProvider] = 'Message object has invalid Provider in content.data';\nErrorDescription[exports.MessageInvalidPath] = 'Message object has invalid path in content.data';\nErrorDescription[exports.MessageInvalidPreviewFile] = 'Message object has invalid previewFile in content.data';\nErrorDescription[exports.MessageInvalidFileId] = 'Message object has invalid FileId in content.data';\nErrorDescription[exports.MessageInvalidFileSize] = 'Message object has invalid fileSize in content.data';\nErrorDescription[exports.MessageInvalidCategory] = 'Message object has invalid category';\nErrorDescription[exports.MessageNotSupportSenderType] = 'Message object has invalid sender type';\nErrorDescription[exports.MessageUnexpectedCategory] = 'The category is not as expected';\nErrorDescription[exports.ParentMessageNotExsistedError] = 'Parent message not existed';\nErrorDescription[exports.MessageInvalidDupLike] = 'Duplicate like message from same user to same category';\nErrorDescription[exports.TaskqueueInvalidUrl] = 'Taskqueue got a invalid url';\nErrorDescription[exports.TaskqueueRetry] = 'Taskqueue need retry again';\nErrorDescription[exports.TaskqueueEndBeforeTimout] = 'Taskqueue end before timeout';\nErrorDescription[exports.TaskNoRetryError] = 'Taskqueue no retry although happen error';\nErrorDescription[exports.RecordMigrageError] = 'Add record for migrate happen error';\n\nErrorDescription[exports.MemcacheNotReady] = 'Memcahe not ready';\nErrorDescription[exports.NoValidateObjectType] = 'Relation Permission must give valid object type';\nErrorDescription[exports.NoSuchConverter] = 'There is no such converter';\nErrorDescription[exports.AlreadyStartConvert] = 'The file already start convert';\nErrorDescription[exports.FileCopyFailed] = 'Copy file failed';\nErrorDescription[exports.FileCreateObjectFailed] = 'Create file object failed';\nErrorDescription[exports.AsposeNoSIDOrKey] = 'There is no App SID or App Key of Aspose';\nErrorDescription[exports.SetConvertStatusFailed] = 'Failed to set convert status of a file';\nErrorDescription[exports.SetPagesFailed] = 'Failed to set pages of a file';\nErrorDescription[exports.SetPagingFailed] = 'Failed to set paging number of a file';\nErrorDescription[exports.SetProcessurlFailed] = 'Failed to set process url of a file';\n\nErrorDescription[exports.FileConvertFailed] = 'Convert file failed';\nErrorDescription[exports.FileDeleteFailed] = 'Delete files failed';\nErrorDescription[exports.GetPreviewUrlFailed] = 'Get preview url failed';\nErrorDescription[exports.GetviewUrlsFailed] = 'Get view urls failed';\nErrorDescription[exports.ConvertFileCleanWorkFailed] = 'Convert file clean work failed';\nErrorDescription[exports.SyncMessageSenderFailed] = 'Synchronize sender information failed';\nErrorDescription[exports.SyncParentMessageTitleFailed] = 'Synchronize parent message title failed';\n\nconst NoErrorMessage = 'No Error Message';\n\nfunction getMessageByCode(code){\n  return ErrorDescription[code] || NoErrorMessage;\n}\n\nexports.ESErrors = ESErrors;\nexports.getMessageByCode = getMessageByCode;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/errors/errors.js\n **/","module.exports = require('./config-env/environment/index');\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config.js\n **/","module.exports = require(\"mongoose\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongoose\"\n ** module id = 5\n ** module chunks = 0\n **/","/**\n * Created by ericd on 02/12/2015.\n */\n 'use strict';\nimport querystring from 'querystring';\nimport _ from 'lodash';\nimport meetingConstants from '../flux/constants/MeetingConstants';\nimport cst from './serverConstants';\nimport config from '../config';\nimport os from 'os';\nimport url from 'url';\nimport Admin from '../enrollAdmin.model.js';\n\nexports.getIssFromHostname = function(hostname){\n  let parts = hostname.split('.');\n  if (parts.length >= 3){\n    return parts.slice(parts.length-2).join('.');\n  }\n  else{\n     return hostname;\n  }\n};\n\nexports.paginationHelper = function (src, pagination, data, queryFunction, cb) {\n  var search = data.search;\n  var page = pagination.page;\n  var size = pagination.size;\n  var limit = pagination.size + 1;\n  var apiRoute = pagination.apiRoute;\n\n  queryFunction(pagination, data, function (err, result) {\n    if (err) {\n      return cb(err);\n    }\n\n    var returnData = {\n      from: (page - 1) * size + 1,\n      to: (page - 1) * size + result.data.length\n    };\n\n\n\n    if (result.length === limit) {\n      returnData.data = result.slice(0,-1);\n      returnData.nextPageUrl = apiRoute + '?page=' + (page + 1) + '&size=' + size;\n    } else {\n      returnData.data = result;\n    }\n\n    if (page > 1) {\n        returnData.previousPageUrl = apiRoute + '?page=' + (page - 1) + '&size=' + size;\n    }\n    return cb(null, returnData);\n  });\n};\n\nexports.checkZangUser = function (email) {\n  return /@esna.com\\s*$/.test(email) || /@zang.io\\s*$/.test(email);\n};\n\nexports.checkItemInList = function (item, list) {\n  return list.indexOf(item) > -1;\n}\n\nexports.getDeveloperAdmins = function (callback) {\n  var logger = require('../modules/logger');\n  Admin.findOne({group: \"developers\"},function(err, admins) {\n    if (err) {\n      logger.error(\"failed to get developer admin list\");\n      return callback([]);\n    }\n    if (!admins) {\n      return callback([]);\n    }\n    return callback(admins.emails);\n  });\n};\n\nexports.getEnrollAdminEmails = function (callback) {\n  var logger = require('../modules/logger');\n  Admin.findOne({group: \"enrollAdmins\"},function(err, admins) {\n    if (err) {\n      logger.error(\"failed to get enrollAdmins admin list\");\n      return callback([]);\n    }\n    if (!admins) {\n      return callback([]);\n    }\n    return callback(admins.emails);\n  });\n};\n\nexports.getFullUrlByType = function(src, inTypeVal){\n  let subdomaincfg = config.SubDomains || {'socket': '','task': ''};\n  let candidateDomainCfg = subdomaincfg.candidate || {'socket': '','task': ''};\n  let hostname  = src.hostname;\n  let typeVal = subdomaincfg[inTypeVal] ||  '';\n  let isCandidate = false;\n  if (src.hostname.indexOf('candidate') > 0){\n    isCandidate = true;\n    typeVal = candidateDomainCfg[inTypeVal] ||  '';\n  }\n  \n  if (typeVal){\n    typeVal = '-' + typeVal;\n  }\n  \n  if(typeVal){\n    if (hostname.indexOf(typeVal) == -1){\n       let hostnameparts = hostname.split('.');\n       let cutpos = hostnameparts[0].indexOf('-');\n       if (cutpos == -1){\n         hostnameparts[0] = hostnameparts[0] + typeVal;\n       }\n       else{\n         hostnameparts[0] = hostnameparts[0].substring(0, cutpos) + typeVal;\n       }\n       if (isCandidate){\n         hostnameparts[0] = hostnameparts[0] + '-candidate';\n       }\n       hostname = hostnameparts.join('.');\n    }\n  }\n  else{\n    if (hostname.indexOf('-') > 0){\n      let hostnameparts = hostname.split('.');\n      let cutpos = hostnameparts[0].indexOf('-');\n      if (cutpos > 0){\n        hostnameparts[0] = hostnameparts[0].substring(0, cutpos);\n      }\n      if (isCandidate){\n        hostnameparts[0] = hostnameparts[0] + '-candidate';\n      }\n      hostname = hostnameparts.join('.');\n    }\n  }\n  var port = src.port;\n  var protocol = src.protocol;\n  if (src.esDomain && src.esDomain.indexOf('local') == -1){\n    protocol = 'https';\n  }\n  if (port){\n    return protocol + '://' + hostname + ':' + port;\n  }\n  else{\n    return protocol + '://' + hostname;\n  }\n}\n\nexports.getSrcFromRequest = function(req){\n  function getPort(){\n    if (req.port){\n      return req.port;\n    }\n    if (req.esDomain && req.esDomain.indexOf('local') >= 0){\n      return req.app.get('port');\n    }\n    return '';\n  }\n  \n  function getFullUrl(){\n    if (req.fullurl){\n      return req.fullurl;\n    }\n    var port = getPort();\n    var protocol = req.protocol;\n    if (req.esDomain && req.esDomain.indexOf('local') == -1){\n      protocol = 'https';\n    }\n    if (port){\n      return protocol + '://' + req.hostname + ':' + port;\n    }\n    else{\n      return protocol + '://' + req.hostname;\n    }\n  }\n  return {\n    id: req.id,\n    type: 'req',\n    esDomain: req.esDomain,\n    domain: req.esDomain,\n    hostname: req.hostname,\n    protocol: req.protocol,\n    host: req.headers.host,\n    fullurl: getFullUrl(),\n    relPermChecker: req.relPermChecker,\n    user: req.user,\n    anonymousUser: req.anonymousUser,\n    port:getPort()\n  };\n};\n\nexports.getUserRole = function (user, topic, callback) {\n  if (user.aType === '')\n    var isMember = _.find(topic.members, {member: user._id.toString()});\n    if (isMember) {\n      return callback(isMember.role);\n    } else {\n      return callback(meetingConstants.ATTENDEE_TYPES.GUEST.type);\n    }\n  }\n\nexports.getIssFromHostnameOld = function(hostname){\n  let parts = hostname.split('.');\n  if (parts.length >= 1){\n    return parts.slice(1).join('.');\n  }\n  else{\n    return hostname;\n  }\n};\n\nexports.createPagination = function(req, data){\n  let queryData = data.queryData;\n  let results = data.results;\n  var nextPageUrl = '';\n  var previousPageUrl = '';\n  var oriurl = req.originalUrl;\n  if (results.havingNextPage){\n    nextPageUrl = oriurl.replace(/\\?.*/, '');\n    let nextPageUrlQueryStringObj = _.extend({}, queryData);\n    nextPageUrlQueryStringObj.page = nextPageUrlQueryStringObj.page + 1;\n    delete nextPageUrlQueryStringObj.prevRefObjId;\n    nextPageUrlQueryStringObj.nextRefObjId = results.results[results.results.length - 1]._id.toString();\n    nextPageUrl += '?' + querystring.stringify(nextPageUrlQueryStringObj);\n  }\n  if (queryData.page > 1 && results.results.length > 0){\n    previousPageUrl = oriurl.replace(/\\?.*/, '');\n    let prevPageUrlQueryStringObj = _.extend({}, queryData);\n    prevPageUrlQueryStringObj.page = prevPageUrlQueryStringObj.page - 1;\n    delete prevPageUrlQueryStringObj.nextRefObjId;\n    prevPageUrlQueryStringObj.prevRefObjId = results.results[0]._id.toString();\n    previousPageUrl += '?' + querystring.stringify(prevPageUrlQueryStringObj);\n  }\n  return {data: results.results, nextPageUrl:nextPageUrl, previousPageUrl:previousPageUrl, total:results.results.length};\n};\n\nexports.createPaginationByPage = function(req, data){\n  let queryData = data.queryData;\n  let results = data.results;\n  var nextPageUrl = '';\n  var previousPageUrl = '';\n  var oriurl = req.originalUrl;\n  if (results.havingNextPage){\n    nextPageUrl = oriurl.replace(/\\?.*/, '');\n    let nextPageUrlQueryStringObj = _.extend({}, queryData);\n    nextPageUrlQueryStringObj.page = nextPageUrlQueryStringObj.page + 1;\n    nextPageUrlQueryStringObj.prev = false;\n    nextPageUrl += '?' + querystring.stringify(nextPageUrlQueryStringObj);\n  }\n  if (queryData.page > 1 && results.results.length > 0){\n    previousPageUrl = oriurl.replace(/\\?.*/, '');\n    let prevPageUrlQueryStringObj = _.extend({}, queryData);\n    prevPageUrlQueryStringObj.page = prevPageUrlQueryStringObj.page - 1;\n    prevPageUrlQueryStringObj.prev = true;\n    previousPageUrl += '?' + querystring.stringify(prevPageUrlQueryStringObj);\n  }\n  return {data: results.results, nextPageUrl:nextPageUrl, previousPageUrl:previousPageUrl, total:results.results.length};\n}\n\nfunction getReqLogProperty(obj, outObj, stackdeep){\n  _.forIn(obj, function(value, key){\n    if (key.startsWith('_') || key=='domain' || key=='socket' || key=='connection'){\n      null;\n    }\n    else if (typeof value == 'function'){\n      null;\n    }\n    else if (typeof value == 'object'){\n      var tempoutObj = {};\n      var tempstackdeep = stackdeep;\n      if (key == 'res'){\n          null;\n      }\n      else if (++tempstackdeep < 3){\n          getReqLogProperty(value, tempoutObj, tempstackdeep);\n          outObj[key] = tempoutObj;\n      }\n\n    }\n    else{\n      if (typeof value == 'string' && value.length > 100){\n          value = value.substring(0, 100) + '... length[' + value.length.toString() + ']'\n      }\n      outObj[key] = value;\n    }\n });\n}\nexports.getReqLogProperty = getReqLogProperty;\n\nexports.requestWillEndSoon = function(req){\n  if (req.taskRequestTimeout){\n    let diffsecds = (req.taskRequestTimeout - Date.now()) / 1000;\n    if (diffsecds < 30){\n      return true;\n    }\n  }\n  return false;\n};\n\nexports.getListOfItemCaps = function(inSize, maxSize){\n  let maxsize = maxSize || cst.defaultMaxlistSize;\n  inSize = parseInt(inSize);  \n  if(!inSize){\n    return maxsize;\n  }\n  return Math.min(inSize, maxsize);\n};\n\nexports.getSrcFromSocket = function(socket){\n  let functionName = '[getSrcFromSocket] ';\n  let retData = {\n      hostname: socket.request.headers.host,\n      protocol: 'https'\n  }\n  if (socket.request.headers.referer){\n    var urlObj = url.parse(socket.request.headers.referer);\n    retData.hostname = urlObj.hostname;  \n    retData.protocol = urlObj.protocol.substring(0, urlObj.protocol.length-1);\n    retData.port = urlObj.port;\n    return retData;\n  }\n  else{\n    console.warn(functionName + \"There is no referer in socket.request.headers\");\n    return retData;\n  }\n};\n\nexports.getPicture_url = function(picturefile){\n  if (!picturefile) {\n    return 'https://www.onesna.com/norevimages/noimage.jpg';\n  }\n  if (picturefile.indexOf('http://') > -1 || picturefile.indexOf('https://') > -1) {\n    return picturefile;\n  }\n  \n  return 'https://storage.googleapis.com/' + config.bucket + '/' + picturefile;\n}\n\nexports.getTagsByType = function(obj, objType){\n  return [];\n  function userTagGetter(){\n    return [for (i of [obj.username, obj.displayname]) if (i.length > 0) cst.userTagPrefix + i];\n  }\n  function topicTagGetter(){\n    return [for (i of [obj.title, obj.description]) if (i.length > 0) cst.topicTagPrefix + i];\n  }\n  var handles = {};\n  handles[cst.TypeUser] = userTagGetter;\n  handles[cst.TypeAnonymous] = userTagGetter;\n  handles[cst.TypeTopic] = topicTagGetter;\n  if (objType in handles){\n    return handles[objType]();\n  }\n  else{\n    return [];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/serverHelper.js\n **/","/**\n * Created by ericd on 27/11/2015.\n */\nimport logger from '../../modules/logger/index';\nimport async from 'async';\nimport auth from '../../auth/auth.service';\nimport authorize from '../../auth/authorizers';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport util from '../../utils/serverHelper';\nimport {apiCache, userCache} from '../../auth/lru';\nimport _ from 'lodash';\n\nvar trycatch = null;\n/** The trycatch module will cause stack ouput from build folder.\n *  Only product enviroment will apply this module.\n */\nif (process.env.NODE_ENV === 'logan-production'){\n    trycatch = require('trycatch');\n}\n\nvar getToken = function(req, cb) {\n    var header;\n    if (req.headers && req.headers.authorization) {\n      header = req.headers.authorization;\n    }\n    return header;\n  }\n\nclass ViewBase{\n    static AUTHENTICATORS = [auth.JwtAuthenticator, auth.Oauth2Authenticator, auth.AnonymousAuthenticator];\n    static AUTHORIZERS = [authorize.OAuthAuthorizer];\n    static OAUTHSCOPE = [cst.OAuth2ScopeLogan];\n    static USECACHE = true;\n  \n    constructor(ViewClass){\n        let authenticators = ViewClass.AUTHENTICATORS || [];\n        this.authenticators = [];\n        for (let authenticatorItem of authenticators){\n          this.authenticators.push(new authenticatorItem());\n        }\n        \n        this.oauthscope =  ViewClass.OAUTHSCOPE || [];\n        this.useCache = ViewClass.USECACHE;\n        let authorizers  = ViewClass.AUTHORIZERS || [];\n        this.authorizers = [];\n        if (authorizers.indexOf(authorize.OAuthAuthorizer) === -1){\n          this.authorizers.push(new authorize.OAuthAuthorizer());\n        }\n        for (let authorizerItem of authorizers){\n          if (authorizerItem instanceof authorize.PermissionAuthorizer){\n            this.authorizers.push(authorizerItem);\n          }\n          else{\n            this.authorizers.push(new authorizerItem());\n          }\n        }\n    }\n\n    handle(req, res, cb){\n        logger.error(req.id, esErr.getMessageByCode(esErr.ViewNotImplement));\n        return res.status(500).json(new esErr.ESErrors(esErr.SysUnkownError));\n    }\n\n    checkAuthentication(req, res, cb){\n        var token,\n            cachedApi,\n            cachedUser;\n        var self = this;\n        if (this.authenticators.length === 0){\n            return cb(null);\n        }\n\n        token = getToken(req);\n        cachedApi = apiCache.get(token);\n        if (cachedApi && cachedApi.cacheId) {\n          cachedUser = userCache.get(cachedApi.cacheId);\n        }\n        if (self.useCache && token && cachedApi && cachedUser ) {\n          _.assign(req, cachedApi, cachedUser);\n          logger.info(req.id, 'Got user/anonymous from cache ' + cachedApi.cacheId);\n          return cb(null);\n        } else {\n          async.eachSeries(\n            this.authenticators,\n            function(authObj, callback){\n                logger.info(req.id, 'Check authentication by ' + authObj.name);\n                authObj.auth(req, res, function(err){\n                    if (!err) {\n                        logger.info(req.id, 'Pass authenticator ' + authObj.name);\n                        var cacheId = req.user ? 'user-' + req.user._id : 'anonymous-' + req.anonymousUser._id;\n                        var cacheReq = {\n                          auth: req.auth,\n                          cacheId: cacheId\n                        };\n                        var cacheUser = {\n                          user: req.user,\n                          anonymousUser: req.anonymousUser\n                        };\n                        logger.info(req.id, 'Caching User with Id: ', cacheId);\n                          apiCache.set(token, cacheReq);\n                          userCache.set(cacheId, cacheUser);\n                        callback(cst.StopFlag);\n                    } else {\n                        logger.info(req.id, 'Failed pass authenticator ' + authObj.name + ' try next');\n                        self.es_error = err;\n                        callback(null);\n                    }\n                });\n            },\n            function(err) {         \n              if (err == cst.StopFlag){\n                  return cb(null);\n              } else {\n                  return cb(self.es_error);\n              }\n          });\n        }\n    }\n  \n    checkAuthorization(req, res, cb){\n      var self = this;\n      if (this.authorizers.length === 0){\n        return cb(null);\n      }\n      \n      async.eachSeries(\n          this.authorizers,\n          function(authObj, callback){\n              logger.info(req.id, 'Check authorization by ' + authObj.name);\n              authObj.check(req, res, self, function(err){\n              if (err){\n                  logger.info(req.id, 'Failed authorization ' + authObj.name);\n                  self.es_error = err;\n                  callback(cst.StopFlag);\n              }\n              else{\n                  logger.info(req.id, 'Pass authorization ' + authObj.name + ' check next');                \n                  callback(null);\n              }\n            });\n          },\n          function(err){\n              if (err == cst.StopFlag){\n                  return cb(self.es_error);\n              }\n              else{\n                  return cb(null);\n              }\n          }\n        );\n    }\n    \n    _view_no_error_catch(req, res, cb){\n        var self = this;\n        async.series([\n          function(callback){\n            self.checkAuthentication(req, res, callback);\n          },\n          function(callback){\n            self.checkAuthorization(req, res, callback);\n          },\n          function(callback){\n            self.handle(req, res, callback);\n          }],\n          function(err, results){\n            if (err.code.indexOf(esErr.AuthenticateFailed) === 0){\n              logger.info(req.id, 'Authenticate failed! with authorization ' + req.headers.authorization);\n              if (err.code == esErr.anonymouse_jwt_auth_4001_failed){\n                return res.status(cst.HttpUnauthorizedAnonymousStatus).json(err);\n              }\n              return res.status(cst.HttpUnauthorizedStatus).json(err);\n            }\n            else if (err.code.indexOf(esErr.AuthorizeFailed) === 0){\n              logger.info(req.id, 'Authorize failed! with authorization ' + req.headers.authorization);\n              return res.status(cst.HttpForbiddenStatus).json(err);\n            }\n            logger.info(req.id, 'Happen unkown err', err);\n            return res.status(cst.HttpCriticalErrorStatus).json(new esErr.ESErrors(esErr.SysUnkownError));\n         });\n    }\n    \n    view(req, res, cb){\n      var self = this;\n      if (trycatch){\n        trycatch(function(){          \n            self._view_no_error_catch(req, res, cb);\n        },function(err){\n          var reqVal = {};\n          util.getReqLogProperty(req, reqVal, 0)\n          logger.info(req.id, 'Production is brought down', reqVal);\n          logger.error(req.id, 'Production is brought down',err);          \n          return res.status(cst.HttpCriticalErrorStatus).json(new esErr.ESErrors(esErr.SysUnkownError));\n        });\n      }\n      else{          \n        this._view_no_error_catch(req, res, cb);\n      }\n    }    \n}\n\nfunction asView(ViewClass){\n  var viewObj = new ViewClass(ViewClass);\n    function wapper(req, res, cb){\n        viewObj.view(req, res, cb);\n    }\n    return wapper;\n}\n\nclass serverCallView extends ViewBase{\n  static AUTHENTICATORS = [auth.EsnaServerAuthenticator];\n}\n\nclass regUserCallView extends ViewBase{\n  static AUTHORISERS = [authorize.OAuthAuthorizer, authorize.regOnlyAuthorizer];\n}\n\nclass anyCallView extends ViewBase{\n  static AUTHENTICATORS = [auth.JwtAuthenticator, auth.Oauth2Authenticator, auth.AnonymousAuthenticator];\n}\n\nclass anyCall4001View extends ViewBase{\n  static AUTHENTICATORS = [auth.JwtAuthenticator, auth.Oauth2Authenticator, auth.AnonymousAuthenticator4001];\n}\n\nclass DeveloperAdminView extends ViewBase{\n  static AUTHORIZERS = [authorize.DeveloperAdminAuthorizer];\n}\n\nexport default {\n    ViewBase: ViewBase,\n    asView: asView,\n    serverCallView: serverCallView,\n    anyCallView: anyCallView,\n    anyCall4001View: anyCall4001View,\n    DeveloperAdminView: DeveloperAdminView,\n    regUserCallView: regUserCallView\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/viewBase/viewBase.js\n **/","/**\n * Created by ericd on 26/11/2015.\n */\nimport esErr from '../errors/errors';\nimport logger from '../modules/logger/index'\n\nexports.execute = function(scheme, schemeMethod, req_id){\n  var cb = arguments[arguments.length - 1]\n  arguments[arguments.length - 1] = function(err, result){\n    if (err){\n      if (err.name == 'ValidationError'){\n        for (let field in err.errors) {\n          let errorItem = err.errors[field];\n          return cb(new esErr.ESErrors(esErr.SchemaInvalidHeader + scheme.modelName + '.' + errorItem.path, errorItem.message || 'Happen invalid error'));\n        }\n      }\n      if (err.code == '11000'){\n        return cb(new esErr.ESErrors(esErr.DBErrorDuplicateKey, err.errmsg));\n      }\n      logger.error(req_id, 'failed' ,err);\n      return cb(new esErr.ESErrors(esErr.DBError));\n    }\n    return cb(null, result)\n  }\n\n  try{\n    var args = Array.prototype.slice.call(arguments, 3);\n    schemeMethod.apply(scheme, args)\n  }\n  catch(err){\n    logger.error(req_id, 'call mongoose happen error ', err)\n    cb(new esErr.ESErrors(esErr.DBError))\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/dbwrapper.js\n **/","module.exports = require(\"async\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"async\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"util\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"util\"\n ** module id = 12\n ** module chunks = 0\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\nvar integerValidator = require('mongoose-integer');\nvar cst = require('../../utils/serverConstants')\nvar TopicMessageSchema = new Schema({\n\tcategory: {type:String, \n\t           validate: [function(v){return v.length > 0}, 'category can not be null string'],\n\t},\n\ttopicId: { type: Schema.Types.ObjectId },  //The topic id\n\tparentMsg: {\n\t  _id: { type: Schema.Types.ObjectId, index:true},\n\t  bodyText: {type: String},\n\t  category: {type: String}\n\t}, //The message id\n\tchatCount: {type: Number, default: 0},\t\n\tlikeCount: {type: Number, default: 0},\t\n\tuniqueLikeId: {type: String, unique: true, sparse: true},\n\tsender: {\n\t _id: { type: Schema.Types.ObjectId,  index: true},\n\t type: {type: String }, //user, anonymous\n\t username: {type: String},\n\t displayname : {type: String},\n\t picture_url: {type: String}\n\t},\n\tcreated: { type: Date, default: Date.now }, //UTC iso //new Date().toISOString()\n\tmodified: { type: Date }, //UTC iso //new Date().toISOString()\t\n\tcontent: {\n\t\tbodyText: String, \t//optional: simple text typed as comment or message by the user\n\t\tdescription: String, \t//optional: description for task objects\n\t\tstatus: String, \t//optional: status for task objects\n\t\tdueDate: {type: Date}, //optional UTC for tasks iso //new Date().toISOString()\n\t\tassignees: [{\n\t\t\t_id: { type: Schema.Types.ObjectId } //user ids withing members\n\t\t}],\n\t\tdata: [{\n\t\t  _id: false,\n\t\t  provider: String,\n\t\t  providerFileType: String,\n\t\t  fileType: String,\n\t\t  name: String,\n\t\t  path: String,\t\t  \n\t\t  icon: String,\n\t\t  thumbnail: String,\n\t\t  keywords: String,\n\t\t  description: String,\n\t\t  sitename: String,\n\t\t  videoProvider: String, //For fileType is video\t\t  \n\t\t  fileId: String,\n\t\t  previewFile: String,\n\t\t  thumbnailFile:String,\n\t\t  fileSize: {type: Number, integer: true},\n\t\t  convertStatus: {type: Number, integer: true, default:cst.ConvertStatusNotStart},\n\t\t  pages: {type: Number, integer: true, default:0},\n\t\t  metaData: {\n\t\t    paging: {type: Number, integer: true, default:0},\t\t    \n\t\t    prvwProvd: {type: String, default: cst.previewProviderGCS},\n\t\t    stgeProvd: {type: String, default: cst.storageProviderGCS},\n\t\t    }\n\t\t}]\t//optional: array of possible objects provided by user input like files, images, links\n\t}\n});\n\n\nTopicMessageSchema.plugin(integerValidator);\n/**\n * Virtuals\n */\n\nTopicMessageSchema.set('toJSON', {\n  virtuals: true\n});\n\nTopicMessageSchema.options.toJSON = {\n\n  transform : function(doc, ret, options) {\n      delete ret.__v;\n      delete ret.id;\n      delete ret.uniqueLikeId;\n      delete ret.creator;\n      delete ret.parent;\n      if (doc.category != 'task' || (!doc.parentMsg)){\n        if (ret.content){\n          delete ret.content.assignees;\n        }\n      }     \n      return ret;\n  },\n  virtuals: true,\n  minimize: true\n};\n\nTopicMessageSchema\n.virtual('creator')\n.get(function(){\n  return {_id: this.sender._id, aType: this.sender.type};\n});\n\nTopicMessageSchema\n.virtual('parent')\n.get(function(){\n  return {_id: this.topicId, aType: cst.TypeTopic};\n});\n\nTopicMessageSchema.index({topicId: 1, created:1});\nTopicMessageSchema.index({topicId: 1, _id:1});\nTopicMessageSchema.index({topicId: 1, category:1, _id:1});\nTopicMessageSchema.index({topicId: 1, category:1, \"content.dueDate\":1});\nmodule.exports = mongoose.model('TopicMessage', TopicMessageSchema);\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/message/message.model.js\n **/","'use strict';\n\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\nvar crypto = require('crypto');\nvar config = require('../../config');\nvar cst = require('../../utils/serverConstants');\nvar _ = require('lodash');\nvar isSiteAdmin = require('../../auth/siteAdmin-config');\n\nvar UserSchema = new Schema({\n  name: {\n        familyname: String,\n        formatted: String,\n        givenname: String,\n        honorific_prefix: String,\n        honorific_suffix: String,\n        middlename: String,\n        pronunciation: String,\n        pronunciation_url: String\n    },\n  ndbid: String,\n  phone_numbers: [Number],\n  addresses: [String],\n  gender: String,\n  displayname: String,\n  lastupdatetime: Date,\n  username: { type: String, lowercase: true },\n  //\n  aType: { type: String, default: 'user' }, //  user | anonymous\n  hashedPassword: String,\n  provider: String,\n  salt: String,\n  secret: String,\n  user_action_required: Boolean,\n  emails: [\n      {   \n          _id: false,\n          value: { type: String, lowercase: true },\n          type: {type: String},\n          primary: Boolean,\n          label: String,\n          relationdef_id: String,\n          cid: { type: Schema.Types.ObjectId, ref: 'Company' },\n      }\n  ],\n  languages: [\n      {\n          _id: false,\n          code: String,\n          primary: Boolean\n      }\n  ],\n  timezone: String,\n\n  // picture_url: String,\n  picturefile: String,\n  relation_graphs: [{\n    _id: false,\n    relationdef_id: String,\n    initiator_id: {type:String, index:true},\n    initiator_type: String,\n    relation_type: String\n  }],\n  permissions:[{type: String}]\n});\n\n/**\n * Indexes\n */\nUserSchema.index({ndbid: 1}, {unique: true});\nUserSchema.index({username: 1}, {unique: true});\n\n/**\n * Virtuals\n */\nUserSchema.set('toJSON', {\n    virtuals: true\n});\n\nUserSchema.options.toJSON = {\n\n    transform : function(doc, ret, options) {\n        delete ret.__v;\n        delete ret.id;        \n        return ret;\n    },\n    virtuals: true\n};\n\nUserSchema\n  .virtual('password')\n  .set(function(password) {\n    this._password = password;\n    this.salt = this.makeSalt();\n    this.hashedPassword = this.encryptPassword(password);\n  })\n  .get(function() {\n    return this._password;\n  });\n\nUserSchema\n  .path('lastupdatetime')\n  .set(function(lastupdatetime) {\n    this.lastupdatetime = lastupdatetime.toUTCString();\n  });\n\nUserSchema\n  .virtual('picture_url')\n  .get(function() {\n    if (!this.picturefile) {\n      return 'https://www.onesna.com/norevimages/noimage.jpg';\n    }\n    if (this.picturefile.indexOf('http://') > -1 || this.picturefile.indexOf('https://') > -1) {\n      return this.picturefile;\n    }\n    return 'https://storage.googleapis.com/' + config.bucket + '/' + this.picturefile;\n  });\n\n// Public profile information\nUserSchema\n  .virtual('profile')\n  .get(function() {\n    return {\n      'name': this.name,\n      'displayname': this.displayname,\n      'username': this.username,\n      'phone_numbers': this.phone_numbers,\n      'picture_url': this.picture_url,\n      'addresses': this.addresses,\n      'gender': this.gender\n    };\n  });\n\n// Non-sensitive info we'll be putting in the token\nUserSchema\n  .virtual('token')\n  .get(function() {\n    return {\n      '_id': this._id,\n      'role': this.role\n    };\n  });\n\n/**\n * Validations\n */\n\n// Validate empty email\nUserSchema\n  .path('username')\n  .validate(function(username) {\n    return username.length;\n  }, 'Email cannot be blank');\n\n// Validate empty password\nUserSchema\n  .path('hashedPassword')\n  .validate(function(hashedPassword) {\n    return hashedPassword.length;\n  }, 'Password cannot be blank');\n\n// Validate email is not taken\nUserSchema\n  .path('username')\n  .validate(function(value, respond) {\n    var self = this;\n    this.constructor.findOne({username: value, role: 'user'}, function(err, user) {\n      if(err) throw err;\n      if(user) {\n        if(self.id === user.id) return respond(true);\n        return respond(false);\n      }\n      respond(true);\n    });\n}, 'The specified email address is already in use.');\n\nvar validatePresenceOf = function(value) {\n  return value && value.length;\n};\n\n/**\n * Methods\n */\nUserSchema.methods = {\n  /**\n   * Authenticate - check if the passwords are the same\n   *\n   * @param {String} plainText\n   * @return {Boolean}\n   * @api public\n   */\n  authenticate: function(plainText) {\n    return this.encryptPassword(plainText) === this.hashedPassword;\n  },\n\n  /**\n   * Make salt\n   *\n   * @return {String}\n   * @api public\n   */\n  makeSalt: function() {\n    return crypto.randomBytes(16).toString('base64');\n  },\n\n  /**\n   * Encrypt password\n   *\n   * @param {String} password\n   * @return {String}\n   * @api public\n   */\n  encryptPassword: function(password) {\n    if (!password || !this.salt) return '';\n    var salt = new Buffer(this.salt, 'base64');\n    return crypto.pbkdf2Sync(password, salt, 10000, 64).toString('base64');\n  }\n};\n\nmodule.exports = mongoose.model('User', UserSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/user/user.model.js\n **/","'use strict';\n//Version 1.0\nimport mongoose from 'mongoose';\nimport passport from 'passport';\nimport config from '../config';\nimport jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\nimport compose from 'composable-middleware';\nimport User from '../api/user/user.model';\nimport Anonymous from '../api/anonymous/anonymous.model';\nimport logger from '../modules/logger';\nimport request from 'request';\nimport _ from 'lodash';\nimport esErr from '../errors/errors';\nimport dbWp from '../utils/dbwrapper';\nimport async from 'async';\nimport fs from 'fs';\nimport OAuthAccessTokens from './oauth/accessToken/accessToken.model';\nimport util from '../utils/serverHelper';\nimport cst from '../utils/serverConstants';\nimport userEvent from '../api/user/user.event';\nimport sync from '../api/sync/sync.backend';\nimport userBk from '../api/user/user.backend';\n/**\n * Checks if the user role meets the minimum requirements of the route\n */\nfunction hasRole(roleRequired) {\n  if (!roleRequired) throw new Error('Required role needs to be set');\n\n  return compose()\n  .use(isAuthenticated())\n  .use(function meetsRequirements(req, res, next) {\n    if (config.userRoles.indexOf(req.user.role) >= config.userRoles.indexOf(roleRequired)) {\n    next();\n    }\n    else {\n    res.status(403).send('Forbidden');\n    }\n  });\n}\n\n/**\n * Returns a jwt token signed by the app secret\n */\nfunction signToken(id) {\n  return jwt.sign({ _id: id }, config.secrets.session, { expiresInMinutes: 60*5 });\n}\n\n/**\n * Set token cookie directly for oAuth strategies\n */\nfunction setTokenCookie(req, res) {\n  if (!req.user) return res.status(404).json({ message: 'Something went wrong, please try again.'});\n  var token = signToken(req.user._id, req.user.role);\n  res.cookie('token', JSON.stringify(token));\n  // res.redirect('/');\n  return res.status(cst.HttpSuccessStatus);\n}\n\nclass JwtAuthenticator {\n  constructor(){\n    this.name = 'JwtAuthenticator';\n  }\n  \n  getJwtToken(req, cb) {\n    var token;\n    if (req.headers && req.headers.authorization) {\n      var parts = req.headers.authorization.split(' ');\n      if (parts.length == 2) {\n        var scheme = parts[0].toLowerCase();\n        var credentials = parts[1];\n\n        if (/^jwt$/i.test(scheme)) {\n          token = credentials;\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n    return token;\n  }\n\n  getUserOnesna(cb) {\n    var functionName = '[JwtAuthenticator.getUserOnesna] ';\n    var url = config.getEsnaLink(this.request.esDomain) + '/api/1.0/users/self/logan';\n    var token = this.token;\n    var options = {\n      url: url,\n      headers: {\n        'Authorization': 'jwt ' + token\n      },\n      accept: '*/*',\n    };\n    var self = this;    \n    logger.info(self.reqId, functionName + 'Access esna by url ' + url);\n    request.get(options, function(err, response) {\n      if (err || response.statusCode !== 200) {\n        logger.error(self.reqId, functionName + 'Wrong response!: ');\n        return cb(new esErr.ESErrors(esErr.AccessOnesnaHappenError));\n      }\n      return cb(null, response.body);\n    });\n  }\n\n\n  get_secret_token_user(userid, cb) {\n    var functionName = '[JwtAuthenticator.get_secret_token_user] ';\n    var self = this;\n    var reqid = this.reqId;\n    var oldUser = null;\n    \n    async.waterfall([\n      function(callback){\n        let exeobj = User.findOne({ndbid: userid}, {displayname:1, lastupdatetime:1, username:1, picturefile:1, permissions:1, secret:1, relation_graphs:1, emails:1}).lean();\n        dbWp.execute(exeobj, exeobj.exec, reqid, callback);        \n      },\n      function(user, callback){\n        if (user){\n          user.aType = cst.TypeUser;\n          oldUser = user;\n        }\n        if (!user || user.lastupdatetime.getTime() < (new Date(self.payload.lastupdatetime)).getTime()){\n          logger.info(reqid, functionName + 'No user found, lets go to onesna');\n          self.getUserOnesna(callback);\n        }\n        else{\n          return cb(null, user);\n        }\n      },\n      function(newUser, callback){\n        var loganUser = JSON.parse(newUser);\n        loganUser.ndbid = loganUser.id;\n        loganUser.secret = loganUser.security_token;\n        delete loganUser.id;\n        dbWp.execute(User, User.findOneAndUpdate, reqid, {ndbid: loganUser.ndbid},loganUser, {upsert: true, new: true}, (err, savedUser)=>{\n          if (!err){\n            return callback(null, savedUser);\n          }\n          else if (err.code == esErr.DBErrorDuplicateKey){\n            //Under ndbid unique and username unique condition, happen such error only possible be username duplicate\n            //To avoid problem of endless loop, get user by username and replace secret in memory to make verify pass\n            logger.info(reqid, functionName + 'Happen duplicate username ' + loganUser.username + '. Get user by same username from db!');\n            dbWp.execute(User, User.findOne, reqid, {username: loganUser.username}, (err, savedUser)=>{\n              if (err || (!savedUser)){\n                logger.error(reqid, functionName + 'Failed to get user by username ' + loganUser.username);\n                return cb(new esErr.ESErrors(esErr.AuthenticateErrorJWT));\n              }\n              savedUser.fakeSecret = loganUser.secret;\n              return callback(null, savedUser);\n            });\n          }\n          else{\n            return callback(err, savedUser);\n          }\n        });\n      },\n      function(savedUser, callback){\n        if (!savedUser) {\n          logger.error(reqid, functionName + 'Error while save/update Logan user');\n          return callback(new esErr.ESErrors(esErr.DBError));\n        }\n        userEvent.emitUserUpdated({id: reqid, domain:self.request.esDomain, type:'req', fn: '[JwtAuthenticator]'}, savedUser, oldUser);\n        logger.info(reqid, functionName + 'Logan user saved/updated!');\n        return callback(null, savedUser);\n      }\n    ],function(err, result){\n        if (err){\n          logger.error(reqid, functionName + ' happen error!', err.message);\n        }\n        return cb(err, result);\n      }\n    );\n  }\n\n  verifyToken(secret, token, req, res, cb) {\n    var functionName = '[JwtAuthenticator.verifyToken] ';\n    var self = this;\n    var verify = expressJwt({\n      secret: secret + config.commonSecretJwt,\n      getToken: function () {\n        return token;\n      }\n    });\n    verify(req, res, function(err, result){\n      if (err){\n        logger.info(req.id, functionName + 'Verify failed for token ' + token);\n        return cb(err);\n      }\n      else{\n        //verify domain of jwt\n        if (util.getIssFromHostname(req.hostname) != self.payload.iss &&\n            util.getIssFromHostnameOld(req.hostname) != self.payload.iss){\n          logger.info(req.id, functionName + 'Issure is not correct with value ' + self.payload.iss);\n          return cb(new esErr.ESErrors(esErr.AuthenticateErrorJWT));\n        }\n        else{\n          return cb(null);\n        }\n      }\n    });\n  }\n\n  auth(req, res, cb){   \n    var functionName = '[JwtAuthenticator.auth] ';\n    var token = this.getJwtToken(req);\n    this.reqId = req.id;\n\n    if (!token) {\n      logger.info(req.id, functionName + 'No jwt token in header');\n      return cb(new esErr.ESErrors(esErr.AuthenticateErrorJWT));\n    }\n    this.token = token;\n    var payload = jwt.decode(token);\n    if (!payload){\n        logger.warn(req.id, functionName + 'Payload is undefined in token' + token);\n        return cb(new esErr.ESErrors(esErr.AuthenticateErrorJWT));\n    }\n    if (!payload.user_id){\n      logger.warn(req.id, functionName + 'user_id is undefined in Payload of token' + token);\n      return cb(new esErr.ESErrors(esErr.AuthenticateErrorJWT));\n    }\n    var uid = payload.user_id;\n    var self = this;\n    var userObj = null;\n    this.payload = payload;\n    this.request = req;\n    async.waterfall([\n      function(callback){\n        self.get_secret_token_user(uid, callback);\n      },\n      function(userObj, callback){\n        self.userObj = userObj;\n        if (userObj.ndbid == uid){\n          self.verifyToken(userObj.secret, token, req, res, callback);\n        }\n        else{\n          if (userObj.fakeSecret){\n            self.verifyToken(userObj.fakeSecret, token, req, res, (err)=>{\n              if (err){\n                return self.verifyToken(userObj.secret, token, req, res, callback);\n              }\n              else{\n                return callback(null)\n              }\n            });\n          }\n          else{\n            self.verifyToken(userObj.secret, token, req, res, callback);\n          }\n        }\n      },\n    ], function(err, result){\n      if (err){\n        logger.warn(req.id, functionName + 'Verify Token :' + token + ' has Error: ', err);\n        return cb(new esErr.ESErrors(esErr.AuthenticateErrorJWT));\n      }\n      else{\n        if (self.userObj.fakeSecret){\n          delete self.userObj.fakeSecret;\n        }\n        req.user = self.userObj;\n        req.auth = payload;\n        req.auth.authenType = cst.AuthenticateTypeJWT;\n        userBk.getUserPermissions(req, req.user, (err, result)=>{\n          req.user.extendPermissions = result;\n          return cb();\n        })\n      }\n    });\n  }\n}\n\nclass Oauth2Authenticator {\n  constructor(){\n    this.name = 'Oauth2Authenticator';\n  }\n  getBearerToken(req) {\n    var token;\n    if (req.headers && req.headers.authorization) {\n      var parts = req.headers.authorization.split(' ');\n      if (parts.length == 2) {\n        var scheme = parts[0].toLowerCase();\n        var credentials = parts[1];\n\n        if (/^bearer$/i.test(scheme)) {\n          token = credentials;\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n    return token;\n  }\n  \n  verify(token, cb){\n    var functionName = '[Oauth2Authenticator.verify] ';\n    var reqid = this.reqId;\n    var self = this;\n    async.waterfall(\n      [function(callback){\n        //Get token information from table accesstoken\n        dbWp.execute(OAuthAccessTokens, OAuthAccessTokens.findOne, reqid, {accessToken: token}, callback);\n       },     \n       function(accessToken, callback){\n         if (!accessToken){\n             logger.warn(reqid, functionName + \"Can't get access token \" + token + \" from db\");\n             return cb(new esErr.ESErrors(esErr.OAuth2AccessTokenNotExisted));\n         }\n         //Check the user is existed in system \n         if ((new Date(accessToken.expires)).getTime() < Date.now()){\n             //Expired\n             return cb(new esErr.ESErrors(esErr.AuthenticateErrorOauth2));\n         }\n         self.accessToken = accessToken;\n         let exeobj = User.findOne({_id: accessToken.userId}, {displayname:1, lastupdatetime:1, username:1, picturefile:1, permissions:1, secret:1, aType:1, relation_graphs:1, emails:1}).lean();\n         dbWp.execute(exeobj, exeobj.exec, reqid, callback);\n       },\n       function(user, callback){\n         //Not exist throw error\n         if (!user){\n           logger.warn(reqid, functionName + \"Can't get user object by id \" + accessToken.userId + \" from db\");\n           return cb(new esErr.ESErrors(esErr.AuthenticateErrorOauth2));\n         }\n         else{\n           user.aType = cst.TypeUser;\n           return cb(null, user);\n         }\n       }\n      ], \n      function(err, result){\n        if (err){\n          logger.error(reqid, functionName + 'Happen error!', err);\n        }        \n        return cb(err, result);\n    });\n  }\n  \n  auth(req, res, cb) {\n    var functionName = '[Oauth2Authenticator.auth] ';\n    var token = this.getBearerToken(req);\n    if (!token){\n      logger.info(req.id, functionName + 'No oauth2 access token in header');\n      return cb(new esErr.ESErrors(esErr.AuthenticateErrorOauth2));\n    }\n    this.reqId = req.id;\n    var self = this;\n    this.verify(token, function(err, result){\n      if (err){\n        return cb(new esErr.ESErrors(esErr.AuthenticateErrorOauth2));\n      }\n      else{\n        req.user = result;\n        req.auth = self.accessToken;\n        req.auth.authenType = cst.AuthenticateTypeOAuth2;\n        userBk.getUserPermissions(req, req.user, (err, result)=>{\n          req.user.extendPermissions = result;\n          return cb();\n        })\n      }\n    });  \n  }\n}\nclass OnesnaServerAuthenticator {\n  constructor(){\n    this.name = 'OnesnaServerAuthenticator';\n  }\n  auth (req, res, cb) {\n    var functionName = '[OnesnaServerAuthenticator.auth] ';\n    if (!req.headers || !req.headers.authorization || req.headers.authorization !== 'API_KEY ' + config.ESNA_API_KEY) {\n      logger.info(req.id, functionName + 'No api key in header');\n      return cb(new esErr.ESErrors(esErr.AuthenticateFailedOnesnaServer));\n    }\n    return cb();\n  }\n}\n\nclass AnonymousAuthenticator {\n  constructor(){\n    this.name = 'AnonymousAuthenticator';\n  }\n  getJwtToken(req, cb) {\n    var functionName = '[AnonymousAuthenticator.getJwtToken] ';\n    var token;\n    if (req.headers && req.headers.authorization) {\n      var parts = req.headers.authorization.split(' ');\n      if (parts.length == 2) {\n        var scheme = parts[0].toLowerCase();\n        var credentials = parts[1];\n\n        if (/^jwt$/i.test(scheme)) {\n          token = credentials;\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n    return token;\n  }\n\n  getAnonymousUser(src, id, callback) {\n    var functionName = '[AnonymousAuthenticator.getAnonymousUser] ';\n    dbWp.execute(Anonymous, Anonymous.findById, null, id, function(err, anonymousUser){\n      if (err || !anonymousUser) {\n        logger.error(src.id, functionName + 'Can not get anonymous user from jwt ID ' + id);\n        return callback(new esErr.ESErrors(esErr.AuthenticateErrorAnonyJWT));\n      }\n      logger.info(src.id, functionName + 'Get anonymousUser from JWT');\n      return callback(null, anonymousUser);\n    });\n  }\n\n  auth(req, res, cb){\n    var functionName = '[AnonymousAuthenticator.auth] ';\n    var token = this.getJwtToken(req);\n    this.reqId = req.id;\n    if (!token) {\n      logger.info(req.id, functionName + 'No jwt token in header');\n      return cb(new esErr.ESErrors(esErr.AuthenticateErrorAnonyJWT));\n    }\n    this.token = token;\n    var payload = jwt.decode(token);\n    if (!payload){\n        logger.warn(req.id, functionName + 'Payload is undefined in token' + token);\n        return cb(new esErr.ESErrors(esErr.AuthenticateErrorAnonyJWT));\n    }\n    if (payload.anonymous_id){\n      this.getAnonymousUser({id:req.id}, payload.anonymous_id, function (err, anonymous) {\n        if (err) {\n          return cb(new esErr.ESErrors(esErr.AuthenticateErrorAnonyJWT));\n        }\n        var verify = expressJwt({\n          secret: anonymous.secret,\n          getToken: function () {\n            return token;\n          }\n        });\n        verify(req, res, function(err, result){\n            if (err){\n              logger.warn(req.id, functionName + 'Verify toekn [' + token + '] failed!');\n              return cb(new esErr.ESErrors(esErr.AuthenticateErrorAnonyJWT));\n            } else{\n              req.user = undefined;\n              req.anonymousUser = anonymous;\n              req.auth = payload;\n              req.auth.authenType = cst.AuthenticateTypeAnonymous;\n              return cb();\n            }\n        });\n      });\n      \n    } else{\n      logger.warn(req.id, functionName + 'There is no anonymous_id in toekn ' + token);\n      return cb(new esErr.ESErrors(esErr.AuthenticateErrorAnonyJWT));\n    }\n  }\n}\n\nclass AnonymousAuthenticator4001 extends AnonymousAuthenticator {\n  constructor(){\n    super();\n    this.name = 'AnonymousAuthenticator4001';\n  }\n  auth(req, res, cb){\n    var functionName = '[AnonymousAuthenticator4001.auth] ';\n    return super.auth(req, res, function(err){\n      if (err) {\n        logger.error(req.id, functionName + 'Happen error!', err);\n        return cb(new esErr.ESErrors(esErr.AuthenticateErrorAnony4001JWT));\n      } else {\n        return cb();\n      }\n    });\n  }\n}\n\nclass EsnaServerAuthenticator{\n  constructor(){\n    this.name = 'EsnaServerAuthenticator';\n  }\n  getApiKey(req) {\n      var token;\n      if (req.headers && req.headers.authorization) {\n        var parts = req.headers.authorization.split(' ');\n        if (parts.length == 2) {\n          var scheme = parts[0].toLowerCase();\n          var credentials = parts[1];            \n          if (/^API_KEY$/i.test(scheme)) {\n            token = credentials;\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n      return token;\n  }\n  auth(req, res, cb){\n    let functionName = '[EsnaServerAuthenticator.auth] ';\n    let api_key = this.getApiKey(req);\n    if (api_key === config.ESNA_API_KEY){            \n        req.user = {\n            _id: '__virtual_id',\n            username: 'ServerSuperUser',\n            aType: cst.TypeUser,\n            permissions: ['SITE_ADMIN_PERMISSION_GROUP']\n        };\n          req.auth = {authenType: cst.AuthenticateTypeEsnaServer};\n        userBk.getUserPermissions(req, req.user, (err, result)=>{\n          req.user.extendPermissions = result;\n          return cb();\n        });\n    } \n    else{\n        logger.info(req.id, functionName + 'api key '+ api_key +' is not avaliable');\n          cb(new esErr.ESErrors(esErr.AuthenticateErrorEsnaServer));\n    }\n  }\n}\n\nexport default {\n    hasRole: hasRole,\n    signToken: signToken,\n    setTokenCookie: setTokenCookie,\n    JwtAuthenticator: JwtAuthenticator,\n    Oauth2Authenticator: Oauth2Authenticator,\n    AnonymousAuthenticator:AnonymousAuthenticator,\n    AnonymousAuthenticator4001: AnonymousAuthenticator4001,\n    EsnaServerAuthenticator: EsnaServerAuthenticator\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/auth.service.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction MessageEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(MessageEvent, EventEmitter);\n\nMessageEvent.prototype.emitMessageUpdated = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('messageUpdated');\n    this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onMessageUpdated = function (callback) {\n    this.on('messageUpdated', callback);\n};\n\nMessageEvent.prototype.emitMessageCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('messageCreated');\n    this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onMessageCreated = function (callback) {\n    this.on('messageCreated', callback);\n};\n\nMessageEvent.prototype.emitMessageDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('messageDeleted');\n    this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onMessageDeleted = function (callback) {\n    this.on('messageDeleted', callback);\n};\n\nMessageEvent.prototype.emitMessageInvited = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('messageInvited');\n    this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onMessageInvited = function (callback) {\n    this.on('messageInvited', callback);\n};\n\nMessageEvent.prototype.emitCardDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('cardDeleted');\n    this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onCardDeleted = function (callback) {\n    this.on('cardDeleted', callback);\n};\n\nMessageEvent.prototype.emitUpdateModifyTime= function () {\n  var args = Array.prototype.slice.call(arguments, 0);\n  args.unshift('updateModifyTime');\n  this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onUpdateModifyTime = function (callback) {\n  this.on('updateModifyTime', callback);\n};\n\nMessageEvent.prototype.emitFileConverted = function () {\n  var args = Array.prototype.slice.call(arguments, 0);\n  args.unshift('fileConverted');\n  this.emit.apply(this, args);\n};\n\nMessageEvent.prototype.onFileConverted = function (callback) {\n  this.on('fileConverted', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new MessageEvent());\n    }\n};\n\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/message/message.event.js\n **/","import keyMirror from '../../../node_modules/react-interpolate-component/node_modules/fbjs/lib/keyMirror';\nimport Translate from '../../components/Translate';\nimport TaskConstants from './TaskConstants';\nimport Is from '../../utils/Is';\nimport _ from 'lodash';\nimport Log from 'ZSLogger';\n\nvar ns = '[MessageConstants]';\nconst MessageConstants = {};\nMessageConstants.DEFAULT_MESSAGES_PERPAGE = 30;\nMessageConstants.MAX_LONG_TEXT_LENGTH = 500;\nMessageConstants.API = {\n\tuserChatSearch: '/api/users/{userid}/chat/search/',\n\tTOPIC_MESSAGES_BYREF_URL: '/api/topics/{topicid}/messages/byref',\n\tTOPIC_MEMBERS_URL: '/api/topics/:topicId/members',\n\tTOPIC_TASKS_URL: '/api/topics/:topicId/tasks',\n\tTOPIC_IDEAS_URL: '/api/topics/:topicId/ideas',\n\tUSER_TASKS_URL: '/api/users/:userId/tasks',\n\tUSER_POSTS_URL: '/api/users/:userId/ideas',\n\tUSER_NATIVE_FILES_URL: '/api/users/:userId/attachments/natives',\n\troomMessagesRead: '/api/meetings/{roomid}/messagesread',\n  FILE_GET_UPLOAD_URL: '/api/files/getuploadurl',\n  FILE_GET_PUBLIC_UPLOAD_URL: '/api/files/getProfileImageUploadUrl',\n  FILE_GET_DOWNLOAD_URL: '/api/files/getdownloadurl',\n  PARSE_LINK_URL: '/api/messages/parselink',\n\tFILE_GET_MESSAGE_FILE_VIEWER_URL: '/api/messages/:msgId/files/:fileId/viewerUrl',\n};\n\nMessageConstants.ACTIONS = keyMirror({\n\tSEND_MESSAGE: null,\n\tSAVE_QUED_MESSAGE: null,\n\tRENDER_MESSAGE: null,\n\tARRIVED_MESSAGE: null,\n\tUPDATED_MESSAGE: null,\n\tMESSAGE_UPDATED: null,\n\tUSER_TOPIC_PRESENCE: null,\n  GET_DOWNLOAD_URL: null\n});\n\nMessageConstants.AUDIO_NOTIFICATION_TYPES = {\n\tNEW_CHAT: 'new_chat'\n};\n\nMessageConstants.ROOM_PARTY_TYPES = {\n\tSE_ROOM_PARTICIPANT_PARTY: 'party',\n\tSE_ROOM_PARTICIPANT_ADMIN: 'admin',\n\tSE_ROOM_PARTICIPANT_OBSERVER: 'observer'\n};\n\nMessageConstants.DATA_PROVIDER_TYPES = {\n\tNATIVE: 'native',\n\tURLLINK: 'urllink'\n}\n\n//in seconds\nMessageConstants.MAX_CONVERSION_TIME = 3*60;\nMessageConstants.MIN_CONVERSION_TIME = 30;\nMessageConstants.MAX_CONVERSION_TIME_PER_PAGE = 10;\nMessageConstants.MIN_CONVERSION_TIME_PER_PAGE = 2;\n\n\n\nMessageConstants.CONVERT_STATUS = {\n\tNOT_STARTED: 0,\n\tIN_PROGRESS: 1,\n\tFINISHED: 2,\n\tFAILED: 3\n}\n\nMessageConstants.VIDEO_PROVIDERS = {\n\tNATIVE: 'native',\n\tYOUTUBE: 'youtube'\n};\n\n\nMessageConstants.ACTIVITY_CATEGORY_TYPES = {\n\tCHAT: 'chat',\n\tTASK: 'task',\n\tIDEA: 'idea',\n\tLIKE: 'like',\n\n\tVIDEO_EVENT_TYPE: 'video.event',\n\tAPP_EVENTS: {\n\t\tTASK_UPDATED: 'app.event.task.updated',\n\t\tIDEA_UPDATED: 'app.event.idea.updated',\n    MESSAGE_UPDATED: 'app.event.message.updated',\n\n\t\tRequestPartiesPresence: 'app.event.presence.request.parties',//'check.parties.presence',\n\t\tPartyEnters: 'app.event.presence.party.enters',\n\t\tPartyOnline: 'app.event.presence.party.online',\n\t\tPartyIdle: 'app.event.presence.party.idle',\n\t\tPartyLeaves: 'app.event.presence.party.leaves',\n\n\t\tVIDEO: {\n\t\t\tREADY: 'video.ready',\n\t\t\tREQUEST: 'video.request',\n\t\t\tACCEPT: 'video.accept',\n\t\t\tStartScreenShare: 'video.startscreenshare',\n\t\t\tStopScreenShare: 'video.stopscreenshare',\n\t\t\tScreenShareData: 'video.screensharedata',\n\t\t\tScreenShareUploadUrl: 'video.screenshare.uploadurl',\n\t\t\tScreenShareDownloadUrl: 'video.screenshare.downloadurl',\n\n\n\t\t\tEndVideoChat: 'video.end',\n\t\t\tTracksStatus: 'tracksstatus',\n\t\t\tRequestAttendeeTracksStatusChange: 'requestattendeetracksstatuschange',\n\t\t\tAudioTrackStatus: 'audiotrack.status',\n\t\t\tPartyStatusChanged: 'party.status.changed',\n\t\t\tPartyTyping: 10,\n\t\t\tPartySpeaking: 'speaking',\n\t\t\tPartyStoppedSpeaking: 'speaking.stopped',\n\t\t\tWebRTCEvents: 'video.webrtc.events',\n\n\n\t\t\tStartMediaSession: 'media.session.start',\n\t\t\tMediaSessionReady: 'media.session.ready',\n\t\t\tMediaSessionStarted: 'media.session.started',\n\t\t\tInvalidMediaSession: 'media.session.invalid',\n\n\n\t\t},\n\n\n\n\n\n\n\n\n\t\t//topic related events\n\t\tAddedNewParty: 'added.new.party',\n\t\tRemovedParty: 'removed.party',\n\t\tRequestToJoinRoom: 'request.join.room',\n\t\tTopicSettingsUpdated: 'settings.updated'\n\t}\n}\n\nfunction getAllValues(obj, resultList){\n  _.forIn(obj, function(value, key){\n    if (typeof value == 'string'){\n      resultList.push(value);\n    }\n    else if (typeof value == 'object'){\n      getAllValues(value, resultList);\n    }\n  });\n}\n\nvar AllCategories = [];\nvar AllVideoCategories = [];\nvar AllEventCategories = [];\nsetTimeout(function(){\n  getAllValues(MessageConstants.ACTIVITY_CATEGORY_TYPES, AllCategories);\n\tgetAllValues(MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO, AllVideoCategories);\n\tgetAllValues(MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS, AllEventCategories);\n});\n\n\nMessageConstants.MSG_TYPES = {\n\tTEXT_TYPE: 'text',\n\tTASK_TYPE: 'task',\n\tIDEA_TYPE: 'idea',\n\n\n\tLINK_TYPE: 'link',\n\tLINK_VIDEO_YOUTUBE_TYPE: 'link.video.youtube',\n\n\tIMAGE_TYPE: 'image',\n\n\tFILE_NATIVE_TYPE: 'file.native',\n\tFILE_NATIVE_IMAGE_TYPE: 'file.native.image',\n\tFILE_NATIVE_PDF_TYPE: 'file.native.pdf',\n\n\tFILE_GOOGLE_TYPE: 'file.google',\n\tFILE_GOOGLE_DOC_TYPE: 'file.google.doc',\n\tFILE_GOOGLE_SHEET_TYPE: 'file.google.sheet',\n\tFILE_GOOGLE_PRESENTATION_TYPE: 'file.google.presentation',\n\n\n\t//legacy events kept for reference.\n\tAppEnters: 1,\n\tAppLeaves: 2,\n\t//Receive: 'event.received',\n\n\tReceiveWhisper: 6,\n\tExistingParties: 7, //indicates existing parties\n\tInvite: 8,\n\n\tListOfJoinedPartiesIsAvailable: 13,\n\tAppConnectedSuccessfully: 14,                      //Parameters: RoomData\n\tAppUnbleToConnect: 15,\n\tIsRoomConnected: 16,                                 //Parameter: ulong RoomID\n\tMakeCall: 17,\n\tCallFailed: 18,\n\tCallCompleted: 19,\n\tCallDisconnected: 20,\n\tAnnouncementText: 21,\n\tAnnouncementVoice: 22,\n\n\n\tInitVideoChat: 25,\n\tPartyActivity: 26,\n\tPartyTypingStopped: 27,\n\tVideoEvent: 'video.event',\n\n\tCheckConnection: 'check.connection',\n//      CheckVideoSession: 'check.video.session',\n//      VideoInProgress: 'video.in.progress',\n\n\n};\n\nMessageConstants.APP_EVENTS = {\n\n};\n\nMessageConstants.MAX_IMAGE_SIZE_TO_DISPLAY = 1048576; //2MB\nMessageConstants.THUMBNAIL_SIZE = 480;\n\n\n\n\n\n\n\n//    PRESENCE_TYPES: {\n//      PRESENCE_CHECK_PARITES_PRESENCE: 'check.parties.presence',\n//      PRESENCE_ONLINE: 'online',\n//      PRESENCE_JOINED: 'joined',\n//      PRESENCE_IDLE: 'idle'\n//    },\nMessageConstants.FILE_TYPES = {\n\tGOOGLE_DRIVE: 'gdrive'\n};\n\nMessageConstants.LINK_TYPES = {\n\tDEFAULT: 'default',\n\tGOOGLE_DRIVE_OTHER: 'g-other',\n\tGOOGLE_DRIVE_DOC: 'g-doc',\n\tGOOGLE_DRIVE_SPREADSHEET: 'g-xls',\n\tGOOGLE_DRIVE_PRESENTATION: 'g-ppt',\n\tGOOGLE_DRIVE_FORMS: 'g-frm',\n\tGOOGLE_DRIVE_DRAW: 'g-drw',\n\tYOUTUBE: 'youtube'\n};\n\nMessageConstants.DEFAULT_DATA = {\n\tTOPIC_MESSAGES: {\n\t\tBASE_DATA: {\n\t\t\tid: '',\n\t\t\ttype: '',\n\t\t\tclient_msg_uid: '', //set by client for client reference\n\t\t\tparents: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'topic',\n\t\t\t\t\tid: '' //collectionid\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'message',  //for replies or\n\t\t\t\t\tid: '' //collection id\n\t\t\t\t}\n\t\t\t],\n\t\t\tsender: {\n\t\t\t\tid: '',\n\t\t\t\ttype: 'user' //could by any other sub system\n\t\t\t},\n\t\t\tcreated: '', //UTC iso //new Date().toISOString()\n\t\t\tcontent: {\n\t\t\t\tbody_text: '',\n\t\t\t\tdata: []\n\t\t\t}\n\t\t},\n\n\t\tLINK_DATA: {\n\t\t\tprovider: 'link', \t\t\t                  //required: link, google, native, Dropbox, OneDrive...\n\t\t\tproviderFileType: '',  \t\t\t              //optional: blank, not applicable\n\t\t\tfiletype: '',\t     \t\t\t                  //optional: exe, video, pdf,\n\n\t\t\tpath: '',\t                                //required: url\n\t\t\tname: '', \t                              //optional: the link title\n\t\t\ticon: '',\t\t\t\t                          //optional: a link to icon\n\n\t\t\tthumbnail: '',   \t\t\t\t                  //optional: link to a thumbnail\n\t\t\tkeywords: '',\t\t\t\t                      //optional: list of keywords comma delimited from META_DATA\n\t\t\tdescription: '',\t\t\t\t                  //optional: page description from META_DATA\n\t\t\tsitename: '',\t\t\t\t                      //optional: human\n\t\t},\n\n\t\tSE_CHAT_MESSAGE_TASK_DATA: {\n\t\t\tbodyText: '',\n\t\t\tdescription: '',\n\t\t\tdata: [],\n\t\t\tassignees: [],\n\t\t\tstatus: TaskConstants.TASK_STATUS_TYPES.PENDING.status,\n\t\t\tdueDate: new Date().toISOString(),\n\t\t},\n\n\t\tSE_CHAT_MESSAGE_IDEA_DATA: {\n\t\t\ttype: MessageConstants.ACTIVITY_CATEGORY_TYPES.TEXT_TYPE,\n\t\t\ttext: ''\n\t\t},\n\n\t\tSE_CHAT_MESSAGE_IMAGE_DATA: {\n\n\t\t}\n\t}\n};\n\nMessageConstants.generateUUID = function () {\n\tvar d = new Date().getTime();\n\tvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tvar r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n\t});\n\treturn uuid;\n};\n\nMessageConstants.isInteractiveDataEvent = function(message){\n\tvar func = ns + \"[isInteractiveDataEvent] \";\n\ttry{\n\t\tLog.log(func + \"begin: \");\n\t\tif(message.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.RequestToJoinRoom){\n\t\t\treturn true;\n\t\t}\n\t}\n\tcatch(e){\n\t\tLog.error(func, e);\n\t}\n\treturn false;\n};\n\nMessageConstants.isMessageEventType = function (message_type) {\n\tif (AllEventCategories.length == 0){\n\t\tgetAllValues(MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS, AllEventCategories);\n\t}\n\tif (AllEventCategories.indexOf(message_type) >= 0){\n\t\treturn true;\n\t}\n\treturn false;\n\n\n\tif (message_type == MessageConstants.ACTIVITY_CATEGORY_TYPES.VIDEO_EVENT_TYPE\n\t\t|| message_type in MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nMessageConstants.isInteractiveEvent = function (messageObj) {\n\tif ((MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS &&\n\t\t\t(messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.RequestToJoinRoom\n\t\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.AddedNewParty\n\t\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.RemovedParty)\n\t\t)\n//        || (messageObj.message_type == MeetingConstants.MSG_TYPES.VIDEO_EVENT_TYPE\n//         && (messageObj.message_text.category == MeetingConstants.APP_EVENTS.RequestVideoChat)\n//        )\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nMessageConstants.isPresenceMessageType = function (messageObj) {\n\tif (messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS\n\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.RequestPartiesPresence\n\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.PartyOnline\n\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.PartyLeaves\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nMessageConstants.isValidCategory = function (messageObj){\n  if (AllCategories.length == 0){\n    getAllValues(MessageConstants.ACTIVITY_CATEGORY_TYPES, AllCategories);\n  }\n  if (AllCategories.indexOf(messageObj.category) >= 0){\n    return true;\n  }\n  return false;\n}\n\nMessageConstants.isVideoEvent = function (messageObj){\n\tif (AllVideoCategories.length == 0){\n\t\tgetAllValues(MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO, AllVideoCategories);\n\t}\n\tif (AllVideoCategories.indexOf(messageObj.category) >= 0){\n\t\treturn true;\n\t}\n\treturn false;\n}\nMessageConstants.isViewerMediaSessionEvents = function (messageObj){\n\tvar allCats = [MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.MediaSessionReady];\n\tif (allCats.indexOf(messageObj.category) >= 0){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n\nMessageConstants.isStorableEventType = function (messageObj) {\n\tif (messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.CHAT\n\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA\n\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK\n\t\t|| messageObj.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.LIKE\n\t\t|| MessageConstants.isInteractiveEvent(messageObj)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nMessageConstants.isNotifiableMessageType = function (messageObj) {\n\treturn !MessageConstants.isMessageEventType(messageObj.category);\n};\n\n/*MessageConstants.convertChatMessageTypesToEvents = function (messageObj) {\n\tvar eventType = '';//MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.Receive;\n\tswitch (messageObj.message_type) {\n\t\tcase MessageConstants.ACTIVITY_CATEGORY_TYPES.VIDEO_EVENT_TYPE:\n\t\t\teventType = MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VideoEvent;\n\t\t\tbreak;\n\t\tcase MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS:\n\t\t\teventType = messageObj.message_text.category;\n\t\t\tbreak;\n\t}\n\treturn eventType;\n};*/\n\n\nMessageConstants.stringifyMessage = function(message_text, message_type){\n\tvar func = ns + \"[stringifyMessage] \";\n\ttry{\n\t\tif(message_type != MessageConstants.ACTIVITY_CATEGORY_TYPES.TEXT_TYPE){\n\t\t\tmessage_text = JSON.stringify(message_text);\n\t\t}\n\t}\n\tcatch(e){\n\t\tLog.error(func, e);\n\t}\n\treturn message_text;\n};\n\nMessageConstants.jsonifyMessage = function(message_text, message_type){\n\tvar func = ns + \"[jsonifyMessage] \";\n\ttry{\n\t\tif(message_type != MessageConstants.ACTIVITY_CATEGORY_TYPES.TEXT_TYPE){\n\t\t\tmessage_text = JSON.parse(message_text);\n\t\t}\n\t}\n\tcatch(e){\n\t\tLog.error(func, e);\n\t}\n\treturn message_text;\n};\n\n\nMessageConstants.isMobileBrowser = function () {\n\tvar func = ns + '[isMobileBrowser]';\n\tvar bIsMobile = false;\n\ttry {\n\t\tif (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n\t\t\tbIsMobile = true;\n\t\t\tLog.error(ns, 'this is is MOBILE APP');\n\t\t}\n\t\tif ($(window).width() < 760) {\n\t\t\tbIsMobile = true;\n//          Log.error(ns, 'SMALL Screen < 760px is DETECTED');\n\t\t}\n\t\telse {\n//          Log.error(ns, 'Large Screen > 760px is DETECTED');\n\t\t}\n\t}\n\tcatch (e) {\n\t\tLog.error(func, e);\n\t}\n\treturn bIsMobile;\n};\n\nMessageConstants.MSG_FILE_TYPES = {\n\tIMAGE: 'image',\n\tDOCUMENT: 'document',\n\tVIDEO: 'video',\n\tAUDIO: 'audio',\n\tSPREADSHEET: 'spreadsheet',\n\tPRESENTATION: 'presentation',\n\tWEBSITE: 'website',\n  MAP: 'map'\n}\n\nMessageConstants.MIME_TYPES = {\n\tDOCUMENT: [\n\t\t'application/msword',\n\t\t'application/pdf',\n\t\t'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n\t\t'application/vnd.openxmlformats-officedocument.wordprocessingml.template'\n\t],\n\tSPREADSHEET: [\n\t\t'application/vnd.ms-excel',\n\t\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t\t'application/vnd.openxmlformats-officedocument.spreadsheetml.template'\n\t],\n\tPRESENTATION: [\n\t\t'application/vnd.ms-powerpoint',\n\t\t'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t\t'application/vnd.openxmlformats-officedocument.presentationml.template',\n\t\t'application/vnd.openxmlformats-officedocument.presentationml.slideshow'\n\t]\n}\n\nMessageConstants.getMessageFileTypeByMime = function(mimeType) {\n\tif(!mimeType){\n\t\treturn '';\n\t}\n\tif(Is.$imageMime(mimeType)){ //return (mime=='image/jpeg' || mime=='image/png');\n\t\treturn MessageConstants.MSG_FILE_TYPES.IMAGE;\n\t}\n\tif(Is.$videoMime(mimeType)){ //return (mime=='image/jpeg' || mime=='image/png');\n\t\treturn MessageConstants.MSG_FILE_TYPES.VIDEO;\n\t}\n\tif(MessageConstants.MIME_TYPES.DOCUMENT.indexOf(mimeType) > -1){ //return (mime=='image/jpeg' || mime=='image/png');\n\t\treturn MessageConstants.MSG_FILE_TYPES.DOCUMENT;\n\t}\n\tif(MessageConstants.MIME_TYPES.SPREADSHEET.indexOf(mimeType) > -1){ //return (mime=='image/jpeg' || mime=='image/png');\n\t\treturn MessageConstants.MSG_FILE_TYPES.SPREADSHEET;\n\t}\n\tif(MessageConstants.MIME_TYPES.PRESENTATION.indexOf(mimeType) > -1){ //return (mime=='image/jpeg' || mime=='image/png');\n\t\treturn MessageConstants.MSG_FILE_TYPES.PRESENTATION;\n\t}\n\treturn '';\n}\n\n\nMessageConstants.fileIconsClassNames = {\n  'pdf': 'fa fa-file-pdf-o fa-6 preview-file-icon',\n  'doc': 'fa fa-file-word-o fa-6 preview-file-icon',\n  'docx': 'fa fa-file-word-o fa-6 preview-file-icon',\n  'xls': 'fa fa-file-excel-o fa-6 preview-file-icon',\n  'xlsx': 'fa fa-file-excel-o fa-6 preview-file-icon',\n  'generic': 'fa fa-file-o fa-6 preview-file-icon'\n};\n\nMessageConstants.getYouTubeThumbnail = function(vid){\n\tvar turl = 'http://img.youtube.com/vi/video_id/hqdefault.jpg'\n\treturn turl.replace('video_id', vid);\n};\n\nMessageConstants.getYoutubeIDFrom = function(url){\n\tif(Is.$array(url)){\n\t\turl = url[0];\n\t}\n\tvar video_id = url.split('v=')[1];\n\tvar ampersandPosition = video_id.indexOf('&');\n\tif(ampersandPosition != -1) {\n\t\tvideo_id = video_id.substring(0, ampersandPosition);\n\t}\n\treturn video_id;\n};\n\nMessageConstants.isYouTubeUrl = function(url){\n\tif(Is.$array(url)){\n\t\turl = url[0];\n\t}\n\tif(url.indexOf('www.youtube.com/')<0){\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nMessageConstants.getIconClassName = function getIconClassName(name) {\n\tlet ext = name.split(\".\").pop();\n\tlet cls = MessageConstants.fileIconsClassNames[ext];\n\tlet generic = MessageConstants.fileIconsClassNames['generic'];\n\treturn cls ? cls : generic;\n}\n\nMessageConstants.getFirstItemWithPreview = function(dataList) {\n\tvar func = ns + \"[getFirstItemWithPreview] \";\n\n\t//Log.log(func, 'begin');\n\tfor(var i in dataList){\n\t\tif(MessageConstants.getMessageFileTypeByMime(dataList[i].providerFileType) == MessageConstants.MSG_FILE_TYPES.DOCUMENT){\n\t\t\tLog.debug(func, 'this is doc', dataList[i]);\n\t\t\tdataList[i].fileType = MessageConstants.MSG_FILE_TYPES.DOCUMENT;\n\t\t}\n\t\t//if(dataList[i].thumbnailUrl) {\n\t\t//\treturn dataList[i];\n\t\t//}\n\t\tif(\n\t\t\t//dataList[i].fileType == MessageConstants.MSG_FILE_TYPES.IMAGE\n\t\t\tdataList[i].fileType == MessageConstants.MSG_FILE_TYPES.VIDEO ||\n\t\t\tdataList[i].fileType == MessageConstants.MSG_FILE_TYPES.WEBSITE){\n\t\t\tlet dataItem = dataList[i];\n\t\t\t//dataList.splice(i, 1);\n\t\t\treturn dataItem;\n\t\t}\n\t}\n\t//if(dataList.length>0){\n\t//\tlet dataItem = dataList[0];\n\t//\t//dataList.splice(0, 1);\n\t//\t//return dataItem;\n\t//}\n\treturn null;\n};\n\nMessageConstants.getRootUrl = function(url) {\n\treturn url.toString().replace(/^(.*\\/\\/[^\\/?#]*).*$/,\"$1\");\n}\nMessageConstants.sanitizeMessageObject = function(messageObj) {\n\tvar func = ns + \"[sanitizeMessageObject] \";\n\t//validate object\n\tmessageObj = _.assign({content: {data: []}}, messageObj);\n\tif(messageObj.content && !messageObj.content.data){\n\t\tmessageObj.content.data = [];\n\t}\n\treturn messageObj\n}\n\nMessageConstants.updateChangedProps = function(obj1, changes, exceptionKeys = []){\n\tobj1 = obj1 || {};\n\tif(!changes){\n\t\treturn obj1;\n\t}\n\n\n\tfor (var prop in changes) {\n\t\tif(exceptionKeys.indexOf(prop)<0){\n\t\t\tobj1[prop] = changes[prop];\n\t\t}\n\t}\n\treturn obj1;\n}\n\nMessageConstants.updateAttachmentByFile = function(orgMsgData, file, exceptionKeys = []) {\n\torgMsgData = orgMsgData || [];\n\n\tif(!file){\n\t\treturn orgMsgData;\n\t}\n\n\tfor (var i in orgMsgData) {\n\t\tif(orgMsgData[i].fileId\n\t\t\t&& orgMsgData[i].fileId == file.fileId) {\n\t\t\torgMsgData[i] = MessageConstants.updateChangedProps(orgMsgData[i], file, exceptionKeys);\n\t\t}\n\t}\n\treturn orgMsgData;\n};\n\nMessageConstants.updateMessageContentDataChanges = function(orgMsgData, changedData, exceptionKeys = []) {\n\torgMsgData = orgMsgData || [];\n\n\tif(!changedData){\n\t\treturn orgMsgData;\n\t}\n\n\tfor (var i in changedData) {\n\t\tvar file = changedData[i];\n\t\tMessageConstants.updateAttachmentByFile(orgMsgData, file, exceptionKeys);\n\t}\n\treturn orgMsgData;\n};\n\nMessageConstants.updateMessageChanges = function(orgMsgData, changes) {\n\torgMsgData = orgMsgData || {};\n\torgMsgData = MessageConstants.updateChangedProps(orgMsgData, changes, ['sender', 'messageId', 'content', 'category']);\n\torgMsgData.content = MessageConstants.updateChangedProps(orgMsgData.content, changes.content, ['data']);\n\tif(orgMsgData.content){\n\t\torgMsgData.content.data = MessageConstants.updateMessageContentDataChanges(orgMsgData.content.data, changes.content.data);\n\t}\n\torgMsgData._clientChanged = Date.now();\n\treturn orgMsgData;\n};\n\nexport default MessageConstants\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/flux/constants/MessageConstants.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    cst = require('../../utils/serverConstants'),\n    Schema = mongoose.Schema;    \n\nvar TopicSchema = new Schema({\n    cid: { type: Schema.Types.ObjectId, ref: 'User' }, //creator Id\n    created: {type: Date, default: Date.now},\n    title: String,\n    description: String,\n    settings: {\n      mdSvr: {type: String, \"enum\": ['p2p','ams'], default: 'ams'},\n    },\n    parents:[\n      //In most cases they are companies, but in the future maybe other group type?\n      { _id: false,\n        parentid: {type: Schema.Types.ObjectId},\n        parent_type: String,\n      }\n    ],\n    members: [\n   \t \t{ _id: false,\n        member: {type: String, index: true},\n        memberType: {type: String, \"enum\": ['userId','email']},  //  userId \n        role: String,   //admin | member\n        joinTime: Date,\n        username: {type: String},\n        displayname : {type: String},\n        picture_url: {type: String}\n      }\n    ],\n    status: {type: Number, default: 0}, // 0 means normal, 1 means hide,\n    restrict:{type: Array, default: []}//deny_guest_read_idea, deny_guest_read_task\n});\n\n/**\n * Virtuals\n */\nTopicSchema.set('toJSON', {\n    virtuals: true\n});\n\nTopicSchema\n.path('restrict')\n.set(function(restrict) {\n  if (restrict.length != cst.defaultRestrictValue.length){\n    return restrict;\n  }\n  for (let retrictIdx in restrict){\n    let retrictItem = restrict[retrictIdx];\n    let defaultRestrictValueItem = cst.defaultRestrictValue[retrictIdx];\n    if (retrictItem != defaultRestrictValueItem){\n      return restrict;\n    }\n  }\n  //Default value will always transfer to empty array.\n  return [];\n});\n\nTopicSchema.options.toJSON = {\n\n    transform : function(doc, ret, options) {\n        delete ret.__v;\n        delete ret.id;\n        return ret;\n    },\n    virtuals: true,\n    minimize: true\n};\n\nvar paginationPlugin = function (schema) {\n    schema.statics.paginate = mongoosePagination;\n};\n\nvar mongoosePagination = function (query, options, callback) {\n\n    /**\n    * @param {Object}              [query={}]\n    * @param {Object}              [options={}]\n    * @param {Object|String}       [options.sort]\n    * @param {Number}              [options.limit=10]\n    * @param {Function}            [callback]\n    *\n    * @returns {Promise}\n    */\n\n    var sort = options.sort,\n        limit = options.limit || 0;\n        // queryString,\n        // next,\n        // previous,\n\n    return this.find(query).sort(sort).limit(limit).exec(callback);\n};\n\n// TopicSchema.static.paginate = mongoosePagination;\nTopicSchema.plugin(paginationPlugin);\n\nmodule.exports = mongoose.model('Topic', TopicSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/topic/topic.model.js\n **/","module.exports = require(\"request\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request\"\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 20\n ** module chunks = 0\n **/","module.exports = require(\"process\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"process\"\n ** module id = 21\n ** module chunks = 0\n **/","/**\n * author: Eric Ding\n */\n\nimport esErr from '../../errors/errors';\nimport logger from '../../modules/logger';\nimport cst from '../../utils/serverConstants'; \nimport Agenda from 'agenda';\nimport config from '../../config';\nimport mongoose from 'mongoose';\nimport process from 'process';\nimport util from '../../utils/serverHelper';\n\nglobal.deferHandleDict = {};\n\nexports.registerDeferHandle = function(keyString, funcObj){\n  setTimeout(function(){\n    if (keyString in global.deferHandleDict){\n      logger.warn('sysloading', 'registerDeferHandle happen already registered error for keyString=' + keyString);\n    }\n    else{\n      logger.info('sysloading', 'registerDeferHandle load defer with keyString=' + keyString + ' successfully!')\n      global.deferHandleDict[keyString] = funcObj;\n    }\n  });\n};\n\nexports.getDeferHandleByKeyString = function(keyString){\n  if (keyString in global.deferHandleDict){\n    return global.deferHandleDict[keyString];\n  }\n  logger.warn('sysloading', 'registerDeferHandle not existed');\n  throw new esErr.ESErrors(esErr.SysAlreadyRegisterDeferError);\n};\n\nexports.TimerWayLauchDefer = function(src, keyString){\n  try{\n    logger.info('Begin starting defer with keyString = ' + keyString);\n    let funcObj = this.getDeferHandleByKeyString(keyString);\n    var tempoptions = arguments[arguments.length - 1];    \n    var parametersFuncObj = Array.prototype.splice.call(arguments, 2);\n    var options = {delay: 0,\n                   attempts: 0,\n                   backoff_seconds: 0,\n                   callback: null};\n    if (Object.prototype.toString.call(tempoptions) == '[object Object]' &&\n        tempoptions.defferOption){\n      //Remove the last element from parameterFuncObj\n      parametersFuncObj = Array.prototype.splice.call(parametersFuncObj, 0, parametersFuncObj.length - 1);\n      options = {\n          delay: tempoptions.delay || options.delay,\n          attempts: tempoptions.attempts || options.attempts,\n          backoff_seconds: tempoptions.backoff_seconds || options.backoff_seconds,\n          callback: tempoptions.callback || options.callback,\n        };\n    }          \n    parametersFuncObj[0]._taskoptions = {attempts: 0, attempt_times: 0};\n    Array.prototype.splice.call(parametersFuncObj, 0, 0, src);\n    \n    let tmoutObj = setTimeout(function(inParametersFuncObj){\n      let parametersFuncObjTemp = JSON.parse(inParametersFuncObj);\n      parametersFuncObjTemp.push(function(){});\n      funcObj.apply(funcObj, parametersFuncObjTemp);\n    }, options.delay * 1000, JSON.stringify(parametersFuncObj));\n    \n    let deferOut = {\n        deferOutObj: tmoutObj,\n        aType: cst.deferOutTimeout\n    };\n    if (options.callback){\n      options.callback(null, tmoutObj);\n    }\n  }\n  catch(err){\n    logger.warn(src.id, 'Start defer with keyString = ' + keyString + ' failed!');\n  }\n};\n\nvar agenda = null;\nfunction getAgenda(cb){\n  var mongoConnectionString = config.mongo.uri;\n  if (!agenda){\n    let tempagenda = new Agenda({mongo: mongoose.connection,\n                                db:{collection: 'jobCollectionName'}\n    });\n    tempagenda.on('ready', () => {\n      logger.info('Agenda is ready');\n      agenda = tempagenda;\n    });\n  }\n  if (cb){\n    cb(agenda);\n  }\n}\n\nsetTimeout(getAgenda, 0);\n\nexports.agendaLauchDefer = function(src, keyString){\n  getAgenda((agenda) => {  \n    let url = util.getFullUrlByType(src, 'task') + '/api/taskqueue/runner';\n    let tempoptions = arguments[arguments.length - 1];\n    let parametersFuncObj = Array.prototype.splice.call(arguments, 2);\n    let options = {delay: 0,\n                   attempts: 0,\n                   backoff_seconds: 0,\n                   callback: null};\n    if (Object.prototype.toString.call(tempoptions) == '[object Object]' &&\n        tempoptions.defferOption){\n      //Remove the last element from parameterFuncObj\n      parametersFuncObj = Array.prototype.splice.call(parametersFuncObj, 0, parametersFuncObj.length - 1);\n      options = {\n          delay: tempoptions.delay || options.delay,\n          attempts: tempoptions.attempts || options.attempts,\n          backoff_seconds: tempoptions.backoff_seconds || options.backoff_seconds,\n          callback: tempoptions.callback || options.callback,\n        };\n    }\n    \n    options.url = url;\n    options.keyString = keyString;\n    options.attempt_times = 0;\n    options.args = JSON.stringify(parametersFuncObj);\n    let callback = options.callback;\n    delete options.callbac;\n    let job = agenda.schedule(options.delay.toString() + ' seconds',\n      'defer task',\n      options,\n      (err, result) => {\n        if (err){\n          logger.error(src.id, 'Dispatch task happen error', err);\n        }\n        if (callback){\n          let deferOut = {\n              deferOutObj: result,\n              aType: cst.deferOutAgendaJob\n          };\n          callback(err, result);\n        }\n    });\n  });\n};\n\nexports.launchDefer = function(src, keyString){\n  if (process.env.DeferType && process.env.DeferType === 'timeout'){ \n    exports.TimerWayLauchDefer.apply(this, arguments);\n  }\n  else{\n    exports.agendaLauchDefer.apply(this, arguments);\n  }\n};\n\nexports.runner = function(src, options, cb){\n  logger.info(src.id, 'Try to call function ' + options.keyString);\n  try{\n    let funcObj = this.getDeferHandleByKeyString(options.keyString);\n    //Push callback function to the end of args\n    let args = JSON.parse(options.args);\n    args[0]._taskoptions = {attempts: options.attempts, attempt_times: options.attempt_times};\n    args.unshift(src);\n    args.push(cb);\n    funcObj.apply(funcObj, args);\n  }\n  catch(err){\n    logger.warn(src.id, 'Start defer with keyString = ' + options.keyString + ' failed!');\n    cb(err)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/taskqueue/taskqueue.backend.js\n **/","/**\n * Backend non api functions\n */\n'use strict';\n\nimport _ from 'lodash';\nimport User from './user.model';\nimport Topic from '../topic/topic.model';\nimport utils from '../../modules/utils';\nimport inviteBusiness from '../invite/invite.backend';\nimport userEvent from './user.event';\nimport dbWp from '../../utils/dbwrapper';\nimport mongoose from 'mongoose';\nimport logger from '../../modules/logger/index';\nimport escapeStringRegexp from 'escape-string-regexp';\nimport TopicMessage from '../message/message.model';\nimport cst from '../../utils/serverConstants';\nimport esErr from '../../errors/errors';\nimport RelationGraph from '../relation/relationgraph.model';\nimport Relation from '../relation/relation.model';\nimport TopicUser from '../notify/topicuser.model';\nimport meetingConstants from '../../flux/constants/MeetingConstants';\nimport relationBk from  '../relation/relation.backend';\nimport async from 'async';\nimport PermissionGroup from '../../auth/permissiongroup.model';\nimport taskqueue from '../taskqueue/taskqueue.backend';\nimport ndutil from 'util';\nimport util from '../../utils/serverHelper';\nimport MessageConstants from '../../flux/constants/MessageConstants';\n\nvar ObjectId = mongoose.Schema.Types.ObjectId;\n// Only test git operation\n\n/**\n * CRUD\n */\nexports.create = function (user, cb) {\n\tUser.create(topic, function(err, data) {\n\t    if(err) {\n\t    \treturn cb(err);\n\t    }\n\n\t    if (!data) {\n\t      \treturn cb('not retrieving created user')\n\t    } else {\n\t    \tdata.id = data._id;\n\t    \tdelete data._id;\n\t    }\n\n\t    return cb(null, data);\n\t});\n}\n\n/**\n * First Layer\n */\n\nvar cleanUserForTopicInvite = function (invitee, cb) {\n    if (invitee.inviteeType === 'email') {\n       return cb(null, {email: invitee.invitee,  emailType: 'external'});\n    } else if (invitee.inviteeType === 'userId') {\n        dbWp.execute(User, User.findById, null, invitee.invitee, function (err, user){\n            if (err || !user) {\n                return cb(new esErr.ESErrors(esErr.ServerInternalError));\n            } else {\n                return cb(null, {email: user.username, name: user.displayname, emailType: 'internal'});\n            }\n        });\n    } else {\n        return cb(new esErr.ESErrors(esErr.BadRequestError));\n    };\n}\n\nexports.inviteUsers = function (src, data, cb) {\n\tvar processUsers = function (index, ul, callback) {\n\t\tif (!ul) {\n\t\t\treturn callback(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\n\t\tvar cur_user = ul[index];\n\t\tif (!cur_user) {\n\t\t\treturn callback(null);\n\t\t} else {\n       cleanUserForTopicInvite(cur_user, function (err, result) {\n          if (err) {\n              logger.error(src.id, 'Error cleaning user object for topicInvite with user', err, cur_user);\n              return callback(new esErr.ESErrors(esErr.BadRequestError));\n          } else {\n              logger.info(src.id, 'sending invitation email to  ' + result.email);\n              userEvent.emitUserInvited(src, {\n                title: data.topic.title,\n                user: result,\n                sender: data.creator,\n                invite: data.topicInvite\n              });\n              return processUsers(index+1, ul, callback);\n          }\n      });\n    }\n\t\t\n\t};\n\n\tprocessUsers(0, data.invitees, function(err) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, err);\n\t\t\treturn cb(err);\n\t\t}\n\n\t\treturn cb(null);\n\t});\n};\n//future change\nexports.listTopicsForMePlugin = function (src, data, cb) {\n  var query = {};\n  var options = {\n    sort: {\n      created: 1\n    },\n    limit: 20\n  };\n  dbWp.execute(Topic, Topic.paginate, src.id, query, options, function (err, topics) {\n    if (err) {\n      logger.error('there is an error', err);\n      return cb(err);\n    }\n    return cb(null,topics);\n  });\n};\n\nexports.listUsersById = function (src, data, cb) {\n  src.fn += '[listUsersById]';\n  var userList = data.userIds;\n  var skip = data.pagination.skip,\n      limit = data.pagination.limit + 1;\n  var query = {\n    $and: [\n      {'_id': {$in: userList}}\n    ]\n  };\n\n  if (data.search) {\n    var str = escapeStringRegexp(data.search);\n    query.$and.push({\n      $or: [\n        { 'name.familyname': {$regex: str, $options: 'i'} },\n        { 'name.formatted': {$regex: str, $options: 'i'} },\n        { 'name.givenname': {$regex: str, $options: 'i'} },\n        { 'name.honorific_prefix': {$regex: str, $options: 'i'} },\n        { 'name.honorific_suffix': {$regex: str, $options: 'i'} },\n        { 'name.middlename': {$regex: str, $options: 'i'} },\n        { 'name.pronunciation': {$regex: str, $options: 'i'} },\n        { displayname: {$regex: str, $options: 'i'} },\n        { username: {$regex: str, $options: 'i'} }\n      ]\n    });\n  };\n  dbWp.execute(User, User.find, src.id, query, {}, {skip: skip, limit: limit},function (err, users) {\n    if (err) {\n      logger.error(src.id, src.fn + 'Error runs query on User table', err);\n      return cb(err);\n    }\n    if (users.length === limit) {\n      return cb(null, {data: users.slice(0,-1), hasNext: true});\n    }\n    return cb(null,{data:users, hasNext: false});\n  });\n};\nexports.listRecentAccessedTopicsForUser = function (src, data, cb) {\n  listRecentAccessedTopicsByUserId(src, data, cb);\n};\n\nexports.listRecentAccessedTopicsForMe = function (src, data, cb) {\n  listRecentAccessedTopicsByUserId(src, data, cb);\n};\n\nfunction getTopicListFromTopicUserList(src, topicUserOjbs, cb){\n  let functionName = '[getTopicListFromTopicUserList] ';\n  if (topicUserOjbs.length == 0){\n    return cb(null, []);\n  }\n  \n  let inList = [for (item of topicUserOjbs) item.targetId];\n  var stack = [];\n  var roles = [];\n  var lastaccesstms = [];\n  for (var i = inList.length - 1; i >= 0; i--) {\n    var rec = {\n        \"$cond\": [\n            { \"$eq\": [ \"$_id\", inList[i] ] },\n            i\n        ]\n    };\n    var rolerec = {\n        \"$cond\": [\n            { \"$eq\": [ \"$_id\", inList[i] ] },\n            topicUserOjbs[i].role\n        ]\n    };\n    \n    var lastaccesstmrec = {\n        \"$cond\": [\n                  { \"$eq\": [ \"$_id\", inList[i] ] },\n                  topicUserOjbs[i].lastAccess\n              ]\n    };\n\n    if ( stack.length == 0 ) {\n        rec[\"$cond\"].push( i + 1);\n    } else {\n        var lval = stack.pop();\n        rec[\"$cond\"].push( lval );\n    }\n    stack.push( rec );\n    \n    if ( roles.length == 0 ) {\n      rolerec[\"$cond\"].push('');\n    } else {\n        var lval = roles.pop();\n        rolerec[\"$cond\"].push( lval );\n    }\n    roles.push( rolerec );\n    \n    if ( lastaccesstms.length == 0 ) {\n      lastaccesstmrec[\"$cond\"].push(null);\n    } else {\n        var lval = lastaccesstms.pop();\n        lastaccesstmrec[\"$cond\"].push( lval );\n    }\n    lastaccesstms.push( lastaccesstmrec );\n  } \n  \n  var pipeline = [\n      { \"$match\": { \"_id\": { \"$in\": inList } }},\n      { \"$project\": { \"weight\": stack[0], \"title\": 1, \"description\":1, \"members\": 1, \"status\": 1, \"created\": 1, \"settings\": 1, \"role\": roles[0], \"lastAccess\": lastaccesstms[0]}},\n      { \"$sort\": { \"weight\": 1 } },\n      { \"$project\": {\"title\": 1, \"description\":1, \"members\": 1, \"status\": 1, \"created\": 1, \"settings\": 1, \"role\": 1, \"lastAccess\": 1}},\n  ];\n  Topic.aggregate(pipeline, (err, topicObjs)=>{\n    if (err){\n      logger.error(src.id, \"Topic query by aggregate happen error\", err);\n      return cb(null, []);\n    }\n    return cb(null, topicObjs);\n  }); \n  \n}\n\nvar listRecentAccessedTopicsByUserId = function (src, data, cb) {\n  src.fn += '[listRecentAccessedTopicsByUserId]';\n  var skip = data.pagination.skip,\n      limit = data.pagination.limit + 1,\n      ret = {};\n  var queryCondition = {\n      userId: data.user._id,\n      userType: data.user.aType\n  };\n  var filterType = data.filterType || 'all';\n  if (filterType == 'member'){\n    queryCondition.role = {'$in': [meetingConstants.ATTENDEE_TYPES.ADMIN.type,meetingConstants.ATTENDEE_TYPES.MEMBER.type]};\n  }\n  else if (filterType == 'guest'){\n    queryCondition.role = meetingConstants.ATTENDEE_TYPES.GUEST.type;\n  }\n  \n  // TopicUser.find({userId: data.user._id, userType: data.user.aType}).skip(skip).limit(limit).sort({lastAccess: -1}).exec(function (err, results) {\n  TopicUser.find(queryCondition).skip(skip).limit(limit).sort({lastAccess: -1}).exec(function (err, results) {\n    if (err) {\n      logger.error(src.id, src.fn + 'Error runs query on TopicUser table', err);\n      return cb(err);\n    }\n//    \n    getTopicListFromTopicUserList(src, results, (err, topicObjs)=>{\n      if (topicObjs.length === limit) {\n        ret.hasNext = true;\n        topicObjs = topicObjs.slice(0, -1);\n      } else {\n        ret.hasNext = false;\n      }\n      ret.data = topicObjs;\n      return cb(null, ret);\n    });\n  });\n    \n};\n//\nexports.listTopicsForUser = function (src, data, cb) {\n  data.objId = data.user;\n  listTopicsForUserId(src, data, cb);\n};\n\nexports.listTopicsForMe = function (src, data, cb) {\n  data.objId = data.user;\n  listTopicsForUserId(src, data, cb);\n};\n\nvar listTopicsForUserId = function (src, data, cb) {\n  src.fn += '[listTopicsForUserId]';\n  let ret = {};\n  var skip = data.pagination.skip,\n      limit = data.pagination.limit + 1,\n\n      query = {\n        userId: data.user._id,\n        userType: data.user.aType\n      };\n\n  if (data.search) {\n    var str = escapeStringRegexp(data.search);\n//    query.$and.push(\n//        { title: {$regex: str, $options: 'i'} }      \n//    );\n    query.title = {$regex: str, $options: 'i'};\n  }\n\n  TopicUser.find(query).skip(skip).limit(limit).sort({title: 1}).exec(function (err, topicUserObjs) {\n    if (err) {\n      logger.error(src.id, src.fn + 'Error runs query on Topic user table', err);\n      return cb(err);\n    }\n    getTopicListFromTopicUserList(src, topicUserObjs, (err, topicObjs)=>{\n      if (topicObjs.length === limit) {\n        ret.hasNext = true;\n        topicObjs = topicObjs.slice(0, -1);\n      } else {\n        ret.hasNext = false;\n      }\n      ret.data = topicObjs;\n      return cb(null, ret);\n    });  \n  });\n};\n\nexports.searchColleagues = function(src, data, cb){\n  src.fn += '[searchColleagues]';\n  let query = [];\n  let match = {\n    $match: {\n      $and: []\n    }\n  };\n  \n  let userId = data.user._id\n  /*let tempQuery = {\n    target_id: data.user._id,\n    target_type: cst.TypeUser,\n    initiator_type: cst.TypeCompany,\n    relation_type: cst.relationEmployee\n  };*/\n  dbWp.execute(User, User.findById, src.id, userId, 'relation_graphs',(err, userObj) => {\n    if (err || (!userObj)){\n      return cb(null, []);\n    }\n    \n    let rels = [for (relationItem of userObj.relation_graphs) \n                if (relationItem.initiator_type==cst.TypeCompany && relationItem.relation_type==cst.relationEmployee) \n                relationItem.initiator_id ];\n    match.$match.$and.push({ \n      'relation_graphs.initiator_id': {$in: rels}\n    });\n    \n    if (data.search) {\n      let str = data.search;\n      match.$match.$and.push({\n        $or: [\n          /*{ 'name.familyname': {$regex: str, $options: 'i'} },\n          { 'name.formatted': {$regex: str, $options: 'i'} },\n          { 'name.givenname': {$regex: str, $options: 'i'} },\n          { 'name.honorific_prefix': {$regex: str, $options: 'i'} },\n          { 'name.honorific_suffix': {$regex: str, $options: 'i'} },\n          { 'name.middlename': {$regex: str, $options: 'i'} },\n          { 'name.pronunciation': {$regex: str, $options: 'i'} },*/\n          { displayname: {$regex: str, $options: 'i'} },\n          { username: {$regex: str, $options: 'i'} }\n        ]\n      });\n    }\n    query.push(match);\n    query.push({$limit: 5}); \n    query.push({\n      $project: {\n        _id: 1,\n        name: 1,\n        username: 1,\n        picture_url: 1,\n        displayname: 1,\n        givenname: 1\n      }\n    });\n    logger.info(src.id, '[searchColleagues] Search user by aggregate condition', query); \n    dbWp.execute(User, User.aggregate, src.id, query, function (err, users){\n      if (err){\n        logger.error(reqid, src.fn + 'Query User happen error', err)\n        return cb(null, []);\n      }\n      else{\n        return cb(null, users);\n      }\n    });\n  });\n}\n\nvar listMsgsByUserId = function(src, data, cb){\n  let functionName = '[listMsgsByUserId] '\n  let matchCondition = data.matchCondition;\n  let sort = data.sort || {_id: -1};\n  \n  if (data.page <= 1){\n    delete data.nextRefObjId;\n    delete data.prevRefObjId;\n    data.page = 1;\n  }\n  let includeEqual = data.includeEqual || false;\n  delete data.includeEqual;\n  if (data.nextRefObjId){\n    if (includeEqual){\n      matchCondition._id = {$lte: mongoose.Types.ObjectId(data.nextRefObjId)};\n    }\n    else{\n      matchCondition._id = {$lt: mongoose.Types.ObjectId(data.nextRefObjId)};\n    } \n    sort = {_id: -1};\n  }\n  else if(data.prevRefObjId){\n    if (includeEqual){\n      matchCondition._id = {$gte: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    else{\n      matchCondition._id = {$gt: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    sort = {_id: 1};\n  } \n  \n  logger.info(src.id, functionName + ' Query topic message by following matchCondition, sort, size', matchCondition, sort, data.size + 1);\n  var exeobj = TopicMessage.find(matchCondition).sort(sort).limit(data.size + 1).lean();\n  dbWp.execute(exeobj,\n    exeobj.exec,\n    src.id,\n    function(err, results){\n      if (err){\n        logger.error(src.id, functionName + ' Happen error', err.message);\n        return cb(null, {results:[]});\n      }\n      if (results.length > data.size){\n        if (data.prevRefObjId){\n          results = results.reverse();          \n          return cb(null, {results:results.slice(1, data.size + 1), havingNextPage: true});\n        }\n        return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n      }\n      else{\n        if (data.prevRefObjId){\n          results = results.reverse();        \n        }\n        return cb(null, {results:results, havingNextPage: false});\n      }\n  });\n} \n\nexports.listTasksByUserId = function(src, data, cb){\n  let functionName = '[listTasksByUserId] ';\n  logger.info(src.id, functionName + 'Query tasks by userId =' + data.sender.toString());\n  data.matchCondition = {\n    '$or': [{\"sender._id\": data.sender, \"sender.type\": cst.TypeUser}, {'content.assignees._id': data.sender}],\n    category: data.category\n  };\n  return listMsgsByUserId(src, data, cb);\n};\n\nexports.listIdeasByUserId = function(src, data, cb){\n  let functionName = '[listIdeasByUserId] ';\n  logger.info(src.id, functionName + 'Query ideas by userId =' + data.sender.toString());\n  data.matchCondition = {\n    \"sender._id\": data.sender,\n    \"sender.type\": cst.TypeUser,\n    category: data.category\n  };\n\n  return listMsgsByUserId(src, data, cb);\n};\n\nexports.listNativesByUserId = function(src, data, cb){\n  let functionName = '[listNativesByUserId] ';\n  logger.info(src.id, functionName + 'Query natives by userId =' + data.sender.toString());\n  data.matchCondition = {\n    \"sender._id\": data.sender._id,\n    \"sender.type\": data.sender.aType,\n    \"content.data.provider\": MessageConstants.DATA_PROVIDER_TYPES.NATIVE\n  };\n\n  return listMsgsByUserId(src, data, cb);\n};\n\n\nexports.listAssignedTaskByTopic = function(src, data, cb){\n  let matchCondition = {\n    \"content.assignees._id\": data.assignee,\n    category: data.category\n  };\n\n  let sort = {_id: -1};\n  if (data.page <= 1){\n    delete data.nextRefObjId;\n    delete data.prevRefObjId;\n    data.page = 1;\n  }\n  let includeEqual = data.includeEqual || false;\n  delete data.includeEqual;\n  if (data.nextRefObjId){\n    if (includeEqual){\n      matchCondition._id = {$lte: mongoose.Types.ObjectId(data.nextRefObjId)};\n    }\n    else{\n      matchCondition._id = {$lt: mongoose.Types.ObjectId(data.nextRefObjId)};\n    } \n    sort = {_id: -1};\n  }\n  else if(data.prevRefObjId){\n    if (includeEqual){\n      matchCondition._id = {$gte: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    else{\n      matchCondition._id = {$gt: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    sort = {_id: 1};\n  }\n  var exeobj = TopicMessage.find(matchCondition).sort(sort).limit(data.size + 1);\n  dbWp.execute(exeobj,\n    exeobj.exec,\n    src.id,\n    function(err, results){\n      if (err){\n        logger.error(src.id, 'listCategoryByTopic happen error', err.message);\n        return cb(null, {results:[]});\n      }\n      if (results.length > data.size){\n        if (data.prevRefObjId){\n          results = results.reverse();          \n          return cb(null, {results:results.slice(1, data.size + 1), havingNextPage: true});\n        }\n        return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n      }\n      else{\n        if (data.prevRefObjId){\n          results = results.reverse();        \n        }        \n        return cb(null, {results:results, havingNextPage: false});\n      }\n    });\n};\n\nexports.getUserPermissions = function(src, userObj, cb){\n  let query = {\n    $or:[]\n  };\n  for (let permItem of userObj.permissions){\n    query.$or.push({\"permission_name\": permItem});\n  }\n  if ( query.$or.length > 0){\n    let execObj = PermissionGroup.find(query).lean();\n    dbWp.execute(execObj, execObj.exec, src, (err, result)=>{\n      if (err){\n        logger.warn(src, 'getUserPermissions happes error', err);\n        return cb(null, []);\n      }\n      let retArray = [];\n      for (let permgp of result){\n        //retArray = _.concat(retArray, permgp.permissions);\n        for (let permItm of permgp.permissions){\n          retArray.push(permItm);\n        }\n      }\n      return cb(null, retArray);\n    });\n  }\n  else{\n    return cb(null, []);\n  }\n};\n\nvar afterInsertUpdateUser = function(src, userObj, cb){\n  logger.info(src.id, \"begin call function afterInsertUpdateUser\")\n  let tagList = [userObj.username];\n  let data = {username: userObj.username,\n              displayname: userObj.displayname};\n      \n  for (let emailItem of userObj.emails){\n    tagList.push(emailItem.value);\n    let emailParts = emailItem.value.split('@');\n    if (emailParts.length > 1){\n      tagList.push(cst.domainTagPrefix + emailParts[0]);\n    }\n  }\n  \n  tagList = Array.from(new Set(tagList));\n  \n  let savedData = {\n      destinationId: userObj._id,\n      destinationType: cst.TypeUser,\n      tags: tagList,\n      data: data\n  };\n  \n  async.waterfall([\n    (interCallback) => {\n      let queryCondition = {target_id: userObj._id,\n                            target_type: cst.TypeUser,\n                            initiator_type: cst.TypeCompany};\n      let project = 'relationdef_id initiator_id initiator_type relation_type';\n      dbWp.execute(Relation, Relation.find, src.id, queryCondition, project,(err, relations) => {\n        if (err){\n          logger.warn(src.id, 'Get list of relation of user happen error, keep orignial relation');\n          savedData.relation_graphs = userObj.relation_graphs;\n          relations = [];\n        }       \n        let add_relations = _.differenceWith(userObj.relation_graphs,\n            relations,\n            (lRelVal, rRelVal) => {return lRelVal.relationdef_id == rRelVal.relationdef_id;\n        });\n        let remove_relations = _.differenceWith(relations,\n            userObj.relation_graphs,\n            (lRelVal, rRelVal) => {return lRelVal.relationdef_id == rRelVal.relationdef_id;\n        });\n        interCallback(null, userObj, add_relations, remove_relations);\n      });\n    },\n    (userObj, add_relations, remove_relations, interCallback) => {\n      async.parallel([\n        (interCallback) => {\n          let updateCondition = {destinationId: userObj._id,\n              destinationType: cst.TypeUser};\n          dbWp.execute(RelationGraph,\n                       RelationGraph.update,\n                       src.id,\n                       updateCondition,\n                       savedData,\n                       {upsert: true},\n                       interCallback);\n        },\n        (interCallback) => {\n          var added_rels = [];\n          for (let add_rel_item of add_relations){\n            let added_rel = {\n                target_id: userObj._id,\n                target_type: cst.TypeUser,\n                initiator_id: add_rel_item.initiator_id,\n                initiator_type: add_rel_item.initiator_type,\n                relation_type: add_rel_item.relation_type,\n                relationdef_id: add_rel_item.relationdef_id\n            };\n            added_rels.push(added_rel);\n          }          \n          relationBk.addRelations(src, added_rels, interCallback);\n        },\n        (interCallback) => {\n          relationBk.delRelations(src, remove_relations, interCallback);\n        },\n      ], (err, results) => {\n        if (err){\n          logger.warn(src.id, \"happen some error when save data about relation and relationGraph\");\n        }\n        return interCallback(err, results);\n      });\n    },\n  ], (err, results) => {\n    if (err){\n      logger.warn(src.id, \"afterInsertUpdateUser happen some error\");\n    }\n    logger.info(src.id, \"End call function afterInsertUpdateUser\");\n    return cb(err, results);\n  });  \n};\n\nexports.afterInsertUpdateUser = afterInsertUpdateUser;\n\n//userEvent.onUserCreated((src, newUser) => {\n//  afterInsertUpdateUser(src, newUser, (err, result) => {});\n//});\n//\nuserEvent.onUserUpdated((src, newUser, oldUser) => {\n  let functionName = '[userEvent.onUserUpdated]';\n  if (oldUser){\n    //If username, picturefile and displayname is changed, update all cached sender info in topic message\n    let updateFields = {};\n    if (oldUser.username != newUser.username){\n      updateFields['sender.username'] = newUser.username;      \n    }\n    if (oldUser.pictureurl != newUser.pictureurl){\n      updateFields['sender.picture_url'] = newUser.picture_url;\n    }\n    if (oldUser.displayname != newUser.displayname){\n      updateFields['sender.displayname'] = newUser.displayname;\n    }\n    let data = {};\n    data.senderId = newUser._id.toString();\n    data.senderType = cst.TypeUser;\n    data.senderData = updateFields;\n    taskqueue.launchDefer(src, \n      'syncMessageSenderDefer',\n      data,\n      {defferOption: true,\n       backoff_seconds: 300,\n       attempts: 3,\n       callback:(err, result)=>{\n         if(!err){\n           logger.info(src.id, ndutil.format('%s Trigger a task to sync topicmessage sender successfully', functionName), data);\n         }\n         else{\n           logger.info(src.id, ndutil.format('%s Trigger a task to sync topicmessage sender failed', functionName), data);\n         }         \n       }\n    });\n    \n  }\n});\n//\n//userEvent.onUserDeleted((src, deletedUser) => {\n//  relationBk.deleteTargetObj(src, deletedUser, cst.TypeUser, (err, result) => {});\n//});\n\nuserEvent.onUserUpdated((src, newUser, oldUser) => {\n  return;\n  let functionName = '[userEvent.onUserUpdated]  ';\n  if (oldUser){\n    if (oldUser.username == newUser.username && oldUser.displayname == newUser.displayname){\n      return;\n    }\n    else{\n      let updateData = {\n          cachedObjId: newUser._id.toString(),\n          cachedObjType: cst.TypeUser,\n          cachedObjCompareData: newUser.username + newUser.displayname\n      };\n      taskqueue.launchDefer(src, \n        'cacheUserToTopicUserDefer',\n        data,\n        {defferOption: true,\n         backoff_seconds: 300,\n         attempts: 3,\n         //Delay 10s to execute the task, let different task with same topic can end itself.  \n         delay: 10, \n         callback:(err, result)=>{\n           if(!err){\n             logger.info(src.id, ndutil.format('%s Trigger a task to cache user information to topicUser successfully', functionName), data);\n           }\n           else{\n             logger.info(src.id, ndutil.format('%s Trigger a task to cache user information to topicUser failed', functionName), data);\n           }           \n         }\n      });\n    }\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/user/user.backend.js\n **/","/**\n * http://usejsdoc.org/\n * All authroiser will have unite interface\n * check(req, res, subject, cb)\n */\n\nimport cst from '../utils/serverConstants';\nimport esErr from  '../errors/errors';\nimport Topic from '../api/topic/topic.model';\nimport TopicInvite from '../api/topic/topicInvite.model';\nimport Message from '../api/message/message.model';\nimport permCfg from './permission-config';\nimport async from 'async';\nimport util from '../utils/serverHelper';\nimport Enroll from '../api/enroll/enroll.model';\n\nvar logger = require('../modules/logger');\n\n\nclass OAuthAuthorizer{\n    constructor(){\n      this.name = 'OAuthAutherizer';\n    }\n    \n    scopesCompareOtherScopes(userScopes, requiredScopes){\n        if (requiredScopes === undefined ||  requiredScopes === null){\n            return cst.IncludeScope;\n        }\n        if (requiredScopes && requiredScopes.length === 0){\n            return cst.NotIncludeScope;\n        }\n        else{\n            for (let scope of requiredScopes){\n                if (userScopes.indexOf(scope) < 0){\n                    logger.warn(\"scope required not matching\", scope);\n                    return cst.NotIncludeScope;\n                }\n            }\n            return cst.IncludeScope;\n        }\n    }\n    \n    check(req, res, view, cb){ \n        if (req.auth && req.auth.authenType === cst.AuthenticateTypeOAuth2){\n            if (this.scopesCompareOtherScopes(req.auth.scope, view.oauthscope) == cst.IncludeScope){\n                return cb();\n            }\n            return cb(new esErr.ESErrors(esErr.AuthorizeErrorOauth2));\n               \n        }\n        return cb();\n    }\n}\n\nvar verifyTopicCreator = function (user, topic, cb) {\n    if (!user || !topic) {\n        return cb('No user or No topic');\n    };\n    if (topic.cid.toString() === user._id.toString()) {\n\n        return cb();\n    }\n\n    return cb(new esErr.ESErrors(esErr.AuthorizeFailed))\n};\n\nvar verifyMessageCreator = function (user, message, cb) {\n    if (!user || !message) {\n        return cb('No user or No message');\n    };\n    if (message.sender && message.sender._id && message.sender._id.toString() === user._id.toString()) {\n        return cb();\n    }\n\n    return cb(new esErr.ESErrors(esErr.AuthorizeFailed))\n};\n\nclass isIdeaCreatorByParams{\n    check(req, res, view, cb){\n        if (!req.params || !req.params.ideaId) {\n            return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        var me = req.anonymousUser || req.user;\n\n        Message.findById(req.params.ideaId, function (err, message) {\n            if (err) {\n                logger.warn(req.id, 'Error find message :' + req.params.ideaId, err);\n                return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n            }\n            if (!message) {\n                logger.warn(req.id, 'Message not found : ' + req.params.ideaId);\n                return res.status(cst.HttpNotFoundStatus).json(esErr.NotExsistedError);\n            }\n            verifyMessageCreator(me, message, function (err, result) {\n                if (err) {\n                    logger.warn(req.id, 'Fail to authorize user to this message' + req.params.ideaId, err);\n                    return cb(err);\n                } else {\n                    req.message = message;\n                    req.me = me;\n                    return cb();    \n                }\n            });\n        });\n    }\n}\n\nclass isTaskCreatorByParams{\n    check(req, res, view, cb){\n        if (!req.params || !req.params.taskId) {\n            return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        var me = req.anonymousUser || req.user;\n\n        Message.findById(req.params.taskId, function (err, message) {\n            if (err) {\n                logger.warn(req.id, 'Error find message :' + req.params.taskId, err);\n                return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n            }\n            if (!message) {\n                logger.warn(req.id, 'Message not found : ' + req.params.taskId);\n                return res.status(cst.HttpNotFoundStatus).json(esErr.NotExsistedError);\n            }\n            verifyMessageCreator(me, message, function (err, result) {\n                if (err) {\n                    logger.warn(req.id, 'Fail to authorize user to this message' + req.params.taskId, err);\n                    return cb(err);\n                } else {\n                    req.message = message;\n                    req.me = me;\n                    return cb();    \n                }\n            });\n        });\n    }\n}\n\nclass isTopicCreatorByParams{\n    check(req, res, view, cb){\n        if (!req.params || !req.params.topicId) {\n            return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        var me = req.anonymousUser || req.user;\n\n        Topic.findById(req.params.topicId, function (err, topic) {\n            if (err) {\n                logger.warn(req.id, 'Error find topic :' + req.params.topicId, err);\n                return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n            }\n            if (!topic) {\n                logger.warn(req.id, 'Topic not found : ' + req.params.topicId);\n                return res.status(cst.HttpNotFoundStatus).json(esErr.NotExsistedError);\n            }\n            verifyTopicCreator(me, topic, function (err, result) {\n                if (err) {\n                    logger.warn(req.id, 'Fail to authorize user to this topic' + req.params.topicId, err);\n                    return cb(err);\n                } else {\n                    req.topic = topic;\n                    req.me = me;\n                    return cb();    \n                }\n            });\n        });\n    }\n}\n\nclass isInviteCreatorByParams{\n    check(req, res, view, cb){\n        if (!req.params || !req.params.inviteId) {\n            return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        var me = req.anonymousUser || req.user;\n\n        TopicInvite.findById(req.params.inviteId, function (err, invite) {\n            if (err) {\n                logger.warn(req.id, 'Error find invite :' + req.params.inviteId, err);\n                return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n            }\n            if (!invite) {\n                logger.warn(req.id, 'Invite not found : ' + req.params.inviteId);\n                return res.status(cst.HttpNotFoundStatus).json(esErr.NotExsistedError);\n            }\n\n            Topic.findById(invite.topicId, function (err,topic) {\n                 verifyTopicCreator(me, topic, function (err, result) {\n                    if (err) {\n                        logger.warn(req.id, 'Fail to authorize user to this invite' + req.params.inviteId, err);\n                        return cb(err);\n                    } else {\n                        req.topic = topic;\n                        req.invite = invite;\n                        req.me = me;\n                        return cb();    \n                    }\n                });\n            });\n        });\n    }\n}\n\nclass isEnrollAdmin{\n    check(req, res, view, cb){ \n        let user = req.user;\n        if (!user) {\n            return cb(new esErr.ESErrors(esErr.AuthorizeErrorDeveloperAdmin));\n        }\n        if (developerAdmins.indexOf(user.username) > -1) {\n            return cb();\n        }\n\n        return cb(new esErr.ESErrors(esErr.AuthorizeErrorDeveloperAdmin));\n    }\n}\n\nclass isApprovedAuthorizer{\n    check(req, res, view, cb){\n        const user = req.user;\n        if (!user) {\n          return cb(new esErr.ESErrors(esErr.AuthorizeErrorDeveloperAdmin));\n        }\n        const emails = user.emails.map(function (email) {\n          return email.value;\n        });\n        async.series([\n          function(callback) {\n            util.getDeveloperAdmins(function (admins) {\n              if (admins.length > 0) {\n                async.eachSeries(emails, function(email, callback) {\n                  if (util.checkItemInList(email, admins)) {\n                    return cb();\n                 }\n                 return callback();\n                }, function(err, result){\n                  return callback();\n                });\n              } else {\n                return callback();\n              }\n            });\n          },\n          function(callback) {\n            util.getEnrollAdminEmails(function (enrollAdmins) {\n              if (enrollAdmins.length > 0) {\n                async.eachSeries(emails, function(email, callback) {\n                  if (util.checkItemInList(email, enrollAdmins)) {\n                    return cb();\n                 }\n                 return callback();\n                }, function(err, result){\n                  return callback();\n                });\n              } else {\n                return callback();\n              }\n            });\n          },\n          function(callback) {\n            async.eachSeries(emails, function(email, callback) {\n               if (util.checkZangUser(email)) {\n                  return cb();\n               }\n               return callback();\n            }, function(err){\n                return callback();\n            });\n          },\n          function(callback){\n            Enroll.findOne({email: {$in: emails}}, function (err, enroll) {\n                if(err) { \n                    return cb(err);\n                }\n                if(!enroll || enroll.status !== \"approved\") { \n                    return cb(new esErr.ESErrors(esErr.AuthorizeErrorNotOnApprovedList));\n                }\n                return cb();\n            });\n          }],\n          function(err, results){\n            if (err) {\n                return callback(new esErr.ESErrors(esErr.AuthorizeErrorNotOnApprovedList));\n            }\n            return cb();\n         });\n  }\n}\n\nclass DeveloperAdminAuthorizer{\n    check(req, res, view, cb){\n        const user = req.user;\n        if (!user) {\n          return cb(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        const emails = user.emails.map(function (email) {\n          return email.value;\n        });\n        util.getDeveloperAdmins(function (admins) {\n          if (admins.length > 0) {\n            async.eachSeries(emails, function(email, callback) {\n              if (util.checkItemInList(email, admins)) {\n                return cb();\n             }\n             return callback();\n            }, function(err, result){\n              return cb(new esErr.ESErrors(esErr.AuthorizeErrorNotOnApprovedList));\n            });\n          } else {\n            return cb(new esErr.ESErrors(esErr.AuthorizeErrorNotOnApprovedList));\n          }\n        });\n    }\n}\n\nclass EnrollAdminAuthorizer{\n    check(req, res, view, cb){\n        const user = req.user;\n        if (!user) {\n          return cb(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        const emails = user.emails.map(function (email) {\n          return email.value;\n        });\n        async.series([\n          function(callback) {\n            util.getDeveloperAdmins(function (admins) {\n              if (admins.length > 0) {\n                async.eachSeries(emails, function(email, callback) {\n                  if (util.checkItemInList(email, admins)) {\n                    return cb();\n                 }\n                 return callback();\n                }, function(err, result){\n                  return callback();\n                });\n              } else {\n                return callback();\n              }\n            });\n          },\n          function(callback) {\n            util.getEnrollAdminEmails(function (enrollAdmins) {\n              if (enrollAdmins.length > 0) {\n                async.eachSeries(emails, function(email, callback) {\n                  if (util.checkItemInList(email, enrollAdmins)) {\n                    return cb();\n                 }\n                 return callback();\n                }, function(err, result){\n                  return callback();\n                });\n              } else {\n                return callback();\n              }\n            });\n          }],\n          function(err, results){\n            return callback(new esErr.ESErrors(esErr.AuthorizeErrorNotOnApprovedList));\n         });\n    }\n}\n\nclass regOnlyAuthorizer{\n  \n  check(req, res, view, cb){\n    let user = req.user;\n    if (!user) {\n      return cb(new esErr.ESErrors(esErr.AuthorizeErrorPermission));\n    } else {\n      return cb();\n    }\n  }\n}\n\n\nclass PermissionAuthorizer{\n  constructor(askPermission){\n    this.name = 'PermissionAuthorizer';\n    this.askPermission = askPermission;\n  }\n  \n  check(req, res, view, cb){\n    let user = req.anonymousUser || req.user;\n    let self = this;\n    permCfg.hasPerm(req, this.askPermission, user, null, null, (err, result)=>{\n      if (err || (!result)){\n        return cb(new esErr.ESErrors(esErr.AuthorizeErrorPermission));\n      }\n      req.relPermChecker = self;\n      return cb();\n    });\n  }\n  \n  checkRelation(req, object, objectType, cb){\n    let user = req.anonymousUser || req.user;\n    permCfg.hasPerm(req, this.askPermission, user, object, objectType, (err, result)=>{\n      if (err || (!result)){\n        return cb(new esErr.ESErrors(esErr.AuthorizeErrorPermission));\n      }\n      return cb();\n    });\n  }\n}\n\nexport default {\n    OAuthAuthorizer:OAuthAuthorizer,\n    isInviteCreatorByParams: isInviteCreatorByParams,\n    isTopicCreatorByParams: isTopicCreatorByParams,\n    isTaskCreatorByParams: isTaskCreatorByParams,\n    isIdeaCreatorByParams: isIdeaCreatorByParams,\n    DeveloperAdminAuthorizer: DeveloperAdminAuthorizer,\n    PermissionAuthorizer: PermissionAuthorizer,\n    isApprovedAuthorizer: isApprovedAuthorizer,\n    EnrollAdminAuthorizer: EnrollAdminAuthorizer,\n    regOnlyAuthorizer: regOnlyAuthorizer,\n    pm: permCfg.pm\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/authorizers.js\n **/","module.exports = require(\"passport\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport\"\n ** module id = 25\n ** module chunks = 0\n **/","import _ from 'lodash';\nimport querystring from 'querystring';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport dbWp from '../../utils/dbwrapper';\nimport TopicMessage from './message.model';\nimport User from '../user/user.model';\nimport Anonymous from '../anonymous/anonymous.model';\nimport fs from '../../modules/file';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport mongoose from 'mongoose';\nimport MessageConstants from '../../flux/constants/MessageConstants';\nimport TaskConstants from '../../flux/constants/TaskConstants';\nimport MessageEvent from './message.event';\nimport fileVmBk from '../fileviewer/fileview.backend';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config';\nimport ndutil from 'util';\nimport taskqueue from '../taskqueue/taskqueue.backend';\nimport util from '../../utils/serverHelper';\nimport Topic from '../topic/topic.model';\n\n\nfunction TransferUrlLink(src, inData){ \n  var transferedObj = {\n    provider: MessageConstants.DATA_PROVIDER_TYPES.URLLINK,\n    providerFileType: inData.providerFileType || '',\n    fileType: inData.fileType ||  '',\n    name: inData.name || undefined,\n    path: inData.path || '',\n    icon: inData.icon || '',\n    thumbnail: inData.thumbnail || '',\n    keywords: inData.keywords || [],\n    description: inData.description || '',\n    sitename: inData.sitename || '',\n    previewFile: inData.previewFile || '',\n    thumbnailFile: inData.thumbnailFile || ''\n  };\n  if (!transferedObj.path){\n    logger.error(src.id, 'The path in ' + MessageConstants.DATA_PROVIDER_TYPES.URLLINK +' Can not be null');\n    throw new esErr.ESErrors(esErr.MessageInvalidPath);\n  }\n  return transferedObj;\n}\n\nfunction TransferNativeLink(src, inData){ \n  var transferedObj = {\n    provider: MessageConstants.DATA_PROVIDER_TYPES.NATIVE,\n    providerFileType: inData.providerFileType || '',\n    fileType: inData.fileType ||  '',\n    name: inData.name || '',\n    fileId: inData.fileId || '',    \n    icon: inData.icon || '',\n    thumbnail: inData.thumbnail || '',\n    keywords: inData.keywords || [],\n    description: inData.description || '',\n    previewFile: inData.previewFile || '',\n    fileSize: inData.fileSize || 0,\n    thumbnailFile: inData.thumbnailFile || '',\n    metaData: inData.metaData,\n    pages: inData.pages,\n    convertStatus: inData.convertStatus,\n  };\n  \n  if (!transferedObj.fileId){\n    logger.error(src.id, 'The fileId not existed');\n    throw new esErr.ESErrors(esErr.MessageInvalidFileId);\n  }\n  if (!transferedObj.fileSize){\n    logger.error(src.id, 'The fileSize must be integer larger than zero');\n    throw new esErr.ESErrors(esErr.MessageInvalidFileSize);\n  }\n  return transferedObj;  \n}\n\nvar transferProviderMap = {};\ntransferProviderMap[MessageConstants.DATA_PROVIDER_TYPES.NATIVE] = TransferNativeLink;\ntransferProviderMap[MessageConstants.DATA_PROVIDER_TYPES.URLLINK] = TransferUrlLink;\n\nfunction isValidSenderType(senderType){\n  let senderTypeEnum = [cst.TypeUser, cst.TypeAnonymous];\n  if (senderTypeEnum.indexOf(senderType) < 0){\n    return false;\n  }\n  return true;\n}\n\nfunction fillContentByCategory(src, data){\n  if (data.parentMsg){\n    if ((!data.parentMsg) || (!data.parentMsg._id)){     \n      delete data.parentMsg;\n    }\n  }\n  if ((data.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA || data.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK) && (!data.parentMsg)\n      && data.content){\n    data.content.description = data.content.description || '';\n    if (MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK){\n      data.content.status = data.content.status || TaskConstants.TASK_STATUS_TYPES.PENDING.status;\n      data.content.dueDate = data.content.dueDate || Date.now();\n      data.content.assignees = data.content.assignees || [];\n    }\n    else{\n      delete data.content.status;\n      delete data.content.dueDate;\n      delete data.content.assignees;\n    }\n  }\n  else{\n    delete data.content.description;\n    delete data.content.status;\n    delete data.content.dueDate;\n    delete data.content.assignees;\n  }\n}\n\nfunction addUniqueLikeId(src, data, cb){\n  if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.LIKE &&\n      data.parentMsg && data.parentMsg._id){\n    let queryCondition = {\n        'category': MessageConstants.ACTIVITY_CATEGORY_TYPES.LIKE,\n        'parentMsg._id': data.parentMsg._id,\n        'sender._id': data.sender._id,\n        'sender.type': data.sender.type\n    };\n    data.uniqueLikeId = MessageConstants.ACTIVITY_CATEGORY_TYPES.LIKE + \n                        data.parentMsg._id.toString() +\n                        data.sender._id.toString() +\n                        data.sender.type;    \n  }\n  cb(null, data);\n}\n\nfunction beforeAddMessageHandle(src, data, cb){\n  let reqId = src.id || '';\n  if (!MessageConstants.isValidCategory(data)){\n    logger.error(src.id, 'The category is not valid');\n    return cb(new esErr.ESErrors(esErr.MessageInvalidCategory));\n  }\n  if (!isValidSenderType(data.sender.type)){\n    logger.error(src.id, 'The sender type is invalid');\n    return cb(new esErr.ESErrors(esErr.MessageNotSupportSenderType));\n  }\n  fillContentByCategory(src, data);\n  let transferdObjs = [];\n  if (data.content.data && data.content.data.length > 0){\n    for (let dataItem of data.content.data){\n      if (!dataItem.provider){\n        logger.error(src.id, 'The provider in content.data can not be null');\n        return cb(new esErr.ESErrors(esErr.MessageInvalidProvider));\n      }\n      if (dataItem.provider in transferProviderMap){\n        let transferFun = transferProviderMap[dataItem.provider];\n        try{\n          let transferObj = transferFun(src, dataItem);\n          transferdObjs.push(transferObj);\n        }\n        catch(err){\n          logger.error(src.id, err);\n          return cb(err);\n        }\n      }\n      else{\n        return cb(new esErr.ESErrors(esErr.MessageInvalidProvider));\n      }\n    }\n    data.content.data = transferdObjs;\n  }\n  return cb(null, data);\n}\n\nexports.addMessage = function(src, data, cb){\n  if (!MessageConstants.isStorableEventType(data)){\n    return cb(null, data);\n  } \n  let reqId = src.id || '';\n  delete data._id;  \n  data.created = data.created || Date.now();\n  data.modified = null;\n  if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){\n    data.modified = data.created;\n  }\n  \n  async.waterfall([\n    (interCallback) => {\n      beforeAddMessageHandle(src, data, interCallback);\n    },\n    (msgObj, interCallback) => {\n      addUniqueLikeId(src, data, interCallback);\n    },\n    (msgObj, interCallback) =>{\n      dbWp.execute(TopicMessage, TopicMessage.create, reqId, msgObj, (err, createdMessage) => {\n        if (err){\n          logger.warn(src.id, err.message);\n        }       \n        return interCallback(err, createdMessage);\n      });\n    }\n    \n  ], (err, result) => {\n    if (err){\n      logger.warn(src.id, err.message);\n    }\n    else{\n      MessageEvent.emitMessageCreated(src, result);\n    }\n    return cb(err, result);\n  });\n};\n\nfunction mergeMessage(src, oriMessage, newMessage){\n  let functionName = '[mergeMessage] ';\n  oriMessage.modified = Date.now();\n  oriMessage.content = newMessage.content;  \n}\n\nexports.updateMessage = function(src, data, cb){\n  let functionName = '[message.backend.updateMessage]'  \n  if (!MessageConstants.isStorableEventType(data)){\n    return cb(null, data);\n  } \n  let reqId = src.id || '';\n  data.created = data.created || Date.now();\n  \n  async.waterfall([\n    (interCallback) => {\n      dbWp.execute(TopicMessage, TopicMessage.findById, reqId, data._id, (err, oriMessage)=>{\n        if (data.modified && \n            Math.floor(new Date(data.modified).getTime() / 1000) <  Math.floor(oriMessage.modified.getTime() / 1000)){\n          logger.warn(src.id, functionName + 'Outdated message update for updated modified ' + Math.floor(new Date(data.modified).getTime() / 1000) + ' old modified ' + Math.floor(oriMessage.modified.getTime() / 1000))\n          return interCallback(new esErr.ESErrors(esErr.UpdateRecordWithModifiedOutdate));\n        }\n        else{\n          data.modified = Date.now();\n          return interCallback(null, oriMessage);\n        }\n      }); \n    },\n    (oriMessage, interCallback) => {\n      mergeMessage(src, oriMessage, data)\n      beforeAddMessageHandle(src, oriMessage, interCallback);\n    },    \n    (msgObj, interCallback) =>{\n      dbWp.execute(TopicMessage, TopicMessage.findOneAndUpdate, reqId, {_id: data._id}, msgObj,{new: true},(err, updatedMessage) => {\n        if (err){\n          logger.warn(src.id, err.message);\n        }\n        return interCallback(err, updatedMessage);\n      });\n    }\n    \n  ], (err, result) => {\n    if (err){\n      logger.warn(src.id, err.message);\n    }\n    else{\n      MessageEvent.emitMessageUpdated(src, result);\n    }\n    return cb(err, result);\n  });\n};\n\nexports.addMessageWhenNoId = function(src, data, cb){\n  //If the message has _id do different business process, \n  //Or else addMessage\n  logger.debug(src.id, 'addMessageWhenNoId try to save data');\n  if (data._id){\n    beforeAddMessageHandle(src, data, (err, msgObj) => {\n      if (err){\n        return cb(err);\n      }\n      cb(null, msgObj);\n    });\n  }\n  else{\n    exports.addMessage(src, data, (err, msgObj) => {\n      if (err){\n        return cb(err);\n      }\n      cb(null, msgObj);\n    });\n  }\n};\n\nfunction toDownloadableDataItem(src, dataItem, cb){  \n  var promiseArray = [];\n  if (dataItem.provider == MessageConstants.DATA_PROVIDER_TYPES.NATIVE){\n    if (dataItem.fileId){\n      let inData = {key: dataItem.fileId, name: dataItem.name};\n      let aPromise = new Promise((resolve, reject)=>{\n        fs.getDownloadSignedUrl(src, inData, (err, url) => {\n          if (err){\n            logger.error(src.id, 'Get download signed url happen error');\n            reject(new esErr.ESErrors(esErr.DownloadUrlCreateFailed));\n          }\n          else{\n            dataItem.path = url;\n            resolve(url);\n          }          \n        });\n      });\n      promiseArray.push(aPromise);\n    }\n    let thumbnailFile = dataItem.thumbnailFile\n    if(thumbnailFile){      \n      let inData = {key: thumbnailFile, name: dataItem.name};\n      let aPromise = new Promise((resolve, reject)=>{\n        fs.getDownloadSignedUrl(src, inData, (err, url) => {      \n          if (err){      \n            logger.error(src.id, 'Get download signed url happen error');\n            reject(new esErr.ESErrors(esErr.DownloadUrlCreateFailed));\n          }  \n          else{\n            dataItem.previewUrl = url;\n            dataItem.thumbnailUrl = url;\n            resolve(url);\n          }\n        });\n      });\n      promiseArray.push(aPromise);\n    }\n    else if (dataItem.previewFile){\n      let inData = {key: dataItem.previewFile, name: dataItem.name};\n      let aPromise = new Promise((resolve, reject)=>{\n        fs.getDownloadSignedUrl(src, inData, (err, url) => {      \n          if (err){      \n            logger.error(src.id, 'Get download signed url happen error');\n            reject(new esErr.ESErrors(esErr.DownloadUrlCreateFailed));\n          }  \n          else{\n            dataItem.previewUrl = url;            \n            resolve(url);\n          }\n        });\n      });\n      promiseArray.push(aPromise);\n    }\n  } \n  else if (dataItem.provider == MessageConstants.DATA_PROVIDER_TYPES.URLLINK){\n    let thumbnailFile = dataItem.thumbnailFile;\n    if(thumbnailFile){\n      if (thumbnailFile.startsWith(cst.HTTPSchema) || \n          thumbnailFile.startsWith(cst.HTTPSSchema)){\n        dataItem.previewUrl = thumbnailFile;\n        dataItem.thumbnailUrl = thumbnailFile;\n      }\n      else{\n        let inData = {key: thumbnailFile, name: dataItem.name};\n        let aPromise = new Promise((resolve, reject)=>{\n          fs.getDownloadSignedUrl(src, inData, (err, url) => {\n            if (err){      \n              logger.error(src.id, 'Get download signed url happen error');\n              reject(new esErr.ESErrors(esErr.DownloadUrlCreateFailed));\n            } \n            else{\n              dataItem.previewUrl = url;\n              dataItem.thumbnailUrl = url;\n              resolve(url);\n            }\n          });\n        });\n        promiseArray.push(aPromise);\n      }\n    }\n    else if (dataItem.previewFile){\n      if (dataItem.previewFile.startsWith(cst.HTTPSchema) || \n          dataItem.previewFile.startsWith(cst.HTTPSSchema)){\n        dataItem.previewUrl = thumbnailFile;        \n      }\n      else{\n        let inData = {key: dataItem.previewFile, name: dataItem.name};\n        let aPromise = new Promise((resolve, reject)=>{\n          fs.getDownloadSignedUrl(src, inData, (err, url) => {\n            if (err){      \n              logger.error(src.id, 'Get download signed url happen error');\n              reject(new esErr.ESErrors(esErr.DownloadUrlCreateFailed));\n            } \n            else{\n              dataItem.previewUrl = url;\n              resolve(url);\n            }\n          });\n        });\n        promiseArray.push(aPromise);\n      }\n    }\n  }\n  if (promiseArray.length){\n    Promise.all(promiseArray)\n      .then(()=>{\n        return cb(null, dataItem);\n      })\n      .catch(()=>{\n        return cb(null, dataItem);\n      })\n  }\n  else{\n    return cb(null, dataItem);\n  }\n//  if (shouldReturn){\n//    return cb(null, dataItem);\n//  }\n//  else{\n//    setTimeout(function(){\n//      return cb(null, dataItem);\n//    }, 1000);\n//  }\n}\n\nexports.toDownloadableMessage = function(src, data, cb){\n  //This function will fill download url for each message native attachment\n  let reqId = src.id || '';\n  if (data.content.data && data.content.data.length > 0){\n    async.forEach(data.content.data, (dataItem, callback) => {\n      toDownloadableDataItem(src, dataItem, (err, dataItem) => {\n        if (dataItem.previewUrl){\n          dataItem.previewUrl = dataItem.previewUrl.replace(':id', data._id);          \n        }\n        callback(err, dataItem);\n      });\n    }, (err) => {\n      return cb(err);\n    });\n  }\n  else{\n    return cb(null, data);\n  }\n};\n\nexports.toClientFormatMessage = function(src, data, cb){\n  //This function will remove _id from content.data\n  if (data.content.data && data.content.data.length > 0){ \n    for (let dataItem in data.content.data){\n      dataItem._id = undefined;\n    }\n  }\n  return  cb(null, data.toJSON());\n};\n\nfunction covertTOIsostring(data){\n  if (data.created && typeof data.created != 'string'){\n    data.created = data.created.toISOString();\n  }\n  if (data.modified && typeof data.modified != 'string'){\n    data.modified = data.modified.toISOString();\n  }\n  if (data.content && data.content.dueDate && typeof data.content.dueDate != 'string'){\n    data.content.dueDate = data.content.dueDate.toISOString();\n  }\n}\n\nexports.toDownloadableClientFormatMessage = function(src, data, cb){\n  //This function will remove _id from content.data and fill download url\n  let reqId = src.id || '';\n  if ('toJSON' in data && typeof data.toJSON == 'function'){\n    data = data.toJSON();\n  }\n  //covertTOIsostring(data);\n  if (data.content.data && data.content.data.length > 0){\n    async.forEach(data.content.data, (dataItem, callback) => {\n      toDownloadableDataItem(src, dataItem, (err, dataItem) => {\n        if(dataItem){\n          dataItem._id = undefined; \n          if (dataItem.previewUrl){\n            dataItem.previewUrl = dataItem.previewUrl.replace(':id', data._id);          \n          }\n        }\n        else{\n          logger.warn(src.id, 'toDownloadableDataItem happen error', err);\n        }\n        return callback(err, dataItem);\n      });      \n    }, (err) => {  \n      if (err){\n        return cb(err);\n      }      \n      return cb(null, data); \n    });\n  }\n  else{\n    return cb(null, data);\n  }\n};\n\nfunction addChatCount(src, msgObj, addedVal){\n  let functionName = '[addChatCount]';\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {_id: msgObj._id},\n    {$inc: {'chatCount': addedVal}},\n    (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format(\"%s Add count %d to topic message %s failed\",functionName, addedVal, msgObj._id.toString()), err);\n      }\n      else{\n        logger.info(src.id, ndutil.format(\"%s Add count %d to topic message %s successfully\",functionName, addedVal, msgObj._id.toString()), err);\n      }\n  });\n}\n\nfunction addLikeCount(src, msgObj, addedVal){\n  let functionName = '[addLikeCount]';\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {_id: msgObj._id},\n    {$inc: {'likeCount': addedVal}},\n    (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format(\"%s Add like %d to topic message %s failed\",functionName, addedVal, msgObj._id.toString()), err);\n      }\n      else{\n        logger.info(src.id, ndutil.format(\"%s Add like %d to topic message %s successfully\",functionName, addedVal, msgObj._id.toString()), err);\n      }\n  });\n}\n\n\nfunction fillParentMsgInformation(src, data, cb){\n  let functionName = '[fillParentMsgInformation]';\n  if (data.parentMsg && data.parentMsg._id){\n    let execobj = TopicMessage.findById(data.parentMsg._id, {'category':1, 'content.bodyText': 1, 'chatCount':1, 'likeCount':1});\n    logger.info(src.id, ndutil.format('%s Get title of message=%s', functionName, data.parentMsg._id.toString()));\n    dbWp.execute(execobj, execobj.exec, src.id, (err, parentMsg)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s Get title of message failed', functionName), err);\n        return cb(null, data);\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Get title of message successfully', functionName));\n        data.parentMsg.bodyText = parentMsg.content.bodyText;\n        data.parentMsg.category = parentMsg.category;\n        \n        if (parentMsg.category == MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){\n          setTimeout(function(){addChatCount(src, parentMsg, 1)}, 1000);\n        }\n        if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.LIKE){\n          setTimeout(function(){addLikeCount(src, parentMsg, 1)}, 1000);\n        }\n        return cb(null, data);\n      }\n    });    \n  }\n  else{\n    return cb(null, data);\n  }\n}\n\nexports.addMessagetoNoSenderPublicInfo = function(src, data, cb){\n  async.waterfall([\n  (InternalCallback) => {\n    fillParentMsgInformation(src, data, InternalCallback);\n  },\n  (createdMessage, InternalCallback) => {\n    exports.addMessage(src, createdMessage, InternalCallback);\n  },\n  (createdMessage, InternalCallback) => {\n      exports.toDownloadableClientFormatMessages(src, [createdMessage], InternalCallback);\n  },(results, InternalCallback) => {\n    let result = results[0];\n    //Throw event to update parentMessage if it is idea\n    if (result.parentMsg && \n        result.parentMsg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){      \n      MessageEvent.emitUpdateModifyTime(src.id, result.parentMsg._id);\n    }\n    return cb(null, result);\n  }],(err) => {\n      if(err){\n        return cb(err);\n      }    \n  });\n};\n\nexports.updateMessagetoNoSenderPublicInfo = function(src, data, cb){\n  async.waterfall([(InternalCallback) => {\n    exports.updateMessage(src, data, InternalCallback);\n  },(createdMessage, InternalCallback) => {\n      exports.toDownloadableClientFormatMessages(src, [createdMessage], InternalCallback);\n  },(results, InternalCallback) => {\n    let result = results[0];\n    //Throw event to update parentMessage if it is idea\n    if (result.parentMsg && \n        result.parentMsg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){      \n      MessageEvent.emitUpdateModifyTime(src.id, result.parentMsg._id);\n    }\n    return cb(null, result);\n  }],(err) => {\n      if(err){\n        return cb(err);\n      }    \n  });\n};\n\nexports.addMessageWhenNoIdtoNoSenderPublicInfo = function(src, data, cb){\n  async.waterfall([\n  (InternalCallback) => {\n    fillParentMsgInformation(src, data, InternalCallback);\n  },\n  (createdMessage, InternalCallback) => {\n    exports.addMessageWhenNoId(src, createdMessage, InternalCallback);\n  },(createdMessage, InternalCallback) => {\n      exports.toDownloadableClientFormatMessages(src, [createdMessage], InternalCallback);\n  },(results, InternalCallback) => {\n    let result = results[0];\n    //Throw event to update parentMessage if it is idea and data._id not existed\n    if ((!data._id) && \n        result.parentMsg && \n        result.parentMsg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){\n      MessageEvent.emitUpdateModifyTime(src.id, result.parentMsg._id);\n    }\n    return cb(null, result);\n  }],(err) => {\n      if(err){\n        return cb(err);\n      }    \n  });\n};\n\nfunction getSenderPublicInfo (src, data, callback){\n  if (data.sender.type == cst.TypeUser){\n    let userId = data.sender._id;\n    dbWp.execute(User, User.findById, src.id, userId, function(err, user) {\n      if(err || !user){\n        logger.error(src.id, 'getSenderPublicInfo in addMessagetoDownloadableClientFormatMessage failed with userid=' + userId);\n        return callback(new esErr.ESErrors(esErr.NotExsistedError));\n      } \n      data.sender.username = user.username;\n      data.sender.picture_url = user.picture_url;\n      data.sender.displayname = user.displayname;\n      return callback(null);\n    });\n  }\n  else if(data.sender.type == cst.TypeAnonymous){\n    let anonymousId = data.sender._id;\n    dbWp.execute(Anonymous, Anonymous.findById, src.id, anonymousId, function(err, anonymous) {\n      if(err || !anonymous){\n        logger.error(src.id, 'getSenderPublicInfo in addMessagetoDownloadableClientFormatMessage failed with anonymousid=' + anonymousId);\n        return callback(new esErr.ESErrors(esErr.NotExsistedError));\n      } \n      //anonymous = anonymous.toJSON();\n      data.sender.username = anonymous.username;\n      data.sender.picture_url = anonymous.picture_url;\n      data.sender.displayname = anonymous.displayname;\n      return callback(null);\n    });\n  }\n  else{\n    return callback(new esErr.ESErrors(esErr.MessageNotSupportSenderType));\n  }\n}\n\nfunction getParentMsgInfo (src, data, callback){\n  if (data.parentMsg){\n    if (data.parentMsg._id == data._id){\n      logger.error('The parent message is the message self. It is impossilbe');\n      callback(null, null);\n    }\n    else{\n      dbWp.execute(TopicMessage, TopicMessage.findById, src.id, data.parentMsg, function(err, parentMsg){\n        if (err){\n          logger.warn(src.id, 'getParentMsgInfo happen error', err);\n          return callback(err);\n        }\n        if (!parentMsg){\n          logger.warn(src.id, 'There is no message with with _id =' + data.parentMsg._id.toString());\n          return callback(new esErr.ESErrors(esErr.ParentMessageNotExsistedError));\n        }\n        exports.toDownloadableClientFormatMessages(src, [parentMsg], callback);\n      });\n    }\n  }\n  else{\n    callback(null, null);\n  }    \n}\n\nexports.addMessagetoDownloadableClientFormatMessage = function(src, data, cb){\n  async.parallel([\n    (InternalCallback) => {\n      getSenderPublicInfo(src, data, InternalCallback);\n    },\n    (InternalCallback) => {\n      exports.addMessagetoNoSenderPublicInfo(src, data, InternalCallback);\n    },\n    (InternalCallback) => {\n      getParentMsgInfo(src, data, InternalCallback);\n    }\n  ], function(err, results){\n    if (!err){\n      let sender = results[0];\n      let message = results[1];\n      let parentMsg = null;\n      if (results[2]){\n        parentMsg = results[2][0];        \n      }\n      message.sender = _.extend(message.sender, sender); \n      if (parentMsg){\n        message.parentMsg = parentMsg;       \n      }\n      //Throw event to update parentMessage if it is idea\n      if (message.parentMsg && \n          message.parentMsg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){\n        MessageEvent.emitUpdateModifyTime(src.id, message.parentMsg._id);\n      }\n      return cb(null, message);\n    }\n    logger.error(src.id, 'Call addMessagetoDownloadableClientFormatMessage failed ' + err.message);\n    return cb(err);    \n  });\n};\n\nexports.addMessageWhenNoIdtoDownloadableClientFormatMessage = function(src, data, cb){\n  async.parallel([\n    (InternalCallback) => {\n      if ((!data.sender.username) || (!data.sender.displayname) || (!data.sender.picture_url)){\n        getSenderPublicInfo(src, data, InternalCallback);\n      }\n      else{\n        return InternalCallback(null);\n      }\n    },\n    (InternalCallback) => {\n      exports.addMessageWhenNoIdtoNoSenderPublicInfo(src, data, InternalCallback);\n    },\n    (InternalCallback) => {\n      getParentMsgInfo(src, data, InternalCallback);\n    }\n  ], function(err, results){\n    if (!err){\n      let sender = results[0];\n      let message = results[1];\n      let parentMsg = null;\n      if (results[2]){\n        parentMsg = results[2][0];        \n      }\n      message.sender = _.extend(message.sender, sender); \n      if (parentMsg){\n        message.parentMsg = parentMsg;       \n      }\n      //Throw event to update parentMessage if it is idea and data._id is not existed\n      if ((!data._id_) && \n          message.parentMsg && \n          message.parentMsg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){\n        MessageEvent.emitUpdateModifyTime(src.id, message.parentMsg._id);\n      }\n      return cb(null, message);\n    }\n    logger.error(src.id, 'Call addMessageWhenNoIdtoDownloadableClientFormatMessage failed ' + err.message, err);\n    return cb(err);    \n  });\n};\n\nexports.queryByRef = function(src, data, cb){\n  let matchCondition = {topicId: data.topicId};\n  let sort = {created: -1};    \n  if (data.page <= 1){\n    delete data.nextRefObjId;\n    delete data.prevRefObjId;\n    data.page = 1;\n  }\n  let includeEqual = data.includeEqual || false;\n  delete data.includeEqual;\n  \n  \n  if (data.direction == cst.DirectionAfter){\n    if(data.refTime){\n      matchCondition.created = {$gte: new Date(data.refTime)};\n    }\n    else{\n      sort = {_id: -1};      \n    }\n  }\n  else{\n    if(data.refTime){\n      matchCondition.created = {$lte: new Date(data.refTime)};\n    }\n    else{\n      sort = {_id: -1};\n    }\n  }  \n  \n  if (data.nextRefObjId){\n    if (includeEqual){\n      matchCondition._id = {$lte: mongoose.Types.ObjectId(data.nextRefObjId)};\n    }\n    else{\n      matchCondition._id = {$lt: mongoose.Types.ObjectId(data.nextRefObjId)};\n    }\n    sort = {_id: -1};\n  }\n  else if(data.prevRefObjId){\n    if (includeEqual){\n      matchCondition._id = {$gte: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    else{\n      matchCondition._id = {$gt: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    sort = {_id: 1};\n  }  \n  \n  var exeobj = TopicMessage.find(matchCondition).sort(sort).limit(data.size + 1).lean();\n  dbWp.execute(exeobj,\n               exeobj.exec,\n               src.id, \n               function(err, results){\n    if (err){\n      logger.error(src.id, 'queryByRef happen error', err.message);\n      return cb(null, {results:[]});\n    }    \n\n    if (results.length > data.size){\n      if (data.prevRefObjId){\n        results = results.reverse();\n        return cb(null, {results:results.slice(1, data.size + 1), havingNextPage: true});\n      }\n      return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n    }\n    else{\n      if (data.prevRefObjId){\n        results = results.reverse();        \n      }\n      return cb(null, {results:results, havingNextPage: false});\n    }\n  });    \n};\n\n\nexports.listTaskByTopic = function(src, data, cb){\n  let matchCondition = {\n    topicId: data.topicId,\n    category: data.category\n  };\n  matchCondition = _.extend(matchCondition, data.filter);\n  let sort = data.order;\n  if (data.page <= 1){\n    data.page = 1;\n  }    \n  let skip = data.size * (data.page - 1);\n  var exeobj = TopicMessage.find(matchCondition).sort(sort).skip(skip).limit(data.size + 1).lean();\n  dbWp.execute(exeobj,\n    exeobj.exec,\n    src.id,\n    function(err, results){\n      if (err){\n        logger.error(src.id, 'listCategoryByTopic happen error', err.message);\n        return cb(null, {results:[]});\n      }      \n      if (results.length > data.size){\n        return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n      }\n      else{\n        return cb(null, {results:results, havingNextPage: false});\n      }\n    });\n};\n\nexports.listIdeaByTopic = function(src, data, cb){\n  let matchCondition = {\n      topicId: data.topicId,\n      category: data.category\n    };\n    matchCondition = _.extend(matchCondition, data.filter);\n    let sort = data.order;\n    if (data.page <= 1){\n      data.page = 1;\n    }    \n    let skip = data.size * (data.page - 1);\n    var exeobj = TopicMessage.find(matchCondition).sort(sort).skip(skip).limit(data.size + 1).lean();\n    dbWp.execute(exeobj,\n      exeobj.exec,\n      src.id,\n      function(err, results){\n        if (err){\n        logger.error(src.id, 'listCategoryByTopic happen error', err.message);\n          return cb(null, {results:[]});\n        }      \n        if (results.length > data.size){\n          return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n        }\n        else{\n          return cb(null, {results:results, havingNextPage: false});\n        }\n      });\n};\n\n\nexports.toDownloadableClientFormatMessages = function(src, data, cb){\n  //here data is the list of message\n  var functionName = '[toDownloadableClientFormatMessages] ';\n  var userSet = new Set();\n  var anonymousUserSet = new Set();\n  var parentMsgSet = new Set();\n  let convertedDatas = data;\n  function step1(interCallback){\n    var dataCnt = 0;\n    async.each(data, (msg, interCallback) => {\n      let msgCnt = dataCnt;\n      dataCnt += 1;\n      if (msg.sender.type == cst.TypeUser && msg.sender._id && ((!msg.sender.username) || (!msg.sender.displayname) || (!msg.sender.picture_url))){\n        userSet.add(msg.sender._id.toString());\n      }    \n      else if(msg.sender.type == cst.TypeAnonymous && msg.sender._id && ((!msg.sender.displayname) || (!msg.sender.picture_url))){\n        anonymousUserSet.add(msg.sender._id.toString());\n      }\n      if (msg.parentMsg && msg.parentMsg._id && (!msg.parentMsg.category)){\n        parentMsgSet.add(msg.parentMsg._id.toString());\n      }\n      \n      exports.toDownloadableClientFormatMessage(src, msg, (err, convertedData) => {\n        if (err){\n          return interCallback(err);\n        }\n        //convertedDatas.push(convertedData);\n        convertedDatas[msgCnt] = convertedData;\n        return interCallback();\n      });\n    }, function(err){\n      if (err){\n        logger.error(src.id, 'toDownloadableClientFormatMessages happen error', err);\n        return interCallback(err);\n      }\n      return interCallback();\n    });\n  }\n  \n  function step2(interCallback){\n    async.parallel([\n      (interCallback) => {\n        let userObjIds = [];\n        if (userSet.size === 0){\n          return interCallback(null, []);\n        }\n        for (let userItm of userSet){\n          userObjIds.push(mongoose.Types.ObjectId(userItm));\n        }\n        var exeobj = User.find({_id: {$in: userObjIds}}, {displayname: 1, picturefile:1, username: 1});\n        dbWp.execute(exeobj, exeobj.exec, src.id, interCallback);\n      },\n      (interCallback) => {\n        let anonyObjIds = [];\n        if (anonymousUserSet.size === 0){\n          return interCallback(null, []);\n        }\n        for (let anonItm of anonymousUserSet){\n          anonyObjIds.push(mongoose.Types.ObjectId(anonItm));\n        }\n        var exeobj = Anonymous.find({_id: {$in: anonyObjIds}}, {displayname: 1, picturefile:1, username: 1});\n        dbWp.execute(exeobj, exeobj.exec, src.id, interCallback);\n      },\n      (interCallback) => {\n        let parentMsgIds = [];        \n        if (parentMsgSet.size === 0){          \n          return interCallback(null, []);\n        }\n        for (let parentMsgIdsItm of parentMsgSet){\n          parentMsgIds.push(parentMsgIdsItm);\n        }   \n        var exeobj = TopicMessage.find({_id: {$in: parentMsgIds}}).lean();\n        dbWp.execute(exeobj, exeobj.exec, src.id, (err, results) => {\n          if (err){\n            logger.error(src.id, \"happen errors for get parent message\", err);\n            return interCallback(null, []);\n          }         \n          exports.toDownloadableClientFormatMessages(src, results, interCallback);\n        });\n      },\n      ], \n      (err, result) => {\n        if (err){\n          logger.error(src.id, \"toDownloadableClientFormatMessages.step2 happen error\", err);\n          return interCallback(null, convertedDatas);\n        }\n        if(result){\n          let usersDict = {};\n          let anonymousUsersDict = {};\n          let parentMsgsDict = {};\n          if (result.length > 0){\n            let users = result[0];\n            if (users.length > 0) {\n              for (let userItem of users){\n                if (userItem._id) {\n                  usersDict[userItem._id] = {displayname: userItem.displayname,\n                                             picture_url: userItem.picture_url,\n                                             username: userItem.username};    \n                }\n                setTimeout(()=>{syncMessageSenderTrigger(src, userItem, cst.TypeUser)}, 1000);\n              }   \n            }              \n          }\n          if (result.length > 1){\n            let anonymousUsers = result[1];          \n            for (let anonymousItem of anonymousUsers){\n              anonymousUsersDict[anonymousItem._id] = {displayname: anonymousItem.displayname,\n                                                       picture_url: anonymousItem.picture_url,\n                                                       username: anonymousItem.username};\n              setTimeout(()=>{syncMessageSenderTrigger(src, anonymousItem, cst.TypeAnonymous)}, 1000);\n            }\n          }\n          if (result.length > 2){\n            let parentMsgs = result[2];            \n            for (let parentMsgItem of parentMsgs){\n              parentMsgsDict[parentMsgItem._id] = parentMsgItem;\n              setTimeout(()=>{syncParentMessageTitleTrigger(src, parentMsgItem)}, 1000);\n            }\n          }\n          \n          for (let msg of convertedDatas){\n            if (msg.sender.type == cst.TypeUser &&\n                msg.sender._id in usersDict){            \n              msg.sender = _.extend(msg.sender, usersDict[msg.sender._id]);            \n            }\n            else if(msg.sender.type == cst.TypeAnonymous &&\n                msg.sender._id in anonymousUsersDict){            \n              msg.sender =  _.extend(msg.sender, anonymousUsersDict[msg.sender._id]);\n            }\n            if (msg.parentMsg && msg.parentMsg._id &&\n                msg.parentMsg._id in parentMsgsDict){\n              msg.parentMsg = parentMsgsDict[msg.parentMsg._id];\n            }\n          }\n        }\n        return interCallback(null, convertedDatas);\n      }\n    );\n  }\n  if (data.length === 0){\n    return cb(null, data);\n  }\n  async.series([\n    (interCallback) =>{\n      step1(interCallback);\n    },\n    (interCallback) =>{\n      step2(interCallback);\n    }\n  ], (err, results) => {\n    return cb(err, results[1]);\n  });\n};\n\nexports.toDownloadableClientFormatMessagesIngoreParentMsg = function(src, data, cb){\n  //here data is the list of message  \n  var userSet = new Set();\n  var anonymousUserSet = new Set();\n  let convertedDatas = [];\n  function step1(interCallback){\n    async.each(data, (msg, interCallback) => {\n      if (msg.sender.type == cst.TypeUser && msg.sender._id){\n        userSet.add(msg.sender._id.toString());\n      }    \n      else if(msg.sender.type == cst.TypeAnonymous && msg.sender._id){\n        anonymousUserSet.add(msg.sender._id.toString());\n      }      \n      exports.toDownloadableClientFormatMessage(src, msg, (err, convertedData) => {\n        if (err){\n          return interCallback(err);\n        }\n        convertedDatas.push(convertedData);\n        return interCallback();\n      });\n    }, function(err){\n      if (err){\n        logger.error(src.id, 'toDownloadableClientFormatMessagesIngoreParentMsg happen error', err);\n        return interCallback(err);\n      }\n      return interCallback();\n    });\n  }\n  \n  function step2(interCallback){\n    async.parallel([\n      (interCallback) => {\n        let userObjIds = [];\n        if (userSet.size === 0){\n          return interCallback(null, []);\n        }\n        for (let userItm of userSet){\n          userObjIds.push(mongoose.Types.ObjectId(userItm));\n        }\n        dbWp.execute(User, User.find, src.id, {_id: {$in: userObjIds}}, interCallback);\n      },\n      (interCallback) => {\n        let anonyObjIds = [];\n        if (anonymousUserSet.size === 0){\n          return interCallback(null, []);\n        }\n        for (let anonItm of anonymousUserSet){\n          anonyObjIds.push(mongoose.Types.ObjectId(anonItm));\n        }\n        dbWp.execute(Anonymous, Anonymous.find, src.id, {_id: {$in: anonyObjIds}}, interCallback);\n      },\n      ], \n      (err, result) => {      \n        if(result){\n          let usersDict = {};\n          let anonymousUsersDict = {};\n          if (result.length > 0){\n            let users = result[0];          \n            for (let userItem of users){\n              usersDict[userItem._id] = userItem.toJSON().profile;            \n            }          \n          }\n          if (result.length > 1){\n            let anonymousUsers = result[1];          \n            for (let anonymousItem of anonymousUsers){\n              let anonymous = anonymousItem.toJSON();\n              anonymousUsersDict[anonymousItem._id] = {displayname: anonymous.displayname,\n                                                       picture_url:  anonymous.picture_url,\n                                                       username: anonymous.username};\n            }\n          }\n          for (let msg of convertedDatas){\n            if (msg.sender.type == cst.TypeUser &&\n                msg.sender._id in usersDict){            \n              msg.sender = _.extend(msg.sender, usersDict[msg.sender._id]);            \n            }\n            else if(msg.sender.type == cst.TypeAnonymous &&\n                msg.sender._id in anonymousUsersDict){            \n              msg.sender =  _.extend(msg.sender, anonymousUsersDict[msg.sender._id]);\n            }\n          }\n        }\n        return interCallback(null, convertedDatas);\n      }\n    );\n  }\n  if (data.length === 0){\n    return cb(null, data);\n  }\n  async.series([\n    (interCallback) =>{\n      step1(interCallback);\n    },\n    (interCallback) =>{\n      step2(interCallback);\n    }\n  ], (err, results) => {    \n    return cb(err, results[1]);\n  });\n};\n\nexports.fillTopicTitleInMsgs = function(src, listOfMsgs, cb){\n    let functionName = '[getFillTopicTitleForMsgs] ';\n    if (listOfMsgs.length == 0){\n      return cb(null, []);\n    }    \n    let inList = [for (item of listOfMsgs) item.topicId];\n    var exeobj = Topic.find({'_id': {'$in': inList}}, {title: 1});\n    dbWp.execute(exeobj,\n        exeobj.exec,\n        src.id,\n        (err, results)=>{\n          if (err){\n            logger.error(src.id, functionName + ' Query topic title by id list happen error.', err);\n            return cb(null);\n          }\n          let topicIdObjDict = new Map();\n          for (let msgItem of listOfMsgs){\n            let topicidKey = msgItem.topicId.toString();\n            if (topicIdObjDict.has(topicidKey)){\n              msgItem.topicTitle = topicIdObjDict.get(topicidKey).title;\n            }\n            else{\n              for (let topicItem of results){\n                if (topicItem._id.toString() == topicidKey){\n                  msgItem.topicTitle = topicItem.title;\n                  topicIdObjDict.set(topicItem._id.toString(), topicItem);\n                  break;\n                }\n              }\n            }\n          }\n          return cb(null, listOfMsgs);\n    })\n}\n\nexports.getLatestMessageByParent = function(src, parentInfos, cb){\n  //Each parentInfo has following property\n  //{_id:'',  size:1}\n  //The returned of this function will have no parent message!!!\n  var parallelLastMsgsFun = function (parentInfo){\n    var innerFun = function(callback){  \n      var exeobj = TopicMessage.find({\"parentMsg._id\": parentInfo._id, \"category\": MessageConstants.ACTIVITY_CATEGORY_TYPES.CHAT}).sort({\"_id\": -1}).limit(parentInfo.size);\n      dbWp.execute(exeobj,\n                   exeobj.exec,\n                   src.id,\n                   (err, msgs) =>{\n                     if (err){\n                       logger.warn(src.id, \"getLatestMessageByParent when query last messages happen error.\",  err);\n                       return callback(null, []);\n                     }\n                     return callback(null, msgs);\n                   });\n          \n    };\n    return innerFun;\n  };\n  \n  var parallelChatMsgCountFun = function (parentInfo){\n    var innerFun = function(callback){\n      dbWp.execute(TopicMessage,\n                   TopicMessage.count,\n                   src.id,\n                   {\"parentMsg._id\": parentInfo._id, \"category\": MessageConstants.ACTIVITY_CATEGORY_TYPES.CHAT},\n                   (err, count) => {\n                     if (err){\n                       logger.warn(src.id, \"getLatestMessageByParent when query count happen error.\",  err);\n                       return callback(null, 0);\n                     }\n                     parentInfo.chatCount = count;\n                     setTimeout(()=>{syncChatCountTrigger(src, parentInfo)}, 1000);\n                     return callback(null, count);\n                   });\n    };\n    var innerFun2 = function(callback){\n      return callback(null, parentInfo.chatCount);\n    };\n    \n    if (parentInfo.chatCount === undefined){\n      return innerFun;\n    }\n    else{\n      return innerFun2;\n    }\n  };\n  \n  var parallelLikeMsgCountFun = function (parentInfo){\n    var innerFun = function(callback){\n      dbWp.execute(TopicMessage,\n                   TopicMessage.count,\n                   src.id,\n                   {\"parentMsg._id\": parentInfo._id, \"category\": MessageConstants.ACTIVITY_CATEGORY_TYPES.LIKE},\n                   (err, count) => {\n                     if (err){\n                       logger.warn(src.id, \"getLatestMessageByParent when query count happen error.\",  err);\n                       return callback(null, 0);\n                     }\n                     parentInfo.likeCount = count;\n                     setTimeout(()=>{syncLikeCountTrigger(src, parentInfo)}, 1000);\n                     return callback(null, count);\n                   });\n    };\n    var innerFun2 = function(callback){\n      return callback(null, parentInfo.likeCount);\n    };\n    if (parentInfo.likeCount === undefined){      \n      return innerFun;\n    }\n    else{\n      return innerFun2;\n    }\n  };\n  \n  let parallelFuns = [];\n  for (let parentInfoItem of parentInfos){\n    if (!parentInfoItem.size){\n      parentInfoItem.size = 1;\n    }\n    //parallelFuns.push(parallelLastMsgsFun(parentInfoItem));\n    parallelFuns.push(parallelChatMsgCountFun(parentInfoItem));\n    parallelFuns.push(parallelLikeMsgCountFun(parentInfoItem));\n  }\n  \n  async.waterfall([\n    (interCallBack) => {\n      async.parallel(parallelFuns, (err, result) => {\n        if (err){\n          logger.warn(src.id, \"getLatestMessageByParent query messages happen error.\",  err);\n          return interCallBack(null, parentInfos);\n        }\n        for (let index in parentInfos){          \n          let parentInfoItem = parentInfos[index];\n          //parentInfoItem.data = result[index * 3];\n          parentInfoItem.chatCount = result[index * 2];\n          parentInfoItem.likeCount = result[index * 2 + 1];\n        }\n        return interCallBack(null, parentInfos);\n      });\n    },\n//    (parentInfos, interCallBack) => {\n//      let msgList = [];\n//      for (let parentInfo of parentInfos){\n//        let dataItem = parentInfo.data;\n//        if (dataItem && dataItem.length > 0){\n//          msgList = msgList.concat(dataItem);\n//        }\n//      }\n//      exports.toDownloadableClientFormatMessagesIngoreParentMsg(src, msgList, (err, results) => {\n//        let resultsIterIdx = 0;\n//        for (let parentInfoItem of parentInfos){\n//          let parentInfoData = parentInfoItem.data;\n//          let datalength = parentInfoData.length;\n//          for (let dataIdx = 0; dataIdx < datalength; ++dataIdx){\n//            if (resultsIterIdx < results.length){\n//              parentInfoData[dataIdx] = results[resultsIterIdx];\n//              ++resultsIterIdx;\n//            }\n//          }\n//        }\n//        return interCallBack(err, parentInfos);\n//      });\n//    }\n    ], \n    (err, result)=>{\n      if (err){\n        logger.warn(src.id, \"getLatestMessageByParent query sender happen error.\",  err);\n      }\n      return cb(err, result);\n  });\n};\n\nvar signTokenPreviewFileUrl = function(src, data, cb){\n  let functionName = '[signTokenPreviewFileUrl] ';\n  let payload = {\n    messageId: data._id.toString(),\n    fileId: data.content.data[0].fileId,   \n  };\n  logger.info(src.id, functionName + 'Sign a one hour previous file token with payload', payload);\n  try{\n    return cb(null, jwt.sign(payload, config.secrets.session, { expiresInSeconds: 3600}));\n  }\n  catch(err){\n    logger.error(src.id, functionName + 'Sign a one hour previous file token failed', err);\n    return cb(new esErr.ESErrors(esErr.SignJWTFailed));\n  }\n};\n\nexports.getPreviewFileUrl = function(src, data, cb){\n  let functionName = '[getPreviewFileUrl] ';\n  let fileObj = data.content.data[0];\n  if (fileObj.convertStatus == cst.ConvertStatusSuccess && fileObj.pages > 0){\n    let url = src.fullurl + \"/fileviewer/index.html\";\n    logger.info(src.id, functionName + 'There exists converted result in gcs. the previous part of url='+url);\n    signTokenPreviewFileUrl(src, data, (err, token)=>{\n      if (err){\n        logger.warn(src.id, functionName + 'Sign url failed');\n        return cb(new esErr.ESErrors(esErr.GetPreviewUrlFailed));\n      }\n      else{\n        url += '?token=' + token;\n        logger.info(src.id, functionName + 'Create singed url=' + url);\n        return cb(null, url);\n      }\n    });\n    \n  }\n  else{\n    logger.warn(src.id, functionName + 'There is no converted result in gcs convertStatus=' + fileObj.convertStatus + ' pages=' + fileObj.pages);\n    return cb(new esErr.ESErrors(esErr.GetPreviewUrlFailed));\n  }\n};\n\nexports.getViewUrls = function(src, data, cb){\n  let functionName = '[getViewUrls] ';\n  logger.info(src.id, functionName + 'Get file object by messageId=' + data.messageId + ' fileId=' + data.fileId); \n  dbWp.execute(TopicMessage,\n    TopicMessage.findOne,\n    src.id,\n    {\"_id\": data.messageId, \"content.data.fileId\": data.fileId},\n    {\"content.data.$\": 1},\n    (err, result) => {\n      if (err){\n        logger.error(src.id, functionName + 'Get file object by messageId=' + data.messageId + ' fileId=' + data.fileId + ' failed', err);\n        return cb(new esErr.ESErrors(esErr.GetviewUrlsFailed));\n      }\n      if (!result){\n        logger.warn(src.id, functionName + 'Get file object by messageId=' + data.messageId + ' fileId=' + data.fileId + ' failed, no record');\n        return cb(new esErr.ESErrors(esErr.GetviewUrlsFailed));\n      }\n      let fileObj = result.content.data[0].toJSON();\n      if (fileObj.convertStatus != cst.ConvertStatusSuccess || fileObj.pages <= 0){\n        logger.warn(src.id, functionName + 'Get file object by messageId=' + data.messageId + ' fileId=' + data.fileId + ' failed, ' +\n          'For invalid fileObj convertStatus=' + fileObj.convertStatus + ' pages=' + fileObj.pages);\n        return cb(new esErr.ESErrors(esErr.GetviewUrlsFailed));\n      }\n      let pgsize = Math.min(data.offset + data.size, fileObj.pages);\n      if (pgsize === 0){\n        pgsize = fileObj.pages\n      }\n      logger.info(src.id, functionName + 'Will sign page from pagenum=' + (data.offset + 1) + 'to pagenum=' + pgsize); \n      let extname = fileVmBk.getConvertedFileExt(src, fileObj);\n      let pages = [];\n      let pageNum = data.offset;\n      async.whilst(\n        ()=>{return pageNum < pgsize;},\n        (interCallback) =>{\n          let data = {key: fileObj.fileId + '_convert/page_' + (pageNum + 1) +extname};\n          fs.getDownloadSignedUrl(src, data, (err, result)=>{\n            if (err){\n              logger.error(src.id, functionName + 'Failed to sign download url=' + data.key, err);\n              return interCallback(err, pageNum);\n            }\n            ++pageNum;\n            pages.push({page:pageNum, url: result});\n            return interCallback(null, pageNum);\n          })\n        },\n        (err, n)=>{\n          if (err){\n            logger.warn(src.id, functionName + 'Failed to get view urls messageId=' + data.messageId + ' fileId=' + data.fileId);\n            return cb(new esErr.ESErrors(esErr.GetviewUrlsFailed)); \n          }\n          logger.info(src.id, functionName + 'Successful to get view urls messageId=' + data.messageId + ' fileId=' + data.fileId);\n          return cb(null, {data:pages, totalPages: fileObj.pages});\n      });      \n    });\n};\n\n//Message events callback\nMessageEvent.onUpdateModifyTime((src, msgId) => {\n  let srcid = 'on_updatemodifytime';\n  let functionName = '[MessageEvent.onUpdateModifyTime] '\n  if (src && src.id){\n    srcid = src.id;\n  }\n  logger.info(srcid, functionName + 'Change the the modified timestamp!');\n  dbWp.execute(TopicMessage, TopicMessage.update, srcid, {_id:msgId}, {modified: Date.now()}, (err, createdMessage) => {\n    if (err){\n      logger.info(srcid, functionName + 'Change the the modified timestamp failed!');\n      logger.error(srcid, err.message);\n    }\n    else{\n      logger.info(srcid, functionName + 'Change the the modified timestamp successfully!');\n    }\n  });\n})\n\nMessageEvent.onCardDeleted(function (src, message) {\n  logger.info(src.id, 'Event started Task/Idea Deleted', message._id);\n  dbWp.execute(TopicMessage, TopicMessage.remove, src.id, {\"parentMsg._id\":message._id}, (err, removedMessage) => {\n    if (err){\n      logger.error(src.id, err);\n    }\n    logger.info(src.id, 'Comments deleted for task/idea with id : ' + message._id);\n  });\n\n});\n\nvar convertFilelistsFromMessage = function(src, msg, cb){\n  let functioName = '[convertFilelistsFromMessage] ';\n  let nativefiles = [];\n  if (msg.content && msg.content.data){\n    nativefiles = msg.content.data.filter((fileItem)=>{\n      return fileItem.provider == MessageConstants.DATA_PROVIDER_TYPES.NATIVE && ((!fileItem.convertStatus) || fileItem.convertStatus == cst.ConvertStatusNotStart);\n    });\n  }\n  logger.info(src.id, functioName + 'Get ' + nativefiles.length + 'native files');\n  async.forEachOf(nativefiles, (nativeFileItem, idx, interCallback)=>{\n    fileVmBk.convertViewFile(src, msg._id, nativeFileItem, interCallback);\n  },(err, result)=>{\n    logger.info(src.id, functioName + 'Finish trigger tasks to convert files');\n    return cb(null);\n  });\n};\n\nMessageEvent.onMessageCreated((src, newMsg)=>{\n  let functioName = '[onMessageCreated] ';\n  logger.info(src.id, functioName + 'Event try to convert native file', newMsg._id);\n  convertFilelistsFromMessage(src, newMsg, ()=>{\n    logger.info(src.id, functioName + 'Finish trigger tasks to convert files');\n  });\n});\n\nMessageEvent.onMessageUpdated((src, updateMsg)=>{\n  let functioName = '[onMessageUpdated] ';\n  logger.info(src.id, functioName + 'Event try to convert native file', updateMsg._id);\n  convertFilelistsFromMessage(src, updateMsg, ()=>{\n    logger.info(src.id, functioName + 'Finish trigger tasks to convert files');\n  });\n});\n\nfunction syncMessageSenderTrigger(src, userInfo, atype){\n  let functionName = '[syncMessageSenderTrigger]'\n  let syncdata = {};\n  syncdata.senderId = userInfo._id.toString();\n  syncdata.senderType = atype;\n  syncdata.senderData = {};\n  syncdata.senderData['sender.username'] = userInfo.username;\n  syncdata.senderData['sender.displayname'] = userInfo.displayname;\n  syncdata.senderData['sender.picture_url'] = userInfo.picture_url;\n  taskqueue.launchDefer(src, \n    'syncMessageSenderDefer',\n    syncdata,\n    {defferOption: true,\n     backoff_seconds: 300,\n     attempts: 3,\n     callback:(err, result)=>{\n       if(!err){\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync topicmessage sender successfully', functionName), syncdata);\n       }\n       else{\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync topicmessage sender failed', functionName), syncdata);\n       }\n     }\n  });\n}\n\nfunction syncParentMessageTitleTrigger(src, parentMsg){\n  let functionName = '[syncParentMessageTitleTrigger]';\n  let syncdata = {};\n  syncdata.parentMsgId = parentMsg._id.toString();\n  syncdata.parentMsgBodyText = parentMsg.content.bodyText;\n  syncdata.parentMsgCategory = parentMsg.category;\n  \n  taskqueue.launchDefer(src, \n    'syncParentMsgBodyTextDefer',\n    syncdata,\n    {defferOption: true,\n     backoff_seconds: 300,\n     attempts: 3,\n     callback:(err, result)=>{\n       if(!err){\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync parent message bodyText successfully', functionName), syncdata);\n       }\n       else{\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync parent message bodyText failed', functionName), syncdata);\n       }\n     }\n  });\n}\n\nfunction syncChatCountTrigger(src, msgObj){\n  let functionName = '[syncChatCountTrigger]';\n  let syncdata = {};\n  syncdata.messageId = msgObj._id;\n  syncdata.chatCount = msgObj.chatCount;\n  taskqueue.launchDefer(src, \n    'syncChatCountDefer',\n    syncdata,\n    {defferOption: true,\n     backoff_seconds: 300,\n     attempts: 3,\n     callback:(err, result)=>{\n       if(!err){\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync chat count successfully', functionName), syncdata);\n       }\n       else{\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync chat count failed', functionName), syncdata);\n       }\n     }\n  });\n}\n\nfunction syncLikeCountTrigger(src, msgObj){\n  let functionName = '[syncLikeCountTrigger]';\n  let syncdata = {};\n  syncdata.messageId = msgObj._id;\n  syncdata.likeCount = msgObj.likeCount;\n  taskqueue.launchDefer(src, \n    'syncLikeCountDefer',\n    syncdata,\n    {defferOption: true,\n     backoff_seconds: 300,\n     attempts: 3,\n     callback:(err, result)=>{\n       if(!err){\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync like count successfully', functionName), syncdata);\n       }\n       else{\n         logger.info(src.id, ndutil.format('%s Trigger a task to sync like count failed', functionName), syncdata);\n       }\n     }\n  });\n}\n\nfunction syncMessageSenderDefer(src, data, cb){\n  let functionName = '[syncMessageSenderDefer] ';\n  logger.info(src.id, ndutil.format('%s sync topicmessage sender info.', functionName), data);\n  let senderId = data.senderId;\n  let senderType = data.senderType;\n  let senderData = data.senderData;\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {'sender._id': senderId, 'sender.type': senderType},\n    {'$set': senderData},\n    {'multi': true},\n    (err, result)=>{      \n      if (err){\n        logger.error(src.id, ndutil.format('%s sync topicmessage sender info failed.', functionName), err);\n        return cb(new esErr.ESErrors(esErr.SyncMessageSenderFailed));\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s sync topicmessage sender info successfully.', functionName));\n        return cb(null);\n      }\n  });\n}\ntaskqueue.registerDeferHandle('syncMessageSenderDefer', syncMessageSenderDefer);\n\nfunction syncParentMsgBodyTextDefer(src, data, cb){\n  let functionName = '[syncParentMsgBodyTextDefer]';\n  logger.info(src.id, ndutil.format('%s Sync bodyText of parent message.', functionName), data);\n  let parentMsgId = data.parentMsgId;\n  let parentMsgBodyText = data.parentMsgBodyText;\n  let parentMsgCategory = data.parentMsgCategory;\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {'parentMsg._id': parentMsgId},\n    {'$set': {'parentMsg.bodyText': parentMsgBodyText, 'parentMsg.category': parentMsgCategory}},\n    {'multi': true},\n    (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s Sync title of parent message failed.', functionName), err);\n        return cb(new esErr.ESErrors(esErr.SyncParentMessageTitleFailed));\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Sync title of parent message successfully.', functionName));\n        return cb(null);\n      }\n    }\n  )\n}\ntaskqueue.registerDeferHandle('syncParentMsgBodyTextDefer', syncParentMsgBodyTextDefer);\n\nfunction syncChatCountDefer(src, data, cb){\n  let functionName = '[syncChatCountDefer]';\n  logger.info(src.id, ndutil.format('%s Sync chat counter.', functionName), data);\n  let messageId = data.messageId;\n  let chatCount = data.chatCount;\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {'_id': messageId},\n    {'$set': {'chatCount': chatCount}},\n    (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s Sync chat counter failed.', functionName), err);\n        return cb(new esErr.ESErrors(esErr.SyncParentMessageTitleFailed));\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Sync chat counter successfully.', functionName));\n        return cb(null);\n      }\n    });\n}\ntaskqueue.registerDeferHandle('syncChatCountDefer', syncChatCountDefer);\n\nfunction syncLikeCountDefer(src, data, cb){\n  let functionName = '[syncLikeCountDefer]';\n  logger.info(src.id, ndutil.format('%s Sync like counter.', functionName), data);\n  let messageId = data.messageId;\n  let likeCount = data.likeCount;\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {'_id': messageId},\n    {'$set': {'likeCount': likeCount}},\n    (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s Sync like counter failed.', functionName), err);\n        return cb(new esErr.ESErrors(esErr.SyncParentMessageTitleFailed));\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Sync like counter successfully.', functionName));\n        return cb(null);\n      }\n    });\n}\ntaskqueue.registerDeferHandle('syncLikeCountDefer', syncLikeCountDefer);\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/message/message.backend.js\n **/","var path = require('path');\nvar _ = require('lodash');\n// var version = require('../version.json');\n\nif (!process.env['NODE_ENV'] || ['logan-testing','logan-staging','logan-production'].indexOf(process.env['NODE_ENV']) < 0) {\n  process.env.NODE_ENV = 'development';\n} else {\n  process.env.NODE_ENV = process.env['NODE_ENV'];\n}\n\nfunction requiredProcessEnv(name) {\n  if(!process.env[name]) {\n    throw new Error('You must set the ' + name + ' environment variable');\n  }\n  return process.env[name];\n}\n\n// All configurations will extend these options\n// ============================================\nconst all = {\n  // Root path of server\n  root: path.normalize(__dirname + '/..'),\n  supportEmail: 'support@esna.com',\n  noreplyEmail: 'noreply@esna.com',\n  version: require('../version.json').version,\n  // Server port\n  // Server IP\n  ip: process.env.IP || '0.0.0.0',\n  // Secret for session, you will want to change this and make it an environment variable\n  secrets: {\n    session: 'logan-secret'\n  },\n  // List of user roles\n  userRoles: ['guest', 'user', 'admin'],\n\n  sendgrid: {\n      username: 'onesna',\n      password: '$esna12tech34!'\n  },\n  traceOnError: true,\n  commonSecretJwt: '6757500084'\n};\n// Export the config object based on the NODE_ENV\n// ==============================================\nmodule.exports = _.merge(\n  all,\n  require('./' + process.env.NODE_ENV + '.js') || {});\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/index.js\n **/","'use strict';\n\nimport File from './gcs';\n\nexports.getUploadSignedUrl = function (src, data, cb, expiration){\n  File.getUploadSignedUrl(src, data, cb, expiration);\n};\n\nexports.getDownloadSignedUrl = function (src, data, cb, expiration){\n  File.getDownloadSignedUrl(src, data, cb, expiration);\n};\n\nexports.getUploadPublicUrl = function (src, data, cb, expiration){\n  File.getUploadPublicUrl(src, data, cb, expiration);\n};\n\nexports.getDownloadPublicUrl = function (src, data, cb, expiration){\n  File.getDownloadPublicUrl(src, data, cb, expiration);\n};\n\nexports.copyFile = function (src, data, cb){\n  File.copyFile(src, data, cb);\n};\n\nexports.listFiles = function (src, data, cb){\n  File.listFiles(src, data, cb);\n};\n\nexports.createFileObj = function(src, data, cb){\n  File.createFileObj(src, data, cb);\n}\n\nexports.deleteFiles = function(src, data, cb){\n  File.deleteFiles(src, data, cb);\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/file/index.js\n **/","module.exports = require(\"jsonwebtoken\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jsonwebtoken\"\n ** module id = 29\n ** module chunks = 0\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\nvar config = require('../../config');\n\nvar AnonymousSchema = new Schema({\n    displayname: String,\n    username: String,\n    picturefile: String,\n    secret: String,\n    aType: {type: String, default: 'anonymous'},\n    created: {type: Date, default: Date.now}\n});\n  \n/**\n * Virtuals\n */\nAnonymousSchema.set('toJSON', {\n    virtuals: true\n});\n\nAnonymousSchema.options.toJSON = {\n    transform : function(doc, ret, options) {\n        delete ret.__v;\n        delete ret.id;\n        return ret;\n    },\n    virtuals: true\n};\nfunction rStr() { var s=Math.random().toString(36).slice(2); return s.length===16 ? s : rStr(); };\n\nAnonymousSchema.pre(\"save\", function(next) {\n   this.secret = rStr();\n   next();\n});\n\nAnonymousSchema\n.virtual('picture_url')\n.get(function() {\n    if (!this.picturefile) {\n      return 'https://www.onesna.com/norevimages/noimage.jpg';\n    }\n    if (this.picturefile.indexOf('http://') > -1 || this.picturefile.indexOf('https://') > -1) {\n      return this.picturefile;\n    }\n    return 'https://storage.googleapis.com/' + config.bucket + '/' + this.picturefile;\n});\n\nAnonymousSchema\n  .virtual('profile')\n  .get(function() {\n      return {\n          'displayname': this.displayname,\n          'username': this.username,\n          'picture_url': this.picture_url\n      };\n  });\nmodule.exports = mongoose.model('Anonymous', AnonymousSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/anonymous/anonymous.model.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction UserEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(UserEvent, EventEmitter);\n\nUserEvent.prototype.emitUserSubscribe = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('userSubscribe');\n    this.emit.apply(this, args);\n};\n\nUserEvent.prototype.onUserSubscribe = function (callback) {\n    this.on('userSubscribe', callback);\n};\n\nUserEvent.prototype.emitUserUpdated = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('userUpdated');\n    this.emit.apply(this, args);\n};\n\nUserEvent.prototype.onUserUpdated = function (callback) {\n    this.on('userUpdated', callback);\n};\n\nUserEvent.prototype.emitUserCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('userCreated');\n    this.emit.apply(this, args);\n};\n\nUserEvent.prototype.onUserCreated = function (callback) {\n    this.on('userCreated', callback);\n};\n\nUserEvent.prototype.emitUserDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('userDeleted');\n    this.emit.apply(this, args);\n};\n\nUserEvent.prototype.onUserDeleted = function (callback) {\n    this.on('userDeleted', callback);\n};\n\nUserEvent.prototype.emitUserInvited = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('userInvited');\n    this.emit.apply(this, args);\n};\n\nUserEvent.prototype.onUserInvited = function (callback) {\n    this.on('userInvited', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new UserEvent());\n    }\n};\n\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/user/user.event.js\n **/","\nvar gaConstants = {\n\tc_Topic: \"Topics\",\n\ta_newTopic: \"Create New Topic\",\n\ta_inTopicInvite: \"Member invited to Topic\",\n\ta_acceptInvite: \"Member accepted Invite\",\n\n\tc_Enroll: \"Enrolls\",\n\ta_newEnroll: \"Request for Enrollment\",\n\ta_approveEnroll: \"Approved an Enrollment\",\n\n\tc_Socket: \"Spaces\",\n\ta_onVideoEnd: \"Video Session End\",\n\ta_onVideoStart: \"Video Session Start\",\n\ta_onScreenShareStart: \"ScreenShare Session Start\",\n\ta_onScreenShareEnd: \"ScreenShare Session End\",\n\ta_joinRoom: \"Join\",\n\ta_switchTopic: \"Switch\",\n\n\t// a_onConnect: \"Connection Established\",\n\t// a_onDisconnect: \"Connection End\",\n\n\tc_Message: \"Messages\",\n\ta_sendText: \"Text Message\",\n\ta_sendTask: \"Task\",\n\ta_sendIdea: \"Idea\",\n\ta_sendMedia: \"Media\",\n\ta_sendLink: \"Link\",\n\ta_sendVideo: \"Video\",\n\ta_sendImage: \"Image\",\n\n\tc_Collaboration: \"Collaborations\",\n\ta_startVideoSession: \"Start Video Session\",\n\ta_startScreeShare: \"Start Screen Share Session\",\n\n\tc_Email: \"Emails\",\n\ta_newInviteEmail: \"Send Invite Email\",\n\ta_newEnrollEmail: \"Send Enroll Request Email\",\n\ta_EnrollApprovedEmail: \"Send Enroll Approved Email\",\n}\n\n\nexport default gaConstants;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/analytics/google/constants.js\n **/","import jwtClient from './config';\nimport logger from '../../logger';\nimport config from '../../../config';\nimport request from 'request';\nimport gaCst from './constants';\nimport MessageConstants from '../../../flux/constants/MessageConstants';\n\nvar options = {\n  url: 'https://www.google-analytics.com/collect',\n  accept: '*/*',\n  form: {\n  \tv: 1,\n  \ttid: config.googleAnalyticsId,\n  \tcid: 555\n  },\n  headers: {\n     \"Content-Type\": \"application/x-www-form-urlencoded\"\n  }\n};\n\n\nexports.postEvent = function (data) {\n\tlet postOption = options;\n\tpostOption.form.t = \"event\";\n\tpostOption.form.ec = data.category;\n\tpostOption.form.ea = data.action;\n\tpostOption.form.el = data.label;\n\tpostOption.form.ev = data.value;\n\trequest.post(options, function(err, response) {\n      if (err || response.statusCode !== 200) {\n        logger.error(err, 'Wrong response!: ');\n      // } else {\n      //   logger.info(\"ga event sent\");\n      }\n    });\n};\n\nexports.postMessageEvent = function (msg) {\n  var data = {\n    category: gaCst.c_Message,\n    label: msg.sender.type\n  };\n  if (msg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK) {\n    data.action = gaCst.a_sendTask;\n  }\n  if (msg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.CHAT) {\n    if (msg.content.data && msg.content.data.length > 0) {\n      data.action = gaCst.a_sendMedia;\n    } else {\n      data.action = gaCst.a_sendText;\n    }\n  }\n  if (msg.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA) {\n    data.action = gaCst.a_sendIdea;\n  }\n  exports.postEvent(data);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/analytics/google/index.js\n **/","'use strict';\n\nvar logger = require('../../logger');\nvar config = require('../../../config');\nvar projectId = config.projectId; // E.g. 'grape-spaceship-123'\nvar credential = {\n\t  projectId: projectId,\n\t  keyFilename: config.gcloudKey\n\t};\n\nexport default {credential: credential, bucket: config.bucket, tempExtneralBucket: config.tempExtneralBucket};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/file/gcs/config.js\n **/","module.exports = require(\"crypto\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"crypto\"\n ** module id = 35\n ** module chunks = 0\n **/","import fileViewCommon from './fileview.common';\nimport fs from '../../modules/file';\nimport gcs from 'gcloud/lib/storage';\nimport gcloudConfig from '../../modules/file/gcs/config.js';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport process from 'process';\nimport request from 'request';\nimport util from '../../utils/serverHelper';\nimport ndutil from 'util';\nimport cst from '../../utils/serverConstants';\nimport crypto from 'crypto';\nimport config from '../../config';\nimport messageEvt from '../message/message.event';\nimport cloudconvert from 'cloudconvert';\n\nvar asposeStorageName = function(){\n  if (gcloudConfig.bucket == 'onesnatesting'){\n    return \"gcs_logan_testing\";\n  }\n  else {\n    return null;\n  }\n}();\n\nvar getTempFileAcl = function(){\n  if (gcloudConfig.bucket == 'onesnatesting'){\n    return {entity: 'gcsexternaluseresna@gmail.com', role: gcs.acl.READER_ROLE};\n  }\n  else {\n    return null;\n  }\n};\n\nvar getAsposeAppSID = function(){\n  if (gcloudConfig.tempExtneralBucket == 'onesnatesting_temp_external'){\n    return 'eabc00d7-72fa-4015-b6a3-dc4b2f36da07';\n  }\n  else {\n    return null;\n  }\n};\n\nvar getAsposeAppKey = function(){\n  if (gcloudConfig.tempExtneralBucket == 'onesnatesting_temp_external'){\n    return '9d532b975fa6cfe3a35e4d7d8b26e789';\n  }\n  else {\n    return null;\n  }\n};\n\nvar asposSign = function (src, request_url, joinCharVal){\n  var functionName = '[asposSign ]';\n  var appSID = getAsposeAppSID();\n  var appKey = getAsposeAppKey();\n  if ((!appSID) || (!appKey)){\n    logger.error(src.id, functionName + 'There is no App SID or App Key of Aspose for ' + process.env.NODE_ENV);\n    throw new esErr.ESErrors(esErr.AsposeNoSIDOrKey);\n  }\n  let joinChar = '&';\n  if (joinCharVal === ''){\n    joinChar = '';\n  }\n  var unsignedURL = request_url + joinChar +\"appsid=\" + appSID;\n  var signature = crypto.createHmac('sha1', appKey)\n  .update(unsignedURL)\n  .digest('base64')\n  .replace('=', '');\n  unsignedURL = unsignedURL + \"&signature=\" + signature;\n  return unsignedURL;\n};\n\nvar getAsposeApiBaseUrl = function(){\n  return \"https://api.aspose.com/v1.1/\";\n};\n\nvar setPagesToMetaData = function(src, messageId, fileId, pages, cb){\n  let functionName = '[setPagesToMetaData] ';\n  logger.info(src.id, functionName + 'Set pages messageId=' + messageId, + ' fileId=' + fileId + ' pages=' + pages);\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {\"_id\": messageId, \"content.data.fileId\": fileId},\n    {\"$set\": {\"content.data.$.pages\": pages}},\n    (err, numAffected)=>{\n      if (!err && numAffected){\n        logger.info(src.id, functionName + 'Set pages successfully');\n        messageEvt.emitUpdateModifyTime(src, messageId);\n        return cb(null);\n      }\n      else{\n        logger.warn(src.id, functionName + 'Set pages failed', err, numAffected);\n        return cb(new esErr.ESErrors(esErr.SetPagesFailed));\n      }\n  });\n};\n\nvar setPagingToMetaData = function(src, messageId, fileId, paging, cb){\n  let functionName = '[setPagingToMetaData] ';\n  logger.info(src.id, functionName + 'Set pages messageId=' + messageId, + ' fileId=' + fileId + ' paging=' + paging);\n  dbWp.execute(TopicMessage,\n    TopicMessage.update,\n    src.id,\n    {\"_id\": messageId, \"content.data.fileId\": fileId},\n    {\"$set\": {\"content.data.$.metaData.paging\": paging}},\n    (err, numAffected)=>{\n      if (!err && numAffected){\n        logger.info(src.id, functionName + 'Set paging successfully');\n        messageEvt.emitUpdateModifyTime(src, messageId);\n        return cb(null);\n      }\n      else{\n        logger.warn(src.id, functionName + 'Set paging failed', err, numAffected);\n        return cb(new esErr.ESErrors(esErr.SetPagingFailed));\n      }\n  });\n};\n\nvar removeTempfolder = function(src, convertObj, cb){\n  let functionName = '[removeTempfolder] ';\n  logger.info(src.id, functionName + 'Will remove files in bucket=' + gcloudConfig.tempExtneralBucket + 'path=' + convertObj.fileId + '_convert/');\n  fs.deleteFiles(src, {\n    bucketName: gcloudConfig.tempExtneralBucket,\n    prefix: convertObj.fileId + '_convert/',\n  },(err, result)=>{\n    if (err){\n      logger.error(src.id, functionName + 'remove files in bucket=' + gcloudConfig.tempExtneralBucket + 'path=' + convertObj.fileId + '_convert/ failed', err);\n      return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n    }\n    logger.info(src.id, functionName + 'Will remove files in bucket=' + gcloudConfig.tempExtneralBucket + 'path=' + convertObj.fileId + '_convert/ successfully');\n    return cb(null);\n  });\n};\n\nfunction notifyClientsMessageUpdateSender(src, data){\n  let functionName = '[notifyClientsMessageUpdateSender] ';\n  var options = {\n      method:'POST',\n      url: util.getFullUrlByType(src, 'socket') + '/api/fileviewer/notify-callback',\n      headers: {\n        'Authorization': 'API_KEY ' + config.ESNA_API_KEY\n      },\n      body: data,\n      json:true\n  };\n  let topicId = data.topicId;\n  let msgId = data.payload.msgId;\n  \n  logger.info(src.id, functionName + 'Send to socket server to notify client update topic=' + topicId + 'messageId=' + msgId, options);\n  request(options, (err, response, body) =>{\n    if (err){\n      logger.error(src.id, functionName + 'Failed to notify client', err);\n    }\n    else{\n      if (response && response.statusCode == cst.HttpSuccessStatus){\n        logger.info(src.id, functionName + 'Successful to notify client');\n      }\n      else{\n        logger.info(src.id, functionName + 'Failed to notify client', body);\n      }\n    }\n  });\n}\n\nfunction notifyClientsMessageUpdate(src, convertObj){\n  let functionName = '[notifyClientsMessageUpdate] ';\n  dbWp.execute(TopicMessage,\n    TopicMessage.find,\n    src.id,\n    {'content.data.fileId': convertObj.fileId},\n    {'_id':1, 'topicId':1},\n    (err, results)=>{\n      if (err){\n        logger.error(src.id, functionName + 'Query by fildId=' + convertObj.fileId + 'happen error', err);\n        return;\n      }\n      let thumbnailInfo = thumbnailCreateInfoGetter();\n      let convertStatus = convertObj.convertedFileObj.convertStatus || 0;\n      for (let msgItem of results){\n        if (convertStatus == cst.ConvertStatusSuccess){\n          let inData = {key: convertObj.fileId +'_convert/' + thumbnailInfo.fileName, msg: msgItem};        \n          fs.getDownloadSignedUrl(src, inData, (err, url) => {\n            if (err){\n              logger.error(src.id, functionName + 'Get download url of thumbnail failed', err);\n            }\n            else{\n              logger.info(src.id, functionName + 'Get previewUrl=' + url);\n              let msgId = msgItem._id.toString();\n              let topicId = msgItem.topicId.toString();\n              let data={\n                topicId: topicId,\n                payload: {topicId: topicId, messageId: msgId, content:{data:[{\n                  fileId: convertObj.fileId,\n                  convertStatus: cst.ConvertStatusSuccess,\n                  thumbnailUrl: url,\n                }]}}\n              };\n              notifyClientsMessageUpdateSender(src, data);\n            }\n          });\n        }\n        else if(convertStatus == cst.ConvertStatusFailed){\n          let msgId = msgItem._id.toString();\n          let topicId = msgItem.topicId.toString();\n          let data={\n            topicId: topicId,\n            payload: {topicId: topicId, messageId: msgId, content:{data:[{\n              fileId: convertObj.fileId,\n              convertStatus: cst.ConvertStatusFailed,              \n            }]}}\n          };\n          notifyClientsMessageUpdateSender(src, data)\n        }\n        else if (convertStatus == cst.ConvertStatusProgressing){\n          let msgId = msgItem._id.toString();\n          let topicId = msgItem.topicId.toString();\n          let data={\n            topicId: topicId,\n            payload: {topicId: topicId, messageId: msgId, content:{data:[{\n              fileId: convertObj.fileId,\n              convertStatus: cst.ConvertStatusProgressing\n            }]}}\n          };\n          if (convertObj.convertedFileObj.pages){\n            data.payload.content.data[0].pages = convertObj.convertedFileObj.pages;\n          }\n          notifyClientsMessageUpdateSender(src, data);\n        }\n    }});\n}\n\nvar cloudconvertApiKey = function(){\n  if (gcloudConfig.bucket == 'onesnatesting'){\n    return \"OmRL2_Kxjb1M4cPSZMvkCKObjtM_UrgAUMO5Z33Ehdri1hCPZhwLTmg7PsEE3n_SY-S1XLE7mmghTQHIC2UWnQ\";\n  }\n  else if (gcloudConfig.bucket == 'onesna'){\n    return \"OmRL2_Kxjb1M4cPSZMvkCKObjtM_UrgAUMO5Z33Ehdri1hCPZhwLTmg7PsEE3n_SY-S1XLE7mmghTQHIC2UWnQ\";\n  }\n  else {\n    return null;\n  }\n}();\nvar cloudconvertProjectid = function(){\n  if (gcloudConfig.bucket == 'onesnatesting'){\n    return \"onesnatesting\";\n  }\n  else if(gcloudConfig.bucket == 'onesna'){\n    return \"esna.com:onesna-all\";\n  }\n  else {\n    return null;\n  }\n}();\n\nvar cloudconvertBucket = function(){\n  return gcloudConfig.tempExtneralBucket;\n}();\n\nvar cloudconertCredentials = function(){\n  if (gcloudConfig.bucket == 'onesnatesting'){\n    return {\"type\": \"service_account\",\n      \"project_id\": \"onesnatesting\",\n      \"private_key_id\": \"add1d17f5fda11284956bf6ea6553e10d8336cc9\",\n      \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCWMyH8pLhKzmG/\\numsWLuu8FlgWBmRseJuBnNDk4/S3GgrOWnt+qufxbMxUnYjO0YBttnx4QCOmhxb9\\n3teijpBbvM1VQUEtYs7xUwdCNV0ofnPFybJsD0v/ykHltVLRo7c0fHTbUKyugLBs\\nzgfBXS2R089kB56yoLcyPz4zvo6CYYpW3dmuF9dcvR13M5QhzsTVQxVRqUO98bk9\\nVypWxGCnnWpLEI37I1fAFaweHu+9us17+l5DXeSt1iN8OOsLQTnkdZVe/iyYKdVX\\ne44J772YsYMd/uO/CtIwhzoemZRgfdgSzB/h6oMms0AIru/XyHayZ9nppD9YMsU0\\n7zu0d+l/AgMBAAECggEAfDXa9Ghv84UK9xg9+MFit0+vFr/AiqeOyjgZ1D/jnwxN\\nRWs0V4MUfuXfcFY6zfYZBCH2eydnlA6BZ/7CSq8lGIhhMhDdyp+8zXtBNHKXEKbK\\nLRXolE5uJiFoL4Os8qs2FZSausfTlhfcTo5vgWwCBGeqSWm3xrb76PS+BuKeTZj8\\nxsaF/wnHJMAj313qsCPTh4pV3TXuYTWQIgidFvhhl72+3vcahXTDhZUAj9Kb4vIR\\nWLNPXDOVkFUtKZ10NRdxQRWY8Fb+GnDdwYjUCHWx2NLrQhkJUSpj/qiXEdtN0HUb\\nxLgy8cY/8sBdLk5q0U+Ya4BYDcPlL/FyfVIYUqG+GQKBgQDq1oWJDnDv+dnIC58y\\n+SMXknVjA4fACcJt6bHpsDTb2objgUblhDJLk2Ds9bRSoqIScGRrEUjE/z7mWAhM\\nTxlZfsqEGoUgOVnXGjnO6EGsJitdr5dghLJPtCQz0LFJrOGtg0W2jOxmoKPRZ8P3\\nF85vL4hwRRAC0odPgNegNMQ6uwKBgQCjvBdahX6GxOZEzO/UxDfR9MbIuta1z2bg\\n/jZt0tFS8tnRLOfsi++thy6wKVxAOZFz5DPnYTWPqtY5d6uY8jQsyIIjXRBSQeGR\\ngJGb6DEAmwivSWr6St1/1L8ppLzmAv5hj965SECdcUByxJd5P+C9rqzHXIu4W/B1\\ncKgZ6lbqDQKBgHwfHH9faaP9K/WG5wMbGUgpOfA2enau8dwES+vXHWkirG7s8lr3\\nL1owsGcuSrvuh7k1PG42uX6d5lH7L4+dsylRUZrXJYvtpCWEEA/jRGrH1d3zpA/4\\nswJblVLpt/rX7IQ4QQ2GmKB5wXw52yLrq0mrFvM4HYlQWwJTeCSOHzVnAoGAdamd\\nPrfgDQlCUP7U+plnY8H7eBSMZ2r8C4OjqZhuRKWwUdlrcVm+i30x1/ZhDOZR2G6N\\nviDlVLD38aRF9EtZozUUEEW4jOQ7LUyvVtKtJDpFK3IfJm7Wbh58oXh5JvHPzFyP\\nOabqiDnyjocoM0HsR2NXVozy+zFWw46JvtXgT6ECgYEA45yF6GJoJtKNFZ6ECKOn\\n/Ax3/qYLaOxolv537JR1FxxS9wW9zDnjpe3w3ua0K6xt1MXCCFuxgD473GIsX97/\\n4AqzUrnyRF+Mg7Z9sX06a2YAMfJXxSrSro2raPEQngjZp7dbsqU3+FYKYeIf6BKT\\nH2NJ2Lzwzt5WpL3mYiy5MEU=\\n-----END PRIVATE KEY-----\\n\",\n      \"client_email\": \"cloudconvertapi@onesnatesting.iam.gserviceaccount.com\",\n      \"client_id\": \"114943556601628676554\",\n      \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n      \"token_uri\": \"https://accounts.google.com/o/oauth2/token\",\n      \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n      \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/cloudconvertapi%40onesnatesting.iam.gserviceaccount.com\"\n    };\n  }\n  else if(gcloudConfig.bucket == 'onesna'){\n    return {\n      \"type\": \"service_account\",\n      \"project_id\": \"esna.com:onesna-all\",\n      \"private_key_id\": \"276c82198ae690309e2e0dfd7320c9fa6c93e503\",\n      \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDMOueHPVVYx8sR\\nmsI4CdWP/+nZ7f2NUlbqk1i1abrZvhNKRyJQVgSurxOO6XNq0EbGfOrOFJvkbyRM\\nc/1QwmFdB7Ssmqao1f1gBmtspqPQfKWsL+SsTaK7Jo6Y2+h8sNU9mLlEHTdUOLTE\\n0Kea0pxvo7znVhL3wtitNO8BqnizzmCCadHpjDfzLB9xvK+Jcvscyj58/dSDyDNa\\niIBGK1l5WiQcai9m1pr6qMcvGNKFvpt/ihPwP5QMHy6XdSkmZaeXu+UYfnruEdR+\\nrALJvxiz5THQ65WSny1RwM7tF5FnCWMW84mKaFvWUkA1zT0DSFZ7zF1KpgqQiYW/\\n+KRvjLZvAgMBAAECggEBAKWMSglySjCBI7bNgAn0zsy/YUxqglGAITxc3FeRsQi3\\n7uMS7lm4oGsJOA1sZ0Z6NiTHNX5/bi6peP8QNpK0PkAu8uHHKrlJXO3txj54hemG\\nYLVGzVJuTC7wfj6iY75PiUs49VSlaig3HzE7AeGaP3yveXz8ZLu5kfI1KlhrWxRE\\nDbPbuAYTjLQH7ht9em6/x2zYqfcdGRv5L+TpsfMvtrE78NFP3X0uCKgT4Uy07Olw\\nyECRtMmD5A90CSrZm1AMPs4CMNYl0Y2MoOfNfXL0zseBW3ijmFkpNvjHK+ULB1pE\\n4sNsygqItJSGGqQUjJwuDjcEcRpPmYWdPiuY4gNrrwECgYEA/DWo6TOgcWPiKH4T\\nKWJnXq/3TgCbc3JBKhygKY3IHHRqCWY/SfgcAJJOcS/qXvGpb4nJpDTNDTkCr1ks\\n0uFUZ/p7t4EEiGbKaPqS6aBT/m82x+c94ZvDFVxPQRVFcitjCxFWW3p39L2CJW9w\\nqLkoX8suSA+/R/OvX5egG/qIHyECgYEAz0yme5Auat4Qw3M2EqbVEdlxHwS0zQHJ\\nmHgX1uYtuFciyhhCEkM+zlhoyTlOXTn/2D1BRLZzoxX/VHnZqj7wmd8NkNcmfDet\\n5ZYvs922RPFt2F852f3UeqP5bMjFjWgKXDj3a+beYl5Tx9cnlk9a4LXi4I5D5qb/\\nQXeXtfwX848CgYAnajNljn3qepOjhGB2PTyuXY2mkQ26MwbgD+0v0UqOt9rCcUo+\\nwxmNNVAw/C4CfH3gQoZStTW+dURoJuWMZ06LmWewO+d7caT8VvySqk22G6dSAl93\\nXKJWOkDgiPR7bTBjUGhQj4kjpGIse4f9tkILBnPLKzrXgcvMgqOw+6w+QQKBgGKX\\n8C6gmpMVXx+2cidY1coRgy3fjSZcDUfJBn2dKG2ec9tuwi3xcbOudNgPu2e3qClu\\nqNZHeKQ+WBwTgCTqnoBwiAE1cwZtbPXfAn0nnAMaWMYqNFer1B0oU/8bVmo064iF\\nR5g4S9i5SFupxxhEUdLCb0+iGkVfc9PtT2isp6+dAoGBAM9uNHL0ms0HSTkUs7Mb\\nyMsQOh8bJe8vyXBmGIazg17Fj9MTPdus2sdYecN/W4NQb7II2ET60SpM+FcBn349\\nNQ0pAxGtp+8r4y5LDX7GS+gySt791UKDmT60DO+0jNMz7NHy1nml26fghaPUhv6w\\nCLLOF20/mqsQbU5Mnb4qC/R2\\n-----END PRIVATE KEY-----\\n\",\n      \"client_email\": \"cloudconvertapi@onesna-all.esna.com.iam.gserviceaccount.com\",\n      \"client_id\": \"117867548539991076540\",\n      \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n      \"token_uri\": \"https://accounts.google.com/o/oauth2/token\",\n      \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n      \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/cloudconvertapi%40onesna-all.esna.com.iam.gserviceaccount.com\"\n    };\n  }    \n  else{\n    return null;\n  }\n}();\n\nfunction fileInfoFromCloudConvert(src, format, path, cb){\n  var functionName = '[fileInfoFromCloudConvert] ';\n  var cloudconvertobj = new cloudconvert(cloudconvertApiKey);\n  logger.info(src.id, ndutil.format('%s Get file information by cloud convert. format=%s, path=%s', functionName, format, path));\n  var convertparam = {\n    \"inputformat\": format,\n    \"mode\": \"info\",\n    \"input\":{\n      \"googlecloud\": {\n        \"projectid\": cloudconvertProjectid,\n        \"bucket\": cloudconvertBucket,\n        \"credentials\": cloudconertCredentials,\n      }\n    },\n    \"file\": path,\n  };\n  var process = cloudconvertobj.convert(convertparam, function(err, result){\n    if (err){\n      logger.error(src.id, ndutil.format('%s Get file information by cloud convert failed', functionName), err, convertparam);\n      if (err && err.code === 422){\n        err = new esErr.ESErrors(esErr.TaskNoRetryError);\n      }\n      return cb(err);\n    }\n    else{\n      if (result && result.data && result.data.info && result.data.info.Pages){\n        logger.info(src.id, ndutil.format('%s Get page number = %s', functionName, result.data.info.Pages));\n        return cb(null, parseInt(result.data.info.Pages));\n      }\n      else{\n        logger.warn(src.id, ndutil.format('%s Can not get page number from file. Exist convert task', functionName));\n        return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n      }\n    }\n  });\n  \n}\n\nfunction cloudConvertConvertfile(src, inParams, progresscb, cb){\n  var functionName = '[cloudConvertConvertfile] ';\n  var cloudconvertobj = new cloudconvert(cloudconvertApiKey);\n  var processobj = null;\n  var format = inParams.format,\n      outformat = inParams.outformat, \n      path = inParams.path, \n      outpath = inParams.outpath, \n      processurl = inParams.processurl,\n      converteroptions = inParams.converteroptions;\n  if (!processurl){\n    logger.info(src.id, ndutil.format('%s Convert file %s from format=%s to path %s with format=%s.', functionName, path, format, outpath, outformat));\n    var convertparam = {\n      \"inputformat\": format,\n      \"outputformat\": outformat,\n      \"input\":{\n        \"googlecloud\": {\n          \"projectid\": cloudconvertProjectid,\n          \"bucket\": cloudconvertBucket,\n          \"credentials\": cloudconertCredentials,\n        }\n      },\n      \"file\": path,\n      \"timeout\": 0,\n      \"output\": {\n        \"googlecloud\":{\n          \"projectid\": cloudconvertProjectid,\n          \"bucket\": cloudconvertBucket,\n          \"credentials\": cloudconertCredentials,\n        }\n      },\n      \"path\": outpath\n    };\n    if (converteroptions){\n      convertparam.converteroptions = converteroptions;\n    }\n    processobj = cloudconvertobj.convert(convertparam, (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s Convert file happens error', functionName), err, convertparam);        \n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Convert file successfully %s', functionName, path));\n      }\n      if (!cloudconvertobj.convertedCallbacked){\n        if (err && err.code === 422){\n          err = new esErr.ESErrors(esErr.TaskNoRetryError);\n        }\n        cloudconvertobj.convertedCallbacked = true;\n        return cb(err, result);\n      }\n    });\n  }\n  else{\n    logger.info(src.id, ndutil.format('%s Convert file %s from format=%s to path %s with format=%s already started query status by url=%s.', functionName, path, format, outpath, outformat, processurl));\n    var Process = require('cloudconvert/lib/process');\n    processobj = new Process(cloudconvertobj);\n    processobj.url = processurl;\n    processobj.wait((err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s Convert file happens error', functionName), err);\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Convert file successfully %s', functionName, processobj.url));\n      }\n      if (!processobj.convertedCallbacked){   \n        if (err && err.code === 422){\n          err = new esErr.ESErrors(esErr.TaskNoRetryError);\n        }\n        processobj.convertedCallbacked = true;\n        return cb(err, result);\n      }      \n    });\n  }\n  processobj.on('progress', (err, result)=>{\n    return progresscb(err, result);\n  });\n  return processobj;\n}\n\nfunction initilizeConvertingProcess(src, data, cb){\n  let functionName = '[initilizeConvertingProcess] ';\n  let convertObj = data.convertObj;\n  let oriDocument = data.oriDocument || 'oriDocument';\n  let endRequestForRequestEndSoon = false;\n  async.waterfall([\n    //Query file information from database\n    (interCallback)=>{\n      logger.info(src.id, ndutil.format(functionName + 'Get file object from message by messageId=%s fileId=%s.', convertObj.messageId, convertObj.fileId));\n      dbWp.execute(TopicMessage,\n          TopicMessage.findOne,\n          src.id,\n          {'_id': convertObj.messageId,\n           'content.data.fileId':convertObj.fileId},\n           {\"content.data.$\": 1},\n          (err, msgObj)=>{\n            if (!err && msgObj){\n              logger.info(src.id, ndutil.format(functionName + 'Get file object from message by messageId=%s fileId=%s successfully.', convertObj.messageId, convertObj.fileId));\n              return interCallback(err, msgObj.content.data[0].toJSON());\n            }\n            logger.info(src.id, ndutil.format(functionName + 'Get file object from message by messageId=%s fileId=%s failed.', convertObj.messageId, convertObj.fileId), err);\n            return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n          });\n    },\n    //copy the file to that folder\n    (fileObj, interCallback) => {\n      if (fileObj.convertStatus == cst.ConvertStatusSuccess || fileObj.convertStatus == cst.ConvertStatusFailed){\n         logger.info(src.id, functionName + \"The file already converted before with status \", fileObj.convertStatus)\n         return interCallback(new esErr.ESErrors(esErr.TaskqueueEndBeforeTimout));\n      }\n      convertObj.convertedFileObj = fileObj;\n      if (fileObj.pages){\n        logger.info(src.id, functionName + 'The file already copied');\n        return interCallback(null, fileObj);\n      }\n      logger.info(src.id, functionName + 'Copy file to temp convert folder with bucket=' + gcloudConfig.tempExtneralBucket + ' Folder=logan/' + convertObj.fileId + '_convert/');\n      fs.copyFile(src, \n        {\n          srcBucketName: gcloudConfig.bucket,\n          srcFileName: convertObj.fileId,\n          destBucketName: gcloudConfig.tempExtneralBucket,\n          destFileName: convertObj.fileId + '_convert/' + oriDocument,\n        },\n        (err, result)=>{\n          if (err){\n            logger.warn(src.id, functionName + 'Copy file failed', err);\n          }\n          else{\n            logger.info(src.id, functionName + 'Copy file successfully');\n          }\n          return interCallback(err, fileObj);\n      });\n    },\n  ],(err, result)=>{\n    if (endRequestForRequestEndSoon){\n      fileViewCommon.endRequestAndLauchAnotherDefer(src, convertObj, (err)=>{\n        return cb(err);\n      });\n    }\n    else{\n      return cb(err, result);\n    }\n  });\n}\n\nfunction cloudConvertPdftoSvg(src, data, cb)\n{\n  let functionName = '[cloudConvertPdftoSvg] ';\n  let convertObj = data.convertObj;\n  let fileObj = data.fileObj;\n  let oriDocument = data.oriDocument || ('oridocument' + '.pdf');\n  let endRequestForRequestEndSoon = false;\n  async.waterfall([\n    //get the page number of the slides\n    (interCallback)=>{\n      if (fileObj.pages){\n        logger.info(src.id, functionName + 'The slides file already get page number before. pages=' + fileObj.pages);\n        return interCallback(null, fileObj); \n      }\n      fileInfoFromCloudConvert(src, \n        'pdf',\n        'logan/' + convertObj.fileId + '_convert'+'/' + oriDocument,\n        (err, pages) => {\n          if (err){\n            if (err.code==esErr.TaskNoRetryError){\n              return interCallback(err);\n            }           \n            else{\n              logger.warn(src.id, ndutil.format('%s Get page from cloudconvert happen error. Try later', functionName));\n              return interCallback(esErr.FileConvertFailed);\n            }\n          }\n          else{\n            setPagesToMetaData(src, convertObj.messageId, convertObj.fileId, pages, (err, result)=>{\n              if (err){\n                logger.error(src.id, functionName + 'Set page to file failed', err);\n                return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n              else{\n                logger.info(src.id, functionName + 'Set page to file successfully');\n                fileObj.pages = pages;\n                fileObj.convertStatus = cst.ConvertStatusProgressing;\n                notifyClientsMessageUpdate(src, convertObj);\n                return interCallback(null, fileObj);\n              }\n            });\n          }\n      });\n    },\n    //Use cloud convert api to split pdf file to svg files\n    (fileObj, interCallback) => {\n      logger.info(src.id, ndutil.format('%s Convert file from pdf to svg',  functionName));\n      let options = {\n        format: 'pdf',\n        outformat: 'svg',\n        path: 'logan/' + convertObj.fileId + '_convert'+'/' + oriDocument,\n        outpath: 'logan/' + convertObj.fileId + '_convert'+'/',\n        processurl: convertObj.extraData.pdfToSvgProcessurl,\n        \n      };\n      if (data.pdftosvgConverteroptions){\n        options.converteroptions = data.pdftosvgConverteroptions; \n      }\n      let processobj = cloudConvertConvertfile(src,\n        options,\n        (err, result)=>{\n          if (util.requestWillEndSoon(src)){\n            logger.info(src.id, 'This request will end soon, create another taskqueue to continue working');\n            endRequestForRequestEndSoon = true;\n            return interCallback(new esErr.ESErrors(esErr.TaskqueueEndBeforeTimout));\n          }\n        },\n        (err, result)=>{\n          delete convertObj.extraData.pdfToSvgProcessurl;\n          if(err){\n            logger.warn(src.id, functionName + 'Convert pdf to svg happen error', err);\n            if (err.code==esErr.TaskNoRetryError){\n              return interCallback(err);\n            }           \n            else{\n              return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n            }\n          }\n          else{\n            logger.info(src.id, functionName + 'Convert pdf to svg successfully');\n            return interCallback(null, fileObj);\n          }\n        });\n      \n      if (processobj && processobj.url && (!convertObj.extraData.pdfToSvgProcessurl)){\n        convertObj.extraData.pdfToSvgProcessurl = processobj.url;\n      }\n    },\n  ],(err, result)=>{\n    if (endRequestForRequestEndSoon){\n      fileViewCommon.endRequestAndLauchAnotherDefer(src, convertObj, (err)=>{\n        return cb(err);\n      });\n    }\n    else{\n      return cb(err, result);\n    }\n  });\n}\n\nvar thumbnailCreateInfoGetter = function(){\n  return {\n    fileName: 'thumbnail.jpg',\n    outformat: 'jpg',\n    contentType: 'image/jpeg'\n  };\n};\n\nfunction convertPdfToThumbnail(src, data, cb){\n  let functionName = '[convertPdfToThumbnail] ';\n  let convertObj = data.convertObj;\n  let oriDocument = data.oriDocument || ('oridocument' + '.pdf');\n  let thumbnaulInfo = thumbnailCreateInfoGetter();\n  let fileObj = data.fileObj;\n  let dstFile = 'logan/' + convertObj.fileId + '_convert'+ '/' + thumbnaulInfo.fileName;\n  let srcFile = 'logan/' + convertObj.fileId + '_convert'+'/' + oriDocument;\n  let options = {\n    format: 'pdf',\n    outformat: thumbnaulInfo.outformat,\n    path: srcFile,\n    outpath: dstFile,\n    converteroptions: {\n      \"resize\": \"1000x1000\",\n      \"resizeenlarge\": true,\n      \"page_range\": \"0-0\"\n    }\n  };\n  logger.info(src.id, functionName + 'Will convert pdf page 1 to jpeg file with options', options);\n  cloudConvertConvertfile(src,\n    options,\n    (err, result)=>{},\n    (err, result)=>{\n      if(err){\n        logger.warn(src.id, functionName + 'Convert pdf page 1 to jpeg happen error', err);\n        if (err.code==esErr.TaskNoRetryError){\n          return interCallback(err);\n        }        \n        else{\n          return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n        }\n      }\n      else{\n        logger.info(src.id, functionName + 'Convert pdf page 1 to jpeg successfully');\n        return cb(err, fileObj);\n      }\n  });\n}\n\nfunction copyBackRealFolder(src, data, cb){\n  let functionName = '[copyBackRealFolder] '\n  let convertObj = data.convertObj;\n  let fileObj = data.fileObj;\n  let oriDocument = data.oriDocument || 'oridocument';\n  \n  logger.info(src.id, functionName + 'List all svg files from converted folder');\n  let filePrefix = oriDocument + '_';\n  if (fileObj.pages == 1 && (convertObj instanceof cloudConvertToSvgFileView)){\n    filePrefix = oriDocument + '.' + convertObj.outformat;\n  }\n  fs.listFiles(src,\n      {bucketName: gcloudConfig.tempExtneralBucket,\n       prefix: convertObj.fileId + '_convert/' + filePrefix,\n  },(err, results)=>{\n    logger.info(src.id, functionName + 'List all svg files from converted folder with files number=' + results.length);\n    if (results.length < fileObj.pages){\n      logger.warn(src.id, functionName + 'Happen some errors for list pages. pagenumber should be ' + fileObj.pages);      \n      return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n    }\n    async.forEachOf(results, (aSrcFile, idx, interCallback)=>{\n      let cutPosString = 'logan/';\n      let cutPos = aSrcFile.metadata.name.indexOf(cutPosString);\n      let path = null;\n      if (cutPos >= 0){\n        path = aSrcFile.metadata.name.substring(cutPos + cutPosString.length);\n      }\n      else{\n        logger.warn(src.id, functionName + 'Failed to get path from name=' + aSrcFile.metadata.name);\n      }\n      if (path){\n        path = path.replace(filePrefix, 'page_');\n        path = path.replace('page_0', 'page_');\n        if (path.endsWith('page_')){\n          path = path + '1' + '.' + convertObj.outformat;          \n        }\n        \n        logger.info(src.id, functionName + 'Will copy file to bucket=' + gcloudConfig.bucket + ' path='+path);\n        fs.createFileObj(src,\n            {bucketName: gcloudConfig.bucket,\n             path: path\n        },(err, destFileObj) => {\n          aSrcFile.copy(destFileObj, (err, result)=>{\n            if (err){\n              logger.warn(src.id, functionName + 'Copy file failed', err);\n              return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n            }\n            result.setMetadata({contentType: 'image/svg+xml'}, (err, apiResponse)=>{\n              if (err){\n                logger.error(src.id, functionName + 'Set mimetype image/svg+xml failed', err);\n                return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n              else{\n                return interCallback(null);\n              }\n            });\n          });\n        });\n      }\n      else{\n        return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n      }\n    },(err)=>{\n      if (err){\n        logger.warn(src.id, functionName + 'Copy converted file back to real folder happen error', err);\n      }\n      else{\n        logger.info(src.id, functionName + 'Copy converted file back to real folder successfully');\n      }\n      return cb(err, fileObj);\n    });\n  });\n}\n\nfunction copyThumbnailRealFolder(src, data, cb){\n  let functionName = '[copyThumbnailRealFolder] ';\n  let convertObj = data.convertObj;\n  let fileObj = data.fileObj;\n  let thumbnailInfo = thumbnailCreateInfoGetter();\n  let fileName = data.thumbnailfileName || thumbnailInfo.fileName;\n  fs.listFiles(src,\n      {bucketName: gcloudConfig.tempExtneralBucket,\n       prefix: convertObj.fileId + '_convert/' + fileName,\n  },(err, results)=>{\n    if (results.length < 1){\n      logger.warn(src.id, functionName + 'There is no thumbnail of ', convertObj.fileId + '_convert/' + fileName);      \n      return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n    }\n    let aSrcFile = results[0];\n    fs.createFileObj(src,\n        {bucketName: gcloudConfig.bucket,\n         path: convertObj.fileId + '_convert/' + thumbnailInfo.fileName\n    },(err, destFileObj) => {\n      aSrcFile.copy(destFileObj, (err, result)=>{\n        if (err){\n          logger.warn(src.id, functionName + 'Copy file failed', err);\n          return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n        }\n        result.setMetadata({contentType: thumbnailInfo.contentType}, (err, apiResponse)=>{\n          if (err){\n            logger.error(src.id, functionName + 'Set mimetype ' + thumbnailInfo.contentType + ' failed', err);\n            return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n          }\n          else{\n            return cb(null, fileObj);\n          }\n        });\n      });\n    });\n  });\n}\n\nfunction cleanWork(src, data, cb){\n  let functionName = '[cleanWork] ';\n  let convertObj = data.convertObj;\n  logger.info(src.id, functionName + 'Begin do clean work');\n  let thumbnailInfo = thumbnailCreateInfoGetter();\n  async.waterfall([\n  (interCallback)=>{\n    if(convertObj.convertedFileObj){\n      let convertStatus = convertObj.convertedFileObj.convertStatus || 0;\n      if (convertStatus == cst.ConvertStatusSuccess || convertStatus == cst.ConvertStatusFailed){\n        logger.info(src.id, functionName + 'Update all files in topic message with fileId=' + convertObj.fileId + ' with status=' + convertStatus);\n        dbWp.execute(TopicMessage,\n          TopicMessage.update,\n          src.id,\n          {'content.data.fileId': convertObj.fileId},\n          {'$set': {\n                   'content.data.$.convertStatus': convertStatus,\n                   'content.data.$.thumbnailFile': (convertStatus==cst.ConvertStatusSuccess) ? convertObj.fileId +'_convert/' + thumbnailInfo.fileName : '',\n                   'modified': Date.now()}},\n          {multi: true, new: true},\n          (err, updateResults) => {\n            if (err){\n              logger.error(src.id, functionName + 'Update all files with same fileId failed', err);\n              return interCallback(new esErr.ESErrors(esErr.ConvertFileCleanWorkFailed));\n            }\n            else{\n              notifyClientsMessageUpdate(src, convertObj);\n            }\n        });\n      }\n    }\n    else{\n      logger.warn(src.id, functionName + 'There is no convertedFileObj in convertObj!!!');\n    }\n    return interCallback(null);\n  },\n  (interCallback)=>{\n    removeTempfolder(src, convertObj, (err)=>{\n      if (err){\n        logger.warn(src.id, functionName + 'Remove temp folder failed', err);\n      }\n      else{\n        logger.info(src.id, functionName + 'Remove temp folder failed successfully');\n      }\n      return cb(err);\n    });\n  },\n  ],(err, result)=>{\n    \n  });\n}\n\nfunction cloudConvertToPdf(src, data, cb){\n  let functionName = '[cloudConvertToPdf] ';\n  let convertObj = data.convertObj;\n  let fileObj = data.fileObj;\n  let oriDocument = data.oriDocument || 'oridocument';\n  \n  if (fileObj.pages){\n    logger.info(src.id, functionName + 'The slides file already get page number before. pages=' + fileObj.pages);\n    return cb(null, fileObj); \n  }\n  logger.info(src.id, ndutil.format('%s Convert file from format=%s to pdf',  functionName, convertObj.informat));\n  let options = {\n    format: convertObj.informat,\n    outformat: 'pdf',\n    path: 'logan/' + convertObj.fileId + '_convert'+'/' + oriDocument + '.' + convertObj.informat,\n    outpath: 'logan/' + convertObj.fileId + '_convert'+'/' + oriDocument + '.pdf',\n    processurl: convertObj.extraData.excelToPdfProcessurl,\n  };\n  if (data.toPdfConverteroptions){\n    options.converteroptions = data.toPdfConverteroptions; \n  }\n  let processobj = cloudConvertConvertfile(src,\n     options,\n    (err, result)=>{\n      if (util.requestWillEndSoon(src)){\n        logger.info(src.id, 'This request will end soon, create another taskqueue to continue working');\n        fileViewCommon.endRequestAndLauchAnotherDefer(src, convertObj, (err)=>{\n          return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n        });\n      }\n    },\n    (err, result)=>{\n      delete convertObj.extraData.excelToPdfProcessurl;\n      if(err){\n        logger.warn(src.id, ndutil.format('%s Convert file from format=%s to pdf happen error',  functionName, convertObj.informat), err);\n        if (err.code==esErr.TaskNoRetryError){\n          return cb(err);\n        }        \n        else{\n          return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n        }\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s Convert file from format=%s to pdf happen error successfully',  functionName, convertObj.informat));\n        return cb(null, fileObj);\n      }\n  });\n  if (processobj && processobj.url && (!convertObj.extraData.excelToPdfProcessurl)){\n    convertObj.extraData.excelToPdfProcessurl = processobj.url;\n  }\n} \n\nclass cloudConvertToSvgFileView extends fileViewCommon.FileViewer{\n  cleanWork(cb){\n    let inData = {\n        convertObj:this,\n    };        \n    cleanWork(this.src, inData, cb);   \n  }\n  \n  toPdf(inData, cb){\n    cloudConvertToPdf(this.src, inData, cb);\n  }\n  \n  convert(cb){\n    var self = this;\n    var functionName = '[docToSvgFileView.convert] ';\n    var endRequestForRequestEndSoon = false;\n    var oriDocument = 'oridocument';\n    async.waterfall([\n      //Query file information from database\n      (interCallback)=>{\n        let inData = {\n            convertObj:self,\n            oriDocument: oriDocument + '.' + self.informat\n        };        \n        initilizeConvertingProcess(self.src, inData, interCallback);  \n      },\n      //Convert to pdf file\n      (fileObj, interCallback) =>{\n        let inData = {\n            convertObj:self,\n            fileObj:fileObj,\n            oriDocument: oriDocument\n          };        \n        self.toPdf(inData, interCallback)\n      },\n      //Convert pdf to svg    \n      (fileObj, interCallback) => {\n        let inData = {\n          convertObj:self,\n          fileObj:fileObj,\n          oriDocument: oriDocument + '.pdf'\n        };        \n        cloudConvertPdftoSvg(self.src, inData, interCallback);      \n      },\n      //Copy converted folder back to real official folder\n      (fileObj, interCallback) => {\n        let inData = {\n            convertObj:self,\n            fileObj:fileObj,\n            oriDocument: oriDocument\n          };        \n        copyBackRealFolder(self.src, inData, interCallback);\n      },\n      //Create thumbnail\n      (fileObj, interCallback) => {\n        let inData = {\n            convertObj:self,\n            fileObj: fileObj,\n            oriDocument: oriDocument + '.pdf'\n        };\n        convertPdfToThumbnail(self.src, inData, interCallback);\n      },\n      //Copy thumbnail file to official folder\n      (fileObj, interCallback) => {\n        let inData = {\n            convertObj:self,\n            fileObj:fileObj,\n            oriDocument: oriDocument,\n            thumbnailfileName: oriDocument + '.jpg'\n          };        \n        copyThumbnailRealFolder(self.src, inData, interCallback);\n      }\n    ],(err, result)=>{\n      if (endRequestForRequestEndSoon){\n        fileViewCommon.endRequestAndLauchAnotherDefer(self.src, self, (err)=>{\n          return cb(err);\n        });\n      }\n      else{\n        return cb(err, result);\n      }\n  })};\n}\n\nexport default {\n  asposeStorageName: asposeStorageName,\n  asposSign: asposSign,\n  getAsposeApiBaseUrl: getAsposeApiBaseUrl,\n  setPagesToMetaData: setPagesToMetaData,\n  setPagingToMetaData: setPagingToMetaData,  \n  removeTempfolder: removeTempfolder,\n  notifyClientsMessageUpdate: notifyClientsMessageUpdate,\n  cloudconvertApiKey: cloudconvertApiKey,\n  cloudconvertProjectid: cloudconvertProjectid,\n  cloudconertCredentials: cloudconertCredentials,\n  cloudconvertBucket: cloudconvertBucket,\n  fileInfoFromCloudConvert: fileInfoFromCloudConvert,\n  cloudConvertConvertfile: cloudConvertConvertfile,\n  cloudConvertPdftoSvg: cloudConvertPdftoSvg,\n  cloudConvertToPdf: cloudConvertToPdf,\n  initilizeConvertingProcess: initilizeConvertingProcess,\n  copyBackRealFolder: copyBackRealFolder,\n  cleanWork: cleanWork,\n  cloudConvertToSvgFileView: cloudConvertToSvgFileView\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/converter_helper.js\n **/","import esErr from '../../errors/errors';\nimport memcache from '../../modules/memcache';\nimport cst from '../../utils/serverConstants';\nimport logger from '../../modules/logger';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport messageEvt from '../message/message.event';\n\nvar ConvertLockTime = 10;\n\nclass FileViewer{\n  constructor(src, messageId, fileId, handleKey, informat, outformat, extraData){\n    this.fileId = fileId;\n    this.messageId = messageId;\n    this.src = src;\n    this.handleKey = handleKey;\n    this.convertedFileObj = null;\n    this.informat = informat;\n    this.outformat = outformat;\n    this.extraData = extraData || {};\n  }\n  \n  getProperties(){\n    return {\n      fileId: this.fileId,\n      messageId: this.messageId,\n      src: this.src,\n      handleKey: this.handleKey,\n      informat: this.informat,\n      outformat: this.outformat,\n      extraData: this.extraData,\n    };\n  }\n  \n  setProperties(inData){\n    this.fileId = inData.fileId;\n    this.messageId = inData.messageId;\n    this.src = inData.src;\n    this.handleKey = inData.handleKey;\n    this.informat = inData.informat;\n    this.outformat = inData.outformat;\n    this.extraData = inData.extraData;\n  }\n  \n  setConvertStatus(statusValue, cb){\n    let functionName = '[FileViewer.setConvertStatus] ';\n    var self = this;\n    logger.info(this.src.id, functionName + 'Set convert status messageId=' + this.messageId + ' fileId=' + this.fileId + ' status=' + statusValue);\n    dbWp.execute(TopicMessage,\n      TopicMessage.update,\n      this.src.id,\n      {\"_id\": this.messageId, \"content.data.fileId\": this.fileId},\n      {\"$set\": {\"content.data.$.convertStatus\": statusValue}},\n      (err, numAffected)=>{\n        if (!err && numAffected){\n          logger.info(self.src.id, functionName + 'Set convert status successfully');\n          if(this.convertedFileObj){\n            this.convertedFileObj.convertStatus = statusValue;\n          }\n          messageEvt.emitUpdateModifyTime(self.src, this.messageId);\n          return cb(null, statusValue);\n        }\n        else{\n          logger.warn(self.src.id, functionName + 'Set convert status successfully failed', err, numAffected);\n          return cb(new esErr.ESErrors(esErr.SetConvertStatusFailed));\n        }\n    });\n    \n  }\n  \n  convert(cb){\n    return cb(new esErr.ESErrors(esErr.NoSuchConverter));\n  }\n  \n  validateConvert(cb){\n    let functionName = '[validateConvert] ';\n    let key = cst.ConvertMemcacheKeyPrefix + this.fileId;\n    var self = this;\n    logger.info(this.src.id, functionName + 'Add key=' + key + ' to memcache to guareentee only one convert request can process');\n    memcache.add(this.src, key, '',  ConvertLockTime, (err, result)=>{\n      if ((!err) && result){\n        dbWp.execute(TopicMessage,\n          TopicMessage.findOne,\n          {'content.data' : {'fileId':self.fileId, 'convertStatus': {$ne: cst.ConvertStatusNotStart}}},\n          (err, result)=>{\n            if (!err && result){\n              logger.info(self.src.id, functionName + 'The file begin with fileId=' + self.fileId + ' will begin convert soon');\n              return cb(null);\n            }\n            else{\n              logger.warn(self.src.id, functionName + 'The file already begin convert fileId=' + self.fileId);\n              return cb(new esErr.ESErrors(esErr.AlreadyStartConvert));\n            }\n          }\n        );\n      }\n      else{\n        logger.warn(self.src.id, functionName + 'Ask for convert same file at same time fileId=' + self.fileId);\n        return cb(new esErr.ESErrors(esErr.AlreadyStartConvert));\n      }\n    });\n  }\n  \n  cleanWork(cb){\n    let functionName = '[FileViewer.cleanWork] ';\n    logger.info(this.src.id, functionName + 'Null clean work');\n    return cb(null);\n  }\n}\n\nexports.FileViewer = FileViewer;\nexports.endRequestAndLauchAnotherDefer = function(src, convertObj, cb){\n  let functionName = '[endRequestAndLauchAnotherDefer] ';\n  let data = {messageId: convertObj.migrateId,\n    fileId:convertObj.fileId,\n    handleKey: convertObj.handleKey,\n    informat: convertObj.informat,\n    outformat: converObj.outformat,\n    extraData: convertObj.extraData\n  };\n  logger.info(src.id, functionName + 'Launch another task to continue convert working!');\n  return taskqueue.launchDefer(src,\n      'convertAFileDefer',\n      data,\n      {defferOption: true,\n       backoff_seconds: 300,\n       attempts: 3,\n       callback: (err, result)=>{\n         return cb(new esErr.ESErrors(esErr.TaskqueueEndBeforeTimout));\n       },\n  });  \n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/fileview.common.js\n **/","exports.getIssFromHostname = function(hostname){\n  let parts = hostname.split('.');\n  if (parts.length >= 3){\n    return parts.slice(parts.length-2).join('.');\n  }\n  else{\n     return hostname;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/config-helper.js\n **/","var ns = '[MeetingConstants]';\nimport keyMirror from '../../../node_modules/react-interpolate-component/node_modules/fbjs/lib/keyMirror';\nimport Translate from '../../components/Translate';\nimport Log from 'ZSLogger';\nconst MeetingConstants = {};\n\nMeetingConstants.DEFAULT_END_TIME_DURATION = 1;\nMeetingConstants.ATTENDEE_TYPES = {\n\tADMIN: {\n\t\ttype: 'admin',\n\t\ttext: Translate.get('ADMIN'),\n\t\ticon: 'fa fa-key',\n\t\timg: 'key.svg'\n\t},\n\tMEMBER: {\n\t\ttype: 'member',\n\t\ttext: Translate.get('MEMBER'),\n\t\ticon: 'fa fa-user',\n\t\timg: 'businessman.svg'\n\t},\n\tGUEST: {\n\t\ttype: 'guest',\n\t\ttext: Translate.get('GUEST'),\n\t\ticon: 'fa fa-lock',\n\t\timg: 'lock.svg'\n\t}\n};\n\nMeetingConstants.getAttendeeObjectByType = function (type){\n\tfor(var i in MeetingConstants.ATTENDEE_TYPES){\n\t\tif(MeetingConstants.ATTENDEE_TYPES[i].type==type){\n\t\t\treturn MeetingConstants.ATTENDEE_TYPES[i];\n\t\t}\n\t}\n\treturn null;\n}\n\nMeetingConstants.copyUserAsAttendee = function (user){\n\treturn {\n\t\t_id: user._id,\n\t\ttype: user.aType || user.type,\n\t\tdisplayname: user.displayname,\n\t\tpicture_url: user.picture_url,\n\t\tusername: user.username\n\t};\n}\n\nMeetingConstants.INVITE_CHANNEL_TYPES = {\n\tSERVER: 'server',\n\tCLIENT: 'client'\n};\n\nMeetingConstants.API = {\n\t//userRooms: 'api/users/{userid}/meetings/',\n\t//privateRoom: 'api/chat/directroom/{userid}/',\n\tTOPIC_URL: '/api/topics/{topicid}/',\n\tTOPIC_JOIN_URL: '/api/topics/:topicid/join',\n\tTOPIC_INVITES_URL: '/api/topics/{topicid}/invites/',\n\tTOPIC_INVITE_URL: '/api/topics/invites/{inviteid}',\n\tTOPIC_INVITE_JOIN_URL: '/api/topics/invites/{inviteid}/join',\n\tTOPIC_QUITE_URL: '/api/topics/{topicid}/quit/',\n\n\tTOPICS_URL: '/api/topics/',\n\tTOPICS_INVITE_URL: '/api/topics/invite/',\n\tGET_MESSAGE_BY_ID_URL: '/api/messages/{id}',\n\n\n\troomByUniqueName: '/api/meetings/uniquename/{unique_name}',\n\tchatServers: '/api/chat/servers/',\n\tmailSend: '/api/1.0/email_service/send/'\n};\n\nMeetingConstants.ACTIONS = keyMirror({\n\tROOM_LOADED: null,\n\tLOAD_TOPIC_MESSAGES_STREAM: null\n});\n\nMeetingConstants.AUDIO_NOTIFICATION_TYPES = {\n\tNEW_CHAT: 'new_chat'\n};\n\nMeetingConstants.ROOM_TYPES = {\n\t'SE_ROOM_DIRECT': 'direct',\n\t'SE_ROOM_GROUP': 'group'\n};\n\nMeetingConstants.generateUUID = function () {\n\tvar d = new Date().getTime();\n\tvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tvar r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n\t});\n\treturn uuid;\n};\n\nMeetingConstants.isMobileBrowser = function () {\n\tvar func = ns + '[isMobileBrowser]';\n\tvar bIsMobile = false;\n\ttry {\n\t\tif (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n\t\t\tbIsMobile = true;\n\t\t\tLog.error(ns, 'this is is MOBILE APP');\n\t\t}\n\t\tif ($(window).width() < 760) {\n\t\t\tbIsMobile = true;\n//          Log.error(ns, 'SMALL Screen < 760px is DETECTED');\n\t\t}\n\t\telse {\n//          Log.error(ns, 'Large Screen > 760px is DETECTED');\n\t\t}\n\t}\n\tcatch (e) {\n\t\tLog.error(func, e);\n\t}\n\treturn bIsMobile;\n};\n\n\nMeetingConstants.isUserRoomAdmin = function (room, userid) {\n\tvar func = ns + \"[isUserRoomAdmin] \";\n\ttry {\n\t\tfor (var i in room.parties) {\n\t\t\tif (room.parties[i].userid == userid &&\n\t\t\t\troom.parties[i].party_type == CHAT_CONSTS.ROOM_PARTY_TYPES.SE_ROOM_PARTICIPANT_ADMIN) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tcatch (e) {\n\t\tLog.error(func, e);\n\t}\n\treturn false;\n};\n\nMeetingConstants.isUserMemberOfRoom = function (room, userid) {\n\tvar func = ns + \"[isUserMemberOfRoom] \";\n\ttry {\n\t\tfor (var i in room.parties) {\n\t\t\tif (room.parties[i].userid == userid) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tcatch (e) {\n\t\tLog.error(func, e);\n\t}\n\treturn false;\n};\n\nMeetingConstants.getUserTopicRole = function (topic, user) {\n\tvar func = ns + \"[getUserTopicRole] \";\n\tvar role = MeetingConstants.ATTENDEE_TYPES.GUEST.type;\n\t//Log.log(func, 'topic', topic, 'user', user);\n\tif(topic.members) {\n\t\tfor(var i in topic.members){\n\t\t\tif((topic.members[i].member == user._id || topic.members[i].member == user.member) && topic.members[i].memberType=='userId'){\n\t\t\t\trole = topic.members[i].role;\n\t\t\t}\n\t\t}\n\t}\n\treturn role;\n};\n\n\n\nexport default MeetingConstants\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/flux/constants/MeetingConstants.js\n **/","//extend Date object //added by Ray 2016/03/10\nDate.prototype.addDays = function(days)\n{\n\tvar dat = new Date(this.valueOf());\n\tdat.setDate(dat.getDate() + days);\n\treturn dat;\n}\n\nDate.prototype.addHours = function(h) {\n\tthis.setTime(this.getTime() + (h*60*60*1000));\n\treturn this;\n}\n\nDate.prototype.addMinutes = function(m) {\n\tthis.setTime(this.getTime() + (m*60*1000));\n\treturn this;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/utils/index.js\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule keyMirror\n * @typechecks static-only\n */\n\n'use strict';\n\nvar invariant = require('./invariant');\n\n/**\n * Constructs an enumeration with keys equal to their value.\n *\n * For example:\n *\n *   var COLORS = keyMirror({blue: null, red: null});\n *   var myColor = COLORS.blue;\n *   var isColorValid = !!COLORS[myColor];\n *\n * The last line could not be performed if the values of the generated enum were\n * not equal to their keys.\n *\n *   Input:  {key1: val1, key2: val2}\n *   Output: {key1: key1, key2: key2}\n *\n * @param {object} obj\n * @return {object}\n */\nvar keyMirror = function (obj) {\n  var ret = {};\n  var key;\n  !(obj instanceof Object && !Array.isArray(obj)) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'keyMirror(...): Argument must be an object.') : invariant(false) : undefined;\n  for (key in obj) {\n    if (!obj.hasOwnProperty(key)) {\n      continue;\n    }\n    ret[key] = key;\n  }\n  return ret;\n};\n\nmodule.exports = keyMirror;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react-interpolate-component/~/fbjs/lib/keyMirror.js\n ** module id = 41\n ** module chunks = 0\n **/","module.exports = require(\"escape-string-regexp\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"escape-string-regexp\"\n ** module id = 42\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 43\n ** module chunks = 0\n **/","module.exports = require(\"gcloud/lib/storage\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"gcloud/lib/storage\"\n ** module id = 44\n ** module chunks = 0\n **/","module.exports = require(\"querystring\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 45\n ** module chunks = 0\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\n\nvar TopicUserSchema = new Schema({\n    userId: { type: Schema.Types.ObjectId },  //The user id\n    userType: String,\n    targetId: { type: Schema.Types.ObjectId },\n    targetType: String,\n    title: String,\n    lastAccess: Date,\n    role: String,\n    meta: Schema.Types.Mixed,\n    //tags: [String]\n});\n\n\n/**\n * Virtuals\n */\n\nTopicUserSchema.set('toJSON', {\n  virtuals: true\n});\n\nTopicUserSchema.index({userId: 1, targetId:1, userType: 1}, {unique: true});\nTopicUserSchema.index({userId: 1, userType: 1});\nTopicUserSchema.options.toJSON = {\n\n  transform : function(doc, ret, options) {\n      delete ret.__v;\n      delete ret.id;\n      return ret;\n  },\n  virtuals: true,\n  minimize: true\n};\n\nmodule.exports = mongoose.model('TopicUser', TopicUserSchema);\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/notify/topicuser.model.js\n **/","/*! React Starter Kit | MIT License | http://www.reactstarterkit.com/ */\n\nimport React, { PropTypes, Component } from 'react';\nimport counterpart from 'counterpart';\nimport ReactTranslateComponent from 'react-translate-component';\n\nconst Translation = {\n  language: null,\n  Component: ReactTranslateComponent,\n  bind: function(key){\n    \"use strict\";\n    let self = this;\n    if (!self.language) {\n      this.setLanguage('en');\n    }\n    return self.language.messages[key] ?  {__html: self.language.messages[key]} : {__html: key};\n  },\n  get: function(key){\n    \"use strict\";\n    let self = this;\n    if (!self.language) {\n      this.setLanguage('en');\n    }\n    return self.language.messages[key] ? self.language.messages[key] : key;\n  },\n  initLanguage: function(navigator){\n    \"use strict\";\n    //let lang = navigator.language.indexOf(\"-\") > -1 ? navigator.language.split(\"-\")[0] : navigator.language;\n\n    let lang = navigator.language;\n    lang = lang.indexOf(\"en\") > -1 ? \"en\" : lang;\n    this.setLanguage(lang);\n  },\n  setLanguage: function(lang){\n    \"use strict\";\n    let file;\n    try{\n      file = require('../../_locale/' + lang);\n    }catch(e){\n\n      file = require('../../_locale/en');\n      lang = \"en\";\n    }\n    file.locale = lang;\n    this.language = file;\n    counterpart.registerTranslations(lang, this.language);\n    counterpart.setLocale(lang);\n  }\n};\n\n\n\nexport default Translation;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/components/Translate/Translate.js\n **/","//Currently we use redis as memcache backend\nimport esErr from '../../errors/errors'; \nimport redis from 'redis';\nimport config from  '../../config-env/environment/index';\nimport logger from '../../modules/logger';\n\nvar redisMemcahe = null;\nfunction initRedisMemcahe(){\n  console.log('initRedisMemcahe begin');\n  var tempRedisMemcahe = redis.createClient(config.redis.port,\n                                            config.redis.host, \n                                            { tls: config.redis.ssl,\n                                              auth_pass:config.redis.auth,\n                                              retry_strategy: function (options) {\n                                                if (options.error.code === 'ECONNREFUSED') {\n                                                    // End reconnecting on a specific error and flush all commands with a individual error\n                                                    return new Error('The server refused the connection');\n                                                }\n                                                if (options.total_retry_time > 1000 * 60 * 60) {\n                                                    // End reconnecting after a specific timeout and flush all commands with a individual error\n                                                    return new Error('Retry time exhausted');\n                                                }\n                                                if (options.times_connected > 10) {\n                                                    // End reconnecting with built in error\n                                                    return undefined;\n                                                }\n                                                // reconnect after\n                                                return Math.max(options.attempt * 100, 3000);\n                                            }\n  });\n  tempRedisMemcahe.on('ready', function(){\n    redisMemcahe = tempRedisMemcahe;\n    console.log('initRedisMemcahe ready now');\n  });\n  tempRedisMemcahe.on('error', function(err){\n    console.log('Happen connection error', err);\n    redisMemcahe = null;\n  });\n  tempRedisMemcahe.on('reconnecting', function(err){\n    console.log('Redis is reconnecting ...');\n  });\n}\nsetTimeout(initRedisMemcahe, 0);\n\nexports.add = function(src, key, val, timeout, cb){\n  if (redisMemcahe){\n    redisMemcahe.set(key, val, 'NX', 'EX', timeout, (err, reply) => {\n      if (err){\n        logger.warn(src.id, 'Memcahe add happen error' + err.toString());\n        return cb(err)\n      }\n      else{\n        if (reply == 'OK'){\n          return cb(null, true);\n        }\n        else{\n          return cb(null, false);\n        }\n      }\n    });\n  }\n  else{\n    cb(new esErr.ESErrors(esErr.MemcacheNotReady))\n  }\n}\n\nexports.set = function(src, key, val, timeout, cb){\n  if (redisMemcahe){\n    redisMemcahe.set(key, val, 'EX', timeout, (err, reply) => {\n      if (err){\n        logger.warn(src.id, 'Memcahe add happen error' + err.toString());\n        return cb(err)\n      }\n      else{\n        if (reply == 'OK'){\n          return cb(null, true);\n        }\n        else{\n          return cb(null, false);\n        }\n      }\n    });\n  }\n  else{\n    cb(new esErr.ESErrors(esErr.MemcacheNotReady))\n  }\n}\n\nexports.get = function(src, key, cb){\n  if (redisMemcahe){    \n    redisMemcahe.get(key, (err, reply) => {\n      if (err){\n        logger.warn(src.id, 'Memcahe get happen error' + err.toString());\n        return cb(err);\n      }\n      else{\n        return cb(null, reply);\n      }\n    });\n  }\n  else{\n    cb(new esErr.ESErrors(esErr.MemcacheNotReady))\n  }\n}\n\nexports.del = function(src, key, cb){\n  if (redisMemcahe){\n    redisMemcahe.del(key, (err, reply) => {\n      if (err){\n        logger.warn(src.id, 'Memcahe del happen error' + err.toString());\n        if (cb){\n          return cb(err);\n        }\n      }\n      else{\n        if (reply == 0){\n          if (cb){\n            return cb(null, false);\n          }\n        }\n        else{\n          if (cb){\n            return cb(null, true);\n          }\n        }\n      }\n    });\n  }\n  else{\n    cb(new esErr.ESErrors(esErr.MemcacheNotReady))\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/memcache/index.js\n **/","module.exports = require(\"ZSLogger\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ZSLogger\"\n ** module id = 49\n ** module chunks = 0\n **/","module.exports = require(\"node-uuid\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-uuid\"\n ** module id = 50\n ** module chunks = 0\n **/","module.exports = require(\"os\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"os\"\n ** module id = 51\n ** module chunks = 0\n **/","module.exports = require(\"pmx\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"pmx\"\n ** module id = 52\n ** module chunks = 0\n **/","var logan_en = {\n  messages: {\n    MEET_ME: 'Project Logan',\n    KEY_IN_YOUR_TOPIC: 'Key in your topic',\n    START_MEETING: 'Start Meeting',\n    INVITE_PARTICIPANTS: 'Invite Participants',\n    SHARE: 'Share',\n    MICROPHONE: 'Microphone',\n    CAMERA: 'Camera',\n\t\tDEVICE: 'Device',\n    REALDEVICE: 'Real Device',\n    FAKEDEVICE: 'Fake Device',\n    SCREEN: 'Screen',\n    APPLICATION: 'Application',\n    WINDOW: 'Window',\n\t\tNEXT_PAGE: 'Next page',\n\t\tZOOM_IN: 'Zoom in',\n\t\tREMOVE: 'Remove',\n\t\tWRITE_YOUR_COMMENT_HERE: 'Write your comment here',\n\t\tCREATING_THUMBNAILS: 'Creating thumbnails',\n\t\tZOOM_OUT: 'Zoom out',\n\t\tFILE_CONVERSION_IN_PROGRESS: 'File conversion in progress',\n\t\tUPLOADING_FILES: 'Uploading files',\n\t\tCLICK_TO_EDIT_THE_DESCRIPTION: 'Click here to edit the description',\n\t\tROTATE: 'Rotate',\n\t\tPEOPLE: 'people',\n\t\tPERSON: 'person',\n\t\tNO_MORE_MEMBERS: 'No more members',\n\t\tMUTE_THIS_PARTICIPANT: 'Mute this participant',\n\t\tYOU: 'You',\n\t\tCLICK_TO_EDIT: 'Click to edit',\n\t\tCLICK_TO_ATTACH_MORE_FILES: 'Click to attach more files',\n\t\tPREVIOUS_PAGE: 'Previous page',\n\t  PREPARING_PREVIEW: 'preparing preview...',\n\t  PREVIEW_NOT_READY: 'preview not yet ready ...',\n\t  NO_PREVIEW_AVAILABLE: 'No preview available',\n\t  FAILED_TO_CREATE_PREVIEW: 'Sorry, there was a problem previewing this file',\n    MEETME_INVITATION_SUBJECT: 'Video Chat Invite: {0}',\n    MEETME_INVITATION_BODY: 'Hi There,<br/>{0} is inviting you to join a Video Chat<br/><br/>Click the following link<br/>{1}<br/><br/><br/> ** Created using  Project Logan @ OnEsna',\n    MEETING_TOPIC_CANNOT_BE_BLANK: 'Don\\'t forget to key in the topic!',\n    INVITATION_SENT_SUCCESSFULLY: 'A video chat invitation is sent to all parties.',\n\t  VIDEO_CALL_IS_ABOUT_TO_END: 'This video session is about to end.',// (<B>{0}</B>)\n\t  STAY_CONNECTED: 'Stay Connected',\n    NO_PARTIES_ADDED: 'No Parties Added!',\n    PLEASE_INVITE_OTHER_TO_JOIN: 'Please invite others to join.',\n    INVITE_PEOPLE: 'Invite People',\t\t\n    YOUR_RECENT_MEETINGS: 'Your Recent Meetings',\n    MEETING_PARTIES: 'Meeting Parties',\n    ENTER_YOUR_NAME: 'Enter your name',\n    ENTER_YOUR_EMAIL: 'Enter your email',\n\t\tADD_MORE: 'Add more',\n\t\tCLICK_TO_ADD_FILES: 'Click to add files',\n\t\tEMAIL: 'Email',\n\t\tNAME: 'Name',\n\t\tTODAY: 'Today',\n\t\tYESTERDAY: 'Yesterday',\n\t\tDAYS: 'days',\n\t\tAGO: 'ago',\n\t\tTOMORROW: 'Tomorrow',\n\t\tCLICK_TO_ENLARGE_MOUSE_WHEEL_TO_ZOOM: 'Click to enlarge, mouse wheel to zoom',\n\t    NO_NAME: 'NO NAME',\n\t\tWANT_TO_CREATE_A_NEW_SPACE: 'Want to create a new space?',\n\t\tNO_PROBLEM_REQUEST_PERMISSION_FROM_ONE_OF_OUR_ADMINISTRATORS_HERE: 'No problem! Request permission from one of our administrators',\n\t\tHERE: 'here',\n\t\tNO_PROBLEM_TYPE_YOUR_NAME_AND_YOUR_EMAIL_HIT_SUBMIT_AND_SOON_A_ZANG_SPACES_ADMINISTRATOR_WILL_APPROVE_YOUR_REQUEST: 'No problem! Type your name and your email, hit \"Submit Request\" and soon you will receive an email by a Zang Spaces administrator who will approve your request',\n    JOIN_MEETING: 'Join Meeting',\n\t\tEXPAND_COMMENTS: 'Expand comments',\n\t\tCOLLAPSE_COMMENTS: 'Collapse comments',\n    NAME_IS_REQUIRED: 'Don\\'t forget to proivde your name',\n    PICTURE_IS_REQUIRED: 'Please provide a photo snapshot!',\n    THIS_ROOM_IS_NOT_OPEN_TO_PUBLIC: 'This room is not open to public',\n    ACCESS_DENIED: 'Access Denied!',\n    MEETING_HISTORY: 'Meeting History',\n    IDEA_BOARD: 'Posts',\n    MEMBERS: 'Members',\n    STICKY_DOCS: 'Sticky Docs',\n    WORK_SPACE: 'Work Space',\n\t\tSUBMIT: 'Submit',\n\t\tSUBMIT_REQUEST: 'Submit request',\n    TO_DO: 'To-Do',\n\t\tYES: 'Yes',\n    TASK_TITLE: 'Task Title',\n    TASK_DESCRIPTION: 'Task Description',\n    TASK_DUE_DATE: 'Task Due Date',\n\t\tDUE: 'Due',\n    TASK_ASSIGN_TO: 'Assign To',\n    ASSIGN: 'Assign',\n    PLEASE_PROVIDE_A_TITLE_FOR_THIS_TASK: 'Please provide a title for this task',\n    ATTENDEES: 'Attendees',\n    REPLY: 'reply',\n    CONNECTING_TO_VIDEO_CONFERENCE: 'Connecting to Video Conference',\n    WAITING_FOR_OTHER_PARTIES_TO_JOIN: 'Waiting for other parties to join...',\n    TASK: 'Task',\n    DRAG_AND_DROP_IMAGES_OR_PDF_TO_UPLOAD: 'Drag Images or PDF files to upload',\n    SHARE_YOUR_IDEA: 'Drag files or images here and share your post',\n    POSTED_AN_IDEA: 'Created A Post',\n    MUTE_AUDIO: 'Mute Audio',\n    UNMUTE_AUDIO: 'Unmute Audio',\n\t\tTHIS_REQUEST_IS_ALREADY_APPROVED_ARE_YOU_SURE_YOU_WANT_TO_DISAPPROVE_IT: 'This request is already approved. Are you sure you want to disapprove it?',\n\t\tTHIS_REQUEST_IS_ALREADY_APPROVED: 'This request is already approved',\n    HANGUP: 'Hangup',\n    RECENT_TOPICS: 'Recent Topics',\n    TRENDING_TOPICS: 'Trending Meetings',\n    START_A_MEETING: 'Start A Meeting',\n    NEW_IDEA_SHARED: 'New Post Shared',\n    SHARE_SCREEN: 'Share Screen',\n    STOP_SCREEN_SHARING: 'Stop screen sharing',\n    VIDEO_SETTINGS: 'Video Settings',\n    TEXT_WITH_HTML: \"Top<br />Bottom\",\n    SIGN_IN: 'Sign In',\n    USERNAME: 'Username',\n    PASSWORD: 'Password',\n    LOGIN: 'Login',\n    PAGE_NOT_FOUND: \"Page Not Found\",\n\t\tNO: 'No',\n    GO_HOME: \"Go Home\",\n\t\tSORRY_VIDEO_CANNOT_BE_PLAYED_WITHIN_THIS_BROWSER: \"Sorry, video cannot be played within this browser :(\",\n\t\tCLICK_TO_DOWNLOAD_AND_INSTALL_CHROME_FOR_THE_BEST_ZANG_SPACES_EXPERIENCE: \"Click to download and install Chrome for the best Zang Spaces experience.\",\n    SORRY_BUT_THE_PAGE_YOU_WERE_TRYING_TO_VIEW_DOES_NOT_EXIST: \"Sorry, but the page you were trying to view does not exist.\",\n    SEND_A_MESSAGE: 'Send a Message',\n    JOIN_AS_GUEST: 'Join as Guest',\n    CREATE_AN_ACCOUNT: 'Create account',\n    OR_LOGIN_WITH: 'or login with',\n\t\tOR_JOIN_WITH: 'or join with',\t\t\n\t\tJOIN_WITH: 'Join with',\n\t\tJOIN_THIS_SPACE_WITH: 'Join this space with',\n\t\tOR_JOIN_THIS_SPACE_WITH: 'or join this space with',\n    GOGGLE_PLUS: 'Google+',\n    OFFICE_365: 'Office 365',\n    SALESFORCE: 'Salesforce',\n    ONESNA: 'OnEsna',\n\t\tDOWNLOAD: 'Download',\n    SHOW_ADVANCED_OPTIONS: 'Show Advanced Options',\n    MEMBER: 'Member',\n\t  MEMBER_SPACES: 'Member Spaces',\n    GUEST: 'Guest',\n\t  GUEST_SPACES: 'Guest Spaces',\n\t  GROUPS: 'Groups',\n\t  ALL_SPACES: 'All Spaces',\n\t  DIRECT_SPACES: 'Direct Spaces',\n    GUEST_ONETIME: 'One Time Guest',\n    ADMIN: 'Admin',\n    INVALID_EMAIL_FORMAT: 'Invalid Email Address!',\n    PLEASE_ENTER_VALID_EMAIL: 'Please enter a valid email.',\n    DISPLAYNAME_CANNOT_BE_BLANK: 'Displayname cannot be blank!',\n    USER_PHOTO_IS_REQUIRED: 'User photo is required!',\n    SCHEDULE: 'Schedule',\n\t\tPOSTED: 'Posted',\n    START: 'Start',\n    CONNECTION_FAILED_FAILED_TO_CONNECT_TO_SERVER_ERROR_PLACEHOLDER: 'Connection Failed.Failed to connect to server.Error: {code} {reason}',\n    SERVER_CONNECTION_FAILED: 'Server connection failed',\n    AUDIO_DEVICE_FAILURE_COULD_NOT_GET_ACCESS_TO_AUDIO_DEVICE: 'Audio Device Failure.Could not get access to audio device',\n    CONNECTING_TO_TOPIC: 'Connecting to ',\n    CALL_TERMINATED: 'Call terminated ',\n    CALL_FAILED: 'Call failed ',\n    CONNECTED_TO_TOPIC: 'Connected to topic ',\n    LEAVE_VIDEO_SESSION: 'Leave video session',\n    REENTER_VIDEO_SESSION: 'Re-enter video session',\n    PENDING: 'Pending',\n    COMPLETED: 'Completed',\n    APPROVED: 'Approved',\n\t\tAWAITING: 'Awaiting',\n    REJECTED: 'Rejected',\n    TESTING: 'Testing',\n    COMMENTS: 'Comments',\n    HISTORY: 'History',\n    SAVE_CHANGE: 'Save Changes',\n\t\tSAVE: 'Save',\n\t\tENROLLMENT_REQUEST: 'Enrollment request',\n    CLOSE: 'Close',\n    TASK_TITLE_CANNOT_BE_BLANK: 'Task title cannot be blank!',\n    LEAVE_COMMENT: 'Drag files or images here or leave a comment',\n    LEAVE_TOPIC: 'Leave Topic',\n    JOIN_TOPIC: 'Join Topic',\n    DISCONNECTED: 'Disconnected',\n    CREATE_NEW_TASK: 'New Task',\n    MY_TASKS: 'My Tasks',\n    EVERYONE_TASKS: 'Everyone Tasks',\n    NETWORK_CONNECTION: 'Network connection',\n    YOUR_NETWORK_CONNECTION_IS_LOST: 'Your network connection is lost',\n    YOUR_NETWORK_CONNECTION_IS_NOW_RESTORED: 'Your network connection is now restored',\n    STILL_NO_NETWORK_CONNECTION: 'Still no network connection',\n    MEDIA_ERROR: 'Media error',\n    IT_SEEMS_THAT_YOU_DONT_HAVE_A_CAMERA_AND_A_MICROPHONE_ON_YOUR_DEVICE: 'It seems that you don\\'t have a camera and a microphone on your device',\n    VIDEO_ENABLED: 'Video enabled',\n    VIDEO_DISABLED: 'Video disabled',\n\t\tCREATED_BY: 'Created by',\n    AUDIO_ENABLED: 'Audio enabled',\n    AUDIO_DISABLED: 'Audio disabled',\n    COMMENTED_ON: 'left a comment on',\n    SHARED_AN_IDEA: 'shared a post',\n    ASSIGNED_A_TASK: 'assigned a task',\n    CREATED_A_TASK: 'created a task',\n    SHARED_AN_IMAGE: 'shared an image',\n    SHARED_A_VIDEO: 'shared a video',\n    SHARED_A_LINK: 'shared a link',\n    SHARED_NEW_IMAGES: 'shared new images',\n    TASKS: 'Tasks',\n    JOINING_TOPIC: 'Joining topic...',\n    CONTRIBUTORS: 'Contributors',\n    LOGOUT: \"Logout\",\n    CANCEL: 'Cancel',\n    OK: 'OK',\n    NO: \"No\",\n    ARE_YOUR_SURE_YOU_WANT_TO_LOGOUT: 'Are you sure your want to logout?',\n    NEW_TOPIC: 'New Topic',\n    USER_SETTINGS: 'User settings',\n    HOME: 'Home',\n\t  DASHBOARD: 'Dashboard',\n    START_A_NEW_TOPIC: 'Start New Topic',\n    DISABLE_VIDEO: 'Disable Video',\n    ENABLE_VIDEO: 'Enable Video',\n    CHAT: 'Chat',\n    INVITE: 'Invite',\n    SEARCH_FOR_PARTICIPANTS: 'Search for participants',\n    SEARCH_FOR_TOPICS: 'Search for topics...',\n    SEARCH: 'Search...',\n    SHARE_AN_IDEA: 'Share A Post',\n    START_VIDEO: 'Start Video',\n    STOP_VIDEO: 'Stop Video',\n    INVITING: 'Inviting',\n    GUEST_TAKE_YOUR_PICTURE_AND_TYPE_YOUR_NAME: 'Guest, take a picture and type your name',\n\t\tTAKE_A_PHOTO_AND_TYPE_IN_YOUR_NAME_TO_JOIN_AS_A_GUEST: 'Take a photo and type in your name to join as guest',\n\t\tTYPE_IN_YOUR_NAME_TO_JOIN_AS_A_GUEST: 'Type in your name to join as guest',\n    JOIN_THE_TOPIC: 'Join the topic',\n    NAME_CANNOT_BE_BLANK: 'Name cannot be blank',\n    VIDEO_SERVER_CONNECTION_FAILED: 'Video server connection failed. Please call back',\n    THERE_WAS_AN_ERROR_WITH_YOUR_MEDIA_CONNECTION_PLEASE_JOIN_AGAIN: 'There was an error with your connection. Please join again',\n    CONNECTING: 'Connecting',\n    YOUR_ARE_NOT_CONNECTED_OR_YOUR_SESSION_HAS_EXPIRED_REDIRECTING_TO_LOGIN_PAGE: 'You are not connected or your session has expired. Redirecting to login page',\n    ADD_COMMENT: 'Add Comment',\n    ACTIVITY: 'Activity',\n    SAVE_COMMENT: 'Save Comment',\n    WRITE_A_COMMENT: 'Write a comment...',\n    ANONYMOUS: 'Anonymous',\n    SAVING: 'Saving...',\n    INCLUDE_ALL_MEMBERS: 'Include all members',\n    COPY_TOPIC_LINK: 'Copy link',\n    COPIED_TO_CLIPBOARD: 'Copied to clipboard',\n    CREATE_A_TOPIC: 'Create a topic',\n\t  LETS_GET_STARTED: 'Let\\'s get started!',\n\t  THIS_MAY_TAKE_FEW_SECONDS: 'This may take couple of seconds.',\n\t  TYPE_TO_FIND_PEOPLE: 'Type to find people...',\n\t  CREATE_TOPIC_TIP: 'To create a private or group space, simply name your space and invite friends or colleagues.',\n    CHANGE_YOUR_PROFILE_PIC: 'Change your profile picture',\n\t  CHANGE_PICTURE: 'Change Picture',\n\t  PROFILE: 'Profile',\n\t  LICENSES: 'Licenses',\n\t  APPS: 'Apps',\n\t  SETTINGS: 'Settings',\n\t  CHANGE_PASSWORD: 'Change Password',\n    I_LIKE_IT: 'I like it!',\n    TAKE_A_PICTURE_OF_YOU: 'Take a picture of you',\n    UPLOADING_THUMBNAILS: 'Uploading thumbnails...',\n    FINISHED_UPLOADING: 'Finished uploading',\n    TAKE_A_PICTURE_OF_YOUR_SELF: 'Take a picture of yourself',\n    DO_YOU_LIKE_IT: 'Do you like it?',\n    TAKE_A_PICTURE: 'Take a picture',\n    CHANGING: 'Changing...',\n    INSTALL_EXTENSION: 'Install Extension',\n    YOU_ARE_SHARING_YOUR_SCREEN: 'You are sharing your screen.',\n    YOUR_SCREEN_SHARE_ENDED: 'Your screen share ended!',\n    SHARING_SCREEN: 'Sharing Screen',\n    OR: 'or',\n    READING_FILE: 'Reading file...',\n    INCORRECT_FILE_EXTENSION: 'Incorrect file extension',\n    ONE_FROM_YOUR_DEVICE: 'one from your device',\n    CHOOSE: 'choose',\n    SHRINK_VIDEO: 'Shrink Video',\n    EXPAND_VIDEO: 'Expand Video',\n    FULL_SCREEN: 'Full Screen',\n    EXIT_FULL_SCREEN: 'Exit Full Screen',\n    ENLARGE_VIDEO: 'Enlarge Video',\n    ENLARGE_SCREEN: 'Enlarge SCREEN',\n\t  ENLARGE: 'Enlarge',\n    SCREEN_SHARING_IN_PROGRESS: 'Screen sharing in progress.',\n    STARTED_SCREEN_SHARE: '({name}) is sharing screen.',\n\t  ENDED_SCREEN_SHARE: '({name}) stopped sharing screen.',\n    VIEW: 'View',\n    DO_YOU_WANT_TO_OVERRIDE_THEM: 'Do you want to override them?',\n    YES: 'Yes',\n    NO: 'No',\n    PIN: 'Pin',\n\t\tDAYS_AGO: 'days ago',\n\t\tIN: 'in',\n    UN_PIN: 'Un-Pin',\n    HANG_UP: 'Hang Up',\n    CALL_BACK: 'Call Back',\n    COPY_THIS_LINK: 'Copy this link',\n    LOAD_COUNT_COMMENTS: 'Load {count} Comments',\n    LIKE: 'Like',\n    ADD_PEOPLE: 'Add People',\n\t\tCLICK_TO_ADD_MEMBERS: 'Click to add members',\n    VIDEO_ON:'Video On',\n    VIDEO_OFF: 'Video Off',\n    AUDIO_ON: 'Audio On',\n    AUDIO_OFF: 'Audio Off',\n    ATTENDING_FROM_DESKTOP: 'Attending From Desktop',\n    ATTENDING_FROM_MOBILE: 'Attending From Mobile',\n    NO_ACTIVE_CALLS: 'No Active Calls',\n    JOIN_LIVE_CALL: 'Join Live Call',\n    JOIN_START_LIVE_CALL: 'Join/start Live Call',\n    SELECT_THE_ABOVE_ICON_TO_JOIN_THE_CURRENT_VIDEO_CALL: 'Click the above icon to join the current video call',\n    SELECT_THE_ABOVE_ICON_TO_START_A_THE_VIDEO_CALL: 'Click the above icon to start the video call',\n    JOIN_THIS_LIVE_VIDEO_MEETING: 'Join this live video meeting',\n    THERE_IS_A_MEETING_GOING_ON_WITHOUT_YOU: 'There\\'s a meeting going on without you.',\n    SELECT_TO_JOIN_IT_NOW: 'Select to join it now!',\n    START_A_VIDEO_CALL: 'Start a video call!',\n    NEED_TO_HAVE_A_QUICK_FACE_TO_FACE_WITH_YOUR_TEAM: 'Need to have a quick face-to-face with your team?',\n    SELECT_TO_START_A_VIDEO_CALL_NOW: 'Select to start a video call now!',\n    NEW_SPACE: 'New Space',\n    ACTIVE_SPACES: 'Active spaces',\n    NAME_YOUR_NEW_SPACE: 'Name your new space',\n    CREATE_A_SPACE: 'Create a space',\n    MESSAGES: 'Messages',\n    WHITEBOARD: 'Whiteboard',\n    ZANG_SPACES: 'Zang Spaces',\n    UPLOAD_FILE: 'Upload file',\n\t  RECENT_FILES: 'Recent Files',\n\t  RECENT_POSTS: 'Recent Posts',\n    SORRY: 'Sorry',\n    CANNOT_BE_UPLOADED_YOUR_FILE_NEEDS_AT_LEAST_1_BYTE_IN_SIZE_PLEASE_TRY_AGAIN: 'cannot be uploaded. Your file needs to be at least 1 bytes in size. Please try again',\n    PLEASE_CHOOSE_AN_IMAGE_THAT_HAS_ONE_OF_THE_FOLLOWING_EXTENSTIONS: 'Please choose an image that has one of the following extensions: {extensions}',\n    CONNECTING_TO_YOUR_CAMERA: 'Connecting to your camera...',\n    SEND: 'Send',\n    ATTACH: 'Attach',\n    ATTACHMENTS: 'Attachments',\n    UNSTABLE_CONNECTION_TRYING_TO_RECONNECT: 'Unstable connection. Trying to reconnect...',\n\t\tAPPROVE_ENROLLMENT_REQUESTS: 'Approve requests',\n\t\tSUBMITTING_REQUEST: 'Submitting request...',\n\t\tREQUEST_SENT: 'Request sent',\n\t\tREQUEST_ERROR_PLEASE_TRY_AGAIN: 'Request error please try again',\n\t\tAPPROVE_REQUESTS: 'Approve requests',\n\t\tSEARCH_BY_EMAIL: 'Search by email...',\n\t\tNEXT: 'Next',\n\t\tPREVIOUS: 'Previous',\n\t\tOF:'of',\n\t\tAPPROVE: 'Approve',\n\t\tDELETE: 'Delete',\n\t\tREQUESTED_ON: 'Requested on',\n\t\tLOADING: 'Loading...',\n\t\tAPPROVE_OR_DELETE_REQUESTS: 'Approve or delete requests',\n\t\tENROLLMENT_REQUESTS: 'Enrollment requests',\n\t\tAPPROVING: 'Approving...',\n\t\tDISAPPROVE: 'Disapprove',\n\t\tWE_HAVE_ALREADY_RECEIVED_A_REQUEST_FOR_THIS_EMAIL_ADDRESS: 'We have already received a request for this email address',\n\t\tENROLL: 'Enroll',\n\t\tSTART_USING_ZANG_SPACES: 'Start using Zang Spaces',\n\t\tTHERE_WAS_AN_ERROR_SAVING_THIS_PLACEHOLDER_PLEASE_OPEN_IT_AGAIN: 'There was an error updating this {placeholder}. Please open it again',\n\t\tFILL_OUT_THE_FORM_BELOW_AND_ONE_OF_OUR_ADMINISTRATORS_WILL_CONTACT_YOU_RE_APPROVED: 'Fill out the form below and one of our administrators <br /> will contact you once you\\'re approved.',\n\t\tYOUR_REQUEST_WAS_SUBMITTED_SUCCESSFULLY_YOU_WILL_RECEIVE_AN_EMAIL_NOTIFICATION_ONCE_YOU_ARE_APPROVED: 'Your request was submitted successfully! You will receive an email notification once you\\'re approved',\n\t\tYOUR_ARE_NOT_AUTHORIZED_TO_START_A_NEW_SPACE: 'You are not authorized to start a new space',\n\t\tZANG_ACCOUNT: 'Zang Account',\n\t\tSUCCESSFULLY_SAVED: 'Successfully saved',\n\t\tTHIS_PLACEHOLDER_HAS_ALREADY_BEEN_UPDATED_BY_ANOTHER_MEMBER_PLEASE_COPY_YOUR_WORK_AND_OPEN_THE_PLACEHOLDER_AGAIN: 'This {placeholder} has already been updated by another member. Please copy your work and open the {placeholder} again',\n\t\tZANG: 'Zang',\n\t\tJOIN_THE_SPACE: 'Join space',\n\t\tJOINING_SPACE: 'Joining space',\n\t\tADD_A_NEW_ENROLL_ADMIN_EMAIL: 'Add a new enroll admin (type an email)',\n\t\tADD_COMMENT: 'Add Comment',\n\t\tENROLLMENT_ADMINS: 'Enrollment admins',\n\t\tADD: 'Add',\n\t\tREQUEST_INFORMATION: 'Request information',\n\t\tSTATUS: 'Status',\n\t\tACTIONS: 'Actions',\n\t\tRESET: 'Reset',\n\t\tFILTER: 'Filter',\n\t\tMANAGE_ALL_REQUESTS: 'Manage all requests',\n\t\tAUTO_APPROVE: 'Auto approve',\n\t\tADD_NEW: 'Add new',\n\t\tNEW_ENROLLMENT_ADDED_SUCCESSFULLY: 'New enrollment added successfully',\n\t\tTHERE_IS_ALREADY_AN_ENROLLMENT_WITH_THIS_EMAIL_OR_WITH_A_USER_THAT_USES_THIS_EMAIL: 'There is already an enrollment with this email or with a user that uses this email',\n\t\tTHIS_REQUEST_HAS_BEEN_DELETED: 'This request has been deleted',\n\t\tTHE_REQUEST_IS_STILL_WAITING_FOR_APPROVAL: 'The request is still waiting for approval',\n\t\tTHE_REQUEST_HAS_ALREADY_BEEN_APPROVED_CLICK_HERE_TO_START_USING_ZANG_SPACES: 'The request has already been approved! Click <a href=\"{url}\" target=\"_blank\">here</a> to start using Zang Spaces',\n\t\tYOU_VE_BEEN_INVITED_BY: 'You\\'ve been invited by',\n\t\tTO_JOIN: 'to join',\n\t\tCREATE: 'Create',\n    IDEA: 'Post',\n    ADD_IDEA: 'Add post',\n    ADD_TASK: 'Add task',\n    SHARE_A_NEW: 'Share a new',\n    UPLOAD_IN: 'Upload in',\n\t\tSELECT_FILE: 'Select file',\n\t\tIDEA_NAME: 'Post name',\n\t\tDESCRIPTION: 'Description',\n\t\tTASK_NAME: 'Task name',\n\t\tDUE_DATE: 'Due date',\n\t\tSHARE: 'Share',\n\t  NO_RESULTS_FOUND: 'No results found',\n\t  NO_TASKS_FOUND: 'No tasks found',\n\t  NO_POSTS_FOUND: 'No posts created',\n\t  NO_UPLOADS_FOUND: 'No files been uploaded',\n\t  NO_SPACES_FOUND: 'No spaces found',\n\t\tUPLOADING: 'Uploading',\n\t\tASSIGN_TO: 'Assign to',\n\t\tSPACE: 'Space',\n\t\tSTATUS: 'Status',\n\t\tSENDING: 'Sending...',\n\t\tDROP_FILES_HERE: 'Drop files here!',\n\t\tHOLD_SHIFT_TO_UPLOAD_INSTANTLY: 'Hold shift to upload instantly',\n\t\tFILE: 'File',\n\t\tFILES: 'Files',\n\t  DASHBOARD: 'Dashboard',\n\t  RECENT_UPLOADS: 'Recent Uploads',\n\t\tLOADING: 'Loading...',\n\t\tTHIS_FILE_WILL_NOT_BE_UPLOADED: 'This file will not be uploaded',\n\t\tZERO_BYTES_IN_SIZE_OR_INAPPROPRIATE_FILE_EXTENSION: 'Zero bytes in size or inappropriate extension',\n\t\tSHARE_SOMETHING: 'Share something',\n\t\tPOST_AN_IDEA: 'Create a post',\n\t\tPOST: 'Post',\n\t\tCREATE_A_TASK: 'Create a task',\n\t\tPRINT_SCREEN: 'Print Screen'\n  }\n\n};\n\nexport default logan_en;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/_locale/en.js\n **/","'use strict';\n\nimport fs from '../../modules/file';\nimport logger from '../../modules/logger';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport uuid from'node-uuid';\nimport async from 'async';\nimport Anonymous from '../anonymous/anonymous.model';\nimport User from '../user/user.model';\nimport dbWp from '../../utils/dbwrapper';\nimport utils from '../../utils/Utils';\n\nconst DEFAULT_UPLOAD_URL_DURATION = 10 * 60; //10 min\nconst DEFAULT_DOWNLOAD_URL_DURATION = 1 * 60; //1min\n\nfunction getUploadSignedUrls(src, data, expiration, cb) {\n    expiration = expiration || utils.getSecondsFromNow(DEFAULT_UPLOAD_URL_DURATION);\n    var processFiles = function (index, input, output, callback) {\n        //console.log('[getUploadSignedUrls] input', input, index);\n        if (!input) {\n            return callback(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        if (index === input.length) {\n            return callback(null, output);\n        }\n\n        let cur_file = input[index];\n        if (cur_file) {\n            cur_file.fileKey = cur_file.fileKey || uuid.v4();\n            fs.getUploadSignedUrl(src, {file: cur_file}, function (err, url) {\n                if (url) {\n                    output.push({\n                        fileKey: cur_file.fileKey,\n                        url: url\n                    });\n                    return processFiles(index+1, input, output, callback);\n                } else {\n                    return processFiles(index+1, input, output, callback);\n                }\n            }, expiration.getTime());\n        } else {\n            return processFiles(index+1, input, output, callback);\n        }\n    };\n\n    processFiles(0, data.files, [], function(err, result) {\n        if (err) {\n            return cb(err);\n        }\n\n        return cb(null,result);\n    });\n}\n\nfunction getDownloadSignedUrls (src, data, expiration, cb) {\n    expiration = expiration || utils.getSecondsFromNow(DEFAULT_DOWNLOAD_URL_DURATION);\n    var processFiles = function (index, input, output, callback) {\n        //console.log('[getDownloadSignedUrls] input', input, index);\n        if (!input) {\n            return callback(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        if (index === input.length) {\n            return callback(null, output);\n        }\n\n        let cur_file = input[index];\n        if (cur_file) {\n            fs.getDownloadSignedUrl(src, {key: cur_file}, function (err, url) {\n                if (url) {\n                    output.push({\n                        fileKey: cur_file,\n                        url: url\n                    });\n                    return processFiles(index+1, input, output, callback);\n                } else {\n                    return processFiles(index+1, input, output, callback);\n                }\n            }, expiration.getTime());\n        } else {\n            return processFiles(index+1, input, output, callback);\n        }\n    };\n\n    processFiles(0, data.fileKeys, [], function(err, result) {\n        if (err) {\n            return cb(err);\n        }\n\n        return cb(null,result);\n    });\n}\n\n\nexports.getUploadUrls = function(src, data, cb) {\n    for(var i in data){\n        data[i].fileKey = uuid.v4(); //enforce key;\n    }\n    getUploadSignedUrls(src, data, null, cb);\n}\n\nexports.getUploadSignedUrls = function(src, data, expiration, cb) {\n    getUploadSignedUrls(src, data, expiration, cb);\n}\n\nexports.getDownloadUrls = function(src, data, cb) {\n    getDownloadSignedUrls(src, data, null, cb);\n}\n\nexports.getDownloadSignedUrls = function(src, data, expiration, cb) {\n    getDownloadSignedUrls(src, data, expiration, cb);\n}\n\n\nexports.getProfileImageUploadUrl = function(src, data, cb) {\n    var getPictureFileKey = function (user, picture, callback) {\n        if (picture.dimension === 'original') {\n            logger.info(src.id, 'uploading an original picture');\n            picture.fileKey = 'pictures/pfpic'+ '_' + user.aType + '_' + uuid.v4();\n            if (user.aType === 'anonymous') {\n                dbWp.execute(Anonymous,\n                    Anonymous.findOneAndUpdate,\n                    src.id,\n                    {_id: user._id},\n                    {\n                        $set: {\n                            picturefile: picture.fileKey\n                        }\n                    }, {new: true},\n                    function (err, updatedAnonymous) {\n                        if (err) {\n                            return callback(err);\n                        }\n                        return callback(null, picture);\n                    }\n                );\n            }\n            if (user.aType === 'user') {\n                dbWp.execute(User,\n                    User.findOneAndUpdate,\n                    src.id,\n                    {_id: user._id},\n                    {\n                        $set: {\n                            picturefile: picture.fileKey\n                        }\n                    }, {new: true},\n                    function (err, updatedUser) {\n                        if (err) {\n                            return callback(err);\n                        }\n                        return callback(null, picture);\n                    }\n                );\n            }\n        } else {\n            if (!user.picturefile || user.picturefile.indexOf('pictures/') !== 0) {\n                return callback('error');\n            }\n            logger.info(src.id, 'uploading a thumbnail picture');\n            picture.fileKey = user.picturefile + '/' + picture.dimension + '_' + picture.dimension;\n            return callback(null, picture);\n        }\n    };\n\n    var processFiles = function (index, input, output, callback) {\n        if (!input) {\n            return callback(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        if (index === input.length) {\n            return callback(null, output);\n        }\n\n        let cur_file = input[index];\n        if (cur_file) {\n            getPictureFileKey(data.user, cur_file, function (err, resultFile) {\n                if (err) {\n                    return processFiles(index+1, input, output, callback);\n                }\n                fs.getUploadPublicUrl(src, {file: resultFile}, function (err, url) {\n                    if (url) {\n                        output.push({\n                            fileKey: resultFile.fileKey,\n                            url: url\n                        });\n                        return processFiles(index+1, input, output, callback);\n                    } else {\n                        return processFiles(index+1, input, output, callback);\n                    }\n                });\n            });\n        } else {\n            return processFiles(index+1, input, output, callback);\n        }\n    };\n\n    processFiles(0, data.files, [], function(err, result) {\n        if (err) {\n            return cb(err);\n        }\n\n        return cb(null,result);\n    });\n}\n\n\n\nexports.getDownloadUrlsPublic = function(src, data, cb) {\n    var processFiles = function (index, input, output, callback) {\n        if (!input) {\n            return callback(new esErr.ESErrors(esErr.BadRequestError));\n        }\n        if (index === input.length) {\n            return callback(null, output);\n        }\n\n        let cur_file = input[index];\n        if (cur_file) {\n            fs.getDownloadPublicUrl(src, {key: cur_file}, function (err, url) {\n                if (url) {\n                    output.push({\n                        fileKey: cur_file,\n                        url: url\n                    });\n                    return processFiles(index+1, input, output, callback);\n                } else {\n                    return processFiles(index+1, input, output, callback);\n                }\n            });\n        } else {\n            return processFiles(index+1, input, output, callback);\n        }\n    };\n\n    processFiles(0, data.fileKeys, [], function(err, result) {\n        if (err) {\n            return cb(err);\n        }\n\n        return cb(null,result);\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/file/file.backend.js\n **/","/**\n * Backend non api functions\n */\n'use strict';\n\nvar _ = require('lodash');\nvar Invite = require('./invite.model'),\n\tutils = require('../../modules/utils'),\n\tuserEvent = require('../user/user.event'),\n\tuserBusiness = require('../user/user.backend');\n\n/**\n * CRUD\n */\nexports.create = function (invite, cb) {\n\tInvite.create(invite, function(err, data) {\n\t    if(err) { \n\t    \treturn cb(err); \n\t    }\n\n\t    if (!data) {\n\t      \treturn cb('not retrieving created invite')\n\t    } else {\n\t    \treturn cb(null, data);\n\t    }\n\t});\n}\n\n/**\n * First Layer\n */\n\nexports.checkList = function (tlist, cb) {\n\tvar processInvites = function (index, tl, callback) {\n\t\tif (!tl || tl.constructor !== Array ) {\n\t\t\treturn callback('ERROR: No input list');\n\t\t}\n\n\t\tvar cur_t = tl[index];\n\t\tif (!cur_t) {\n\t\t\treturn callback(null, tl);\n\t\t}\n\n\t\tif (cur_t.id) {\n\t\t\tprocessInvites(index + 1, tl, callback);\n\t\t} else {\n\t\t\tInvite.create(cur_t, function (err, newInvite) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\t\t\t\ttl[index] = newInvite;\n\t\t\t\tprocessInvites(index + 1, tl, callback);\n\t\t\t})\n\t\t}\n\n\t};\n\n\tprocessInvites(0, tlist, function(err, resultList) {\n\t\tif (err) {\n\t\t\treturn cb(err);\n\t\t}\n\n\t\treturn cb(null, resultList);\n\t});\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/invite/invite.backend.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction NotifyEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(NotifyEvent, EventEmitter);\n\nNotifyEvent.prototype.emitUserAccessed = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('notifyUserAccessed');\n    this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onUserAccessed = function (callback) {\n    this.on('notifyUserAccessed', callback);\n};\n\nNotifyEvent.prototype.emitUserJoinInvite = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('notifyUserJoinInvite');\n    this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onUserJoinInvite = function (callback) {\n    this.on('notifyUserJoinInvite', callback);\n};\n\nNotifyEvent.prototype.emitUserCreateTopic = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('notifyUserCreateTopic');\n    this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onUserCreateTopic = function (callback) {\n    this.on('notifyUserCreateTopic', callback);\n};\n\nNotifyEvent.prototype.emitNotifyCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('notifyCreated');\n    this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onNotifyCreated = function (callback) {\n    this.on('notifyCreated', callback);\n};\n\nNotifyEvent.prototype.emitNotifyDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('notifyDeleted');\n    this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onNotifyDeleted = function (callback) {\n    this.on('notifyDeleted', callback);\n};\n\nNotifyEvent.prototype.emitNotifyInvited = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('notifyInvited');\n    this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onNotifyInvited = function (callback) {\n    this.on('notifyInvited', callback);\n};\n\nNotifyEvent.prototype.emitUpdateModifyTime= function () {\n  var args = Array.prototype.slice.call(arguments, 0);\n  args.unshift('updateModifyTime');\n  this.emit.apply(this, args);\n};\n\nNotifyEvent.prototype.onUpdateModifyTime = function (callback) {\n  this.on('updateModifyTime', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new NotifyEvent());\n    }\n};\n\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/notify/notify.event.js\n **/","/**\n * author: Eric Ding\n */\nimport mongoose from 'mongoose';\nimport dbWp from '../../utils/dbwrapper';\nimport Relation from './relation.model';\n//import RelRebuildStatus from './relationrebuildstatus.model';\nimport memcache from '../../modules/memcache';\nimport RelationGraph from './relationgraph.model';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport cst from '../../utils/serverConstants'; \nimport taskqueue from '../taskqueue/taskqueue.backend';\nimport User from '../user/user.model';\nimport Anonymous from '../anonymous/anonymous.model';\nimport userEvent from '../user/user.event';\nimport anonymousEvent from '../anonymous/anonymous.event';\nimport esErr from '../../errors/errors';\n\nexports.addRelations = function(src, data, cb){\n  //Comment out the function\n  return cb(null);\n  //The input data is array of relationship\n  let failedAddedRelations = [];\n  async.each(data, (relationItem, interCallback)=> {\n    //relationItem._id = new mongoose.Types.ObjectId();\n    dbWp.execute(Relation, Relation.create, src.id, relationItem, (err, addedrelationItem) => {\n      if (err || (!addedrelationItem)){\n        if (err){\n          logger.warn(src.id, \"addRelations with object failed for reason\", err);\n        }\n        logger.warn(src.id, \"addRelations with object failed\", relationItem);\n        failedAddedRelations.push(relationItem);\n        interCallback();\n      }\n      else{\n        //Trigger Event to update initiator or target\n        rebuildRelationGraphs(src,\n                              addedrelationItem, \n                              (err, result) => {interCallback()});\n      }      \n    });\n  }, function(){\n    return cb(null, failedAddedRelations);\n  });\n};\n\nexports.delRelations = function(src, data, cb){\n  //The input data is array of relationship\n  let failedRemovedRelations = [];\n  async.each(data, (relationItem, interCallback) => {\n    dbWp.execute(Relation,\n      Relation.findOneAndRemove,\n      src.id,\n      {relationdef_id: relationItem.relationdef_id},\n      (err, removedItem) => {\n        if (err || (!removedItem)){\n          if (err){\n            logger.warn(src.id, \"delRelations with object failed for reason\", err);\n          }\n          logger.warn(src.id, \"delRelations with object failed\", relationItem);\n          failedRemovedRelations.push(relationItem);\n          interCallback();\n        }\n        else{\n          //Trigger Event to update initiator or target\n          rebuildRelationGraphs(src,\n                                addedrelationItem,\n                                (err, result) => {interCallback()});\n        }\n    });\n    },function(){\n      return cb(null, failedRemovedRelations);\n  });\n};\n\nexports.deleteTargetObj = function(src, targetObj, targetType, cb){\n  async.parallel([\n    (interCallback) => {\n      let deleteCondition = {destinationId: targetObj._id,\n                             destinationType: targetType};\n      let remover = RelationGraph.remove(deleteCondition);\n      dbWp.execute(remover,\n        remover.exec,\n        src.id,\n        interCallback);\n    },\n    (interCallback) => {\n      let deleteCondition = {$or:[{target_id: targetObj._id, target_type: targetType},\n                                  {initiator_id: targetObj._id, initiator_type: targetType}]};\n      \n      dbWp.execute(Relation,\n        remover.remove,\n        src.id,\n        deleteCondition,\n        interCallback);\n    },\n  ], (err, results) => {\n    if (err){\n      logger.error(src.id, \"happen some error when remove data about relation and relationGraph\", err);\n    }\n    return interCallback(err, results);\n  });\n};\n\nexports.insertUpdateRelationGrph = function(src, relationGraphData, cb){\n  let updateCondition = {destinationId: relationGraphData.destinationId,\n                         destinationType: relationGraphData.destinationType};\n  \n  dbWp.execute(RelationGraph,\n               RelationGraph.update,\n               src.id,\n               updateCondition,\n               savedData,\n               {upsert: true},\n               cb);\n};\n\nvar relationGraphsBuildTypesSet = new Set([cst.TypeUser, \n                                           //cst.TypeAnonymous\n                                           ]);\nvar rebuildRelationWaitingTimeInSec = 10;\n\nfunction emitUserCreatedEvent(src, userid, cb){\n  async.waterfall([\n    (interCallback) => {\n      dbWp.execute(User, User.findOne, src.id, {_id: userid}, interCallback);\n    },\n    (userObj, interCallback) => {\n      if (userObj){\n        userEvent.emitUserCreated(src, userObj);\n        interCallback(new esErr.ESErrors(esErr.TaskqueueRetry));\n      }\n      else{\n        interCallback();\n      }\n    }\n  ], (err, result) => {\n      cb(err, result)\n  });\n}\n\nfunction emitAnonymousCreatedEvent(src, anonymousid, cb){\n  async.waterfall([\n    (interCallback) => {\n      dbWp.execute(Anonymous, Anonymous.findOne, src.id, {_id: anonymousid}, interCallback);\n    },\n    (anonymousObj, interCallback) => {\n      if (anonymousObj){\n        anonymousEvent.emitAnonymousCreated(src, anonymousObj);\n        interCallback(new esErr.ESErrors(esErr.TaskqueueRetry));\n      }\n      else{\n        interCallback();\n      }\n    }\n  ], (err, result) => {\n    cb(err, result);\n  });\n}\n\nfunction emitAnonymousCreatedEvent(src, userid, cb){\n  async.waterfall([\n    (interCallback) => {\n      dbWp.execute(User, User.findOne, reqid, {id: userid}, interCallback);\n    },\n    (userObj, interCallback) => {\n      anonymousEvent.emitAnonymousCreated(src, userObj);\n    }\n  ], (err, result) => {\n    cb(err, result);\n  });\n}\n\nvar buildTypesEvtDict = {};\nbuildTypesEvtDict[cst.TypeUser] = emitUserCreatedEvent;\n//buildTypesEvtDict[cst.TypeAnonymous] = emitAnonymousCreatedEvent;\n\nfunction rebuildTargetRelationGraphs(src, statusObj, cb){\n  logger.info(src.id, \"Begin runing rebuildInitiatorRelationGraphs \" + JSON.stringify(statusObj));\n  async.waterfall([\n    (interCallback) => {\n      let memkeyval = 'relrebuildstatus_'+ statusObj.destinationId +'_'+ statusObj.destinationType;\n      memcache.del(src, memkeyval);\n      interCallback(null, statusObj);\n    },\n    (statusObj, interCallback) => {\n      let qryCondition = {target_id: statusObj.destinationId,\n                          target_type: statusObj.destinationType};\n      let prj = 'relationdef_id initiator_id initiator_type relation_type';\n      dbWp.execute(Relation, Relation.find, src, qryCondition, prj, interCallback);\n    },\n    (relation_graphs, interCallback) => {\n      if (relationGraphsBuildTypesSet.has(statusObj.destinationType)){\n        let qryCondition = {destinationId: statusObj.destinationId, \n                            destinationType: statusObj.destinationType};\n        let setVal = {'relation_graphs': relation_graphs};        \n        dbWp.execute(RelationGraph, RelationGraph.update, src.id, qryCondition, setVal, interCallback);\n      }\n      else{\n        interCallback();\n      }\n    },\n    (updateResult, interCallback) => {\n      if (updateResult && !updateResult.n){\n        buildTypesEvtDict[statusObj.destinationType](src, statusObj.destinationId, interCallback);\n      }\n      else{\n        interCallback();\n      }\n    }\n  ], (err, result) => {\n    if (err){\n      logger.warn(src.id, \"rebuildTargetRelationGraphs happen error\", err);\n    }\n    logger.info(src.id, \"End running rebuildInitiatorRelationGraphs\");\n    if (cb){\n      return cb(err, result);\n    }\n  });\n}\n\ntaskqueue.registerDeferHandle('rebuildTargetRelationGraphs', rebuildTargetRelationGraphs);\n\nfunction rebuildRelationGraphs(src, relation, cb){\n  if (relationGraphsBuildTypesSet.has(relation.target_type)){\n    let statusObj = {\n        destinationId: relation.target_id,\n        destinationType: relation.target_type\n    };\n    //dbWp.execute(RelRebuildStatus, RelRebuildStatus.create, src.id, statusObj, (err, addedObj) => {\n    let keyVal = 'relrebuildstatus_'+ relation.target_type+'_'+relation.target_id;\n    //let dataVal = json.stringify(statusObj);\n    memcache.add(src, keyVal, '',  rebuildRelationWaitingTimeInSec, (err, result) =>{\n      if ((!err) && result){\n        logger.info(src.id,\n                    \"Trigger a task to rebuild Relation Graph after \" + \n                    rebuildRelationWaitingTimeInSec.toString() + \n                    ' seconds', keyVal);\n        taskqueue.launchDefer(src,\n                              'rebuildTargetRelationGraphs',\n                              statusObj,\n                              {defferOption: true,\n                               delay: rebuildRelationWaitingTimeInSec,\n                               backoff_seconds: 300,\n                               attempts: 3,\n                               callback:cb\n                              });\n        \n      }\n      else{\n        return cb();\n      }\n    });\n  }  \n}\n\nvar SpecialDomainPermConfig = {};\nSpecialDomainPermConfig[cst.TypeMessage] = {collectionDB: require('../message/message.model')};\n\nvar getinitiatorInfo = function (src, relType, object, cb){\n  if (relType == cst.relationCreator){\n    if (object.creator && object.creator._id && object.creator.aType){\n      cb (null, {initiator_id: object.creator._id, initiator_type: object.creator.aType});\n    }\n    else{\n      cb (new esErr.ESErrors(esErr.NotCreatorError));\n    }\n  }\n  else{\n    if (object.parent && object.parent._id && object.parent.aType){\n      cb (null, {initiator_id: object.parent._id, initiator_type: object.parent.aType});\n    }\n    else{\n      cb (new esErr.ESErrors(esErr.NotParentError));\n    }\n  }\n};\n\nvar specialDomainHanle = function(src, relType, object, objectType, cb){\n  let initiator_id = object;\n  if (typeof(object) === 'object' && object._id){\n    getinitiatorInfo(src, relType, object, cb);\n  }\n  else{\n    var collectionDB = SpecialDomainPermConfig[objectType].collectionDB;\n    if (src._cachedActivityDomains && (object + '_'+objectType) in src._cachedActivityDomains){\n      let tempCheckObj = src._cachedActivityDomains[object + '_'+objectType];\n      return getinitiatorInfo(src, relType, tempCheckObj, cb);\n    }\n    dbWp.execute(collectionDB, collectionDB.findOne, src.id, {_id: object}, (err, resultObj)=>{\n      if (!err && resultObj){\n        if (!src._cachedActivityDomains){\n          src._cachedActivityDomains = {};\n        }\n        src._cachedActivityDomains[object + '_'+objectType] = resultObj;\n        getinitiatorInfo(src, relType, resultObj, cb);\n      }\n      else{\n        cb(new esErr.ESErrors(esErr.NotExsistedError));\n      }\n    });\n  }\n};\n\nvar MaxRecursionDepth = 4;\nexports.hasPerm = function(src, userobj, relType, object, objectType, cb, recursionDepth=0){\n  let initiator_id = object;\n  let initiator_type = objectType;\n  if (typeof(object) === 'object' && object._id){\n    initiator_id = object._id.toString();\n  }\n  if (typeof(objectType) != 'string'){\n    return cb(new esErr.ESErrors(esErr.NoValidateObjectType));\n  }\n  \n  if (initiator_id == userobj._id && initiator_type == userobj.aType){\n    return cb(null, true);\n  }\n  \n  if (objectType in SpecialDomainPermConfig){\n    specialDomainHanle(src, relType, object, objectType, (err, result)=>{\n      if (err || (!result)){\n        return cb(null, false);\n      }\n      else{\n        recursionDepth += 1;\n        if (recursionDepth < MaxRecursionDepth){\n          return exports.hasPerm(src, userobj, relType, result.initiator_id, result.initiator_type, cb, recursionDepth);\n        }\n        else{\n          return cb(null, false);\n        }\n      }\n    });\n  }\n  else{\n    if (relType == cst.relationCreator){\n      if (initiator_type == userobj.aType && initiator_id.toString() == userobj._id.toString()){\n        return cb(null, true); \n      }\n    }\n    \n    let query = {\n        initiator_id: initiator_id,\n        initiator_type: initiator_type,\n        target_id: userobj._id,\n        target_type: userobj.aType,\n        relation_type: relType\n    };\n    dbWp.execute(Relation, Relation.findOne, src.id, query, (err, result)=>{\n      if (err){\n        return cb(err, false);\n      }\n      if (!result){\n        return cb(null, false);\n      }\n      else{\n        return cb(null, true);\n      }\n    });\n    \n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/relation/relation.backend.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema,\n    config = require('../../config');\n\nvar TopicInviteSchema = new Schema({\n    topicId: { type: Schema.Types.ObjectId, ref: 'Topic' },\n    created: { type: Date, default: Date.now },\n    modified: Date, //UTC\n    startDateTime: Date, //UTC time\n    endDateTime: Date,  //UTC time\n    invitees: [\n        {\n            invitee: String,\n            inviteeType: {type: String, enum: ['userId', 'email']},  //  userId \n            role: String, // member, admin, guest,\n            _id: false,\n        },\n    ],\n    testvali: String\n});\n\n/**\n * Virtuals\n */\nTopicInviteSchema.set('toJSON', {\n    virtuals: true\n});\n\nTopicInviteSchema.options.toJSON = {\n\n    transform : function(doc, ret, options) {\n        delete ret.__v;\n        delete ret.id;\n        return ret;\n    },\n    virtuals: true\n};\n/**\n * Methods\n */\nTopicInviteSchema.methods = {\n    makeInviteUrl: function(domain) {\n        return config.getLink(domain) + '/spaces/invites/' + this._id + '/join';\n    },\n    makeTopicUrl: function(domain) {\n        return config.getLink(domain) + '/spaces/' + this.topicId;\n    }\n};\n/**\n * Validate\n */\n\nmodule.exports = mongoose.model('TopicInvite', TopicInviteSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/topic/topicInvite.model.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\n\nvar OAuthAccessTokensSchema = new Schema({\n    accessToken: { type: String },\n    clientId: { type: String },\n    userId: { type: Schema.Types.ObjectId },\n    expires: { type: Date },\n    scope: [String]\n});\n\nmodule.exports = mongoose.model('OAuthAccessTokens', OAuthAccessTokensSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/oauth/accessToken/accessToken.model.js\n **/","var ns = '[SocketConstants]';\nimport keyMirror from '../../../node_modules/react-interpolate-component/node_modules/fbjs/lib/keyMirror';\nimport Log from 'ZSLogger';\nconst SocketConstants = {};\nSocketConstants.EVENT_NAMESPACE = {\n\tSUBSCRIBE_CHANNEL: 'SUBSCRIBE_CHANNEL',\n\tCHANNEL_SUBSCRIBED: 'CHANNEL_SUBSCRIBED',\n\n\tUNSUBSCRIBE_CHANNEL: 'UNSUBSCRIBE_CHANNEL',\n\tCHANNEL_UNSUBSCRIBED: 'CHANNEL_UNSUBSCRIBED',\n\n\tSEND_GROUP_MESSAGE: 'SEND_GROUP_MESSAGE',\n\tGROUP_MESSAGE_SENT: 'GROUP_MESSAGE_SENT',\n\tSEND_GROUP_MESSAGE_FAILED: 'SEND_GROUP_MESSAGE_FAILED',\n\n\tSEND_DIRECT_MESSAGE: 'SEND_DIRECT_MESSAGE',\n\tDIRECT_MESSAGE_SENT: 'DIRECT_MESSAGE_SENT',\n\tDIRECT_MESSAGE_SEND_FAILED: 'DIRECT_MESSAGE_SEND_FAILED',\n\n\n\n\tSTART_MEDIA_SESSION: 'CREATE_MEDIA_SESSION',  //start create a conference session for a topic if not created yet, any consecutive connections will, the session is closed after 10min of inactivities\n\tMEDIA_SESSION_RESPONSE: 'MEDIA_SESSION_RESPONSE',\n\tSEND_MEDIA_SESSION_EVENTS: 'SEND_MEDIA_SESSION_EVENTS',\n\n\tPRESENCE_EVENT_RESPONSE: 'PRESENCE_EVENT_RESPONSE',\n\tSEND_PRESENCE_EVENT: 'SEND_PRESENCE_EVENT',\n\n\n\n\n\n\n\n\tON_DISCONNECT: 'disconnect',\n\tUSER_DISCONNECTED: 'USER_DISCONNECTED',\n\tERROR: 'error',\n\tCONNECTION_ERROR: 'connect_error'\n};\n\n\nSocketConstants.API = {};\n\nSocketConstants.ACTIONS = keyMirror({\n\tSOCKET_CONNECT: null,\n\tSOCKET_CONNECTED: null,\n\tSOCKET_DISCONNECTED: null,\n\tSOCKET_CONNECTION_ERROR: null,\n\tSOCKET_RECONNECTION_ERROR: null,\n\tSOCKET_RECONNECT_FAILED: null,\n\tSOCKET_ERROR: null,\n\tLOGGED_IN_SUCCESSFULLY: null,\n\tGOT_GROUP_TYPING: null,\n\tGOT_DIRECT_TYPING: null,\n\n\tSEND_INVITE_TO_JOIN: null,\n\tGOT_INVITE_TO_JOIN: null,\n\n\tSET_MEETING_READ_MESSAGE: null,\n\tGOT_MEETING_READ_MESSAGE: null,\n\n\tSEND_GROUP_MESSAGE: null,\n\tGOT_GROUP_MESSAGE: null,\n\n\tSTART_MEDIA_SESSION: null,\n\tMEDIA_SESSION_RESPONSE: null,\n\tSEND_MEDIA_SESSION_EVENTS: null,\n\n\tPRESENCE_EVENT_RESPONSE: null,\n\tSEND_PRESENCE_EVENT: null,\n\n\tSEND_DIRECT_MESSAGE: null,\n\tGOT_DIRECT_MESSAGE: null,\n\n\tSUBSCRIBE_CHANNEL: null,\n\tCHANNEL_SUBSCRIBED: null,\n\n\tUNSUBSCRIBE_CHANNEL: null,\n\tCHANNEL_UNSUBSCRIBED: null,\n\n\tUSER_ENTERED_MEETING: null,\n});\n\nSocketConstants.getRandomArbitrary = function(min, max) {\n\treturn Math.floor(Math.random() * (max) + min);\n};\n\nSocketConstants.TOKEN_AUTH_TYPES = {\n\tANONYMOUS: 'anonymous',\n\tJWT: 'jwt'\n};\n\nSocketConstants.getChannelName = function(channel){\n\tvar func =  ns + '[getChannelName]';\n\ttry{\n\t\treturn channel.type + '_' + channel._id;\n\t}\n\tcatch(err){\n\t\tLog.error(func, err);\n\t}\n\treturn null;\n}\n\nexport default SocketConstants;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/flux/constants/SocketConstants.js\n **/","export default {\n\tinviteUser: {\n\t\ttemplateId: '115d773e-88e0-4fcd-8669-a7b2717f491f',\n\t\tinviteContentText: function (data) {\n\t\t\treturn 'Hi, You have been invited to join ' + data.title + ' on Zang Spaces!\\nFollow the link to join the meeting:  ' + data.link + '\\n Zang Spaces Team';\n\t\t},\n\t\tinviteContentHtml: function (data) {\n\t\t\treturn '<html><body><p>Hi, You have been invited to join ' + data.title + ' on Zang Spaces!</p><p>Follow the link to join the meeting: &nbsp;' + data.link + '</p><p>Zang Spaces Team</p></body></html>';\n\t\t},\n\t\ttips: {\n\t\t\texternal: [\n\t\t\t\t'With Zang Spaces, you can post and share content with your team and spawn discussions with the <b>Idea Board</b>.',\n\t\t\t\t'You can organize your team and keep them on track by assigning <b>Tasks</b> right from your team space. Dont worry, Zang Spaces will automatically send reminders when they get near the due date as well!',\n\t\t\t\t'You can view and manage all <b>Tasks</b> assigned to you across multiple teams. Make sure you mark those pending or completed so your team is aware of your progress!',\n\t\t\t\t'You can easily schedule Zang Spaces meetings from <b>Microsoft Outlook</b>? Download the free plugin here!',\n\t\t\t\t'You can quickly drag and drop files to the Chat screen to share them with your team.',\n\t\t\t\t'Keep track of important stuff shared by your teammates by searching for whats relevant to you in your <b>Group History</b>.',\n\t\t\t\t'You can share your screen or escalate to a video call at any time.',\n\t\t\t\t'Not a webapp fan? Good new! Zang Spaces comes with a <b>mobile companion app</b>. Get it here. '\n\t\t\t],\n\t\t\tinternal: [\n\t\t\t\t'Post and share stuff that inspires you on the <b>Idea Board</b> - cat videos, recipes, vacation selfies, actual work its up to you!',\n\t\t\t\t\"The <b>Idea Board</b> is sort of like a vision board, except it's even more life-changing...oh and thats where you can post and share stuff with your team\",\n\t\t\t\t\"Micromanaging is so 2007 so, let Zang Spaces do it for you! Organize your team and keep them on track by assigning them <b>Tasks</b>, also let Zang Spaces do the reminding when something is due.\",\n\t\t\t\t\"Did you know that you can organize your team and keep them on track by assigning <b>Tasks</b> right from your team space? Dont worry, Zang Spaces will automatically send reminders when they get near the due date as well!\",\n\t\t\t\t\"You can view and manage all <b>Tasks</b> assigned to you across multiple teams! Make sure you mark those pending or completed so your team is aware of your progress.\",\n\t\t\t\t\"Keep track of your <b>Tasks</b> across multiple teams and let people in on a view to whats being worked on or what youve already finished.\",\n\t\t\t\t\"Ever wake up in a cold sweat only to remember that you forgot to do something? Use Zang Spaces to keep track of your <b>Tasks</b> and rest a little easier.\",\n\t\t\t\t\"It official! Zang Spaces and <b>Microsoft Outlook</b> are officially an item - schedule Zang Spaces meetings from Outlook with the free plugin here!\",\n\t\t\t\t\"Schedule Zang Spaces meetings from your <b>Microsoft Outlook</b> calendar with the free plugin! Woah whats next, hoverboards? Oh wait,...they actually have those?\",\n\t\t\t\t\"Why upload a document or picture when you can drag and drop  those files directly to your Group Chat? The future is now.\",\n\t\t\t\t\"Unlike those important notes you write on the back of a napkin, the stuff you share in Zang Spaces is always accessible from the Group  History.\",\n\t\t\t\t\"Keep track of important stuff shared by your teammates by searching for whats relevant to you in your <b>Group History</b>. You can also easily filter out all of your coworkers cat pictures if thats become a problem in your group...\",\n\t\t\t\t\"With screen sharing and presentation modes, let people actually know what youre talking about during your next Zang Spaces meeting.\",\n\t\t\t\t\"Make sure you're all set before sharing your screen in Zang Spaces during a video call. We wouldn't want a repeat of what happened last year! \",\n\t\t\t\t\"Apparently everyone has a smartphone these days and theyre only used for selfies well how about one more use? Download the mobile version of Zang Spaces here.\",\n\t\t\t\t\"Everybody needs a companion, apparently the same is true for software, so do Zang Spaces a favor and pair it with its very own <b>mobile companion app</b> now.\",\n\t\t\t\t\"If you have to, delete some of your cat pictures from your phone, so you have room to download the mobile version of Zang Spaces here.\",\n\t\t\t\t\"Apparently TPS reports are a thing now. Why not keep others up-to-date by storing that file in your Sticky Docs where everyone can see it? High-five for teamwork!\"\n\t\t\t]\n\t\t}\n\t},\n\trequestControll: {\n\t\ttemplateId: \"dfc2d561-7255-4ae8-bc1f-99186f7c8d93\"\n\t},\n\trequestApproved: {\n\t\ttemplateId: \"d1af090d-b3bc-4670-972f-db2b0e3e67db\"\n\t}\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/email/templater.js\n **/","/**\n * Created by andreasi on 11/6/2015.\n */\n\nmodule.exports =  {\n  $is: function(v, objectType){\n    \"use strict\";\n    return Object.prototype.toString.call(v) === \"[object \" + objectType + \"]\";\n  },\n  $array: function(v){\n    \"use strict\";\n    return this.$is(v, \"Array\");\n  },\n  $object: function(v){\n    \"use strict\";\n    return this.$is(v, \"Object\");\n  },\n  $function: function(v){\n    \"use strict\";\n    return this.$is(v, \"Function\");\n  },\n  $number: function(v){\n    \"use strict\";\n    return this.$is(v, \"Number\");\n  },\n  $boolean: function(v){\n    \"use strict\";\n    return this.$is(v, \"Boolean\");\n  },\n  $string: function(v){\n    \"use strict\";\n    return this.$is(v, \"String\");\n  },\n  $email: function(v){\n    \"use strict\";\n    let re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\n    return re.test(v);\n  },\n  $url: function(v, pureLink){\n    if(pureLink && v && ((v.indexOf('http://') > 0) || (v.indexOf('https://') > 0)) //not pure link, link is within a text content\n    ){\n      return false;\n    }\n    return /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/.test(v);\n  },\n\t$blob: function (v) {\n\t\treturn v.indexOf('blob:') > -1;\n\t},\n  $firefox: function(){\n    \"use strict\";\n    return navigator.mozGetUserMedia;\n  },\n  $chrome: function(){\n    \"use strict\";\n    return navigator.webkitGetUserMedia;\n  },\n  $empty: function(v){\n    return v === undefined || v === \"\" || (this.$array(v) && v.length === 0);\n  },\n  $imageMime: function(mime){\n    if(mime.indexOf('image')>=0){ //return (mime=='image/jpeg' || mime=='image/png');\n      return true;\n    }\n    return false;\n  },\n  $videoMime: function(mime){\n    if(mime.indexOf('video')>=0){ //return (mime=='image/jpeg' || mime=='image/png');\n      return true;\n    }\n    return false;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/Is.js\n **/","module.exports = require(\"redis\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redis\"\n ** module id = 63\n ** module chunks = 0\n **/","module.exports = require(\"underscore\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 64\n ** module chunks = 0\n **/","var logan_en = {\n  messages: {\n    MEET_ME: 'Project Logan',\n    KEY_IN_YOUR_TOPIC: 'Key in your topic',\n    START_MEETING: 'Start Meeting',\n    INVITE_PARTICIPANTS: 'Invite Participants',\n    MICROPHONE: 'Microphone',\n    CAMERA: 'Camera',\n    REALDEVICE: 'Real Device',\n    FAKEDEVICE: 'Fake Device',\n    SCREEN: 'Screen',\n    APPLICATION: 'Application',\n    WINDOW: 'Window',\n    MEETME_INVITATION_SUBJECT: 'Video Chat Invite: {0}',\n    MEETME_INVITATION_BODY: 'Hi There,<br/>{0} is inviting you to join a Video Chat<br/><br/>Click the following link<br/>{1}<br/><br/><br/> ** Created using  Project Logan @ OnEsna',\n    MEETING_TOPIC_CANNOT_BE_BLANK: 'Don\\'t forget to key in the topic!',\n    INVITATION_SENT_SUCCESSFULLY: 'A video chat invitation is sent to all parties.',\n    NO_PARTIES_ADDED: 'No Parties Added!',\n    PLEASE_INVITE_OTHER_TO_JOIN: 'Please invite others to join.',\n    YOUR_RECENT_MEETINGS: 'Your Recent Meetings',\n    MEETING_PARTIES: 'Meeting Parties',\n    ENTER_YOUR_NAME: 'Your Name',\n    ENTER_YOUR_EMAIL: 'Your Email',\n    JOIN_MEETING: 'Join Meeting',\n    NAME_IS_REQUIRED: 'Don\\'t forget to proivde your name',\n    PICTURE_IS_REQUIRED: 'Please provide a photo snapshot!',\n    THIS_ROOM_IS_NOT_OPEN_TO_PUBLIC: 'This room is not open to public',\n    ACCESS_DENIED: 'Access Denied!',\n    MEETING_HISTORY: ' ',\n    IDEA_BOARD: 'Idea Board',\n    MEMBERS: 'Members',\n    STICKY_DOCS: 'Sticky Docs',\n    WORK_SPACE: 'Work Space',\n    TO_DO: 'To-Do',\n    TASK_TITLE: 'Task Title',\n    TASK_DESCRIPTION: 'Task Description',\n    TASK_DUE_DATE: 'Task Due Date',\n    TASK_ASSIGN_TO: 'Assign To',\n    ASSIGN: 'Assign',\n    PLEASE_PROVIDE_A_TITLE_FOR_THIS_TASK: 'Please provide a title for this task',\n    ATTENDEES: 'Attendees',\n    REPLY: 'reply',\n    CONNECTING_TO_VIDEO_CONFERENCE: 'Connecting to Video Conference',\n    TASK: 'Task',\n    DRAG_AND_DROP_IMAGES_OR_PDF_TO_UPLOAD: 'Drag Images or PDF files to upload',\n    SHARE_YOUR_IDEA: 'Share Your Idea',\n    POSTED_AN_IDEA: 'Posted An Idea',\n    MUTE_AUDIO: 'Mute Audio',\n    HANGUP: 'Hangup',\n    RECENT_TOPICS: 'Recent Topics',\n    TRENDING_TOPICS: 'Trending Meetings',\n    START_A_MEETING: 'Start A Meeting',\n    NEW_IDEA_SHARED: 'New Idea Shared',\n    SHARE_SCREEN: 'Share Screen',\n    VIDEO_SETTINGS: 'Video Settings',\n    TEXT_WITH_HTML: \"Top<br />Bottom\"\n  }\n\n};\n\nexport default logan_en;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/_locale/el.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction AnonymousEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(AnonymousEvent, EventEmitter);\n\nAnonymousEvent.prototype.emitAnonymousUpdated = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('anonymousUpdated');\n    this.emit.apply(this, args);\n};\n\nAnonymousEvent.prototype.onAnonymousUpdated = function (callback) {\n    this.on('anonymousUpdated', callback);\n};\n\nAnonymousEvent.prototype.emitAnonymousCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('anonymousCreated');\n    this.emit.apply(this, args);\n};\n\nAnonymousEvent.prototype.onAnonymousCreated = function (callback) {\n    this.on('anonymousCreated', callback);\n};\n\nAnonymousEvent.prototype.emitAnonymousDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('anonymousDeleted');\n    this.emit.apply(this, args);\n};\n\nAnonymousEvent.prototype.onAnonymousDeleted = function (callback) {\n    this.on('anonymousDeleted', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new AnonymousEvent());\n    }\n};\n\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/anonymous/anonymous.event.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\n\nvar CompanySchema = new Schema({\n  ndbid: String, \n  name: String, \n  description: String, \n  created: Date, \n  lastupdatetime: Date, \n  settings: {\n  onesna_subdomain: String, \n  \tauth: {\n  \t\tdefault_auth_type: Number\n  \t}\n  }, \n  domains: [{\n    _id: false,\n  \tdomain: String,\n  \tprimary: Boolean\n  }], \n});\n\n/**\n * Indexes\n */\nCompanySchema.index({ndbid: 1});\n\n\n/**\n * Virtuals\n */\n\n\nmodule.exports = mongoose.model('Company', CompanySchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/company/company.model.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction EnrollEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(EnrollEvent, EventEmitter);\n\nEnrollEvent.prototype.emitEnrollUpdated = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('enrollUpdated');\n    this.emit.apply(this, args);\n};\n\n\nEnrollEvent.prototype.onEnrollUpdated = function (callback) {\n    this.on('enrollUpdated', callback);\n};\n\nEnrollEvent.prototype.emitEnrollCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('enrollCreated');\n    this.emit.apply(this, args);\n};\n\nEnrollEvent.prototype.onEnrollCreated = function (callback) {\n    this.on('enrollCreated', callback);\n};\n\nEnrollEvent.prototype.emitEnrollApproved= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('enrollApproved');\n    this.emit.apply(this, args);\n};\n\nEnrollEvent.prototype.onEnrollApproved = function (callback) {\n    this.on('enrollApproved', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new EnrollEvent());\n    }\n};\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/enroll/enroll.event.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\n\nvar EnrollSchema = new Schema({\n\tname: String,\n   email: String,\n   status: {type: String, \"enum\": ['approved','awaiting'], default: 'awaiting'},\n   created: { type: Date, default: Date.now },\n   modified: { type: Date, default: Date.now },\n   user: Schema.Types.Mixed\n});\n\n/**\n * Indexes\n */\n// CompanySchema.index({ndbid: 1});\n\n\n/**\n * Virtuals\n */\nEnrollSchema.index({email: 1}, {unique: true});\n\nmodule.exports = mongoose.model('Enroll', EnrollSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/enroll/enroll.model.js\n **/","/**\n * author: Eric Ding\n */\nimport mongoose from 'mongoose';\nimport dbWp from '../../utils/dbwrapper';\nimport TopicMessage from '../message/message.model';\nimport NotifyEvent from './notify.event';\nimport TopicUser from './topicuser.model';\nimport logger from '../../modules/logger/index';\nimport _ from 'lodash';\nimport meetingConstants from '../../flux/constants/MeetingConstants';\nimport relationbk from '../relation/relation.backend';\nimport cst from '../../utils/serverConstants';\nimport util from '../../utils/serverHelper';\nimport TopicUserBK from './topicuser.backend';\n\nvar UserAccessed = function (src, data, cb) {\n  var user = data.user,\n      target = data.target,\n      time = Date.now();\n\n  var getUserRole = function (user, topic, callback) {\n    var isMember = _.find(topic.members, {member: user._id.toString()});\n    if (isMember) {\n      logger.info(src.id, 'This is already a member/admin ', isMember);\n      return callback(isMember.role);\n    } else {\n      return callback(meetingConstants.ATTENDEE_TYPES.GUEST.type);\n    }\n  }\n\n  getUserRole(user, target, function (result) {\n    var accessObj = {\n        userId: user._id,\n        userType: user.aType,\n        targetId: target._id,\n        lastAccess: time,\n        role: result,\n        targetType: target.type || cst.TypeTopic,\n        title: target.title,\n    };\n    //var userTags = util.getTagsByType(user, user.aType);\n    //var targetTags = util.getTagsByType(target, accessObj.targetType);\n    //accessObj.tags = _.concat(userTags, targetTags);\n    return updateTopicUser(src, accessObj, cb);\n  });\n}\n\n\nvar UserJoinInvite = function (src, data, cb) {\n  var user = data.user,\n      target = data.target,\n      role = data.role;\n\n  var accessObj = {\n      userId: user._id,\n      userType: user.aType,\n      targetId: target._id,\n      role: role,\n      targetType: target.type || cst.TypeTopic,\n      title: target.title,\n  };\n  //var userTags = util.getTagsByType(user, user.aType);\n  //var targetTags = util.getTagsByType(target, accessObj.targetType);\n  //accessObj.tags = _.concat(userTags, targetTags);\n  return updateTopicUser(src, accessObj, cb);\n}\n\n\nvar UserCreateTopic = function (src, data, cb) {\n  var user = data.user,\n      target = data.target,\n      role = data.role;\n\n  var accessObj = {\n      userId: user._id,\n      userType: user.aType,\n      targetId: target._id,\n      role: role,\n      targetType: target.type || cst.TypeTopic,\n      title: target.title,\n  };\n  //var userTags = util.getTagsByType(user, user.aType);\n  //var targetTags = util.getTagsByType(target, accessObj.targetType);\n  //accessObj.tags = _.concat(userTags, targetTags);\n  return updateTopicUser(src, accessObj, cb);\n}\n\nvar updateTopicUser = function (src, accessObj, cb) {\n   dbWp.execute(TopicUser, TopicUser.findOneAndUpdate, src.id, {userId: accessObj.userId, targetId: accessObj.targetId, userType: accessObj.userType}, accessObj, {upsert: true, new: true}, function (err, result) {\n    if (err) {\n      return cb(err);\n    }\n    logger.info(src.id,'User TopicUserTable updated !', result);\n    return cb(null, result);\n  });\n};\n\nNotifyEvent.onUserAccessed(function (src, data) {\n  logger.info(src.id,'new user access captured !');\n  UserAccessed(src, data, function (err, result) {\n    if (err) {\n      logger.error(src.id, 'user access capture failed', err);\n    }\n  });\n});\n\nNotifyEvent.onUserJoinInvite(function (src, data) {\n  logger.info(src.id,'user join invite captured !');\n  UserJoinInvite(src, data, function (err, result) {\n    if (err) {\n      logger.error(src.id, 'user access capture failed', err);\n    }\n  });\n});\n\nNotifyEvent.onUserCreateTopic(function (src, data) {\n  logger.info(src.id,'user create topic captured !');\n  UserCreateTopic(src, data, function (err, result) {\n    if (err) {\n      logger.error(src.id, 'user access capture failed', err);\n    }\n  });\n});\n\n//NotifyEvent.onUserJoinInvite(function (src, data) {\n//  logger.info(src.id,'new user join topic captured will add relationship table!');\n//  var user = data.user,\n//  target = data.target,\n//  time = Date.now();\n//  let newRelation = {\n//      target_id: user.id,\n//      target_type: user.aType,\n//      initiator_id: target._id,\n//      initiator_type: cst.TypeTopic,\n//      relation_type: data.role\n//  };\n//  newRelation.relationdef_id = user.aType + '_' + user.id + '_' + cst.TypeTopic + '_'+ target._id + '_' + data.role;\n//  return relationbk.addRelations(src, [newRelation], (err, result) => {\n//    if (result.length > 0){\n//      logger.warn(src.id, 'Add relation about topic failed');\n//    }\n//    else{\n//      logger.info(src.id, 'Add relation about topic ok');\n//    }\n//  });  \n//  \n//});\n//\n//NotifyEvent.onUserCreateTopic(function (src, data) {\n//  logger.info(src.id,'user create topic captured will add relation table!');\n//  var user = data.user,\n//  target = data.target,\n//  role = data.role;\n//\n//  let newRelation = {\n//      target_id: user.id,\n//      target_type: user.aType,\n//      initiator_id: target.id,\n//      initiator_type: cst.TypeTopic,\n//      relation_type: role\n//  };\n//  newRelation.relationdef_id = user.aType + '_' + user.id + '_' + cst.TypeTopic + '_'+ target.id + '_' + role;\n//  return relationbk.addRelations(src, [newRelation], (err, result) => {\n//    if (result.length > 0){\n//      logger.warn(src.id, 'Add relation about topic failed');\n//    }\n//    else{\n//      logger.info(src.id, 'Add relation about topic ok');\n//    }\n//  });\n//});\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/notify/notify.backend.js\n **/","/**\n * author: Eric Ding\n * This model store all relationship between two two objects\n */\n\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nvar RelationSchema = new Schema({\n  relationdef_id: {type: String, index: { unique: true }}, \n  target_id: { type: String, index: true },\n  target_type: String,\n  initiator_id: { type: String, index: true },\n  initiator_type: String,\n  relation_type: { type: String, index: true },\n  created: { type: Date, default: Date.now, index: true},\n});\n\nmodule.exports = mongoose.model('Relation', RelationSchema);\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/relation/relation.model.js\n **/","/**\n * author: Eric Ding\n *\n */\n\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nvar RelationGraphSchema = new Schema({\n  destinationId: { type: String, index: true },\n  destinationType: { type: String, index: true },  \n  tags:[{ type: String, index: true, lowercase: true}],\n  data:{\n    username: {type: String},\n    displayname: {type: String},\n    name: {type: String}\n  },\n  relation_graphs:[{\n    relationdef_id: String,\n    initiator_id: String,\n    initiator_type: String,\n    relation_type: String\n  }]\n});\nRelationGraphSchema.index({destinationId:1, destinationType:1}, {unique: true});\nmodule.exports = mongoose.model('RelationGraph', RelationGraphSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/relation/relationgraph.model.js\n **/","/**\n * Backend non api functions\n */\n'use strict';\n\nimport _ from 'lodash';\nimport User from '../user/user.model';\nimport Topic from '../topic/topic.model';\nimport Company from '../company/company.model';\nimport utils from '../../modules/utils';\nimport config from '../../config';\nimport inviteBusiness from '../invite/invite.backend';\nimport userEvent from '../user/user.event';\nimport companyEvent from '../company/company.event';\nimport dbWp from '../../utils/dbwrapper';\nimport mongoose from 'mongoose';\nimport logger from '../../modules/logger/index';\nimport async from 'async';\nimport request from 'request';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\n\nvar ObjectId = mongoose.Schema.Types.ObjectId;\n// Only test git operation\n\nvar syncOneUser = exports.syncOneUser = function (src, data, cb) {\n\tvar fn = src.fn + '[syncOneUser]';\n\tif (data.operate_type === cst.SyncOperateDelete) {\n\t\tdbWp.execute(User, User.findOneAndRemove, src.id, {ndbid: data.id}, function (err, deletedUser) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tif (deletedUser) {\n\t\t\t\tlogger.sync(src.id, fn + 'user deleted on logan ' + deletedUser._id + ' with ndbid: ' + data.id);\n\t\t\t\tuserEvent.emitUserDeleted(src, deletedUser);\n\t\t\t} else {\n\t\t\t\tlogger.sync(src.id, fn + ' user not found on logan with ndbid: ' + data.id);\n\t\t\t}\n\t\t\treturn cb(null, deletedUser);\n\t\t});\n\t} else {\n\t\tdbWp.execute(User, User.findOne, src.id, {ndbid: data.id}, function(err, user) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tif (!user || user.lastupdatetime.getTime() < (new Date(data.lastupdatetime)).getTime()) {\n\t\t\t\tlogger.sync(src.id, fn + 'User needs update');\n\t\t\t\tdata.ndbid = data.id;\n\t\t\t\tdata.secret = data.security_token;\n\t\t\t\tdelete data.id;\n\t\t\t\tdbWp.execute(User, User.findOneAndUpdate, src.id, {ndbid: data.ndbid}, data, {upsert: true, new: true}, function (err,newUser) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn cb(err);\n\t\t\t\t\t}\n\t\t\t\t\tlogger.sync(src.id, fn + 'new user updated with logan id :' + newUser._id);\n\t\t\t\t\tlogger.sync(src.id, fn + 'this is new User', newUser.toJSON());\n\t\t\t\t\tuserEvent.emitUserUpdated(src, newUser, user);\n\t\t\t\t\treturn cb(null, newUser);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogger.sync(src.id, fn + 'This user is already up to date');\n\t\t\t\treturn cb(null, user);\n\t\t\t}\n\t\t});\n\t}\n}\n\nvar syncOneCompany = exports.syncOneCompany = function (src, data, cb) {\n\tvar fn = src.fn + '[syncOneCompany]';\n\tif (data.operate_type === cst.SyncOperateDelete) {\n\t\tdbWp.execute(Company, Company.findOneAndRemove, src.id, {ndbid: data.id}, function (err, deletedCompany) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tif (deletedCompany) {\n\t\t\t\tlogger.sync(src.id, fn + 'company deleted on logan ' + deletedCompany._id + ' with ndbid: ' + data.id);\n\t\t\t\tcompanyEvent.emitCompanyDeleted(src, deletedCompany);\n\t\t\t} else {\n\t\t\t\tlogger.sync(src.id, fn + ' company not found on logan with ndbid: ' + data.id);\n\t\t\t}\n\t\t\treturn cb(null, deletedCompany);\n\t\t});\n\t} else {\n\t\tdbWp.execute(Company, Company.findOne, src.id, {ndbid: data.id}, function(err, company) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\t\n\t\t\tif (!company || company.lastupdatetime.getTime() < (new Date(data.lastupdatetime)).getTime()) {\n\t\t\t\tlogger.sync(src.id, fn + 'Company needs update');\n\t\t\t\tdata.ndbid = data.id;\n\t\t\t\tdelete data.id;\n\t\t\t\tdbWp.execute(Company, Company.findOneAndUpdate, src.id, {ndbid: data.ndbid},data, {upsert: true, new: true}, function (err,newCompany) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn cb(err);\n\t\t\t\t\t}\n\t\t\t\t\tlogger.sync(src.id, fn + 'new company updated with logan id :' + newCompany._id);\n\t\t\t\t\tlogger.sync(src.id, fn + 'this is new Company', newCompany.toJSON());\n\t\t\t\t\tcompanyEvent.emitCompanyUpdated(src, newCompany);\n\t\t\t\t\treturn cb(null, newCompany);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogger.sync(src.id, fn + 'This company is already up to date');\n\t\t\t\treturn cb(null, company);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexports.syncUsers = function (src, data, cb) {\n\tvar fn = src.fn + '[syncUsers]';\n\tvar processUsers = function (index, ul, resultList, callback) {\n\t\tif (!ul) {\n\t\t\treturn callback(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\n\t\tvar cur_user = ul[index];\n\t\tif (!cur_user) {\n\t\t\treturn callback(null, resultList);\n\t\t} else {\n\t\t\tlogger.sync(src.id, fn + 'processing user number ' + index + ' with user Id: ' + cur_user.id + ' with username: ' + cur_user.username);\n\t\t\t  syncOneUser(src, cur_user, function (err, result) {\n    \t\t\tif (err) {\n    \t\t\t\tlogger.error(src.id, fn + 'Error sync user number ' + index + ' with user Id: ' + cur_user.id + ' with username: ' + cur_user.username);\n    \t\t\t\tresultList.push({id: cur_user.id, index: index, status: 'fail', error: err});\n    \t\t\t\treturn processUsers(index+1, ul, resultList, callback);\n    \t\t\t} else {\n\t\t\t\t\tresultList.push({id: cur_user.id, index: index, status: 'success'});\n\t\t\t\t\treturn processUsers(index+1, ul, resultList, callback);    \t\t\t\n\t\t\t\t}\n    \t\t});\n    \t}\n\t};\n\n\tprocessUsers(0, data.users, [], function(err, processResult) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, fn + 'Error while syncing users ',err);\n\t\t\treturn cb(err);\n\t\t}\n\n\t\treturn cb(null,processResult);\n\t});\n};\n//future change\nexports.syncCompanies = function (src, data, cb) {\n\tvar fn = src.fn + '[syncCompanies]';\n\tvar processCompanies = function (index, ul, resultList, callback) {\n\t\tif (!ul) {\n\t\t\treturn callback(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\n\t\tvar cur_company = ul[index];\n\t\tif (!cur_company) {\n\t\t\treturn callback(null, resultList);\n\t\t} else {\n\t\t\tlogger.sync(src.id, fn + 'processing company number ' + index + ' with company Id: ' + cur_company.id + ' with name: ' + cur_company.name);\n    \t\tsyncOneCompany(src, cur_company, function (err, result) {\n    \t\t\tif (err) {\n    \t\t\t\tlogger.error(src.id, fn + 'Error sync company number ' + index + ' with company Id: ' + cur_company.id + ' with name: ' + cur_company.name);\n    \t\t\t\tresultList.push({id: cur_company.id, index: index, status: 'fail', error: err});\n    \t\t\t\treturn processCompanies(index+1, ul, resultList, callback);\n    \t\t\t} else {\n\t\t\t\t\tresultList.push({id: cur_company.id, index: index, status: 'success'});\n\t\t\t\t\treturn processCompanies(index+1, ul, resultList, callback);    \t\t\t\n\t\t\t\t}\n    \t\t});\n    \t}\n\t};\n\n\tprocessCompanies(0, data.companies, [], function(err, processResult) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, fn + 'Error while syncing companies ',err);\n\t\t\treturn cb(err);\n\t\t}\n\n\t\treturn cb(null, processResult);\n\t});\n};\n\n\nvar getCompanyOnesna = function (src, data, cb) {\n\tvar fn = src.fn + '[getCompanyOnesna]';\n    var url = config.getEsnaLink(src.domain) + '/api/1.0/companies/' + data.companyId + '/logan/';\n    var token = config.ESNA_API_KEY;\n    var options = {\n      url: url,\n      headers: {\n        'Authorization': 'API_KEY ' + token\n      },\n      accept: '*/*',\n    };\n    logger.sync(src.id, fn + 'Access esna grabbing company by url: ' + url);\n    request.get(options, function(err, response) {\n      if (err) {\n        logger.error(src.id, fn + 'from ' + url + ' Wrong response!: ', err.message);\n        return cb(new esErr.ESErrors(esErr.AccessOnesnaHappenError));\n      }\n      if (response.statusCode !== 200) {\n      \tlogger.error(src.id, fn + 'from ' + url + ' Wrong response!: ', response.body);\n        return cb(new esErr.ESErrors(esErr.AccessOnesnaHappenError));\n      }\n      return cb(null, response.body);\n    });\n}\n\nvar updateUserCompanies = function (src, data, cb) {\n\tvar fn = src.fn + '[updateUserCompanies]';\n\tvar processData = function (index, ul, callback) {\n\t\tif (!ul) {\n\t\t\treturn callback(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\n\t\tvar cur_company = ul[index];\n\t\tif (!cur_company) {\n\t\t\treturn callback(null, ul);\n\t\t} else {\n\t\t\tdbWp.execute(Company, Company.findOne, src.id, {ndbid: cur_company.initiator_id}, function (err,company) {\n\t\t\t\tvar logCompanyId = cur_company.initiator_id.toString();\n\t\t\t\tif (err) {\n\t\t\t\t\tlogger.error(src.id, fn + 'Error finding company with ndbid: ' + logCompanyId);\n\t\t\t\t\treturn processData(index+1, ul, callback);\n\t\t\t\t}\n\t\t\t\tif (company) {\n\t\t\t\t\tlogger.sync(src.id, fn + 'Found company on logan updated user with ndbid: ' + logCompanyId);\n\t\t\t\t\tul[index].initiator_id = company._id;\n\t\t\t\t\treturn processData(index+1, ul, callback);\n\t\t\t\t} else {\n\t\t\t\t\tlogger.sync(src.id, fn + 'Company not found with ndbid: ' + logCompanyId);\n\t\t\t\t\tgetCompanyOnesna(src, {companyId: cur_company.initiator_id}, function (err, result) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t  return processData(index+1, ul, callback);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar thisCompany = JSON.parse(result);\n\t\t\t\t\t\tthisCompany.ndbid = thisCompany.id;\n\t\t\t\t\t\tdelete thisCompany.id;\n\t\t\t\t\t\tlogger.sync(src.id, fn + 'Company grabbed from onesna :', thisCompany);\n\t\t\t\t\t\tdbWp.execute(Company, Company.findOneAndUpdate, src.id, {ndbid: thisCompany.ndbid},thisCompany, {upsert: true, new: true}, function (err,newCompany) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tlogger.error(src.id, fn + 'Error update company with company ndbid: ' + thisCompany.ndbid + ' with name: ' + thisCompany.name);\n\t\t\t\t\t\t\t\treturn processData(index+1, ul, callback);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlogger.sync(src.id, fn + 'Company update successfully with: ' + newCompany._id + ' with name: ' + newCompany.name);\n\t\t\t\t\t\t\tcompanyEvent.emitCompanyUpdated(src, newCompany);\n\t\t\t\t\t\t\tul[index].initiator_id = newCompany._id;\n\t\t\t\t\t\t\treturn processData(index+1, ul, callback);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n    \t}\n\t};\n\n\tprocessData(0, data, function(err, processResult) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, err);\n\t\t\treturn cb(err);\n\t\t}\n\n\t\treturn cb(null,processResult);\n\t});\n};\n\nvar updateCompanyDeletedForUser = function (src, data, cb) {\n\tvar fn = src.fn + '[updateCompanyDeletedForUser]';\n\tdbWp.execute(User, User.update, src.id, {\"relation_graphs.initiator_id\": data._id},{$pull: {relation_graphs: {initiator_id: data._id}}}, function (err,updatedUsers) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, fn + 'Error delete company in user relation_graphs with company', data);\n\t\t\treturn cb(err);\n\t\t}\n\t\tlogger.sync(src.id, fn + ' Updatedusers :'+ updatedUsers.nModified);\n\t\treturn cb(null);\n\t});\n}\n\nvar updateCompanyAddedForUser = function (src, data, cb) {\n\tvar fn = src.fn + '[updateCompanAddedForUser]';\n\tdbWp.execute(User, User.update, src.id, {\"relation_graphs.initiator_id\": data.ndbid},{$set: {'relation_graphs.$.initiator_id': data._id}}, function (err,updatedUsers) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, fn + 'Error update company in user relation_graphs with company', data);\n\t\t\treturn cb(err);\n\t\t}\n\t\tlogger.sync(src.id, fn + ' Updatedusers :'+ updatedUsers.nModified);\n\t\treturn cb(null);\n\t});\n}\n//\nvar userUpdated = function (src, data, cb) {\n\tlogger.sync(src.id, src.fn + 'New User updated! Checking data...');\n\tupdateUserCompanies(src, data.relation_graphs, cb);\n};\n\nvar companyUpdated = function (src, data, cb) {\n\tlogger.sync(src.id, src.fn + 'New Company updated! Checking data...');\n\tupdateCompanyAddedForUser(src, data, cb);\n};\n\nvar companyDeleted = function (src, data, cb) {\n\tlogger.sync(src.id, src.fn + 'Onesna Company deleted! Checking data...');\n\tupdateCompanyDeletedForUser(src, data, cb);\n};\n\n\nuserEvent.onUserUpdated(function(src, user) {\n\tvar fn = src.fn + '[userEvent.onUserUpdated]';\n\tuserUpdated(src, user, function (err, result) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, fn + 'User relation graph update failed');\n\t\t} else {\n\t\t  \tlogger.sync(src.id, fn + 'User relation table updated ' + user._id);\n\t\t  \tdbWp.execute(User, User.findOneAndUpdate, src.id, {_id: user._id},{\n\t\t  \t\t$set: {\n\t\t\t\t\trelation_graphs: result\n\t\t\t\t}\n\t\t\t}, {new: true}, function (err,newUser) {\n\t\t        if (err) {\n\t\t          logger.error(src.id, fn + 'Error updating User relation graph', err);\n\t\t        }\n\t        \tlogger.sync(src.id, fn + 'User relation graph update successfully for user with id: ' + newUser._id);\n      \t\t});\n\t\t}\n\t});\n});\ncompanyEvent.onCompanyUpdated(function(src, company){\n\tvar fn = src.fn + '[companyEvent.onCompanyUpdated]';\n\tcompanyUpdated(src, company, function (err, result) {\n\t\tif (err) {\n\t\t\tlogger.error(fn + 'Update 1 company with ' + company._id + ' for all user relation graph failed');\n\t\t} else {\n\t\t  \tlogger.sync(fn + 'Update 1 company ' + company._id + ' for all user relation graph finished');\n\t\t}\n\t});\n});\ncompanyEvent.onCompanyDeleted(function(src, company) {\n\tvar fn = src.fn + '[companyEvent.onCompanyDeleted]';\n\tcompanyDeleted(src, company, function (err, result) {\n\t\tif (err) {\n\t\t\tlogger.error(fn + 'Delete company with ' + company._id + ' from all user relation graph failed');\n\t\t} else {\n\t\t  \tlogger.sync(fn + 'Delete company with ' + company._id + ' from all user relation graph finished');\n\t\t}\n\t});\n});\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/sync/sync.backend.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './topic.controller';\nimport auth from '../../auth/auth.service';\nimport {asView} from '../viewBase/viewBase';\nconst router = new Router();\n\nrouter.get('/', asView(controller.index));\nrouter.post('/invite', asView(controller.newTopic));\nrouter.get('/invites/:inviteId/join', asView(controller.joinTopicFromInvite));\nrouter.get('/invites/:inviteId', asView(controller.getInvite));\nrouter.post('/invites/:inviteId', asView(controller.updateInvite));\nrouter.delete('/invites/:inviteId', asView(controller.deleteInvite));\nrouter.post('/:topicId/invite', asView(controller.addToTopic));\nrouter.get('/:topicId/members', asView(controller.getMembersOfTopic));\n//router.get('/search', asView(controller.searchTopics));\nrouter.get('/:topicId/join', asView(controller.join));\nrouter.get('/:topicId', asView(controller.show));\nrouter.post('/', asView(controller.create));\nrouter.post('/:topicId', asView(controller.update));\n//router.patch('/:topicId', asView(controller.update));\n\nrouter.get('/:topicId/messages/byref', asView(controller.ListMessageByRefView));\nrouter.get('/:topicId/tasks', asView(controller.ListOfTopicTasksView));\nrouter.post('/:topicId/tasks', asView(controller.addTaskView));\nrouter.get('/:topicId/ideas', asView(controller.ListOfTopicIdeasView));\nrouter.post('/:topicId/ideas', asView(controller.addIdeaView));\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/topic/index.js\n **/","/**\n * Backend non api functions\n */\n'use strict';\n\nvar _ = require('lodash'),\n\tTopic = require('./topic.model'),\n\tutils = require('../../modules/utils'),\n\tlogger = require('../../modules/logger'),\n\tinviteBusiness = require('../invite/invite.backend'),\n\tuserBusiness = require('../user/user.backend'),\n\tTopicInvite = require('./topicInvite.model');\n\nimport esErr from '../../errors/errors';\nimport dbWp from '../../utils/dbwrapper';\nimport emailTemplate from '../../modules/email/templater';\nimport meetingConstants from '../../flux/constants/MeetingConstants';\nimport NotifyEvent from '../notify/notify.event';\nimport NotifyBackend from '../notify/notify.backend';\nimport cst from '../../utils/serverConstants'\nimport pmCfg from '../../auth/permission-config';\nimport TopicEvent from './topic.event';\nimport ndutil from 'util';\nimport User from '../user/user.model';\nimport taskqueue from '../taskqueue/taskqueue.backend';\nimport async from 'async';\n\n/**\n * CRUD\n */\nexport default {\n\tcreate: function (topic, cb) {\n\t\tdbWp.execute(Topic, Topic.create, null, topic, function (err, data){\n\t\t    if(err) {\n\t\t    \treturn cb(err);\n\t\t    }\n\n\t\t    if (!data) {\n\t\t      \treturn cb('not retrieving created topic')\n\t\t    } else {\n\t\t    \treturn cb(null, data);\n\t\t    }\n\t\t});\n\t},\n\thasTopicAccess: function (params, cb) {\n\t\tTopic.findById({\n\t\t\t\t_id: params.topicId\n\t\t\t}, function (err, resultTopic) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tif (!resultTopic) {\n\t\t\t\treturn cb('Can not find topic with id: ' + params.topicId);\n\t\t\t}\n\n\t\t\tvar topicAccess = {};\n\t\t\ttopicAccess.topic = resultTopic;\n\t\t\tif (!params.user || !params.user._id) {\n\t\t\t\ttopicAccess.role = meetingConstants.ATTENDEE_TYPES.GUEST.type;\n\t\t\t\treturn cb(null, topicAccess);\n\t\t\t} else {\n\t\t\t\tvar isMember = _.find(resultTopic.members, {member: params.user._id.toString()});\n\t\t\t\tif(isMember){\n\t\t\t\t\ttopicAccess.role = isMember.role;\n\t\t\t\t\treturn cb(null, topicAccess);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttopicAccess.role = meetingConstants.ATTENDEE_TYPES.GUEST.type;\n\t\t\t\t\treturn cb(null, topicAccess);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tquitTopic: function (data, cb) {\n\t\tvar quitId;\n\t\tif (!data.topic) {\n\t\t\treturn cb('no topic');\n\t\t}\n\t\tif (data.user) {\n\t\t\tquitId = data.user._id;\n\t\t}\n\t\tif (data.anonymous) {\n\t\t\tquitId = data.anonymous._id;\n\t\t}\n\t\tif (data.quitId) {\n\t\t\tquitId = data.quitId;\n\t\t}\n\t\tquitTopicById(quitId, topic, cb);\n\t},\n\n\tquitTopicById: function (id, topic, cb) {\n\t\tTopic.findOneAndUpdate(\n\t\t{\n\t\t\t_id: topic._id,\n\t\t\t'members._id': id\n\t\t},\n\t\t{\n\t\t\t$pull: {\n\t\t\t\t\t'members._id': id\n\t\t\t}\n\t\t},{new: true}, function (err, updatedTopic) {\n\t\t\tif (err) {\n\t\t\t\treturn cb('Error query topic quitTopicById');\n\t\t\t}\n\t\t\tif (!updatedTopic) {\n\t\t\t\treturn cb('Can not find topic');\n\t\t\t}\n\t\t\treturn cb(null, updatedTopic);\n\t\t});\n\t},\n\n\tquitTopicByObj: function (obj, topic, cb) {\n\t\tif (!obj || !obj.id) {\n\t\t\treturn cb('No obj passed');\n\t\t}\n\t\tthis.quitTopicById(obj.id, topic, cb);\n\t},\n\tuserQuitTopic: function (user, topic, cb) {\n\t\tthis.quitTopicByObj(user, topic, cb);\n\t},\n\tanonymousQuitTopic: function (anony, topic, cb) {\n\t\tthis.quitTopicByObj(anony, topic, cb);\n\t},\n/**\n * First Layer\n */\n\n\tcheckList: function (tlist, cb) {\n\t\tvar processTopics = function (index, tl, callback) {\n\t\t\tif (!tl) {\n\t\t\t\treturn callback('ERROR: No input list');\n\t\t\t}\n\n\t\t\tvar cur_t = tl[index];\n\t\t\tif (!cur_t) {\n\t\t\t\treturn callback(null, tl);\n\t\t\t}\n\n\t\t\tif (cur_t.id) {\n\t\t\t\tprocessTopics(index+1, tl, callback);\n\t\t\t} else {\n\t\t\t\tTopic.create(cur_t, function (err, newTopic) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn callback(err);\n\t\t\t\t\t}\n\t\t\t\t\ttl[index] = newTopic;\n\t\t\t\t\tprocessTopics(index+1, tl, callback);\n\t\t\t\t})\n\t\t\t}\n\n\t\t};\n\n\t\tprocessTopics(0, tlist, function(err, resultList) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err);\n\t\t\t}\n\n\t\t\treturn cb(null, resultList);\n\t\t});\n\t},\n\tupdateInvite: function (src, data, cb) {\n\t\tdbWp.execute(TopicInvite, TopicInvite.findOneAndUpdate, src.id, {_id: data.oldInvite._id}, data.newInvite, { 'new': true, runValidators: true}, function (err, updatedInvite){\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, new esErr.ESErrors(esErr.DBError));\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tlogger.info(src.id, 'new topic invite updated! with id ' + updatedInvite._id);\n\t\t\tif (data.informChannel !== 'server') {\n\t\t\t\tlogger.info(src.id, 'Not sending notification');\n\t\t\t\tvar contentData = {\n\t\t\t\t\tlink: updatedInvite.makeInviteUrl(src.domain),\n\t\t\t\t\ttitle: data.topic.title\n\t\t\t\t};\n\t\t\t\treturn cb(null, {\n\t\t\t\t\t\tdata: [updatedInvite],\n\t\t\t\t\t\tinviteContent: {\n\t\t\t\t\t\t\ttext: emailTemplate.inviteUser.inviteContentText(contentData),\n\t\t\t\t\t\t\thtml: emailTemplate.inviteUser.inviteContentHtml(contentData),\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogger.info(src.id, 'Update Invite checking invitee list, server inform channel');\n\t\t\t\tdata.topicInvite = updatedInvite;\n\t\t\t\tvar oldContactList = data.oldInvite.invitees.map(function (invitee) {\n\t\t\t\t\treturn invitee.invitee;\n\t\t\t\t});\n\t\t\t\tvar newInvitees = _.filter(updatedInvite.invitees, function (invitee) {\n\t\t\t\t\treturn oldContactList.indexOf(invitee.invitee) < 0;\n\t\t\t\t});\n\n\t\t\t\tif (!newInvitees || newInvitees.length === 0) {\n\t\t\t\t\tlogger.info('No new invitees found');\n\t\t\t\t\treturn cb(null, {data: [updatedInvite]});\n\t\t\t\t}\n\t\t\t\tdata.invitees = newInvitees;\n\t\t\t\tuserBusiness.inviteUsers(src, data, function (err) {\n\t\t\t  \t\tif (err) {\n\t\t\t\t\t\tlogger.error(src.id, 'Error sendinng notification to Users', err);\n\t\t\t\t\t\treturn cb(err);\n\t\t\t\t\t}\n\t\t\t\t\treturn cb(null, {data: [updatedInvite]});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tnewInvite: function (src, data, cb) {\n\t\tvar newInvite = {\n\t\t\tinvitees: data.invitees,\n\t\t\ttopicId: data.topic._id,\n\t\t\tstartDateTime: data.startDateTime,\n\t\t\tendDateTime: data.endDateTime\n\t\t};\n\t\tdbWp.execute(TopicInvite, TopicInvite.create, src.id, newInvite, function (err, createdInvite){\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, new esErr.ESErrors(esErr.DBError));\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tlogger.info(src.id, 'new topic invite created! with id' + createdInvite._id, createdInvite.toJSON());\n\t\t\tif (data.informChannel !== 'server') {\n\t\t\t\tlogger.info(src.id, 'Not sending notification');\n\t\t\t\tvar contentData = {\n\t\t\t\t\tlink: createdInvite.makeInviteUrl(src.domain),\n\t\t\t\t\ttitle: data.topic.title\n\t\t\t\t};\n\t\t\t\treturn cb(null, {\n\t\t\t\t\t\tdata: [createdInvite],\n\t\t\t\t\t\tinviteContent: {\n\t\t\t\t\t\t\ttext: emailTemplate.inviteUser.inviteContentText(contentData),\n\t\t\t\t\t\t\thtml: emailTemplate.inviteUser.inviteContentHtml(contentData),\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogger.info(src.id, 'Sending notification');\n\t\t\t\tdata.topicInvite = createdInvite;\n\t\t\t\tuserBusiness.inviteUsers(src, data, function (err) {\n\t\t\t  \t\tif (err) {\n\t\t\t\t\t\tlogger.error(src.id, 'Error sendinng notification to Users', err);\n\t\t\t\t\t\treturn cb(err);\n\t\t\t\t\t}\n\t\t\t\t\treturn cb(null, {data: [createdInvite]});\n\t\t\t\t});\n\t\t\t}\n\n\t  \t});\n\t},\n\tentryInfo: function (inviteInfo, topicInfo) {\n\t\tvar entry = {};\n\t\tentry.inviteInfo = inviteInfo;\n\t\tentry.topic = topicInfo;\n\t\treturn function (accessInfo, actionInfo) {\n\t\t\tentry.attendeeInfo = {type: accessInfo};\n\t\t\tif (entry.attendeeInfo === meetingConstants.ATTENDEE_TYPES.GUEST.type) {\n\t\t\t\tlet s = inviteInfo.startDateTime;\n\t\t\t\tlet e = inviteInfo.endDateTime;\n\t\t\t\tlet n = new Date();\n\t\t\t\tif (s && e && n <= e && n >= s) {\n\t\t\t\t\tentry.requiredAction = 'join';\n\t\t\t\t} else {\n\t\t\t\t\tentry.requiredAction = 'knock';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tentry.requiredAction = actionInfo;\n\t\t\t}\n\t\t\treturn entry;\n\t\t}\n\t},\n\t\n\tjoinTopic: function (src, data, cb) {\n    var self = this;\n    Topic.findById(data.topicId, function (err, topic) {\n      if (err) {\n        logger.error(src.id, 'Error finding topic', err);\n        return cb(err);\n      }\n      if(!topic) { return cb(new esErr.ESErrors(esErr.BadRequestError))}\n      if (src.relPermChecker){\n        src.relPermChecker.checkRelation(src, topic, cst.TypeTopic, (err)=>{\n          if(err){\n            return cb(err);\n          }\n          var entry = self.entryInfo(undefined, topic);\n          var isMember = _.find(topic.members, {member: data.user._id.toString()});\n          self.getUsersOfTopic(src, topic, (err, topic)=>{\n            if (isMember) {\n              logger.info(src.id, 'This is already a member/admin ', isMember);\n              NotifyEvent.emitUserAccessed(src.id, {user: data.user, target: topic});\n              return cb(null, entry(isMember.role,'join'));\n            } else {\n              NotifyEvent.emitUserAccessed(src.id, {user: data.user, target: topic});\n              return cb(null, entry(meetingConstants.ATTENDEE_TYPES.GUEST.type));\n            }\n          })\n          \n        });\n      }\n    });\n  },\n  \n\taccessTopic: function (src, data, cb) {\n\t\tvar self = this;\n\t\tTopic.findById(data.topicId, function (err, topic) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, 'Error finding topic', err);\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tif(!topic) { return cb(new esErr.ESErrors(esErr.BadRequestError))}\n\t\t\tif (src.relPermChecker){\n\t\t\t  src.relPermChecker.checkRelation(src, topic, cst.TypeTopic, (err)=>{\n\t\t\t    if(err){\n\t\t\t      return cb(err);\n\t\t\t    }\n\t\t\t    var entry = self.entryInfo(undefined, topic);\n\t\t      var isMember = _.find(topic.members, {member: data.user._id.toString()});\n\t\t      if (isMember) {\n\t\t        logger.info(src.id, 'This is already a member/admin ', isMember);\n\t\t        NotifyEvent.emitUserAccessed(src.id, {user: data.user, target: topic});\n\t\t        return cb(null, entry(isMember.role,'join'));\n\t\t      } else {\n\t\t        NotifyEvent.emitUserAccessed(src.id, {user: data.user, target: topic});\n\t\t        return cb(null, entry(meetingConstants.ATTENDEE_TYPES.GUEST.type));\n\t\t      }\n\t\t\t  });\n\t\t\t}\n\t\t});\n\t},\n\n\tjoinTopicFromInvite: function (src, data, cb) {\n\t\tvar topicInfo,\n\t\t\tinviteInfo,\n\t\t\tself = this;\n\t\tTopicInvite.findById(data.inviteId, function (err, resultInvite) {\n\t\t\tif (err) {\n\t\t  \t\treturn cb(err);\n\t\t\t}\n\n\t\t\tif (!resultInvite) {\n\t\t  \t\treturn cb('Can not find the invite :' + data.inviteId);\n\t\t\t}\n\t\t\tinviteInfo = {startDateTime: resultInvite.startDateTime, endDateTime: resultInvite.endDateTime};\n\t\t\tTopic.findById({\n\t\t\t\t_id: resultInvite.topicId\n\t\t\t}, function (err, resultTopic) {\n\t\t\t\tif (err) {\n\t\t\t  \t\treturn cb(err);\n\t\t\t\t}\n\t\t\t\tif (!resultTopic) {\n\t\t\t  \t\treturn cb('Can not find topic with id: ' + resultInvite.topicId);\n\t\t\t\t}\n\t\t\t\tlogger.info(src.id, 'Found the topic to join, Start Joining the Topic');\n\t\t\t\ttopicInfo = {_id: resultTopic._id, title: resultTopic.title};\n\t\t\t\tvar entry = self.entryInfo(inviteInfo, topicInfo);\n\t\t\t\tif (data.user) {\n\t\t\t\t\tvar isMember = _.find(resultTopic.members, {member: data.user._id.toString()});\n\t\t\t\t\tif (isMember) {\n\t\t\t\t\t\tlogger.info(src.id, 'This is already a member/admin ', isMember);\n\t\t\t\t\t\tNotifyEvent.emitUserJoinInvite(src, {user: data.user, target: topicInfo, role: isMember.role});\n\t\t\t\t\t\treturn cb(null, entry(isMember.role,'join'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.info(src.id, 'This is not a member/admin yet ', data.user._id.toString());\n\t\t\t\t\t\tvar isInvited = _.find(resultInvite.invitees, function (invitee) {\n\t\t\t\t\t\t\tif (!invitee.role || [meetingConstants.ATTENDEE_TYPES.ADMIN.type,meetingConstants.ATTENDEE_TYPES.MEMBER.type].indexOf(invitee.role) > -1 ) {\n\t\t\t\t\t\t\t\tif (invitee.inviteeType === 'email' && invitee.invitee === data.user.username) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t} else if (invitee.inviteeType === 'userId' && invitee.invitee === data.user._id.toString()) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (isInvited) {\n\t\t\t\t\t\t\tlogger.info(src.id, 'This is invited ', isInvited);\n\t\t\t\t\t\t\tvar memberRole = isInvited.role || meetingConstants.ATTENDEE_TYPES.MEMBER.type;\n\t\t\t\t\t\t\tTopic.findOneAndUpdate({\n\t\t\t\t\t\t\t\t_id: topicInfo._id\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$push: {\n\t\t\t\t\t\t\t\t\t'members': {\n\t\t\t\t\t\t\t\t\t\tmember: data.user._id,\n\t\t\t\t\t\t\t            memberType: 'userId',  //  userId\n\t\t\t\t\t\t\t            role: memberRole,   //admin | member\n\t\t\t\t\t\t\t            joinTime: new Date(),\n\t\t\t\t\t\t\t            username: data.user.username,\n\t\t\t\t\t\t\t            displayname: data.user.displayname,\n\t\t\t\t\t\t\t            picture_url: data.user.picture_url\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function (err, updatedTopic) {\n\t\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\t\tlogger.error(src.id, 'Error adding user to topic member list with userid : ' + data.user._id + ' and topic id: ' + topicInfo._id);\n\t\t\t\t\t\t\t\t  \treturn cb(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tNotifyEvent.emitUserJoinInvite(src, {user: data.user, target: topicInfo, role: memberRole});\n\t\t\t\t\t\t\t\tlogger.info(src.id, 'New invited user joined topic : ' + topicInfo._id + ' and with a role : ' + memberRole);\n\t\t\t\t\t\t\t\treturn cb(null, entry(memberRole,'join'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tNotifyEvent.emitUserJoinInvite(src, {user: data.user, target: topicInfo, role: meetingConstants.ATTENDEE_TYPES.GUEST.type});\n\t\t\t\t\t\t\treturn cb(null, entry(meetingConstants.ATTENDEE_TYPES.GUEST.type));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}  else {\n\t\t\t\t\treturn cb(HttpErrorStatus);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\taddToTopic: function (src, data, cb) {\n\t\tthis.newInvite(src, data, cb);\n\t},\n\t\n\tgetUsersOfTopic: function (src, data, cb) {\n\t  let functionName = '[getUsersOfTopic]';\n\t  async.waterfall([\n\t  (interCallback)=>{\n\t    logger.info(src.id, ndutil.format('%s Query members from topic', functionName), data);\n\t    if (data._id){\n\t      return interCallback(null, data);\n\t    }\n  \t  let exeobj = Topic.findById(data.topicId).slice('members', [data.pagination.skip, data.pagination.limit]).select('members').lean();\n  \t  dbWp.execute(exeobj, exeobj.exec, src.id, (err, topicObj) => {\n  \t    if (err){\n  \t      logger.error(src.id, ndutil.format('%s Query members happen error', functionName), err);\n  \t      return interCallback(err)\n  \t    }\n  \t    return interCallback(null, topicObj);\n  \t  });\n\t  },\n\t  (topicObj, interCallback) => {\n\t    let needUserInfoSet = new Set();\n\t    for(let memberItem of topicObj.members){\n\t      if (memberItem.memberType=='userId' && ((!memberItem.username) || (!memberItem.displayname) || (!memberItem.picture_url))){\n\t        needUserInfoSet.add(memberItem);\n\t      }\n\t    }\n\t    \n\t    if (needUserInfoSet.size > 0){\n\t      let membersArray = [for (memberItem of needUserInfoSet) memberItem.member];\n\t      let exeobj = User.find({'_id': {'$in': membersArray}}, {\"username\":1, \"displayname\":1, \"picturefile\":1});\n\t      logger.info(src.id, ndutil.format('%s Query users information from user table', functionName));\n\t      dbWp.execute(exeobj, exeobj.exec, src.id, (err, userList)=>{\n\t        if (err){\n\t          logger.error(src.id, ndutil.format('%s Query users happen error', functionName), err);\n\t          return interCallback(null, topicObj, {}, needUserInfoSet);\n\t        }\n\t        let userMap = new Map();\n\t        for (let userItem of userList){\n\t          userMap.set(userItem._id.toString(), userItem);\n\t        }\n\t        return interCallback(null, topicObj, userMap, needUserInfoSet);\n\t      });\n\t    }\n\t    else{\n\t      return interCallback(null, topicObj, {}, needUserInfoSet);\n\t    }\n\t  },\n\t  (topicObj, userMap, needUserInfoSet, interCallback)=>{\n\t    if (userMap.size > 0 && needUserInfoSet.size > 0){\n\t      logger.info(src.id, ndutil.format('%s Fill userinformation into member manully', functionName));\n  \t    for (let memberItem of needUserInfoSet){\n  \t      if (userMap.has(memberItem.member.toString())){  \t        \n  \t        let userInfo = userMap.get(memberItem.member);\n  \t        _.extend(memberItem, {'username': userInfo.username, 'displayname': userInfo.displayname, 'picture_url': userInfo.picture_url});\n  \t        setTimeout(function(){syncTopicMemberTrigger(src, userInfo, memberItem), 1000});\n  \t      }\n  \t    }\n  \t    return interCallback(null, topicObj);\n\t    }\n\t    else{\n\t      return interCallback(null, topicObj);\n\t    }\n\t  }\n\t  ],\n\t  (err, topicObj)=>{\n\t    if (err){\n\t      return cb(null, {data:[]});\n\t    }\n\t    topicObj.data = topicObj.members;\n\t    return cb(err, topicObj);\n\t  });\n\t},\n//\t\t  if (err) {\n//\t\t\t\tlogger.error(src.id, err);\n//\t\t\t\treturn cb(err);\n//\t\t\t}\n//\t\t\tif (!topic) {\n//\t\t\t\treturn cb(new esErr.ESErrors(esErr.DBError));\n//\t\t\t}\n//\t\t\tvar userIds = topic.members.map(function (member) {\n//\t\t\t\treturn member.member;\n//\t\t\t});\n//\t\t\t\n//\t\t\tuserBusiness.listUsersById(src, {userIds: userIds, pagination: data.pagination, search: data.search}, function (err, userList) {\n//\t\t\t\tif (err) {\n//\t\t\t\t\tlogger.error(src.id, 'Error listing users by id', err);\n//\t\t\t\t\treturn cb(err);\n//\t\t\t\t}\n//\t\t\t\tuserList.data = userList.data.map(function (user) {\n//\t\t\t      var member = _.find(topic.members, {member: user._id.toString()});\n//\t\t\t      if (member) {\n//\t\t\t       return _.assign(user.profile, {\n//\t\t\t          member: member.member,\n//\t\t\t          joinTime: member.joinTime,\n//\t\t\t          role: member.role,\n//\t\t\t          memberType: member.memberType\n//\t\t\t        });\n//\t\t\t      }\n//\t\t\t    });\n//\t\t\t\treturn cb(null, userList);\n//\t\t\t});\n\t\t\t\n\t\t//});\n//\t},\n\t\n\tnewTopic: function (src, data, cb) {\n\t \tvar self = this;\n\t \tdata.members.push({\n\t\t\tmember: data.creator._id,\n\t\t\tmemberType: 'userId',  //admin | member\n\t\t\trole: meetingConstants.ATTENDEE_TYPES.ADMIN.type,\n\t\t\tjoinTime: data.now\n\t\t});\n\n\t\tvar newTopic = {\n\t\t\tcid: data.creator._id,\n\t\t\tmembers: data.members,\n\t\t\ttitle: data.topic.title,\n\t\t\tdescription: data.topic.description\n\t\t};\n\n\t\tthis.create(newTopic, function (err, createdTopic) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, err);\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\tNotifyEvent.emitUserCreateTopic(src, {user: data.creator, target: createdTopic, role: meetingConstants.ATTENDEE_TYPES.ADMIN.type});\n\t\t\tlogger.info(src.id, 'new topic created!');\n\t\t\tdata.topic = createdTopic;\n\t\t\tself.newInvite(src, data, cb);\n\t\t});\n\t},\n\t\n\tcanSupportAccessWithoutRelation: function(src, topicId, cb){\n\t  dbWp.execute(Topic, Topic.findOne, src.id, {_id: topicId}, (err, topicObj) =>{\n\t    if (topicObj && topicObj.settings.accessLimRel == cst.JoinTopicNoLimit){\n\t      return cb(null, true, topicObj);\n\t    }\n\t    return cb(null, false, topicObj);\n\t  });\n\t},\n\t\n\tconvertTopicRestrictToStringList: function(src, topicObj){\n\t  let retStringList = [];\n\t  let restrictArrayVal = cst.defaultRestrictValue;\n\t  if (topicObj.restrict.length > 0){\n\t    restrictArrayVal = _.clone(topicObj.restrict);\n\t  }\n\t  for (let restrictItemPos in restrictArrayVal){\n\t    let bitCnt = 0;\n\t    let restrictItemVal = restrictArrayVal[restrictItemPos];\n\t    while(restrictItemVal != 0 ){\n\t      if (restrictItemVal & 1 == 1){\n\t        let indexString = pmCfg.getStringIndex(restrictItemPos, bitCnt);\n\t        if (indexString < pmCfg.restrictStringList.length){\n\t          let stringCfg = pmCfg.restrictStringList[indexString];\n\t          retStringList.push(stringCfg);\n\t        }\n\t      }\n\t      restrictItemVal = (restrictItemVal >>> 1);\n\t      ++bitCnt;\n\t    }\n\t  }\n\t  return retStringList;\n\t}\n};\n\nfunction syncTopicMemberTrigger(src, userInfo, memberInfo){\n  let functionName = '[syncTopicMemberTrigger]'\n  let syncData = {\n    member: memberInfo.member,\n    memberType: memberInfo.memberType,\n    memberData: {\n      \"members.$.username\": userInfo.username,\n      \"members.$.displayname\": userInfo.displayname,\n      \"members.$.picture_url\": userInfo.picture_url,\n    }\n  };\n  taskqueue.launchDefer(src, \n    'syncTopicMemberDefer',\n    syncData,\n    {defferOption: true,\n     backoff_seconds: 300,\n     attempts: 3,\n     callback:(err, result)=>{\n       if(!err){\n         logger.info(src.id, ndutil.format('%s Tigger a task to sync member information information successfully', functionName));\n       }\n       else{\n         logger.info(src.id, ndutil.format('%s Tigger a task to sync member information information failed', functionName), syncData);\n       }\n     }\n  });\n}\n\nfunction syncTopicMemberDefer(src, data, cb){\n  let functionName = '[syncTopicMemberDefer] ';\n  logger.info(src.id, ndutil.format('%s sync topic member info.', functionName), data);\n  let member = data.member;\n  let memberType = data.memberType;\n  let memberData = data.memberData;\n//  Topic.find({\"members\": {\"$elemMatch\":{\"member\":member, \"memberType\": memberType}}}, (err, result)=>{\n//    console.log(\"======================>>>\", result)\n//  })\n//  return cb(null)\n  dbWp.execute(Topic,\n    Topic.update,\n    src.id,\n    {\"members\": {\"$elemMatch\":{\"member\":member, \"memberType\": memberType}}},\n    {'$set': memberData},\n    {'multi': true},\n    (err, result)=>{\n      if (err){\n        logger.error(src.id, ndutil.format('%s sync topic member info failed.', functionName), err);\n        return cb(new esErr.ESErrors(esErr.SyncMessageSenderFailed));\n      }\n      else{\n        logger.info(src.id, ndutil.format('%s sync topic member info successfully.', functionName));\n        return cb(null);\n      }\n  });\n}\ntaskqueue.registerDeferHandle('syncTopicMemberDefer', syncTopicMemberDefer);\n\nTopicEvent.onTopicUpdated = function(src, updatedTopic, oriTopic){\n  let functionName = '[onTopicUpdated] Update TopicUser topic cached info ';\n  let updatedTitle =  updatedTopic.title;\n  let oriTitle =  oriTopic.title;\n  logger.info(src.id, ndutil.format('%s with updatedTitle=%s oriTitle=%s',\n    functionName, updatedTitle, oriTitle));\n  if (updatedTitle == oriTitle){\n    logger.info(src.id, ndutil.format('%s canceled for no difference with title and description', functionName));\n    return; \n  }\n  else{\n    let updateData = {\n        cachedObjId: updatedTopic._id.toString(),\n        cachedObjType: cst.TypeTopic,\n        cachedObjCompareData: updatedTitle\n    };\n    taskqueue.launchDefer(src,\n        'cacheTopicToTopicUserDefer',\n        updateData,\n        {defferOption: true,\n         backoff_seconds: 300,\n         attempts: 3,\n         //Delay 10s to execute the task, let different task with same topic can end itself.  \n         delay: 10, \n         callback:(err, result)=>{\n           if(!err){\n             logger.info(src.id, ndutil.format('%s trigger a task to do cache work successfuly', functionName));\n           }\n           else{\n             logger.error(src.id, ndutil.format('%s trigger a task to do cache work failed', functionName), err);\n           }\n         }\n      });\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/topic/topic.backend.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction TopicEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(TopicEvent, EventEmitter);\n\nTopicEvent.prototype.emitTopicUpdated = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('topicUpdated');\n    this.emit.apply(this, args);\n};\n\nTopicEvent.prototype.onTopicUpdated = function (callback) {\n    this.on('topicUpdated', callback);\n};\n\nTopicEvent.prototype.emitTopicCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('topicCreated');\n    this.emit.apply(this, args);\n};\n\nTopicEvent.prototype.onTopicCreated = function (callback) {\n    this.on('topicCreated', callback);\n};\n\nTopicEvent.prototype.emitTopicDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('topicDeleted');\n    this.emit.apply(this, args);\n};\n\nTopicEvent.prototype.onTopicDeleted = function (callback) {\n    this.on('topicDeleted', callback);\n};\n\nTopicEvent.prototype.emitTopicInvited = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('topicInvited');\n    this.emit.apply(this, args);\n};\n\nTopicEvent.prototype.onTopicInvited = function (callback) {\n    this.on('topicInvited', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new TopicEvent());\n    }\n};\n\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/topic/topic.event.js\n **/","import LRU from 'lru-cache';\n\nvar options = { \n  max: 100000,\n  maxAge: 1000 * 5 };\n\nvar apiCache = LRU(options); // sets just the max size\nvar userCache = LRU(options);\nvar socketCache = LRU(options);\nexport default {apiCache, userCache, socketCache};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/lru.js\n **/","import cst from '../utils/serverConstants';\nimport MessageConstants from '../flux/constants/MessageConstants';\nimport mongoose from 'mongoose';\nexports.PermissionDefs = {};\n\nexports.pm = {};\nexports.restrict = {};\n\nlet strictStringMap = {};\nvar DENY_GUEST_ACCESS_TOPIC = exports.restrict.DENY_GUEST_ACCESS_TOPIC= [0, 0];\nstrictStringMap.DENY_GUEST_ACCESS_TOPIC = 'deny_guest_access_topic';\n//This configuration only can be set by itadmin or superuser\n//Other's only can view it\nvar DENY_ADMIN_DELETE_TOPIC = exports.restrict.DENY_ADMIN_DELETE_TOPIC= [0, 1];\nstrictStringMap.DENY_ADMIN_DELETE_TOPIC = 'deny_admin_delete_topic';\n//var DENY_MEMBER_DELETE_TOPIC = exports.restrict.DENY_MEMBER_DELETE_TOPIC = [0, 2];\n//strictStringMap.DENY_MEMBER_DELETE_TOPIC = 'deny_member_delete_topic';\n//var DENY_GUEST_READ_IDEA = exports.restrict.DENY_GUEST_READ_IDEA= [0, 3];\n//strictStringMap.DENY_GUEST_READ_IDEA = 'deny_guest_read_idea';\n//var DENY_GUEST_READ_TASK = exports.restrict.DENY_GUEST_READ_TASK= [0, 4];\n//strictStringMap.DENY_GUEST_READ_TASK = 'deny_guest_read_task';\n\nvar USERSELF_PREFIX = 'userself.';\nvar SPECIFIC_PREFIX = 'specific.';\nvar SITEADMIN_PREFIX = cst.relationAny + '.';\nvar ADMIN_PREFIX = cst.relationAdmin + '.';\nvar EMPLOYEE_PREFIX = cst.relationMember + '.';\n\nvar RELATION_LIST = [cst.relationAdmin, cst.relationMember];\n\nvar PERM_TOPIC_CREATE = exports.pm.PERM_TOPIC_CREATE = 'topic.create';\nvar PERM_TOPIC_READ = exports.pm.PERM_TOPIC_READ ='topic.read';\nvar PERM_TOPIC_IDEA_READ = exports.pm.PERM_TOPIC_IDEA_READ ='topic.idea.read';\nvar PERM_TOPIC_TASK_READ = exports.pm.PERM_TOPIC_TASK_READ ='topic.task.read';\nvar PERM_TOPIC_UPDATE = exports.pm.PERM_TOPIC_UPDATE ='topic.update';\nvar PERM_TOPIC_DELETE = exports.pm.PERM_TOPIC_DELETE ='topic.delete';\n\nvar objectTypeModelMap = {};\nobjectTypeModelMap[cst.TypeTopic] = require('../api/topic/topic.model');\n\nexports.getStringIndex = function(intPos, bitPos){\n  return intPos * 32 + bitPos;\n}\n\nfunction createRestrictStringList(){\n  let retVal = [];\n  for (let restrictKey in exports.restrict){\n    let restrictVal = exports.restrict[restrictKey];\n    let indexString = exports.getStringIndex(restrictVal[0], restrictVal[1]);\n    if ((retVal.length - 1) < indexString){\n      let extendLength = indexString - retVal.length + 1;\n      for (let extendCnt = 0; extendCnt < extendLength; ++extendCnt){\n        retVal.push('');\n      }\n    }\n    retVal[indexString] = strictStringMap[restrictKey]\n  }\n  return retVal;\n}\nexports.restrictStringList = createRestrictStringList();\n\nvar getObjWhenId = function(src, obj, objectType, cb){\n  \n  if (typeof(obj) === 'string' ||\n      mongoose.Types.ObjectId.isValid(obj.toString())){\n    let model = objectTypeModelMap[objectType];\n    if (!model){\n      return cb(null, null);\n    }\n    \n    let proj = undefined;\n    if (objectType == cst.TypeTopic){\n      proj={'restrict':1, 'parents.parentid':1,'parents.parent_type':1, 'members.member':1, 'members.memberType':1, 'members.role':1};\n    }\n    model.findOne({_id: obj}, proj).exec((err, ObjRes) => {\n      if (err || (!ObjRes)){\n        return cb(null, null);\n      }\n      return cb(null, ObjRes);\n    });\n  }\n  else{\n    return cb(null, obj);\n  }\n};\n\n\nfunction hasNoRestrict(restrictArray, checkVal){\n  let posInt = checkVal[0];\n  if ((restrictArray.length - 1) < posInt){\n    return true;\n  }\n  let intval = restrictArray[posInt];\n  let shitfedVal = (1 << checkVal[1]);\n  if ((intval & shitfedVal) == 0){\n    return true;\n  }\n  return false;\n}\n\nvar checkUserTopicPersmission = function(src, userObj, topicObj, askPermission){\n  if (askPermission.endsWith(PERM_TOPIC_READ)){\n    if (hasNoRestrict(topicObj.restrict, DENY_GUEST_ACCESS_TOPIC)){\n      return true;\n    }\n  }\n  if (askPermission.startsWith('admin.')){\n    for (let parentItem of topicObj.parents){\n      for (let rel of userObj.relation_graphs){\n        if (rel.relation_type == 'admin' &&\n            rel.initiator_type==parentItem.parent_type &&\n            rel.initiator_id == parentItem.parentid){\n          return true;\n        }\n      }\n    }\n  }\n  \n  for (let memberItem of topicObj.members){\n    let memberType = memberItem.memberType;\n    if (memberType === 'userId'){\n      memberType = cst.TypeUser;\n    }\n    if (memberItem.member == userObj._id && memberType == userObj.aType){\n      if (askPermission.endsWith(PERM_TOPIC_DELETE)){\n        if (memberItem.role == cst.relationAdmin && hasNoRestrict(topicObj.restrict, DENY_ADMIN_DELETE_TOPIC)){\n          return true;\n        }\n      }\n      else{\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nfunction checkUserSelfPermission(src, userObj, obj, objType, askPermission){\n  let extendPermissions = userObj.extendPermissions || [{content_type:'userself.topic.read', object_id:'', object_type:''}];\n  for (let permItem of extendPermissions){\n    if (permItem.content_type == USERSELF_PREFIX + askPermission){\n      if (userObj._id == obj._id && objType == cst.TypeUser){\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction checkSpecificPersmission(self, userObj, obj, objType, askPermission){\n  let extendPermissions = userObj.extendPermissions || [{content_type:'userself.topic.read', object_id:'', object_type:''}];\n  for (let permItem of extendPermissions){\n    if (permItem.content_type == SPECIFIC_PREFIX + askPermission){\n      if (permItem.object_id == obj._id && permItem.object_type == cst.TypeUser){\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction checkUserUserPersmission(src, userObj, otherUserObj, objType, askPermission){\n  if (userObj._id == otherUserObj._id){\n    return true;\n  }\n  return false;\n}\n\nfunction checkRelationlistPermission(src, userObj, obj, objType, askPermission){\n  let extendPermissions = userObj.extendPermissions || [{content_type:'userself.topic.read', object_id:'', object_type:''}];\n  for (let r_item of RELATION_LIST){\n    for (let permItem of extendPermissions){\n      if (permItem.content_type == r_item + '.' + askPermission){\n        for (let rel of userObj.relation_graphs){\n          if (rel.relation_type == r_item &&\n              rel.initiator_id == obj._id &&\n              rel.initiator_type == objType)\n              {\n                return true;\n              }\n        }\n      }\n    }\n  }\n  return false;\n}\n\n\nvar objectTypeCheckHandles = {};\nobjectTypeCheckHandles[cst.TypeTopic] = checkUserTopicPersmission;\nobjectTypeCheckHandles[cst.TypeUser] = checkUserUserPersmission;\n\nvar otherCheckHandle = function(src, userObj, obj, objType, askPermission){\n  let check_list = [checkUserSelfPermission,\n                    checkSpecificPersmission,\n                    checkRelationlistPermission]\n  if (askPermission.startsWith(USERSELF_PREFIX)){\n    return check_list[0](userObj, obj, objType, askPermission.replace(USERSELF_PREFIX, ''));\n  }\n  else if (askPermission.startsWith(SPECIFIC_PREFIX)){\n    return check_list[1](userObj, obj, objType, askPermission.replace(SPECIFIC_PREFIX, ''));\n  }\n  else if (askPermission.startsWith(ADMIN_PREFIX)){\n    return check_list[2](userObj, obj, objType, askPermission.replace(ADMIN_PREFIX, ''));\n  }\n  else if (askPermission.startsWith(EMPLOYEE_PREFIX)){\n    return check_list[2](userObj, obj, objType, askPermission.replace(EMPLOYEE_PREFIX, ''));\n  }\n  else{\n    for (let funItem of check_list){\n      if (funItem(userObj, obj, objType, askPermission)){\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction hasPermWithNoObj(src, askPermission, userObj, cb){\n  let extendPermissions = userObj.extendPermissions || [{content_type:'userself.topic.read', object_id:'', object_type:''}];\n  for (let permItem of extendPermissions){\n    if (permItem.content_type.endsWith(askPermission)){\n      return cb(null, true);\n    }\n  }\n  if ((userObj.aType==cst.TypeUser && askPermission.indexOf('topic.') >= 0) ||\n      (userObj.aType==cst.TypeAnonymous && askPermission.indexOf(PERM_TOPIC_READ) >= 0)) {\n    return cb(null, true);\n  }\n  return cb(null, false);\n}\n\nfunction hasPermWithObj(src, askPermission, userObj, obj, objType, cb){\n  let extendPermissions = userObj.extendPermissions || [{content_type:'userself.topic.read', object_id:'', object_type:''}];\n  for (let permItem of extendPermissions){\n    if (permItem.content_type.endsWith(askPermission)){\n      if (permItem.content_type.startsWith('any.')){\n        return cb(null, true);\n      }\n      else{\n        if (objType in objectTypeCheckHandles){\n          let result = objectTypeCheckHandles[objType](src, userObj, obj, askPermission);\n          if (result){\n            return cb(null, result);\n          }\n        }\n        else{\n          let result = otherCheckHandle(src, userObj, obj, objType, askPermission);\n          if (result){\n            return cb(null, result);\n          }\n        }\n      }\n    }\n  }\n  if (askPermission.indexOf('topic.') >= 0){\n    if (objType in objectTypeCheckHandles){\n\t  let result = objectTypeCheckHandles[objType](src, userObj, obj, askPermission);\n\t  if (result){\n\t    return cb(null, result);\n\t  }\n    }\n  }\n  return cb(null, false);\n}\n\nexports.hasPerm = function (src, askPermission, userObj, obj, objType, cb){\n  if (obj){\n    getObjWhenId(src, obj, objType, (err, obj)=>{\n      hasPermWithObj(src, askPermission, userObj, obj, objType, cb);      \n    });\n  }\n  else{\n    hasPermWithNoObj(src, askPermission, userObj, cb);\n  }\n  \n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/permission-config.js\n **/","var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nvar PermissionGroupSchema = new Schema({\n  permission_name: {type: String, unique: true},\n  ndbid: String,\n  name: String,\n  description: String,\n  type: String,\n  permissions: [{_id: false,\n                 content_type: String,\n                 ndbid: String,\n                 object_id: String,\n                 object_type: String}]\n});\n\nmodule.exports = mongoose.model('PermissionGroup', PermissionGroupSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/permissiongroup.model.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\n\nvar EnrollAdminSchema = new Schema({\n  group: {type: String, \"enum\": ['developers','enrollAdmins'], default: 'developers'},\n  emails: [String]\n});\n\n/**\n * Indexes\n */\nEnrollAdminSchema.index({group: 1}, {unique: true});\n/**\n * Virtuals\n */\n\n\nmodule.exports = mongoose.model('EnrollAdmin', EnrollAdminSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/enrollAdmin.model.js\n **/","import keyMirror from '../../../node_modules/react-interpolate-component/node_modules/fbjs/lib/keyMirror';\nimport Translate from '../../components/Translate';\n\nvar ns = '[MessageConstants]';\nconst TaskConstants = {};\n\nTaskConstants.TASK_STATUS_TYPES = {\n\tPENDING: {\n\t\tstatus: 'pending',\n\t\tlabel: Translate.get('PENDING')\n\t},\n\tCOMPLETED: {\n\t\tstatus: 'completed',\n\t\tlabel: Translate.get('COMPLETED')\n\t},\n\tAPPROVED: {\n\t\tstatus: 'approved',\n\t\tlabel: Translate.get('APPROVED')\n\t},\n\tREJECTED: {\n\t\tstatus: 'rejected',\n\t\tlabel: Translate.get('REJECTED')\n\t},\n\tTESTING: {\n\t\tstatus: 'testing',\n\t\tlabel: Translate.get('TESTING')\n\t}\n};\n\nTaskConstants.TASK_DEFAULT_DATA = {\n\tbodyText: '',\n\tdescription: '',\n\tdata: [],\n\tassignees: [],\n\tstatus: TaskConstants.TASK_STATUS_TYPES.PENDING.status,\n\tdueDate: new Date().toISOString()\n}\n\n\nTaskConstants.ACTIONS= keyMirror({\n\tEDIT_TASK: null,\n\tCREATE_TASK: null,\n\tARRIVED_TASK: null,\n\tUPDATED_TASK: null\n});\n\nTaskConstants.API = {\n\tTOPIC_TASK_ADD: '/api/topics/:topicId/tasks',\n\tTASK_UPDATE: '/api/messages/:msgId',\n\tTASK_MESSAGES: '/api/tasks/:taskId/messages',\n};\n\nexport default TaskConstants\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/flux/constants/TaskConstants.js\n **/","'use strict';\n\nimport config from '../../config';\nimport q from 'q';\nimport moment from 'moment';\nimport templater from './templater';\nimport sendgrid from './sendgrid';\nimport User from '../../api/user/user.model';\nimport logger from '../logger';\nimport userEvent from '../../api/user/user.event';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport enrollEvent from '../../api/enroll/enroll.event';\nimport async from 'async';\nimport util from '../../utils/serverHelper';\nimport ga from \"../analytics/google\";\nimport gaCst from \"../analytics/google/constants\";\n\nuserEvent.onUserInvited(function (src, data) {\n    logger.info(src.id,'1 User is invited! Event received!', data.user);\n    if (!data.user) {\n        logger.error(src.id,'error, undefined user', data);\n    }\n    if (!data.invite) {\n        logger.error(src.id,'error, undefined invite', data);\n    }\n\n    var link = data.invite.makeInviteUrl(src.domain);\n\t\tvar sender = data.sender.displayname || data.sender.username;\n    var linkRef = new Buffer(JSON.stringify({\n        spaceName: data.title,\n        inviterName: data.sender.displayname,\n\t\t\t\tinviterEmail: data.sender.username\n    })).toString('base64');\n\n    if (linkRef) {\n        link += \"?inviteInfo=\" + linkRef;\n    }\n\n    sendgrid.sendInviteEmail({\n        sender: data.sender,\n        name: data.user.name || data.user.email,\n        email:  data.user.email,\n        link: link,\n        title: data.title,\n        emailType: data.user.emailType\n    })\n    .then(function () {\n        ga.postEvent({category: gaCst.c_Email, action: gaCst.a_newInviteEmail, label: data.invite._id});\n        logger.info(src.id,'Invitation email successfully sent !!! ' +  data.user.email);\n    })\n    .catch(function (err) {\n        logger.error(src.id,'Error sending invite to '  +  data.user.email, err);\n    });\n});\n\n\nenrollEvent.onEnrollCreated(function (src, enroll) {\n    logger.info(src.id, '1 User is requesting enrollAdmin! Event received!', enroll);\n    enroll.link = config.getLink(src.domain) + \"/spaces/enrollrequests/\" + enroll._id + \"/approval\";\n    util.getEnrollAdminEmails(function (emails) {\n        async.each(emails, function(email, callback) {\n            enroll.to = email;\n            sendgrid.sendRequestControlEmail(enroll)\n            .then(function () {\n                ga.postEvent({category: gaCst.c_Email, action: gaCst.a_newEnrollEmail, label: \"\"});\n                logger.info(src.id,'requesting email for ' + enroll.email + ' successfully sent to !!! ' +  email);\n                callback();\n            })\n            .catch(function (err) {\n                logger.error(src.id,'Error sending requests to '  +  email, err);\n                callback();\n            });\n        }, function(err, result){\n            logger.info(src.id, \"done sending request emails\");\n        });      \n    });\n});\n\nenrollEvent.onEnrollApproved(function (src, enroll) {\n    logger.info(src.id,'Enroll request is approved! Event received!', enroll);\n    enroll.link = config.getLink(src.domain) + \"/spaces/invite\";\n    sendgrid.sendRequestApprovedEmail(enroll)\n    .then(function () {\n        ga.postEvent({category: gaCst.c_Email, action: gaCst.a_EnrollApprovedEmail, label: \"\"});\n        logger.info(src.id,'Approved congratulation email successfully sent !!! ' +  enroll.email);\n    })\n    .catch(function (err) {\n        logger.error(src.id,'Error sending congratulation email to '  +  enroll.email, err);\n    });\n});\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/email/email.controller.js\n **/","'use strict';\n\nvar config = require('../../config'),\n    q = require('q'),\n    moment = require('moment'),\n    templater = require('./templater'),\n    logger = require('../logger'),\n    cst = require('../../utils/serverConstants'),\n    util = require('../../utils/serverHelper'),\n    sendgrid = require('sendgrid')(config.sendgrid.username, config.sendgrid.password);\n\nexports.sendRequestControlEmail = function (to) {\n    var defer = q.defer();\n\n    var email = new sendgrid.Email({\n        fromname: to.name + ' (via Zang Spaces)'\n    });\n\n    email.to = to.to;\n    email.from = 'enroll@zang.io';\n    email.setSubject(' ');\n    email.setHtml('<html><body></body></html>');\n\n    email.setSubstitutions({\n        '-name-': [to.name],\n        '-email-': [to.email],\n        '-link-': [to.link]\n    });\n\n    email.setCategories(['Logan Native Request Controll Email']);\n    \n    email.setFilters({\n        'templates': {\n            'settings': {\n                'enable': 1,\n                'template_id' : templater.requestControll.templateId,\n            }\n        }\n    })\n\n    sendgrid.send(email, function (err, json) {\n        if (err) {\n            logger.error('sendgrid error ', err);\n            return defer.reject(err);\n        } else {\n            return defer.resolve(json);\n        }\n    });    \n    return defer.promise;\n}\n\n\nexports.sendRequestApprovedEmail = function (to) {\n    var defer = q.defer();\n\n     var email = new sendgrid.Email({\n        fromname: 'Zang Spaces'\n    });\n\n    email.addTo(to.email);\n    email.from = config.noreplyEmail;\n    email.setSubject(' ');\n    email.setHtml('<html><body></body></html>');\n\n    email.setSubstitutions({\n        '-link-': [to.link]\n    });\n\n    email.setCategories(['Logan Native Request Approved Email']);\n    \n    email.setFilters({\n        'templates': {\n            'settings': {\n                'enable': 1,\n                'template_id' : templater.requestApproved.templateId,\n            }\n        }\n    })\n\n    sendgrid.send(email, function (err, json) {\n        if (err) {\n            logger.error('sendgrid error ', err);\n            return defer.reject(err);\n        } else {\n            return defer.resolve(json);\n        }\n    });\n    return defer.promise;\n}\n\nexports.sendInviteEmail = function (to) {\n    var defer = q.defer();\n    var sender = to.sender.displayname || to.sender.username;\n    var meetingTime;\n    var getTip = function (emailType) {\n        var tipList = templater.inviteUser.tips[emailType];\n        var item = tipList[Math.floor(Math.random()*tipList.length)];\n        return item;\n    };\n\n    var email = new sendgrid.Email({\n        fromname: sender + ' (via Zang Spaces)'\n    });\n\n    email.setSubject(' ');\n    email.setHtml('<html><body></body></html>');\n    email.addTo(to.email);\n    email.from = config.noreplyEmail;\n    email.replyto = to.sender.username;\n    email.setSubstitutions({\n        '-title-': [to.title],\n        '-name-': [to.name || to.email],\n        '-sender-': [sender],\n        '-support-': [config.supportLink],\n        '-inviteLink-':[to.link],\n        '-MeetingTime-':[meetingTime || ''],\n        '-tip-': [getTip(to.emailType)]\n    });\n\n    email.setCategories(['Logan Native Topic Invite Email']);\n    \n    email.setFilters({\n        'templates': {\n            'settings': {\n                'enable': 1,\n                'template_id' : templater.inviteUser.templateId,\n            }\n        }\n    })\n\n    sendgrid.send(email, function (err, json) {\n        if (err) {\n            logger.error('sendgrid error ', err);\n            return defer.reject(err);\n        } else {\n            return defer.resolve(json);\n        }\n    });\n    return defer.promise;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/email/sendgrid.js\n **/","var gcloud = require('gcloud');\nvar logger = require('../../logger');\nvar uuid =require('node-uuid');\nvar esErr = require('../../../errors/errors'); \n\n// Authenticating on a per-API-basis. You don't need to do this if you auth on a\n// global basis (see Authentication section above).\nvar gcloudConfig = require('./config');\nvar gcs = gcloud.storage(gcloudConfig.credential);\nvar bucket = gcs.bucket(gcloudConfig.bucket);\nvar tempExtneralBucket = gcs.bucket(gcloudConfig.tempExtneralBucket);\nvar buckesMap = {};\nbuckesMap[gcloudConfig.bucket] = bucket;\nbuckesMap[gcloudConfig.tempExtneralBucket] = tempExtneralBucket;\n\nvar DEFAULT_UPLOAD_URL_DURATION = 10 * 60 * 1000;\nvar DEFAULT_DOWNLOAD_URL_DURATION = 10 * 60 * 1000;\nexports.getUploadPublicUrl = function (src, data, cb) {\n\tvar file = data.file;\n\tvar gcsObj = bucket.file(file.fileKey);\n\tgcsObj.getSignedUrl({\n\t\taction: 'write',\n\t\texpires: Date.now() + 10 * 60 * 1000, // 5 mins\n\t\tcontentType: file['Content-Type'],\n\t\tresponseDisposition: file['responseDisposition'] || undefined,\n\t\textensionHeaders: 'x-goog-acl:public-read\\n'\n\t}, function (err, url) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, err);\n\t\t\treturn cb(err);\n\t\t}\n\t\treturn cb(null, url);\n\t});\n};\n\nexports.getUploadSignedUrl = function (src, data, cb, expiration=Date.now() + DEFAULT_UPLOAD_URL_DURATION) {\n\tvar file = data.file;\n\tvar gcsObj = bucket.file('logan/'+file.fileKey);\n\tgcsObj.getSignedUrl({\n\t\taction: 'write',\n\t\texpires: expiration, // 5 mins\n\t\tcontentType: file['Content-Type'],\n\t\tresponseDisposition: file['responseDisposition'] || undefined\n\t}, function (err, url) {\n\t\tif (err) {\n\t\t\tlogger.error(src.id, err);\n\t\t\treturn cb(err);\n\t\t}\n\t\treturn cb(null, url);\n\t});\n};\n\nfunction startWorker(){\n  var child_process = require('child_process');\n  var process = require('process');\n  var workerfile = __dirname + '/gcs.service.worker.js';\n//  if (__filename.endsWith('gcs.service.js')){\n//    workerfile = __dirname + '/gcs.service.worker.js';\n//  }\n  if (process.execArgv.toString().indexOf('--debug') !== -1){\n    process.execArgv.push('--debug=' + (5859));\n  }\n  var childProcess = child_process.fork(workerfile, [JSON.stringify(gcloudConfig)],{env:process.env});\n  console.log(\"create gcs sign worker successfully\");\n  \n  childProcess.on('message', (fileData)=>{\n    var cb = signedUrlKeyMap.get(fileData.commKey);\n    setTimeout(function(){signedUrlKeyMap.delete(fileData.commKey);}, 10); \n    return cb(null, fileData.url);\n  });\n  \n  return childProcess;\n}\n\nvar gcsSignWorker = startWorker();\nvar signedUrlKeyMap = new Map();\nvar keyCnt = 0;\nfunction sendToWorkder(fileKey, expiration, responseDisposition, cb){\n  let commKey = fileKey + '_' + (++keyCnt).toString();\n  signedUrlKeyMap.set(commKey, cb);\n  gcsSignWorker.send({key: fileKey, expiration:expiration, responseDisposition:responseDisposition, commKey:commKey});\n}\n\n\nexports.getDownloadSignedUrl = function (src, data, cb, expiration=Date.now() + DEFAULT_DOWNLOAD_URL_DURATION){\n  sendToWorkder(data.key, expiration, data['name'] || undefined, cb);\n//  var file = bucket.file('logan/'+data.key);  \n//  file.getSignedUrl({\n//\t\taction:'read',\n//\t\texpires: expiration,\n//\t\tresponseDisposition: data['name'] || undefined\n//\t}, function (err, url) {\n//\t\t// body...\t\n//\t\tif (err) {\n//\t\t\tlogger.error(src.id, err);\n//\t\t\treturn cb(err);\n//\t\t}\t\t\n//\t\treturn cb(null, url);\n//\t})\n};\n\nexports.getDownloadPublicUrl = function (src, data, cb){\n  var file = bucket.file('logan/'+data.key);\n  file.makePublic(function (err, resp) {\n\t\t// body...\t\n\t\tif (err) {\n\t\t\tlogger.error(src.id, err);\n\t\t\treturn cb(err);\n\t\t}\n\t\treturn cb(null, url);\n\t})\n};\n\nexports.copyFile = function(src, data, cb){\n  let functionName = '[file.copyFile ]';\n  let loganFolder = 'logan/';\n  let destFileName = loganFolder + data.destFileName;\n  let destBucketName = data.destBucketName;\n  let srcFileName = loganFolder + data.srcFileName;\n  let srcBucketName = data.srcBucketName;\n  logger.info(src.id, functionName + 'Copy file from bucket=' + srcBucketName + ' file=' + srcFileName + ' to bucket=' + destBucketName + ' file=' + destFileName);\n  let srcBucket = buckesMap[srcBucketName] || null;\n  let dstBucket = buckesMap[destBucketName] || null;\n  let dstAcl = data.dstAcl || null;\n  \n  if (dstBucket && srcBucket){\n    let srcFile = srcBucket.file(srcFileName);\n    let dstFile = dstBucket.file(destFileName);\n    if (dstAcl){\n      dstFile.acl.add(dstAcl);\n    }\n    srcFile.copy(dstFile, (err, newFile) => {\n      if (err){\n        logger.error(src.id, functionName + 'Copy file from bucket=' + srcBucketName + ' file=' + srcFileName + ' to bucket=' + destBucketName + ' file=' + destFileName + ' failed.' + err);\n        return cb(new esErr.ESErrors(esErr.FileCopyFailed));\n      }\n      else{\n        logger.info(src.id, functionName + 'Copy file from bucket=' + srcBucketName + ' file=' + srcFileName + ' to bucket=' + destBucketName + ' file=' + destFileName + ' successfully.');\n        return cb(null, newFile);\n      }\n    });\n  }\n  else{\n    logger.warn(src.id, functionName + 'Copy file from bucket=' + srcBucketName + ' file=' + srcFileName + ' to bucket=' + destBucketName + ' file=' + destFileName + ' failed. For srcbucket or dstbucket is invalid!');\n    return cb(new esErr.ESErrors(esErr.FileCopyFailed));\n  }  \n};\n\nexports.listFiles = function(src, data, cb){\n  let functionName = '[file.listFiles ]';\n  let loganFolder = 'logan/';\n  let bucketName = data.bucketName;\n  let query = {};\n  query.autoPaginate = data.autoPaginate || false;\n  query.delimiter = data.delimiter;\n  query.prefix = loganFolder + data.prefix;\n  logger.info(src.id, functionName + 'List files by bucket=' + bucketName + ' query=' + JSON.stringify(query));\n  if (bucketName && bucketName in buckesMap){\n    let bucket = buckesMap[bucketName];\n    bucket.getFiles(query, (err, files)=>{\n      if (err){\n        logger.warn(src.id, functionName + 'List files by bucket=' + bucketName + ' query=' + JSON.stringify(query) + ' failed', err);\n        return cb(null, []);\n      }\n      logger.info(src.id, functionName + 'List files by bucket=' + bucketName + ' query=' + JSON.stringify(query) + ' successfully');\n      return cb(null, files);\n    })\n  }\n  else{\n    logger.warn(src.id, functionName + 'List files by bucket=' + bucketName + ' query=' + JSON.stringify(query) + ' failed, for bucket in invalid');\n    return cb(null, []);\n  }  \n};\n\nexports.createFileObj = function(src, data, cb){\n  let functionName = '[file.createFileObj ]';\n  let loganFolder = 'logan/';\n  let bucketName = data.bucketName;\n  let path = data.path;\n  logger.info(src.id, functionName + 'Create file object by bucketName=' + bucketName + ' path=' + path);\n  if (bucketName && bucketName in buckesMap){\n    let bucket = buckesMap[bucketName];\n    path = loganFolder + path;\n    logger.info(src.id, functionName + 'Create file object by bucketName=' + bucketName + ' path=' + path + ' successfully!');\n    return cb(null, bucket.file(path));\n  }\n  else{\n    logger.info(src.id, functionName + 'Create file object by bucketName=' + bucketName + ' path=' + path + ' failed! For invalid bucketname');\n    return cb(new esErr.ESErrors(esErr.FileCreateObjectFailed));\n  }\n};\n\nexports.deleteFiles = function(src, data, cb){\n  let functionName = '[file.deleteFiles ]';\n  let loganFolder = 'logan/';\n  let bucketName = data.bucketName;\n  let query = {};\n  query.force=true;\n  query.delimiter = data.delimiter;\n  query.prefix = loganFolder + data.prefix;\n  logger.info(src.id, functionName + 'Delete files by bucket=' + bucketName + ' query=' + JSON.stringify(query));\n  \n  if (bucketName && bucketName in buckesMap){\n    let bucket = buckesMap[bucketName];\n    bucket.deleteFiles(query, (err, result)=>{\n      if (err){\n        return cb(new esErr.ESErrors(esErr.FileDeleteFailed));\n      }\n      else{\n        return cb(null);\n      }\n    });\n  }\n  else{\n    logger.info(src.id, functionName + 'Delete files by bucket=' + bucketName + ' query=' + JSON.stringify(query) + ' failed! invalid bucketname');\n    return cb(new esErr.ESErrors(esErr.FileDeleteFailed));\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/file/gcs/gcs.service.js\n **/","\n'use strict';\n\nimport config from './config';\nimport pmx from 'pmx';\n\nmodule.exports = function(app) {\n\tapp.use('/content', require('./content/content'));\n\tapp.use('/api/users', require('./api/user'));\n\tapp.use('/api/messages', require('./api/message')); //messages belong to room with id.\n\tapp.use('/api/companies', require('./api/company'));\n\tapp.use('/api/topics', require('./api/topic'));\n\tapp.use('/api/spaces', require('./api/topic'));\n\tapp.use('/api/tasks', require('./api/task'));\n\tapp.use('/api/ideas', require('./api/idea'));\n\tapp.use('/api/ams', require('./api/ams'));\n\tapp.use('/api/anonymous', require('./api/anonymous'));\n\tapp.use('/api/files', require('./api/file'));\n\tapp.use('/api/sync',require('./api/sync'));\n\tapp.use('/api/taskqueue',require('./api/taskqueue'));\n\tapp.use('/api/migrate',require('./api/migrate'));\n\tapp.use('/api/enrolls', require('./api/enroll'));\n\tapp.use('/auth', require('./auth'));\n\tapp.use('/api/fileviewer', require('./api/fileviewer'));\n\n\t//\n\t// Register Database connection\n\t// -----------------------------------------------------------------------------\n\n\t//\n\t// Statis Index.html\n\t// -----------------------------------------------------------------------------\n\tapp.route('/*')\n\t.get(function(req, res) {\n\t\tres.sendFile(app.get('appPath') + '/public/index.html');\n\t\t// res.redirect('/');\n\t});\n\n\t// if (config.env && config.env !== 'development') {\n\t\tapp.use(pmx.expressErrorHandler());\n\t// }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/routes.js\n **/","/**\n * Created by andreasi on 1/26/2016.\n */\n\n  import Is from './Is';\n\n\nexport default {\n  clone: (obj) => {\n    return !Is.$object(obj) || obj === null ? null : JSON.parse(JSON.stringify(obj));\n  },\n  GUID: () => {\n    var d = new Date().getTime();\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0;\n      d = Math.floor(d / 16);\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n    });\n    return uuid;\n  },\n\tfindBy: (items, field, value) => {\n\t\treturn items.filter((item) => {\n\t\t\treturn item[field] === value\n\t\t})\n\t},\n  getSecondsFromNow: (sec) => {\n    return new Date(Date.now() + (sec * 1000));\n  },\n  stringify: (obj) => {\n   return JSON.stringify(obj)\n  },\n  tryParse: (str) => {\n    try{\n      return JSON.parse(str);\n    }\n    catch(e){\n      return str;\n    }\n  },\n  urlify: (text, target, className) => {\n    var urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n    target = target || '_self';\n    return text.replace(urlRegex, function(url) {\n      return '<a href=\"' + url + '\" target=\"' + target + '\">' + url + '</a>';\n    });\n    // or alternatively\n    // return text.replace(urlRegex, '<a href=\"$1\">$1</a>')\n  },\n  stringExtractUrls: (text) => {\n    var urlRegex = /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/g;\n    var links = [];\n    var findStr = text;\n    findStr.replace(urlRegex, function(url) {\n      links.push(url);\n      return url;\n    });\n\n\n    return links;\n    // or alternatively\n    // return text.replace(urlRegex, '<a href=\"$1\">$1</a>')\n  },\n\tstripHTMLTags: (html) => {\n\t\tvar tmp = document.createElement('DIV');\n\t\ttmp.innerHTML = html;\n\t\treturn tmp.textContent || tmp.innerText || \"\";\n\t},\n\tincludesHTMLTags: (text) => {\n\t\treturn /<[a-z][\\s\\S]*>/i.test(text)\n\t\t//return text.includes('<') || text.includes('>');\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/Utils.js\n **/","module.exports = require(\"moment\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"moment\"\n ** module id = 87\n ** module chunks = 0\n **/","module.exports = require(\"morgan\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"morgan\"\n ** module id = 88\n ** module chunks = 0\n **/","module.exports = require(\"q\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"q\"\n ** module id = 89\n ** module chunks = 0\n **/","module.exports = require(\"react\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react\"\n ** module id = 90\n ** module chunks = 0\n **/","/**\n * Created by andreasi on 11/18/2015.\n */\nimport { Router } from 'express';\nimport request from \"request\";\nimport jQuery from 'jquery';\n\n\n\nconst router = new Router();\n\n//const AMS_IP = \"http://54.208.80.119:7150\"; //demo\nconst AMS_IP = \"http://146.148.71.203:7150\"; //gae\nconst AMS_URL = AMS_IP + \"/mediacontrol/\";\nconst LOGAN_NS = \"default\";\n\n\nrouter.post(\"/\", function(req, res){\n  \"use strict\";\n\n  let options = {\n    method: \"POST\",\n    url: AMS_URL + LOGAN_NS + req.query.sub,\n    headers: {\n      \"Content-Type\": \"application/xml\"\n    },\n    body: req.body.xmldoc\n  };\n  console.log(\"OPTIONS:\", options);\n\n  request(options, function(error, response, body){\n    console.log(\"AMS status code:\", response.statusCode);\n\n    //console.log(\"RESPONSE:\", response);\n    //console.log(\"ERROR:\", error);\n    //console.log(\"BODY:\", body);\n    res\n      .set(\"Content-Type\", \"text/xml\")\n      .status(response.statusCode)\n      .send(body);\n  });\n});\n\n\nrouter.get(\"/\", function(req, res){\n  \"use strict\";\n\n  let options = {\n    method: \"GET\",\n    url: AMS_URL + LOGAN_NS + req.query.sub,\n    headers: {\n      \"Content-Type\": \"application/xml\"\n    }\n  };\n  //console.log(\"OPTIONS:\", options);\n\n  request(options, function(error, response, body){\n    console.log(\"AMS status code:\", response.statusCode);\n    //console.log(\"ERROR:\", error);\n    //console.log(\"BODY:\", body);\n    res\n      .set(\"Content-Type\", \"text/xml\")\n      .status(response.statusCode)\n      .send(body);\n  });\n});\n\n\n\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/ams/index.js\n **/","'use strict';\n\nimport _ from 'lodash';\nimport Anonymous from './anonymous.model';\nimport logger from '../../modules/logger';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config';\nimport vw from '../viewBase/viewBase';\nimport auth from '../../auth/auth.service';\nimport esErr from '../../errors/errors'\nimport cst from '../../utils/serverConstants';\nimport anonymousEvent from './anonymous.event';\nimport util from '../../utils/serverHelper';\n\nexports.create = class create extends vw.ViewBase{\n    static AUTHENTICATORS = [];\n\n    handle(req, res, cb){\n        var newAnonymousUser = new Anonymous(req.body);\n\n        newAnonymousUser.save(function(err, user) {\n            if (err) return validationError(res, err);\n            var parts = req.esDomain.split('.');\n            var issval = req.esDomain;\n            if (parts.length >= 3){\n                issval = parts.slice(parts.length - 2);\n                issval = issval;\n            }\n            var token = jwt.sign({anonymous_id: user._id, product_type: cst.ES_PRODUCT_ONESNA, iss: issval}, user.secret, { expiresInSeconds: 60*60*24 });\n            // res.cookie('AUTH_TOKEN', token);\n            anonymousEvent.emitAnonymousCreated(req, user);\n            res.json({ token: token });\n        });\n    };\n};\n\nexports.me = class me extends vw.ViewBase{\n    static AUTHENTICATORS = [auth.AnonymousAuthenticator];\n\n    handle(req, res, cb){\n        var userId = req.anonymousUser._id;\n        Anonymous.findOne({\n            _id: userId\n        }, function(err, user) { // don't ever give out the password or salt\n            if (err) {return next(err)};\n            if (!user) {\n                return res.status(cst.HttpUnauthorizedAnonymousStatus).send(new esErr.ESErrors(esErr.AuthenticateErrorAnony4001JWT))\n            }\n            user.secret = undefined;\n            return res.status(cst.HttpSuccessStatus).send(user);\n        });\n    };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/anonymous/anonymous.controller.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './anonymous.controller';\nimport auth from '../../auth/auth.service';\nimport {asView} from '../viewBase/viewBase';\n\n\n\nconst router = new Router();\n\nrouter.post('/auth', asView(controller.create));\nrouter.get('/me', asView(controller.me));\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/anonymous/index.js\n **/","/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /company              ->  index\n * POST    /company              ->  create\n * GET     /company/:id          ->  show\n * PUT     /company/:id          ->  update\n * DELETE  /company/:id          ->  destroy\n */\n\n'use strict';\n\nvar _ = require('lodash');\nvar Company = require('./company.model');\nvar logger = require('../../modules/logger');\nimport cst from '../../utils/serverConstants';\n\n// Get list of companies\nexports.index = function(req, res) {\n  Company.find(function (err, companies) {\n    \n    if(err) { return handleError(res, err); }\n    return res.status(cst.HttpSuccessStatus).json(companies);\n  });\n};\n\n// Get a single Company\nexports.show = function(req, res) {\n  Company.findById(req.params.id, function (err, company) {\n    if(err) { return handleError(res, err); }\n    if(!company) { return res.status(404).send('Not Found'); }\n    return res.json(company);\n  });\n};\n\n// Creates a new Company in the DB.\nexports.create = function(req, res) {\n  Company.create(req.body, function(err, company) {\n    if(err) { return handleError(res, err); }\n    return res.status(201).json(company);\n  });\n};\n\n// Updates an existing Company in the DB.\nexports.update = function(req, res) {\n  if(req.body._id) { delete req.body._id; }\n  Company.findById(req.params.id, function (err, company) {\n    if (err) { return handleError(res, err); }\n    if(!company) { return res.status(404).send('Not Found'); }\n    var updated = _.merge(company, req.body);\n    updated.save(function (err) {\n      if (err) { return handleError(res, err); }\n      return res.status(cst.HttpSuccessStatus).json(company);\n    });\n  });\n};\n\n// Deletes a Company from the DB.\nexports.destroy = function(req, res) {\n  Company.findById(req.params.id, function (err, company) {\n    if(err) { return handleError(res, err); }\n    if(!company) { return res.status(404).send('Not Found'); }\n    Company.remove(function(err) {\n      if(err) { return handleError(res, err); }\n      return res.status(204).send('No Content');\n    });\n  });\n};\n\nfunction handleError(res, err) {\n  return res.status(cst.HttpErrorStatus).send(err);\n}\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/company/company.controller.js\n **/","'use strict';\n\nvar util = require(\"util\"),\n    EventEmitter = process.EventEmitter,\n    instance;\n\nfunction CompanyEvent() {\n    EventEmitter.call(this);\n}\n\nutil.inherits(CompanyEvent, EventEmitter);\n\nCompanyEvent.prototype.emitCompanyUpdated = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('companyUpdated');\n    this.emit.apply(this, args);\n};\n\nCompanyEvent.prototype.onCompanyUpdated = function (callback) {\n    this.on('companyUpdated', callback);\n};\n\nCompanyEvent.prototype.emitCompanyCreated= function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('companyCreated');\n    this.emit.apply(this, args);\n};\n\nCompanyEvent.prototype.onCompanyCreated = function (callback) {\n    this.on('companyCreated', callback);\n};\n\nCompanyEvent.prototype.emitCompanyDeleted = function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift('companyDeleted');\n    this.emit.apply(this, args);\n};\n\nCompanyEvent.prototype.onCompanyDeleted = function (callback) {\n    this.on('companyDeleted', callback);\n};\n\nvar exportMe = {\n    getInstance: function() {\n        return instance || (instance = new CompanyEvent());\n    }\n};\n\nmodule.exports = exportMe.getInstance();\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/company/company.event.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './company.controller';\n\nconst router = new Router();\n\nrouter.get('/', controller.index);\nrouter.get('/:id', controller.show);\nrouter.post('/', controller.create);\nrouter.put('/:id', controller.update);\nrouter.patch('/:id', controller.update);\nrouter.delete('/:id', controller.destroy);\n\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/company/index.js\n **/","'use strict';\n\nimport vw from '../viewBase/viewBase';\nimport logger from '../../modules/logger';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport Enroll from './enroll.model';\nimport util from '../../utils/serverHelper';\nimport async from 'async';\nimport escapeStringRegexp from 'escape-string-regexp';\nimport authorize from '../../auth/authorizers';\nimport enrollEvent from './enroll.event';\nimport User from '../user/user.model';\nimport Admin from '../../enrollAdmin.model';\nimport ga from \"../../modules/analytics/google\";\nimport gaCst from \"../../modules/analytics/google/constants\";\n\nexports.create = class create extends vw.ViewBase{\n  static AUTHORIZERS = [];\n\tstatic AUTHENTICATORS = [];\n  handle(req, res, cb){\n    var enrollment = {\n      name: req.body.name,\n      email: req.body.email\n    };\n    var src = util.getSrcFromRequest(req);\n    function createEnroll (enrollment) {\n        Enroll.create(enrollment, function (err, enroll) {\n          if (err) { \n            if (err.code === 11000) {\n              logger.warn(src.id,\"An enrollment email/request has already been created\", err);\n              Enroll.findOne({email: req.body.email}, function (error, dupEnroll) {\n                if (dupEnroll) {\n                  return res.status(400).send({error: \"duplicate key\", email: dupEnroll.email, status: dupEnroll.status});\n                } else {\n                  logger.error(src.id, \"can not get original operation from duplicate error\", err);\n                  return res.status(400).send({error: \"duplicate key\"});\n                }   \n              });              \n            } else {\n              logger.error(src.id,\"Error happends creating enrollment\", err);\n              return res.status(400).send(err);\n            }\n          } else {\n            if(!enroll) { return res.status(400).send(new esErr.ESErrors(esErr.NotExsistedError)); }\n\n            enrollEvent.emitEnrollCreated(src,enroll);\n            // ga.postEvent({category: gaCst.c_Enroll, action: gaCst.a_newEnroll, label: enroll._id});\n            return res.status(200).send(enroll);\n          }\n      });\n    }\n\n    if (req.body.email) {\n      Enroll.findOne({\"user.emails.value\": req.body.email}, function (err, existEnroll) {\n        if (err) {\n          logger.error(src.id,\"Error happends finding enrollment\", err);\n          return res.status(400).send(err);\n        }\n        if (!existEnroll) {\n          User.findOne({'emails.value': req.body.email}, function (err, user) {\n            if (err) {\n              logger.error(src.id,\"Error happends finding enrollment\", err);\n              return res.status(400).send(err);\n            }\n            if (user) {\n              enrollment.user = user.profile;\n              enrollment.user._id = user._id;\n              enrollment.user.emails = user.emails;\n            }\n            return createEnroll(enrollment);\n          });\n        } else {\n          return res.status(400).send({error: \"duplicate key\", status: existEnroll.status});\n        }\n      });\n    } else {\n      return createEnroll(enrollment);\n    }\n  };\n};\n\nexports.adminCreateEnroll = class adminCreateEnroll extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var enrollment = {\n      name: req.body.name,\n      email: req.body.email,\n      status: \"approved\"\n    };\n    var src = util.getSrcFromRequest(req);\n    function createEnroll (enrollment) {\n        Enroll.create(enrollment, function (err, enroll) {\n          if (err) { \n            if (err.code === 11000) {\n              logger.warn(src.id,\"An enrollment email/request has already been created\", enrollment);\n              Enroll.findOne({email: req.body.email}, function (error, dupEnroll) {\n                if (error) {\n                  logger.error(\"Error find enroll\",error);\n                  return res.status(400).send(error);\n                }\n                if (dupEnroll) {\n                  return res.status(400).send({error: \"duplicate key\", email: dupEnroll.email, status: dupEnroll.status});\n                } else {\n                  logger.error(src.id, \"can not get original operation from duplicate error\", err);\n                  return res.status(400).send({error: \"duplicate key\"});\n                }   \n              });\n            } else {\n              logger.error(src.id,\"Error happends creating enrollment\", err);\n              return res.status(400).send(err);\n            }\n          } else if(!enroll) { \n            return res.status(400).send(new esErr.ESErrors(esErr.NotExsistedError)); \n          } else {\n            if (enroll.status === \"approved\") {\n              enrollEvent.emitEnrollApproved(src,enroll);\n            } else {\n              enrollEvent.emitEnrollCreated(src,enroll);\n            }\n            return res.status(200).send(enroll);\n          }\n      });\n    }\n\n    if (req.body.email) {\n      Enroll.findOne({\"user.emails.value\": req.body.email}, function (err, existEnroll) {\n        if (err) {\n          logger.error(src.id,\"Error happends finding enrollment\", err);\n          return res.status(400).send(err);\n        }\n        if (!existEnroll) {\n          User.findOne({'emails.value': req.body.email}, function (err, user) {\n            if (err) {\n              logger.error(src.id,\"Error happends finding enrollment\", err);\n              return res.status(400).send(err);\n            }\n            if (user) {\n              enrollment.user = user.profile;\n              enrollment.user._id = user._id;\n              enrollment.user.emails = user.emails;\n            }\n            return createEnroll(enrollment);\n          });\n        } else {\n          return res.status(400).send({error: \"duplicate key\", email: existEnroll.email, user: existEnroll.user, status: existEnroll.status});\n        }\n      });\n    } else {\n      return createEnroll(enrollment);\n    }\n  };\n};\n\nexports.get = class get extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    Enroll.findById(req.params.enrollId, function (err, enroll) {\n        if(err) { return res.status(400).send(err); }\n        if(!enroll) { return res.status(400).send(new esErr.ESErrors(esErr.NotExsistedError)); }\n        return res.json(enroll);\n    })\n  };\n};\n\nexports.check = class check extends vw.ViewBase{\n  static AUTHORIZERS = [];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    const user = req.user;\n    if (!user) {\n      //return res.status(400).send(new esErr.ESErrors(esErr.NotExsistedError));\n      return res.status(200).send({hasPermissionToCreateSpace: false});\n    }\n    User.findOne({_id: user._id}, {emails:1}, (err, user) => {\n      const emails = user.emails.map(function (email) {\n        return email.value;\n      });\n      async.series([\n      function(callback) {\n        util.getDeveloperAdmins(function (admins) {\n          if (admins.length > 0) {\n            async.eachSeries(emails, function(email, cb) {\n              if (util.checkItemInList(email, admins)) {\n                return res.status(200).send({hasPermissionToCreateSpace: true, hasPermissionToApproveEnrolls:true});\n             }\n              return cb();\n            }, function(err){\n              return callback();\n            });\n          } else {\n            return callback();\n          }\n        });   \n      },\n      function(callback) {\n        util.getEnrollAdminEmails(function (enrollAdmins) {\n          if (enrollAdmins.length > 0) {\n            async.eachSeries(emails, function(email, callback) {\n              if (util.checkItemInList(email, enrollAdmins)) {\n                return res.status(200).send({hasPermissionToCreateSpace: true, hasPermissionToApproveEnrolls:true});\n             }\n             return callback();\n            }, function(err, result){\n              return callback();\n            });\n          } else {\n            return callback();\n          }\n        });\n      },\n      function(callback) {\n        async.eachSeries(emails, function(email, cb) {\n           if (util.checkZangUser(email)) {\n              return res.status(200).send({hasPermissionToCreateSpace: true});\n           }\n           return cb();\n        }, function(err){\n            return callback();\n        });\n      },\n      function(callback){\n        Enroll.findOne({email: {$in: emails}}, function (err, enroll) {\n            if(err) { return res.status(400).send(err); }\n            //if(!enroll) { return res.status(400).send(new esErr.ESErrors(esErr.NotExsistedError)); }\n            if(!enroll) { return res.status(200).send({hasPermissionToCreateSpace: false}); }\n            return res.json({ hasPermissionToCreateSpace: enroll.status === 'approved' });\n        });\n      }],\n      function(err, results){\n     });\n    });\n  };\n};\n\nexports.search = class search extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    var page = Number(req.query.page) || 1,\n        size = Number(req.query.size) || 10,\n        size = size > 30 ? 30: size,\n        str,\n        status,\n        skip = (page-1)*size,\n        limit = size + 1,\n        query = {},\n        src = util.getSrcFromRequest(req),\n        apiRoute = '/api/enrolls/search';\n\n    if (req.query) {\n      str = req.query.search;\n      status = req.query.status;\n\t\t\tif (str || status) {\n\t\t\t\tquery.$and = [];\n\t\t\t}\n    }\n    if (str) {\n      str = escapeStringRegexp(str);\n      query.$and.push({\n        $or: [\n          { 'name': {$regex: str, $options: 'i'} },\n          { 'email': {$regex: str, $options: 'i'} },\n          { 'user.username': {$regex: str, $options: 'i'} },\n          { 'user.emails.value': {$regex: str, $options: 'i'} },\n          { 'user.displayname': {$regex: str, $options: 'i'} }\n        ]\n      });\n    }\n    if (status) {\n      query.$and.push({status: status});\n    }\n\n    Enroll.find(query,{}, {skip: skip, limit: limit, sort: {_id: -1}}).lean().exec(function (err, enrolls) {\n        if(err) { return res.status(400).send(err); }\n        var returnData = {};\n        Enroll.count(query, function (err, count) {\n          if (enrolls.length === limit) {\n            returnData.data = enrolls.slice(0,-1);\n            returnData.hasNext = true;\n          } else {\n            returnData.data = enrolls;\n            returnData.hasNext = false;\n          }\n          if (enrolls.length === 0) {\n            returnData.from = (page - 1) * size;\n          } else {\n            returnData.from = (page - 1) * size + 1;\n          }\n          returnData.to = (page - 1) * size + returnData.data.length;\n\n          if (returnData.hasNext) {\n            returnData.nextPageUrl = apiRoute + '?page=' + (page + 1) + '&size=' + size;\n            if (str) {\n              returnData.nextPageUrl += '&search=' + str;\n            }\n            if (status) {\n              returnData.nextPageUrl += '&status=' + status;\n            }\n          }\n          if (page > 1) {\n            returnData.previousPageUrl = apiRoute + '?page=' + (page - 1) + '&size=' + size;\n            if (str) {\n              returnData.previousPageUrl += '&search=' + str;\n            }\n            if (status) {\n              returnData.previousPageUrl += '&status=' + status;\n            }\n          }\n          returnData.total = count;\n          if (req.query.totalCount) {\n            Enroll.count({status: \"approved\"}, function (err, appCount) {\n              Enroll.count({status: \"awaiting\"}, function (err, waitCount) {\n                if (appCount) {\n                  returnData.totalApproved = appCount;\n                }\n                if (waitCount) {\n                  returnData.totalAwaiting = waitCount;\n                }\n                return res.status(cst.HttpSuccessStatus).json(returnData);\n              });\n            });\n          } else {\n            return res.status(cst.HttpSuccessStatus).json(returnData);\n          }\n        });\n    });\n  };\n};\n\nexports.remove = class remove extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    Enroll.findOneAndRemove({_id:req.params.enrollId}, function (err, enroll) {\n        if(err) { return res.status(400).send(err); }\n        if(!enroll) { return res.status(200).send(); }\n        return res.status(200).send();\n    })\n  };\n};\n\nexports.updateStatus = class updateStatus extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    Enroll.findOneAndUpdate({_id: req.params.enrollId}, req.body, {new:true}, function (err, enroll) {\n        if(err) { return handleError(res, err); }\n        if(!enroll) { return res.status(400).send(new esErr.ESErrors(esErr.NotExsistedError)); }\n\n        if (enroll.user) {\n          Enroll.update({\"user._id\": enroll.user._id}, {$set: {status: enroll.status}}, {multi:true}).lean().exec(function (err, enrolls) {\n            if (err) {\n              logger.error(\"update existing enrollments\",err);\n              return res.status(400).send(err);\n            }\n            if (enroll.status === \"approved\") {\n              enrollEvent.emitEnrollApproved(src, enroll);\n            }\n            return res.status(200).send(enroll);\n          });\n        } else {\n          if (enroll.status === \"approved\") {\n            enrollEvent.emitEnrollApproved(src, enroll);\n          }\n          return res.status(200).send(enroll);\n        }\n    });\n  };\n};\n\nexports.addEnrollAdmins = class addEnrollAdmins extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    Admin.findOneAndUpdate({group: \"enrollAdmins\"}, {$addToSet: {emails: req.body.email}},{new: true}, function(err, newList) {\n      if (err) {\n        return res.status(400).send(err);\n      }\n      return res.status(200).send(newList);\n    });\n  };\n};\n\nexports.deleteEnrollAdmins = class deleteEnrollAdmins extends vw.ViewBase{\n  static AUTHORIZERS = [authorize.EnrollAdminAuthorizer];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    Admin.findOneAndUpdate({group: \"enrollAdmins\"}, {$pull: {emails: req.body.email}},{new: true}, function(err, newList) {\n      if (err) {\n        return res.status(400).send(err);\n      }\n      return res.status(200).send(newList);\n    });\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/enroll/enroll.controller.js\n **/","'use strict';\n\nimport { Router } from 'express';\nimport controller from './enroll.controller';\nimport {asView} from '../viewBase/viewBase';\n\nconst router = new Router();\n\nrouter.get('/check', asView(controller.check));\nrouter.get('/search', asView(controller.search));\nrouter.post('/admins/create', asView(controller.adminCreateEnroll));\n\nrouter.post('/admins/delete', asView(controller.deleteEnrollAdmins));\nrouter.post('/admins/', asView(controller.addEnrollAdmins));\n\nrouter.get('/:enrollId', asView(controller.get));\nrouter.post('/:enrollId', asView(controller.updateStatus));\n\nrouter.post('/', asView(controller.create));\n\nrouter.delete('/:enrollId', asView(controller.remove));\n\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/enroll/index.js\n **/","'use strict';\n\nimport vw from '../viewBase/viewBase';\nimport fileBackend from './file.backend';\nimport logger from '../../modules/logger';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport util from '../../utils/serverHelper';\nimport uuid from'node-uuid';\nimport jwt from 'jsonwebtoken';\nimport config from '../../config';\nimport messageBk from '../message/message.backend';\n\nexports.getUploadUrl = class getUploadUrl extends vw.anyCallView{\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n\n    if (!req.body || !req.body.files) {\n      logger.error(src.id, 'Bad request error ');\n      return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n    }\n    let data = {files: req.body.files};\n    for(var i in data){\n      data[i].fileKey = uuid.v4(); //enforce key;\n    }\n    fileBackend.getUploadUrls(src, data, function (err, results) {\n      if (err){\n        logger.error(src.id, 'getUploadUrl happen error ', err);\n        return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.UploadUrlCreateFailed));\n      }\n      return res.status(cst.HttpSuccessStatus).send({data: results});\n    });\n  }\n};\n\nexports.getProfileImageUploadUrl = class getProfileImageUploadUrl extends vw.anyCallView{\n  static USECACHE = false;\n\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n\n    if (!req.body || !req.body.files) {\n      logger.error(src.id, 'Bad request error ');\n      return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n    }\n    let data = {files: req.body.files};\n    if (req.anonymousUser){\n      data.user = req.anonymousUser;\n    } else if (req.user){\n      data.user = req.user;\n    }\n\n    fileBackend.getProfileImageUploadUrl(src, data, function (err, results) {\n      if (err){\n        logger.error(src.id, 'getUploadUrl happen error ', err);\n        return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.UploadUrlCreateFailed));\n      }\n      return res.status(cst.HttpSuccessStatus).send({data: results});\n    });\n  }\n};\n\nexports.getDownloadUrl = class getDownloadUrl extends vw.anyCallView{\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n\n    if (!req.body || !req.body.fileKeys) {\n      logger.error(src.id, 'getUploadUrl happen error ');\n      return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n    }\n    let data = req.body;\n    fileBackend.getDownloadUrls(src, data, function (err, results) {\n      if (err){\n        logger.error(src.id, 'getDownloadUrl happen error ', err);\n        return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.UploadUrlCreateFailed));\n      }\n      return res.status(cst.HttpSuccessStatus).send({data: results});\n    });\n  }\n};\n\nexports.getDownloadUrlPublic = class getDownloadUrlPublic extends vw.anyCallView{\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n\n    if (!req.body || !req.body.fileKeys) {\n      logger.error(src.id, 'getUploadUrl happen error ');\n      return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n    }\n    let data = req.body;\n    fileBackend.getDownloadUrlsPublic(src, data, function (err, results) {\n      if (err){\n        logger.error(src.id, 'getDownloadUrl happen error ', err);\n        return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.UploadUrlCreateFailed));\n      }\n      return res.status(cst.HttpSuccessStatus).send({data: results});\n    });\n  }\n};\n\nvar verifyTokenPreviewFileUrl = function(src, data, cb){\n  let functionName = '[verifyTokenPreviewFileUrl] ';\n  logger.info(src.id, functionName + 'Verify token for preview file Url token=' + data);\n  jwt.verify(data, config.secrets.session, (err, payload)=>{\n    if (err){\n      logger.error(src.id, functionName + 'Verify token for preview file Url token=' + data + ' failed!', err);\n      return cb(new esErr.ESErrors(esErr.VerifyJWTFailed));\n    }\n    else{\n      logger.info(src.id, functionName + 'Verify token for preview file Url token=' + data + ' successfully!');\n      return cb(null, payload);\n    }\n  });\n}\n\nexports.getviewUrls = class getviewUrls extends vw.ViewBase{\n  static AUTHENTICATORS = [];\n  static AUTHORIZERS = [];\n  handle(req, res, cb){\n    let maxlistSize = 50;\n    let functionName = '[getviewUrls.handle] ';\n    let token = req.params.token;\n    let size = util.getListOfItemCaps(req.query.size);\n    let offset = parseInt(req.query.offset || 0);\n    var src = util.getSrcFromRequest(req);\n    logger.info(src.id, functionName + 'Get view urls by token=' + token + ' size=' + size + ' offset=' + offset);\n    verifyTokenPreviewFileUrl(src, token, (err, jwtPlaylod)=>{\n      if (err){\n        logger.warn(src.id, functionName + 'Verify token for preview file Url token=' + token + ' failed!', err);\n        return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.GetviewUrlsFailed));\n      }\n      else{\n        jwtPlaylod.offset = offset;\n        jwtPlaylod.size = size;\n        messageBk.getViewUrls(src, jwtPlaylod, (err, result)=>{\n          if (err){\n            logger.info(src.id, functionName + 'Get view urls by token=' + token + ' size=' + size + ' offset=' + offset + ' failed!', err);\n            return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.GetviewUrlsFailed)); \n          }\n          else{\n            let nextUrl = '';\n            let prevUrl = '';\n            if (size > 0){\n              if (result.data.length + jwtPlaylod.offset < result.totalPages){\n                nextUrl = '/api/files/viewUrls/'+ token + '?size=' + size + '&offset=' + (result.data.length + jwtPlaylod.offset);\n              }\n              if (jwtPlaylod.offset > 0){\n                if (jwtPlaylod.offset - size > 0){\n                  prevUrl = '/api/files/viewUrls/'+ token + '?size=' + size + '&offset=' + (jwtPlaylod.offset - size);\n                }\n                else{\n                  prevUrl = '/api/files/viewUrls/'+ token + '?size=' + size;\n                }\n              }\n            }\n            result.nextUrl = nextUrl;\n            result.prevUrl = prevUrl;\n            return res.status(cst.HttpSuccessStatus).json(result);\n          }\n        });\n      }\n    });\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/file/file.controller.js\n **/","'use strict';\n\nimport { Router } from 'express';\nimport controller from './file.controller';\nimport {asView} from '../viewBase/viewBase';\n\nconst router = new Router();\n\nrouter.post('/getuploadurl', asView(controller.getUploadUrl));\nrouter.post('/getProfileImageUploadUrl', asView(controller.getProfileImageUploadUrl));\nrouter.post('/getdownloadurl', asView(controller.getDownloadUrl));\nrouter.post('/getdownloadurlPublic', asView(controller.getDownloadUrlPublic));\nrouter.get('/viewUrls/:token', asView(controller.getviewUrls))\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/file/index.js\n **/","/**\n *  To provide this backend is because aspose is very good at converting documents to pdf (for example page size process)\n *  But aspose is very expensive to split pdf to svg files and cloudconvert is relatively cheap to split pdf to svg file.\n *  So this backend apply the advantages of these two providers aspose converts documents to pdf.\n *  cloudconvert split pdf to svg files\n */\n\nimport fileViewCommon from './fileview.common';\nimport fs from '../../modules/file';\nimport gcs from 'gcloud/lib/storage';\nimport gcloudConfig from '../../modules/file/gcs/config.js';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport process from 'process';\nimport request from 'request';\nimport util from '../../utils/serverHelper';\nimport ndutil from 'util';\nimport cst from '../../utils/serverConstants';\nimport crypto from 'crypto';\nimport config from '../../config';\nimport messageEvt from '../message/message.event';\nimport crtHelp from './converter_helper';\n\nclass excelToSvgFileView extends crtHelp.cloudConvertToSvgFileView{\n  toPdf(inData, cb){\n    let functionName = '[excelToSvgFileView.toPdf] ';\n    let fileObj = inData.fileObj\n    let self = this;\n    let oriDocument = inData.oriDocument || 'oridocument';\n    if (fileObj.pages){\n      logger.info(self.src.id, functionName + 'The slides file already get page number before. pages=' + fileObj.pages);\n      return cb(null, fileObj); \n    }\n    let url = crtHelp.getAsposeApiBaseUrl() + 'cells/' + encodeURI(oriDocument + '.' + self.informat) + '/saveAs?' + \n              'storage=' + encodeURI(crtHelp.asposeStorageName) +\n              '&newfilename=' + encodeURI(oriDocument + '.pdf') +\n              '&folder=' + encodeURI('logan/' + self.fileId + '_convert');\n    try{\n      url = crtHelp.asposSign(self.src, url);\n    }\n    catch(err){\n      logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n      self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n        return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n      });\n    }\n    let postXmlData = \"<PdfSaveOptions><SaveFormat>Pdf</SaveFormat><OnePagePerSheet>True</OnePagePerSheet></PdfSaveOptions>\";\n    logger.info(self.src.id, functionName + 'Query slides pages by url' + url + \" with post xml data\" + postXmlData);\n    let options = {url: url,\n      headers: {\"Content-Type\": \"application/xml\"},\n      body: postXmlData\n    };\n    request.post(options, (err, response, body)=>{\n      if (!err && response.statusCode == 200){\n        logger.info(self.src.id, functionName + 'Convert excel to pdf successfully');\n        return cb(null, fileObj);\n      }\n      else{\n        logger.warn(self.src.id, functionName + 'Convert excel to pdf faild', err, response.statusCode, body);\n        return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n      }\n    });\n  }\n}\n\nexport default {\n  excelToSvgFileView: excelToSvgFileView,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/aspose_cloudconvert_fileview.backend.js\n **/","import fileViewCommon from './fileview.common';\nimport fs from '../../modules/file';\nimport gcs from 'gcloud/lib/storage';\nimport gcloudConfig from '../../modules/file/gcs/config.js';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport process from 'process';\nimport request from 'request';\nimport util from '../../utils/serverHelper';\nimport ndutil from 'util';\nimport cst from '../../utils/serverConstants';\nimport crypto from 'crypto';\nimport config from '../../config';\nimport messageEvt from '../message/message.event';\nimport crtHelp from './converter_helper';\n\nclass PdfToSvgFileView extends fileViewCommon.FileViewer{\n  cleanWork(cb){\n    let functionName = '[PdfToSvgFileView.cleanWork] ';\n    logger.info(this.src.id, functionName + 'Begin do clean work');\n    var self = this;\n    async.waterfall([\n    (interCallback)=>{\n      if(self.convertedFileObj){\n        let convertStatus = self.convertedFileObj.convertStatus || 0;\n        if (convertStatus == cst.ConvertStatusSuccess || convertStatus == cst.ConvertStatusFailed){\n          logger.info(self.src.id, functionName + 'Update all files in topic message with fileId=' + self.fileId + ' with status=' + convertStatus);\n          dbWp.execute(TopicMessage,\n            TopicMessage.update,\n            self.src.id,\n            {'content.data.fileId': self.fileId},\n            {'$set': {'content.data.$.metaData': {pages: self.convertedFileObj.pages},\n                     'content.data.$.convertStatus': convertStatus,\n                     'content.data.$.thumbnailFile': self.fileId +'_convert/page_1.svg',\n                     'modified': Date.now()}},\n            {multi: true, new: true},\n            (err, updateResults) => {\n              if (err){\n                logger.error(self.src.id, functionName + 'Update all files with same fileId failed', err);\n                return interCallback(new esErr.ESErrors(esErr.ConvertFileCleanWorkFailed));\n              }\n              else{\n                if (convertStatus == cst.ConvertStatusSuccess){\n                  crtHelp.notifyClientsMessageUpdate(self.src, self);\n                }\n              }\n          });\n        }\n      } \n      return interCallback(null);\n    },\n    (interCallback)=>{\n      crtHelp.removeTempfolder(self.src, self, (err)=>{\n        if (err){\n          logger.warn(self.src.id, functionName + 'Remove temp folder failed', err);\n        }\n        else{\n          logger.info(self.src.id, functionName + 'Remove temp folder failed successfully');\n        }\n        return cb(err);\n      });\n    },\n    ],(err, result)=>{\n      \n    });\n  }\n  \n  convert(cb){\n    var self = this;\n    var functionName = '[PdfToSvgFileView.convert] ';\n    var endRequestForRequestEndSoon = false;\n    async.waterfall([\n        //Query file information from database\n        (interCallback) => {\n          logger.info(self.src.id, functionName + 'Get file object from message by messageId=' + self.messageId + ' fileId=' + self.fileId + '.');\n          dbWp.execute(TopicMessage,\n              TopicMessage.findOne,\n              self.src.id,\n              {'_id': self.messageId,\n               'content.data.fileId':self.fileId},\n               {\"content.data.$\": 1},\n              (err, msgObj)=>{\n                if (!err && msgObj){\n                  logger.info(self.src.id, functionName + 'Get file object from message by messageId=' + self.messageId + ' fileId=' + self.fileId + ' successfully.');\n                  return interCallback(err, msgObj.content.data[0].toJSON());\n                }\n                logger.info(self.src.id, functionName + 'Get file object from message by messageId=' + self.messageId + ' fileId=' + self.fileId + ' failed.', err);\n                return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n              });\n        },\n        //copy the file to that folder\n        (fileObj, interCallback) => {\n          self.convertedFileObj = fileObj;\n          if (fileObj.metaData && fileObj.metaData.paging){\n            logger.info(self.src.id, functionName + 'The file already converted ' + fileObj.metaData.paging + ' pages');\n            return interCallback(null, fileObj);\n          }\n          logger.info(self.src.id, functionName + 'Copy file to temp convert folder with bucket=' + gcloudConfig.tempExtneralBucket + ' Folder=logan/' + self.fileId + '_convert/');\n          fs.copyFile(self.src, \n            {\n              srcBucketName: gcloudConfig.bucket,\n              srcFileName: self.fileId,\n              destBucketName: gcloudConfig.tempExtneralBucket,\n              destFileName: self.fileId + '_convert/' + self.fileId,              \n            },\n            (err, result)=>{\n              if (err){\n                logger.warn(self.src.id, functionName + 'Copy file failed', err);\n              }\n              else{\n                logger.info(self.src.id, functionName + 'Copy file successfully');\n              }\n              return interCallback(err, fileObj);\n          });\n        },\n        //get the page number of the pdf\n        (fileObj, interCallback) => {\n          if (fileObj.pages){\n            logger.info(self.src.id, functionName + 'The pdf file already get page number before. pages=' + fileObj.pages);\n            return interCallback(null, fileObj); \n          }\n          let url = crtHelp.getAsposeApiBaseUrl() + 'pdf/' + encodeURI(self.fileId) + '/pages?' +\n                    'folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                    '&storage=' + encodeURI(crtHelp.asposeStorageName);\n          try{\n            url = crtHelp.asposSign(self.src, url);\n          }\n          catch(err){\n            logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n            self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n              return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n            });\n          }\n          logger.info(self.src.id, functionName + 'Query pdf pages by url' + url);\n          let options = {url: url, json:true};\n          request.get(options, (err, response, body)=>{\n            if (!err && response.statusCode == 200){\n              let pages = 0; \n              if (body && body.Pages && body.Pages.List){\n                pages = body.Pages.List.length;\n              }\n              logger.info(self.src.id, functionName + 'Query pdf pages by url' + url + ' successfully with data:', body);\n              crtHelp.setPagesToMetaData(self.src, self.messageId, self.fileId, pages, (err, result)=>{\n                if (err){\n                  logger.error(self.src.id, functionName + 'Set page to file failed', err);\n                  return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n                }\n                else{\n                  logger.info(self.src.id, functionName + 'Set page to file successfully');\n                  fileObj.pages = pages;\n                  return interCallback(null, fileObj);\n                }\n              });\n            }\n            else{\n              logger.warn(self.src.id, functionName + 'Query pdf pages by url' + url + ' faild', err, response.statusCode, body);\n              return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n            }            \n          });\n        },\n        //use aspose api split document into doc for every 5 pages\n        (fileObj, interCallback) => {\n          let currentPage = fileObj.metaData.paging || 0;\n          let pages = fileObj.pages;\n          let stepPage = 5;\n          async.whilst(\n            ()=>{\n              crtHelp.setPagingToMetaData(self.src, self.messageId, self.fileId, currentPage, (err)=>{\n                if (err){\n                  logger.warn(self.src.id, functionName + 'Set paging of convert progress failed', err);\n                }\n              });\n              if (util.requestWillEndSoon(self.src)){\n                logger.info(self.src.id, 'This request will end soon, create another taskqueue to continue working');\n                endRequestForRequestEndSoon = true;\n                return false;\n              }\n              return (currentPage + 1) <= pages;\n            },\n            (interCallback2)=>{\n              let startPage = currentPage + 1;\n              if (startPage > pages){\n                return interCallback2(null, currentPage);\n              }\n              let endPage = currentPage + stepPage;\n              if (endPage > pages){\n                endPage = pages;\n              }\n              currentPage = endPage;\n              let url =  crtHelp.getAsposeApiBaseUrl() + 'pdf/' + encodeURI(self.fileId) + '/split?' + \n                         'format=' + encodeURI('doc') +\n                         '&from=' + startPage +\n                         '&to=' + endPage +\n                         '&folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                         '&storage=' + encodeURI(crtHelp.asposeStorageName);\n              try{\n                url = crtHelp.asposSign(self.src, url);\n              }\n              catch(err){\n                logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n                self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n                  return interCallback2(new esErr.ESErrors(esErr.TaskNoRetryError));\n                });\n              }\n              logger.info(self.src.id, functionName + 'Split pdf into docs by url' + url);\n              let options = {url: url, json: true};\n              request.post(options, (err, response, body)=>{\n                if (!err && response.statusCode == 200){\n                  logger.info(self.src.id, functionName + 'Split pdf document into docs by url' + url + ' successfully', body);\n                  //use aspose api convert doc page to svg\n                  var docsToSvgUrls = [];\n                  if (body.Result && body.Result.Documents){\n                    for (let docIdx in body.Result.Documents){\n                      let docItem = body.Result.Documents[docIdx];\n                      let href = docItem.Href;\n                      let cutPos = href.lastIndexOf('/');\n                      let docfileName = href.substring(cutPos+1);\n                      let docfileNamePage = 'page_' + (parseInt(startPage) + parseInt(docIdx)).toString() + '.svg';\n                      let url =  crtHelp.getAsposeApiBaseUrl() + 'words/'+ encodeURI(docfileName) + '?format=svg' +\n                                 '&folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                                 '&storage=' + encodeURI(crtHelp.asposeStorageName) +\n                                 '&outPath=' + encodeURI('logan/' + self.fileId + '_convert/' + docfileNamePage);\n                      try{\n                        url = crtHelp.asposSign(self.src, url);\n                      }\n                      catch(err){\n                        logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n                        self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n                          return interCallback2(new esErr.ESErrors(esErr.TaskNoRetryError));\n                        });\n                      }\n                      docsToSvgUrls.push(url);\n                    }\n                  }\n                  //convert docs to svgs\n                  async.forEachOf(docsToSvgUrls, (url, key, interCallback3)=>{\n                    let options = {url: url, json:true};\n                    logger.info(self.src.id, functionName + 'Convert doc to svg by url' + url);\n                    request.get(options, (err, response, body)=>{\n                      if (!err && response.statusCode == 200){\n                        logger.info(self.src.id, functionName + 'Convert doc to svg by url' + url + ' successfully!');\n                        return interCallback3(null);\n                      }\n                      else{\n                        logger.error(self.src.id, functionName + 'Convert doc to svg by url' + url + ' faild!', err, response.statusCode, body);\n                        return interCallback3(new esErr.ESErrors(esErr.FileConvertFailed));\n                      }\n                    });\n                  }, (err)=>{\n                    if (err){\n                      logger.warn(self.src.id, functionName + 'Convert docs to svgs failed');\n                      return interCallback2(err);\n                    }\n                    else{\n                      logger.info(self.src.id, functionName + 'Convert docs to svgs success');\n                      return interCallback2(null, endPage);\n                    }                    \n                  });\n                }\n                else{\n                  logger.warn(self.src.id, functionName + 'Split pdf document into docs by url' + url + ' faild', err, response.statusCode, body);\n                  return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                }\n              });\n            },\n            (err, n)=>{\n              if (err){\n                logger.warn(self.src.id, functionName + 'Convert to svg page by page happen error', err);\n              } \n              return interCallback(err, fileObj);\n          });\n        },\n        //Copy converted folder back to real official folder\n        (fileObj, interCallback) => {\n          logger.info(self.src.id, functionName + 'List all svg files from converted folder');\n          fs.listFiles(self.src,\n            {bucketName: gcloudConfig.tempExtneralBucket,\n             prefix: self.fileId + '_convert/page_',\n          },(err, results)=>{\n            logger.info(self.src.id, functionName + 'List all svg files from converted folder with files number=' + results.length);\n            if (results.length < fileObj.pages){\n              logger.warn(self.src.id, functionName + 'Happen some errors for list pages. pagenumber should be ' + fileObj.pages);\n              return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n            }\n            async.forEachOf(results, (aSrcFile, idx, interCallback2)=>{\n              let cutPosString = 'logan/';\n              let cutPos = aSrcFile.metadata.name.indexOf(cutPosString);\n              let path = null;\n              if (cutPos >= 0){\n                path = aSrcFile.metadata.name.substring(cutPos + cutPosString.length);\n              }\n              else{\n                logger.warn(self.src.id, functionName + 'Failed to get path from name=' + aSrcFile.metadata.name);\n              }\n              if (path){\n                logger.info(self.src.id, functionName + 'Will copy file to bucket=' + gcloudConfig.bucket + ' path='+path);\n                fs.createFileObj(self.src,\n                  {bucketName: gcloudConfig.bucket,\n                   path: path\n                },(err, destFileObj) => {\n                  aSrcFile.copy(destFileObj, (err, result)=>{\n                    if (err){\n                      logger.warn(self.src.id, functionName + 'Copy file failed', err);\n                      return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                    }\n                    result.setMetadata({contentType: 'image/svg+xml'}, (err, apiResponse)=>{\n                      if (err){\n                        logger.error(self.src.id, functionName + 'Set mimetype image/svg+xml failed', err);\n                        return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                      }\n                      else{\n                        return interCallback2(null);\n                      }\n                    });                    \n                  });\n                });\n              }\n              else{\n                return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n            }, (err)=>{\n              if (err){\n                logger.warn(self.src.id, functionName + 'Copy converted file back to real folder happen error', err);\n              }\n              else{\n                logger.info(self.src.id, functionName + 'Copy converted file back to real folder successfully');\n              }\n              return interCallback(err, fileObj);\n            });\n          });\n        },        \n      ],(err, result)=>{\n        if (endRequestForRequestEndSoon){\n          fileViewCommon.endRequestAndLauchAnotherDefer(self.src, self, (err)=>{\n            return cb(err);\n          });\n        }\n        else{\n          return cb(err, result);\n        }\n    });    \n  }\n}\n\nclass pptToSvgFileView extends fileViewCommon.FileViewer{\n  cleanWork(cb){\n    let functionName = '[pptToSvgFileView.cleanWork] ';\n    logger.info(this.src.id, functionName + 'Begin do clean work');\n    var self = this;\n    async.waterfall([\n    (interCallback)=>{\n      if(self.convertedFileObj){\n        let convertStatus = self.convertedFileObj.convertStatus || 0;\n        if (convertStatus == cst.ConvertStatusSuccess || convertStatus == cst.ConvertStatusFailed){\n          logger.info(self.src.id, functionName + 'Update all files in topic message with fileId=' + self.fileId + ' with status=' + convertStatus);\n          dbWp.execute(TopicMessage,\n            TopicMessage.update,\n            self.src.id,\n            {'content.data.fileId': self.fileId},\n            {'$set': {'content.data.$.metaData': {pages: self.convertedFileObj.pages},\n                     'content.data.$.convertStatus': convertStatus,\n                     'content.data.$.thumbnailFile': self.fileId +'_convert/page_1.svg',\n                     'modified': Date.now()}},\n            {multi: true, new: true},\n            (err, updateResults) => {\n              if (err){\n                logger.error(self.src.id, functionName + 'Update all files with same fileId failed', err);\n                return interCallback(new esErr.ESErrors(esErr.ConvertFileCleanWorkFailed));\n              }\n              else{\n                if (convertStatus == cst.ConvertStatusSuccess){\n                  crtHelp.notifyClientsMessageUpdate(self.src, self);\n                }\n              }\n          });\n        }\n      } \n      return interCallback(null);\n    },\n    (interCallback)=>{\n      crtHelp.removeTempfolder(self.src, self, (err)=>{\n        if (err){\n          logger.warn(self.src.id, functionName + 'Remove temp folder failed', err);\n        }\n        else{\n          logger.info(self.src.id, functionName + 'Remove temp folder failed successfully');\n        }\n        return cb(err);\n      });\n    },\n    ],(err, result)=>{\n      \n    });\n  }\n  convert(cb){\n    var self = this;\n    var functionName = '[pptToSvgFileView.convert] ';\n    var endRequestForRequestEndSoon = false;\n    async.waterfall([\n      //Query file information from database\n      (interCallback)=>{\n        logger.info(self.src.id, ndutil.format(functionName + 'Get file object from message by messageId=%s fileId=%s.', self.messageId, self.fileId));\n        dbWp.execute(TopicMessage,\n            TopicMessage.findOne,\n            self.src.id,\n            {'_id': self.messageId,\n             'content.data.fileId':self.fileId},\n             {\"content.data.$\": 1},\n            (err, msgObj)=>{\n              if (!err && msgObj){\n                logger.info(self.src.id, ndutil.format(functionName + 'Get file object from message by messageId=%s fileId=%s successfully.', self.messageId, self.fileId));\n                return interCallback(err, msgObj.content.data[0].toJSON());\n              }\n              logger.info(self.src.id, ndutil.format(functionName + 'Get file object from message by messageId=%s fileId=%s failed.', self.messageId, self.fileId), err);\n              return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n            });\n      },\n      //copy the file to that folder\n      (fileObj, interCallback) => {\n        self.convertedFileObj = fileObj;\n        if (fileObj.metaData && fileObj.metaData.paging){\n          logger.info(self.src.id, functionName + 'The file already converted ' + fileObj.metaData.paging + ' pages');\n          return interCallback(null, fileObj);\n        }\n        logger.info(self.src.id, functionName + 'Copy file to temp convert folder with bucket=' + gcloudConfig.tempExtneralBucket + ' Folder=logan/' + self.fileId + '_convert/');\n        fs.copyFile(self.src, \n          {\n            srcBucketName: gcloudConfig.bucket,\n            srcFileName: self.fileId,\n            destBucketName: gcloudConfig.tempExtneralBucket,\n            destFileName: self.fileId + '_convert/' + self.fileId,\n          },\n          (err, result)=>{\n            if (err){\n              logger.warn(self.src.id, functionName + 'Copy file failed', err);\n            }\n            else{\n              logger.info(self.src.id, functionName + 'Copy file successfully');\n            }\n            return interCallback(err, fileObj);\n        });\n      },\n      //get the page number of the slides\n      (fileObj, interCallback) => {\n        if (fileObj.pages){\n          logger.info(self.src.id, functionName + 'The slides file already get page number before. pages=' + fileObj.pages);\n          return interCallback(null, fileObj); \n        }\n        let url = crtHelp.getAsposeApiBaseUrl() + 'slides/' + encodeURI(self.fileId) + '/slides?' +\n                  'folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                  '&storage=' + encodeURI(crtHelp.asposeStorageName);\n        try{\n          url = crtHelp.asposSign(self.src, url);\n        }\n        catch(err){\n          logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n          self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n            return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n          });\n        }\n        logger.info(self.src.id, functionName + 'Query slides pages by url' + url);\n        let options = {url: url, json:true};\n        request.get(options, (err, response, body)=>{\n          if (!err && response.statusCode == 200){\n            let pages = 0; \n            if (body && body.Slides && body.Slides.SlideList){\n              pages = body.Slides.SlideList.length;\n            }\n            logger.info(self.src.id, functionName + 'Query slides pages by url' + url + ' successfully with data:', body);\n            crtHelp.setPagesToMetaData(self.src, self.messageId, self.fileId, pages, (err, result)=>{\n              if (err){\n                logger.error(self.src.id, functionName + 'Set page to file failed', err);\n                return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n              else{\n                logger.info(self.src.id, functionName + 'Set page to file successfully');\n                fileObj.pages = pages;\n                return interCallback(null, fileObj);\n              }\n            });\n          }\n          else{\n            logger.warn(self.src.id, functionName + 'Query slides pages by url' + url + ' faild', err, response.statusCode, body);\n            return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n          }            \n        });\n      },\n      //use aspose api split document into doc for every 5 pages\n      (fileObj, interCallback) => {\n        let currentPage = fileObj.metaData.paging || 0;\n        let pages = fileObj.pages;\n        let stepPage = 5;\n        async.whilst(\n          ()=>{\n            crtHelp.setPagingToMetaData(self.src, self.messageId, self.fileId, currentPage, (err)=>{\n              if (err){\n                logger.warn(self.src.id, functionName + 'Set paging of convert progress failed', err);\n              }\n            });\n            if (util.requestWillEndSoon(self.src)){\n              logger.info(self.src.id, 'This request will end soon, create another taskqueue to continue working');\n              endRequestForRequestEndSoon = true;\n              return false;\n            }\n            return (currentPage + 1) <= pages;\n          },\n          (interCallback2)=>{\n            let startPage = currentPage + 1;\n            if (startPage > pages){\n              return interCallback2(null, currentPage);\n            }\n            let endPage = currentPage + stepPage;\n            if (endPage > pages){\n              endPage = pages;\n            }\n            currentPage = endPage;\n            let url =  crtHelp.getAsposeApiBaseUrl() + 'slides/' + encodeURI(self.fileId) + '/split?' + \n                       'format=' + encodeURI('pdf') +\n                       '&from=' + startPage +\n                       '&to=' + endPage +\n                       '&folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                       '&storage=' + encodeURI(crtHelp.asposeStorageName) +\n                       '&destFolder=' + encodeURI('logan/' + self.fileId + '_convert');\n            try{\n              url = crtHelp.asposSign(self.src, url);\n            }\n            catch(err){\n              logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n              self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n                return interCallback2(new esErr.ESErrors(esErr.TaskNoRetryError));\n              });\n            }\n            logger.info(self.src.id, functionName + 'Split slides into pdfs by url' + url);\n            let options = {url: url, json: true};\n            request.post(options, (err, response, body)=>{\n              if (!err && response.statusCode == 200){\n                logger.info(self.src.id, functionName + 'Split slides document into pdfs by url' + url + ' successfully', body);\n                //use aspose api convert pdf page to doc\n                var docsToSvgUrls = [];\n                if (body.SplitResult && body.SplitResult.Slides){\n                  for (let docIdx in body.SplitResult.Slides){\n                    let docItem = body.SplitResult.Slides[docIdx];\n                    let href = docItem.Href;\n                    let cutPos = href.lastIndexOf('/');\n                    let docfileName = href.substring(cutPos+1);\n                    let pageNumber = parseInt(startPage) + parseInt(docIdx);\n                    let url =  crtHelp.getAsposeApiBaseUrl() + 'pdf/'+ encodeURI(docfileName) + '/split?format=doc' +\n                               '&folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                               '&storage=' + encodeURI(crtHelp.asposeStorageName);                               \n                    try{\n                      url = crtHelp.asposSign(self.src, url);\n                    }\n                    catch(err){\n                      logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n                      self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n                        return interCallback2(new esErr.ESErrors(esErr.TaskNoRetryError));\n                      });\n                    }\n                    docsToSvgUrls.push({url:url, pageNumber:pageNumber});\n                  }\n                }\n                //convert pdfs to docs\n                async.forEachOf(docsToSvgUrls, (urlObj, key, interCallback3)=>{\n                  let options = {url: urlObj.url, json:true};\n                  logger.info(self.src.id, functionName + 'Convert pdf to doc by url ' + urlObj.url);\n                  request.post(options, (err, response, body)=>{\n                    if (!err && response.statusCode == 200){\n                      logger.info(self.src.id, functionName + 'Convert pdf to doc by url ' + urlObj.url + ' successfully!');\n                      //Convert doc to svg\n                      let href = body.Result.Documents[0].Href;\n                      let cutPos = href.lastIndexOf('/');\n                      let docfileName = href.substring(cutPos+1);\n                      let docfileNamePage = 'page_' + urlObj.pageNumber.toString() + '.svg';\n                      let url =  crtHelp.getAsposeApiBaseUrl() + 'words/'+ encodeURI(docfileName) + '?format=svg' +\n                                 '&folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                                 '&storage=' + encodeURI(crtHelp.asposeStorageName) +\n                                 '&outPath=' + encodeURI('logan/' + self.fileId + '_convert/' + docfileNamePage);\n                      try{\n                        url = crtHelp.asposSign(self.src, url);\n                      }\n                      catch(err){\n                        logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n                        self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n                          return interCallback3(new esErr.ESErrors(esErr.TaskNoRetryError));\n                        });\n                      }\n                      let options = {url: url, json:true};\n                      logger.info(self.src.id, functionName + 'Convert doc to svg by url' + url);\n                      request.get(options, (err, response, body)=>{\n                        if (!err && response.statusCode == 200){\n                          logger.info(self.src.id, functionName + 'Convert doc to svg by url' + url + ' successfully!');\n                          return interCallback3(null);\n                        }\n                        else{\n                          logger.error(self.src.id, functionName + 'Convert doc to svg by url' + url + ' faild!', err, response.statusCode, body);\n                          return interCallback3(new esErr.ESErrors(esErr.FileConvertFailed));\n                        }\n                      });                      \n                    }\n                    else{\n                      logger.error(self.src.id, functionName + 'Convert pdf to doc by url' + urlObj.url + ' faild!', err, response.statusCode, body);\n                      return interCallback3(new esErr.ESErrors(esErr.FileConvertFailed));\n                    }\n                  });\n                }, (err)=>{\n                  if (err){\n                    logger.warn(self.src.id, functionName + 'Convert docs to svgs failed');\n                    return interCallback2(err);\n                  }\n                  else{\n                    logger.info(self.src.id, functionName + 'Convert docs to svgs success');\n                    return interCallback2(null, endPage);\n                  }                    \n                });\n              }\n              else{\n                logger.warn(self.src.id, functionName + 'Split slides document into pdfs by url' + url + ' faild', err, response.statusCode, body);\n                return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n            });\n          },\n          (err, n)=>{\n            if (err){\n              logger.warn(self.src.id, functionName + 'Convert to svg page by page happen error', err);\n            } \n            return interCallback(err, fileObj);\n        });\n      },\n      //Copy converted folder back to real official folder\n      (fileObj, interCallback) => {\n        logger.info(self.src.id, functionName + 'List all svg files from converted folder');\n        fs.listFiles(self.src,\n          {bucketName: gcloudConfig.tempExtneralBucket,\n           prefix: self.fileId + '_convert/page_',\n        },(err, results)=>{\n          logger.info(self.src.id, functionName + 'List all svg files from converted folder with files number=' + results.length);\n          if (results.length < fileObj.pages){\n            logger.warn(self.src.id, functionName + 'Happen some errors for list pages. pagenumber should be ' + fileObj.pages);\n            return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n          }\n          async.forEachOf(results, (aSrcFile, idx, interCallback2)=>{\n            let cutPosString = 'logan/';\n            let cutPos = aSrcFile.metadata.name.indexOf(cutPosString);\n            let path = null;\n            if (cutPos >= 0){\n              path = aSrcFile.metadata.name.substring(cutPos + cutPosString.length);\n            }\n            else{\n              logger.warn(self.src.id, functionName + 'Failed to get path from name=' + aSrcFile.metadata.name);\n            }\n            if (path){\n              logger.info(self.src.id, functionName + 'Will copy file to bucket=' + gcloudConfig.bucket + ' path='+path);\n              fs.createFileObj(self.src,\n                {bucketName: gcloudConfig.bucket,\n                 path: path\n              },(err, destFileObj) => {\n                aSrcFile.copy(destFileObj, (err, result)=>{\n                  if (err){\n                    logger.warn(self.src.id, functionName + 'Copy file failed', err);\n                    return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                  }\n                  result.setMetadata({contentType: 'image/svg+xml'}, (err, apiResponse)=>{\n                    if (err){\n                      logger.error(self.src.id, functionName + 'Set mimetype image/svg+xml failed', err);\n                      return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                    }\n                    else{\n                      return interCallback2(null);\n                    }\n                  });\n                });\n              });\n            }\n            else{\n              return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n            }\n          }, (err)=>{\n            if (err){\n              logger.warn(self.src.id, functionName + 'Copy converted file back to real folder happen error', err);\n            }\n            else{\n              logger.info(self.src.id, functionName + 'Copy converted file back to real folder successfully');\n            }\n            return interCallback(err, fileObj);\n          });\n        });\n      },\n    ],(err, result)=>{\n      if (endRequestForRequestEndSoon){\n        fileViewCommon.endRequestAndLauchAnotherDefer(self.src, self, (err)=>{\n          return cb(err);\n        });\n      }\n      else{\n        return cb(err, result);\n      }\n  })};\n}\n\nclass docToSvgFileView extends fileViewCommon.FileViewer{\n  cleanWork(cb){\n    let functionName = '[docToSvgFileView.cleanWork] ';\n    logger.info(this.src.id, functionName + 'Begin do clean work');\n    var self = this;\n    async.waterfall([\n    (interCallback)=>{\n      if(self.convertedFileObj){\n        let convertStatus = self.convertedFileObj.convertStatus || 0;\n        if (convertStatus == cst.ConvertStatusSuccess || convertStatus == cst.ConvertStatusFailed){\n          logger.info(self.src.id, functionName + 'Update all files in topic message with fileId=' + self.fileId + ' with status=' + convertStatus);\n          dbWp.execute(TopicMessage,\n            TopicMessage.update,\n            self.src.id,\n            {'content.data.fileId': self.fileId},\n            {'$set': {\n                     'content.data.$.convertStatus': convertStatus,\n                     'content.data.$.thumbnailFile': self.fileId +'_convert/page_1.svg',\n                     'modified': Date.now()}},\n            {multi: true, new: true},\n            (err, updateResults) => {\n              if (err){\n                logger.error(self.src.id, functionName + 'Update all files with same fileId failed', err);\n                return interCallback(new esErr.ESErrors(esErr.ConvertFileCleanWorkFailed));\n              }\n              else{\n                if (convertStatus == cst.ConvertStatusSuccess){\n                  crtHelp.notifyClientsMessageUpdate(self.src, self);\n                }\n              }\n          });\n        }\n      } \n      return interCallback(null);\n    },\n    (interCallback)=>{\n      crtHelp.removeTempfolder(self.src, self, (err)=>{\n        if (err){\n          logger.warn(self.src.id, functionName + 'Remove temp folder failed', err);\n        }\n        else{\n          logger.info(self.src.id, functionName + 'Remove temp folder failed successfully');\n        }\n        return cb(err);\n      });\n    },\n    ],(err, result)=>{\n      \n    });\n  }\n  convert(cb){\n    var self = this;\n    var functionName = '[docToSvgFileView.convert] ';\n    var endRequestForRequestEndSoon = false;\n    var oridocname = 'OriginalDoc';\n    async.waterfall([\n      (interCallback)=>{\n        //Query file information from database\n        logger.info(self.src.id, ndutil.format('%sGet file object from message by messageId=%s fileId=%s.', functionName, self.messageId, self.fileId));\n        dbWp.execute(TopicMessage,\n            TopicMessage.findOne,\n            self.src.id,\n            {'_id': self.messageId,\n             'content.data.fileId':self.fileId},\n             {\"content.data.$\": 1},\n            (err, msgObj)=>{\n              if (!err && msgObj){\n                logger.info(self.src.id, ndutil.format('%sGet file object from message by messageId=%s fileId=%s successfully.', functionName, self.messageId, self.fileId));\n                return interCallback(err, msgObj.content.data[0].toJSON());\n              }\n              logger.info(self.src.id, ndutil.format('%sGet file object from message by messageId=%s fileId=%s failed.', functionName, self.messageId, self.fileId), err);\n              return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n            });\n      },\n      //copy the file to that folder\n      (fileObj, interCallback) => {\n        self.convertedFileObj = fileObj;\n        if (fileObj.metaData && fileObj.metaData.paging){\n          logger.info(self.src.id, functionName + 'The file already converted ' + fileObj.metaData.paging + ' pages');\n          return interCallback(null, fileObj);\n        }\n        logger.info(self.src.id, functionName + 'Copy file to temp convert folder with bucket=' + gcloudConfig.tempExtneralBucket + ' Folder=logan/' + self.fileId + '_convert/');\n        fs.copyFile(self.src, \n          {\n            srcBucketName: gcloudConfig.bucket,\n            srcFileName: self.fileId,\n            destBucketName: gcloudConfig.tempExtneralBucket,\n            destFileName: self.fileId + '_convert/' + oridocname,\n          },\n          (err, result)=>{\n            if (err){\n              logger.warn(self.src.id, functionName + 'Copy file failed', err);\n            }\n            else{\n              logger.info(self.src.id, functionName + 'Copy file successfully');\n            }\n            return interCallback(err, fileObj);\n        });\n      },\n      //get the page number of the doc\n      (fileObj, interCallback) => {\n        if (fileObj.pages){\n          logger.info(self.src.id, functionName + 'The doc file already get page number before. pages=' + fileObj.pages);\n          return interCallback(null, fileObj); \n        }\n        let url = crtHelp.getAsposeApiBaseUrl() + 'words/' + encodeURI(oridocname) + '/statistics?' +\n                  'folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                  '&storage=' + encodeURI(crtHelp.asposeStorageName);\n        try{\n          url = crtHelp.asposSign(self.src, url);\n        }\n        catch(err){\n          logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n          self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n            return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n          });\n        }\n        logger.info(self.src.id, functionName + 'Query words pages by url' + url);\n        let options = {url: url, json:true};\n        request.get(options, (err, response, body)=>{\n          if (!err && response.statusCode == 200){\n            let pages = 0; \n            if (body && body.StatData && body.StatData.PageCount){\n              pages = body.StatData.PageCount;\n            }\n            logger.info(self.src.id, functionName + 'Query word pages by url' + url + ' successfully with data:', body);\n            crtHelp.setPagesToMetaData(self.src, self.messageId, self.fileId, pages, (err, result)=>{\n              if (err){\n                logger.error(self.src.id, functionName + 'Set page to file failed', err);\n                return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n              else{\n                logger.info(self.src.id, functionName + 'Set page to file successfully');\n                fileObj.pages = pages;\n                return interCallback(null, fileObj);\n              }\n            });\n          }\n          else{\n            logger.warn(self.src.id, functionName + 'Query word pages by url' + url + ' faild', err, response.statusCode, body);\n            return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n          }\n        });\n      },\n      //use aspose api split document into doc for every 5 pages\n      (fileObj, interCallback) => {\n        let currentPage = fileObj.metaData.paging || 0;\n        let pages = fileObj.pages;\n        let stepPage = 5;\n        async.whilst(\n          ()=>{\n            crtHelp.setPagingToMetaData(self.src, self.messageId, self.fileId, currentPage, (err)=>{\n              if (err){\n                logger.warn(self.src.id, functionName + 'Set paging of convert progress failed', err);\n              }\n            });\n            if (util.requestWillEndSoon(self.src)){\n              logger.info(self.src.id, 'This request will end soon, create another taskqueue to continue working');\n              endRequestForRequestEndSoon = true;\n              return false;\n            }\n            return (currentPage + 1) <= pages;\n          },\n          (interCallback2)=>{\n            let startPage = currentPage + 1;\n            if (startPage > pages){\n              return interCallback2(null, currentPage);\n            }\n            let endPage = currentPage + stepPage;\n            if (endPage > pages){\n              endPage = pages;\n            }\n            currentPage = endPage;\n            let url =  crtHelp.getAsposeApiBaseUrl() + 'words/' + encodeURI(oridocname) + '/split?' + \n                       'format=' + encodeURI('svg') +\n                       '&from=' + startPage +\n                       '&to=' + endPage +\n                       '&folder=' + encodeURI('logan/' + self.fileId + '_convert') +\n                       '&storage=' + encodeURI(crtHelp.asposeStorageName);\n            try{\n              url = crtHelp.asposSign(self.src, url);\n            }\n            catch(err){\n              logger.error(self.src.id, functionName + 'When sign aspose url happen error, no retry any more', err);\n              self.setConvertStatus(cst.ConvertStatusFailed, ()=>{\n                return interCallback2(new esErr.ESErrors(esErr.TaskNoRetryError));\n              });\n            }\n            logger.info(self.src.id, functionName + 'Split words into svgs by url' + url);\n            let options = {url: url, json: true};\n            request.post(options, (err, response, body)=>{\n              if (!err && response.statusCode == 200){\n                logger.info(self.src.id, functionName + 'Split doc document into svgs by url' + url + ' successfully', body);\n                return interCallback2(null, endPage);\n              }\n              else{\n                logger.warn(self.src.id, functionName + 'Split doc document into svgs by url' + url + ' faild', err, response.statusCode, body);\n                return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n              }\n            });            \n          },\n          (err, n)=>{\n            if (err){\n              logger.warn(self.src.id, functionName + 'Convert to svg page by page happen error', err);\n            } \n            return interCallback(err, fileObj);\n        });\n      },\n      //Copy converted folder back to real official folder\n      (fileObj, interCallback) => {\n        logger.info(self.src.id, functionName + 'List all svg files from converted folder');\n        let filePrefix = oridocname + '_page';\n        fs.listFiles(self.src,\n            {bucketName: gcloudConfig.tempExtneralBucket,\n             prefix: self.fileId + '_convert/' + filePrefix,\n        },(err, results)=>{\n          logger.info(self.src.id, functionName + 'List all svg files from converted folder with files number=' + results.length);\n          if (results.length < fileObj.pages){\n            logger.warn(self.src.id, functionName + 'Happen some errors for list pages. pagenumber should be ' + fileObj.pages);\n            return interCallback(new esErr.ESErrors(esErr.FileConvertFailed));\n          }\n          async.forEachOf(results, (aSrcFile, idx, interCallback2)=>{\n            let cutPosString = 'logan/';\n            let cutPos = aSrcFile.metadata.name.indexOf(cutPosString);\n            let path = null;\n            if (cutPos >= 0){\n              path = aSrcFile.metadata.name.substring(cutPos + cutPosString.length);\n            }\n            else{\n              logger.warn(self.src.id, functionName + 'Failed to get path from name=' + aSrcFile.metadata.name);\n            }\n            if (path){\n              path = path.replace(filePrefix, 'page_');\n              path = path.replace('page_0', 'page_');\n              logger.info(self.src.id, functionName + 'Will copy file to bucket=' + gcloudConfig.bucket + ' path='+path);\n              fs.createFileObj(self.src,\n                  {bucketName: gcloudConfig.bucket,\n                   path: path\n              },(err, destFileObj) => {\n                aSrcFile.copy(destFileObj, (err, result)=>{\n                  if (err){\n                    logger.warn(self.src.id, functionName + 'Copy file failed', err);\n                    return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                  }\n                  result.setMetadata({contentType: 'image/svg+xml'}, (err, apiResponse)=>{\n                    if (err){\n                      logger.error(self.src.id, functionName + 'Set mimetype image/svg+xml failed', err);\n                      return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n                    }\n                    else{\n                      return interCallback2(null);\n                    }\n                  });\n                });\n              });\n            }\n            else{\n              return interCallback2(new esErr.ESErrors(esErr.FileConvertFailed));\n            }\n          },(err)=>{\n            if (err){\n              logger.warn(self.src.id, functionName + 'Copy converted file back to real folder happen error', err);\n            }\n            else{\n              logger.info(self.src.id, functionName + 'Copy converted file back to real folder successfully');\n            }\n            return interCallback(err, fileObj);\n          });\n        });\n      }\n    ],(err, result)=>{\n      if (endRequestForRequestEndSoon){\n        fileViewCommon.endRequestAndLauchAnotherDefer(self.src, self, (err)=>{\n          return cb(err);\n        });\n      }\n      else{\n        return cb(err, result);\n      }\n    });\n  }\n}\nexport default {\n  PdfToSvgFileView: PdfToSvgFileView,\n  pptToSvgFileView: pptToSvgFileView,\n  docToSvgFileView: docToSvgFileView,\n};\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/aspose_fileviewer.backend.js\n **/","import fileViewCommon from './fileview.common';\nimport fs from '../../modules/file';\nimport gcs from 'gcloud/lib/storage';\nimport gcloudConfig from '../../modules/file/gcs/config.js';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport process from 'process';\nimport request from 'request';\nimport util from '../../utils/serverHelper';\nimport ndutil from 'util';\nimport cst from '../../utils/serverConstants';\nimport crypto from 'crypto';\nimport config from '../../config';\nimport messageEvt from '../message/message.event';\nimport crtHelp from './converter_helper';\n\nclass docToSvgFileView extends crtHelp.cloudConvertToSvgFileView{}\nclass pptToSvgFileView extends crtHelp.cloudConvertToSvgFileView{}\nclass excelToSvgFileView extends crtHelp.cloudConvertToSvgFileView{\n  toPdf(inData, cb){\n    let functionName = '[excelToSvgFileView.toPdf] ';\n    //The following options are created by our requirement to cloudconvert\n    inData.toPdfConverteroptions = {\n      pages_fit_wide: 1,\n      pages_fit_tall: 1\n    };\n    logger.info(this.src.id, functionName + 'Add toPdfConverteroptions to convert parameters');\n    super.toPdf(inData, cb)\n  }\n}\nclass PdfToSvgFileView extends crtHelp.cloudConvertToSvgFileView{\n  toPdf(inData, cb){\n    return cb(null, inData.fileObj);\n  }\n}\n\nexport default {\n  excelToSvgFileView: excelToSvgFileView,\n  docToSvgFileView: docToSvgFileView,\n  pptToSvgFileView: pptToSvgFileView,\n  PdfToSvgFileView: PdfToSvgFileView\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/cloudconvert_fileview.backend.js\n **/","import fileViewCommon from './fileview.common';\nimport fs from '../../modules/file';\nimport gcs from 'gcloud/lib/storage';\nimport gcloudConfig from '../../modules/file/gcs/config.js';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport process from 'process';\nimport request from 'request';\nimport util from '../../utils/serverHelper';\nimport ndutil from 'util';\nimport cst from '../../utils/serverConstants';\nimport crypto from 'crypto';\nimport config from '../../config';\nimport messageEvt from '../message/message.event';\nimport crtHelp from './converter_helper';\n\nclass convertListFileView extends fileViewCommon.FileViewer{\n  cleanWork(cb){\n    let inData = {\n        convertObj:this,\n    };        \n    crtHelp.cleanWork(this.src, inData, cb);   \n  }\n  \n  setConvertList(convertlist){\n    this.convertlist = convertlist;\n  }\n  \n  convert(cb){\n    let functionName = '[convertListFileView.convert] ';\n    let num = this.convertlist.length;\n    let self = this;\n    function processOneConvert(idxVal){\n      if (idxVal >= num){\n        logger.info(self.src.id, ndutil.format('%s No more convert avaliable!', functionName));\n        return cb(new esErr.ESErrors(esErr.FileConvertFailed));\n      }\n      let convertObj = new self.convertlist[idxVal]();\n      convertObj.setProperties(self.getProperties());\n      convertObj.convert((err, result)=>{\n        if (!err){\n          logger.info(self.src.id, ndutil.format('%s Convert index=%d successfully!', functionName, idxVal));\n          self.convertedFileObj = convertObj.convertedFileObj;\n          return cb(null, result);\n        }\n        if (err.code == esErr.NoSuchConverter || err.code == esErr.TaskqueueEndBeforeTimout){\n          logger.info(self.src.id, ndutil.format('%s Convert index=%d ask for end request!', functionName, idxVal));\n          return cb(err, result);\n        }\n        else{\n          idxVal = idxVal + 1;\n          logger.warn(self.src.id, ndutil.format('%s Try next converter with index=%d!', functionName, idxVal));\n          return processOneConvert(idxVal);\n        }\n      })\n    }\n    \n    processOneConvert(0);\n  }\n}\n\nexport default {\n  convertListFileView: convertListFileView,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/convertlist_fileview.backend.js\n **/","/**\n * This is base class of a file viewer\n */\nimport esErr from '../../errors/errors';\nimport memcache from '../../modules/memcache';\nimport cst from '../../utils/serverConstants';\nimport TopicMessage from '../message/message.model';\nimport dbWp from '../../utils/dbwrapper';\nimport logger from '../../modules/logger';\nimport taskqueue from '../taskqueue/taskqueue.backend';\nimport asposeFV from './aspose_fileviewer.backend';\nimport aspose_ccrtFV from './aspose_cloudconvert_fileview.backend';\nimport ccrtFV from './cloudconvert_fileview.backend';\nimport crtlistFV from './convertlist_fileview.backend';\nimport crtHelp from './converter_helper'; \n\nvar convertHandlers={\n  'pdf_svg': ccrtFV.PdfToSvgFileView,\n  'ppt_svg': ccrtFV.pptToSvgFileView,\n  'doc_svg': ccrtFV.docToSvgFileView,\n  'excel_svg': ccrtFV.excelToSvgFileView\n};\n\nvar fileViewMaps=[\n  {fileType:'application/pdf', ext:'.pdf', handleKey:'pdf_svg', converted_file_ext: '.svg'},\n  {fileType:'application/vnd.openxmlformats-officedocument.presentationml.presentation', ext:'.pptx', handleKey:'ppt_svg', converted_file_ext: '.svg'},\n  {fileType:'application/vnd.ms-powerpoint', ext:'.ppt', handleKey:'ppt_svg', converted_file_ext: '.svg'},\n  {fileType:'application/msword', ext:'.doc', handleKey:'doc_svg', converted_file_ext: '.svg'},\n  {fileType:'application/vnd.openxmlformats-officedocument.wordprocessingml.document', ext:'.docx', handleKey:'doc_svg', converted_file_ext: '.svg'},\n  {fileType:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', ext:'.xlsx', handleKey:'excel_svg', converted_file_ext: '.svg'},\n  {fileType:'application/vnd.ms-excel', ext:'.xls', handleKey:'excel_svg', converted_file_ext: '.svg'},  \n];\n\nexports.getConvertedFileExt = function(src, fileObj){\n  let functionName = '[getConvertedFileExt] ';\n  let fileName = fileObj.name;\n  let fileType = fileObj.providerFileType;\n  logger.info(src.id, functionName + 'Try to get converted extension name by name=' + fileName + ' fileType=' + fileType);\n  for(let item of fileViewMaps){\n    if (fileName.toLowerCase().endsWith(item.ext) || item.fileType == fileType){\n      logger.info(src.id, functionName + 'Get converted extension name by name=' + fileName + ' fileType=' + fileType + ' and get result=' + item.converted_file_ext);\n      return item.converted_file_ext;\n    }\n  }\n  logger.info(src.id, functionName + 'Get converted extension name by name=' + fileName + ' fileType=' + fileType + ' no result');\n  return null;\n};\n\nexports.convertViewFile = function(src, messageId, fileObj, cb){\n  let functionName = '[convertViewFile] ';\n  let fileName = fileObj.name;\n  let fileType = fileObj.providerFileType;\n  let convertHandle = null;\n  let handleKey = '';\n  logger.info(src.id, functionName + 'Try to convert file with  messageId=' + messageId + ' name=' + fileName + ' fileType=' + fileType);\n  let selectedItem = null;\n  for(let item of fileViewMaps){    \n    if (fileName.toLowerCase().endsWith(item.ext) || item.fileType == fileType){\n      convertHandle = convertHandlers[item.handleKey] || null;\n      if (convertHandle){\n        logger.info(src.id, functionName + 'Has corresponding converter ' + item.handleKey);\n        handleKey = item.handleKey;\n        selectedItem = item;\n        break;\n      }\n    }\n  }\n  \n  if (convertHandle){\n    let converObj = null\n    if( Object.prototype.toString.call( convertHandle ) === '[object Array]' ) {\n      converObj = new crtlistFV.convertListFileView(src, messageId, fileObj.fileId, handleKey);\n      converObj.setConvertList(convertHandle);\n    }\n    else{\n      converObj = new convertHandle(src, messageId, fileObj.fileId, handleKey);\n    }\n    converObj.validateConvert((err)=>{\n      if (!err){\n        converObj.setConvertStatus(cst.ConvertStatusProgressing, (err, result)=>{\n          if (err){\n            logger.warn(src.id, functionName + 'Can convert this file for update status failed', err);\n            return cb(null);\n          }\n          else{\n            let data = {messageId: converObj.messageId,\n              fileId: converObj.fileId,\n              handleKey: converObj.handleKey,\n              informat: selectedItem.ext.replace('.', ''),\n              outformat: selectedItem.converted_file_ext.replace('.', '')\n            };\n            converObj.convertedFileObj = {convertStatus: cst.ConvertStatusProgressing};\n            crtHelp.notifyClientsMessageUpdate(src, converObj);\n            taskqueue.launchDefer(src,\n              'convertAFileDefer',\n              data,\n              {defferOption: true,\n               backoff_seconds: 300,\n               attempts: 3,\n               callback:(err, result)=>{\n                 if(!err){\n                   logger.info(src.id, functionName + 'Trigger a task to do convert work with messageId=' + messageId + 'fileId=' + fileObj.fileId);\n                 }\n                 else{\n                   logger.info(src.id, functionName + 'Failed to trigger a task to do convert work with messageId=' + messageId + 'fileId=' + fileObj.fileId);\n                 }\n                 return cb(null);\n               }\n            });\n          }\n        });\n      }\n      else{\n        logger.warn(src.id, functionName + 'Can not convert this file.');\n        return cb(null);\n      }\n    });\n  }\n  else{\n    logger.warn(src.id, functionName + 'No corresponding converter.');\n    return cb(null);\n  }  \n};\n\nfunction convertAFileDefer(src, data, cb){\n  let functionName = '[convertAFileDefer] ';\n  let messageId = data.messageId;\n  let fileId = data.fileId;\n  let handleKey = data.handleKey;  \n  let informat = data.informat;\n  let outformat = data.outformat;\n  let extraData = data.extraData || {};\n  let taskoptions = data._taskoptions;\n  \n  logger.info(src.id, functionName + 'Try to convert file', data);\n  \n  let convertHandle = convertHandlers[handleKey] || null;\n  if (!convertHandle){\n    logger.warn(src.id, functionName + 'No corresponding converter ' + item.handleKey);\n    return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n  }\n  let converObj = null\n  if( Object.prototype.toString.call( convertHandle ) === '[object Array]' ) {\n    converObj = new crtlistFV.convertListFileView(src, messageId, fileId, handleKey, informat, outformat, extraData);\n    converObj.setConvertList(convertHandle);\n  }\n  else{\n    converObj = new convertHandle(src, messageId, fileId, handleKey, informat, outformat, extraData);\n  }\n  converObj.convert((err, result)=>{\n    if (err){\n      logger.warn(src.id, functionName + 'Happen error', err);\n      if (err.code == esErr.NoSuchConverter || err.code == esErr.TaskqueueEndBeforeTimout){\n        return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n      }\n      else{\n        if (taskoptions.attempt_times >= taskoptions.attempts || err.code == esErr.TaskNoRetryError){\n          \n          logger.warn(src.id, functionName + 'This file has try to convert serval times still failed or get no retry error, system won\\'t do any conversion!');\n          logger.warn(src.id, functionName + ' attempt_times=' + taskoptions.attempt_times + ' attempts=' + taskoptions.attempts + ' err.code=' + err.code);\n          converObj.setConvertStatus(cst.ConvertStatusFailed, (err)=>{\n            converObj.cleanWork(()=>{\n              return cb(err, result);\n            });            \n          });\n        }\n        else{\n          return cb(err, result);\n        }\n      }\n    }\n    else{\n      logger.info(src.id, functionName + 'Finish successfully');\n      converObj.setConvertStatus(cst.ConvertStatusSuccess, (err)=>{\n        converObj.cleanWork((err)=>{\n          return cb(err, result);\n        });        \n      });   \n    }\n  });\n}\ntaskqueue.registerDeferHandle('convertAFileDefer', convertAFileDefer);\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/fileview.backend.js\n **/","import vw from '../viewBase/viewBase';\nimport logger from '../../modules/logger/index';\nimport ndutil from 'util'; \nimport messageEvt from '../message/message.event';\nimport cst from '../../utils/serverConstants';\nimport util from '../../utils/serverHelper';\n\nexports.notifyCallback = class notifyCallback extends vw.serverCallView{\n  handle(req, res, cb){\n    var functionName = '[notifyCallback] ';\n    var src = util.getSrcFromRequest(req);\n    var data = req.body;\n    logger.info(src.id, ndutil.format('%s Notify user the document conver has some change', functionName), data);\n    messageEvt.emitFileConverted(src, data, (err, result)=>{\n      if (err){\n        logger.error(src.id, functionName + 'Failed to emit event to notify clients the message\\'s changing', err);\n        return res.status(cst.HttpErrorStatus).json(err);\n      }\n      else{\n        logger.info(src.id, functionName + 'Successful to emit event to notify clients the message\\'s changing is updated');\n        return res.json({})\n      }\n    });    \n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/fileview.controller.js\n **/","/**\n * http://usejsdoc.org/\n */\nimport { Router } from 'express';\nimport controller from './fileview.controller';\nimport {asView} from '../viewBase/viewBase';\n\nconst router = new Router();\n\nrouter.post('/notify-callback', asView(controller.notifyCallback));\n\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/fileviewer/index.js\n **/","/**\n * author: Eric Ding\n */\nimport mongoose from 'mongoose';\nimport dbWp from '../../utils/dbwrapper';\nimport TopicMessage from '../message/message.model';\n\nexports.listMessagesByIdea = function(src, data, cb){\n  let matchCondition = {\n    \"parentMsg._id\": mongoose.Types.ObjectId(data.ideaId)\n  };\n\n  let sort = {_id: -1};\n  if (data.page <= 1){\n    delete data.nextRefObjId;\n    delete data.prevRefObjId;\n    data.page = 1;\n  }\n  let includeEqual = data.includeEqual || false;\n  delete data.includeEqual;\n  if (data.nextRefObjId){\n    if (includeEqual){\n      matchCondition[\"_id\"] = {$lte: mongoose.Types.ObjectId(data.nextRefObjId)};\n    }\n    else{\n      matchCondition[\"_id\"] = {$lt: mongoose.Types.ObjectId(data.nextRefObjId)};\n    } \n    sort = {_id: -1};\n  }\n  else if(data.prevRefObjId){\n    if (includeEqual){\n      matchCondition[\"_id\"] = {$gte: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    else{\n      matchCondition[\"_id\"] = {$gt: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    sort = {_id: 1};\n  }  \n  \n  var exeobj = TopicMessage.find(matchCondition).sort(sort).limit(data.size + 1);\n  dbWp.execute(exeobj,\n    exeobj.exec,\n    src.id,\n    function(err, results){\n      if (err){\n        logger.error(src.id, 'listCommentsByIdea happen error', err.message);\n        return cb(null, {results:[]});\n      }\n      \n      if (results.length > data.size){\n        if (data.prevRefObjId){\n          results = results.reverse();          \n          return cb(null, {results:results.slice(1, data.size + 1), havingNextPage: true});\n        }\n        return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n      }\n      else{\n        if (data.prevRefObjId){\n          results = results.reverse();        \n        }        \n        return cb(null, {results:results, havingNextPage: false});\n      }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/idea/idea.backend.js\n **/","/**\n * author: Eric Ding\n */\n\nimport vw from '../viewBase/viewBase';\nimport messageBk from '../message/message.backend';\nimport ideaBk from './idea.backend';\nimport util from '../../utils/serverHelper';\nimport cst from '../../utils/serverConstants';\nimport esErr from '../../errors/errors';\nimport TopicMessage from '../message/message.model';\nimport async from 'async';\nimport dbWp from '../../utils/dbwrapper';\nimport logger from '../../modules/logger/index';\nimport MessageConstants from '../../flux/constants/MessageConstants';\nimport authorize from '../../auth/authorizers';\nimport MessageEvent from '../message/message.event';\n\n\nexports.deleteIdea = class deleteIdea extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    var idea = req.message;\n    req.relPermChecker.checkRelation(src, idea.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n      idea.remove(function (err, result) {\n        if (err) {\n          logger.error(req.id, 'Error deleting idea', err);\n          return cb(res, new esErr.ESErrors(esErr.ServerInternalError));\n        }\n        MessageEvent.emitCardDeleted(src, idea);\n        return res.status(cst.HttpSuccessStatus).send();\n      });\n    });\n  };\n};\n\nclass listMessagesView extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_IDEA_READ)];\n  _listMessages(req, queryData, cb){\n    var self = this;\n    ideaBk.listMessagesByIdea(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'listCommentsView call _listComments happen error', err.message);\n        return cb(err)\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._listMessages(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._listMessages(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n      delete queryData.ideaId;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });  \n  }\n  \n  handle(req, res, cb){\n    //Be care don't need embed parent message\n    let queryData = {\n      ideaId: req.params.ideaId,\n      size: util.getListOfItemCaps(parseInt(req.query.size), 30),\n      page: parseInt(req.query.page) || 1,\n      nextRefObjId: req.query.nextRefObjId,\n      prevRefObjId: req.query.prevRefObjId,\n    };\n    \n    var self = this;\n    async.waterfall([\n      (internalCallback) => {\n        dbWp.execute(TopicMessage, TopicMessage.findOne, req.id, {_id: req.params.ideaId}, (err, ideaMsg) => {\n          if (err){\n            logger.error(req.id, err.message);\n          }\n          return internalCallback(err, ideaMsg);\n        });\n      },\n      (ideaMsg, internalCallback) => {\n        if (!ideaMsg){\n          logger.error(req.id, \"idea with _id=\" +  req.params.ideaId + \" not exited\");\n          return internalCallback(new esErr.ESErrors(esErr.NotExsistedError));\n        }\n        if (ideaMsg.category !== MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA){\n          return internalCallback(new esErr.ESErrors(esErr.MessageUnexpectedCategory));\n        } \n        req.relPermChecker.checkRelation(req, ideaMsg.topicId, cst.TypeTopic, (err)=>{\n          return internalCallback(err, ideaMsg);\n        });        \n      },\n      (ideaMsg, internalCallback) => {\n        self._listMessages(req, queryData, internalCallback);\n      },\n      (data, internalCallback) => {\n        messageBk.toDownloadableClientFormatMessagesIngoreParentMsg(req, data.results.results, (err, convertedResults) => {\n          if (err){\n            return internalCallback(err);\n          }\n          data.results.results = convertedResults;\n          return internalCallback(null, data);\n        });\n      }\n    ],(err, data) => {\n      if (err){\n        logger.error(req.id, \"listCommentsView happen error\", err);\n        if (err.code == esErr.AuthorizeErrorPermission){\n          return cb(err);\n        }        \n        return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n      }\n      return res.json(util.createPagination(req, data));\n    });\n  }\n}\nexports.listMessagesView = listMessagesView;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/idea/idea.controller.js\n **/","/**\n * author: Eric Ding\n */\nimport { Router } from 'express';\nimport controller from './idea.controller';\nimport {asView} from '../viewBase/viewBase';\nconst router = new Router();\n\nrouter.get('/:ideaId/messages', asView(controller.listMessagesView));\nrouter.delete('/:ideaId', asView(controller.deleteIdea));\n\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/idea/index.js\n **/","'use strict';\n\nvar mongoose = require('mongoose'),\n    Schema = mongoose.Schema,\n    config = require('../../config');\n\nvar InviteSchema = new Schema({\n  \tinvitees: [\n  \t\t\t{\n  \t\t\t\tid: { type: Schema.Types.ObjectId, ref: 'User' },\n\t  \t\t\tusername: String,\n\t            type: { type: String, default: 'guest' },  //admin | member | guest\n\t            joinTime: Date\n\t           }\n\t        ],\n\tparent: { \n\t\ttype: { type: String },\n\t\tid: { type: Schema.Types.ObjectId }\n\t},\n\td: {\n\t\tcreate: { type: Date, default: Date.now },\n\t\tmodify: { type: Date, default: Date.now },\n\t\tstart: Date,\n\t\tend: Date\n\t},\n\tpType: String // calendar | office | webex etc.\n});\n\n/**\n * Virtuals\n */\n/**\n * Methods\n */\nInviteSchema.methods = {\n  \tmakeInviteUrl: function(domain) {\n    \treturn config.link + '/' + this.parent.type + '/' + this.parent._id + '/invite/' + this._id;\n\t},\n\tmakeTopicUrl: function(domain) {\n    \treturn config.link + '/' + this.parent.type + '/' + this.parent._id;\n\t}\n};\n\nmodule.exports = mongoose.model('Invite', InviteSchema);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/invite/invite.model.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './message.controller';\nimport {asView} from '../viewBase/viewBase';\n\nconst router = new Router();\n\n//router.get('/', asView(controller.index));\nrouter.get('/parselink', asView(controller.parseLink));\nrouter.get('/:id', asView(controller.show));\nrouter.get('/:msgId/files/:fileId/viewerUrl', asView(controller.getPreViewIndexUrl));\n//router.post('/', asView(controller.create));\nrouter.post('/:id', asView(controller.update));\nrouter.patch('/:id', asView(controller.update));\nrouter.delete('/:id', asView(controller.destroy));\n\n\nrouter.get('/:id/files/:fileKey',  asView(controller.getSingleDownloadUrl));\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/message/index.js\n **/","/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /message              ->  index\n * POST    /message              ->  create\n * GET     /message/:id          ->  show\n * PUT     /message/:id          ->  update\n * DELETE  /message/:id          ->  destroy\n */\n\n'use strict';\n\nimport _ from 'lodash';\nimport Message from './message.model';\nimport MessageBk from './message.backend';\nimport logger from '../../modules/logger/index'\nimport auth from '../../auth/auth.service'\nimport vw from '../viewBase/viewBase'\nimport userBackend from '../user/user.backend'\nimport fileBackend from '../file/file.backend';\nimport esErr from '../../errors/errors'\nimport html2json from 'html-to-json';\nimport Is from '../../utils/Is';\nimport util from '../../utils/serverHelper';\nimport querystring from 'querystring';\nimport cst from '../../utils/serverConstants';\nimport authorize from '../../auth/authorizers';\nimport dbWp from '../../utils/dbwrapper'; \nimport ga from \"../../modules/analytics/google\";\nimport gaCst from \"../../modules/analytics/google/constants\";\n\n// Get list of messages\nexports.index = class index extends vw.ViewBase{\n    handle(req, res, cb){\n        Message.find(function (err, messages) {\n            if(err) { return handleError(res, err); }\n            return res.status(200).json(messages);\n        });\n    };\n};\n\n// Get a single Message\nexports.show = class show extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n  handle(req, res, cb){\n    Message.findById(req.params.id, function (err, message) {\n        if(err) { return handleError(res, err); }\n        if(!message) { return res.status(404).send('Not Found'); }\n        req.relPermChecker.checkRelation(req, message.topicId, cst.TypeTopic, (err)=>{\n          if (err){\n            return cb(err);\n          }\n          var src = util.getSrcFromRequest(req);\n          MessageBk.toDownloadableClientFormatMessages(src, [message], (err, convertedResults) => {\n            if (err){\n              logger.error(src.id, \"Get message by id happenen error!\", err);\n              return cb(err);\n            }\n            return res.json(convertedResults[0]);\n          });          \n        });\n    })\n  };\n};\n\n// Creates a new Message in the DB.\n//exports.create = class create extends vw.anyCallView{\n//  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_MSG_CREATE)];\n//  handle(req, res, cb){\n//    let data = req.body;\n//    let tempUser = null;\n//    if (req.user){\n//      data.sender = {\n//          _id: req.user._id,\n//          type: cst.TypeUser\n//      };\n//      tempUser = req.user;\n//    }\n//    else if(req.anonymousUser){\n//      data.sender = {\n//          _id: req.anonymousUser._id,\n//          type: cst.TypeAnonymous\n//      };\n//      tempUser = req.anonymousUser;\n//    }\n//    else{\n//      return cb(new esErr.ESErrors(esErr.AuthorizeFailed));\n//    }\n//    req.relPermChecker.checkRelation(req, data, cst.TypeMessage, (err)=>{\n//      if (err){\n//        return cb(err);\n//      }\n//      MessageBk.addMessagetoNoSenderPublicInfo(req, data, function(err, result){\n//        if (err){\n//          return res.status(cst.HttpErrorStatus).json(err);\n//        }\n//        if (result.sender.type == cst.TypeUser){\n//          result.sender = _.extend(result.sender, req.user.profile);\n//        }\n//        else if(result.sender.type == cst.TypeAnonymous){\n//          result.sender = _.extend(result.sender,\n//                                   {displayname: req.anonymousUser.displayname,\n//                                    picture_url:  req.anonymousUser.picture_url,\n//                                    username: req.anonymousUser.username});\n//        }\n//        return res.status(200).json(result);\n//      });\n//    });\n//  };\n//};\n\n// Updates an existing Message in the DB.\nexports.update = class update extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  handle(req, res, cb){\n    let data = req.body;\n    req.relPermChecker.checkRelation(req, data.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n      if (req.user){\n        data.sender = {\n            _id: req.user._id,\n            type: cst.TypeUser,\n            username: req.user.username,\n            displayname: req.user.displayname,\n            picture_url: util.getPicture_url(req.user.picturefile),\n        };        \n      }\n      else if(req.anonymousUser){\n        data.sender = {\n            _id: req.anonymousUser._id,\n            type: cst.TypeAnonymous,\n            username: req.anonymousUser.username,\n            displayname: req.anonymousUser.displayname,\n            picture_url: util.getPicture_url(req.user.picturefile),\n        };      \n      }\n      else{\n        return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SysUnkownError));\n      }\n      let src = util.getSrcFromRequest(req);\n      MessageBk.updateMessagetoNoSenderPublicInfo(src, data, function(err, result){\n        if (err){\n          return res.status(cst.HttpErrorStatus).json(err);\n        }\n        if (result.sender.type == cst.TypeUser){\n          result.sender = _.extend(result.sender, req.user.profile);\n        }\n        else if(result.sender.type == cst.TypeAnonymous){\n          result.sender = _.extend(result.sender,\n                                   {displayname: req.anonymousUser.displayname,\n                                    picture_url:  req.anonymousUser.picture_url,\n                                    username: req.anonymousUser.username});\n        }\n        return res.status(200).json(result);\n      });    \n    });\n  };\n};\n\n// Deletes a Message from the DB.\nexports.destroy = class destroy extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  handle(req, res, cb){\n    Message.findById(req.params.id, function (err, message) {\n        if(err) { return handleError(res, err); }\n        if(!message) { return res.status(404).send('Not Found'); }\n        req.relPermChecker.checkRelation(req, message.topicId, cst.TypeTopic, (err)=>{\n          if (err){\n            return cb(err);\n          }\n          Message.remove(function(err) {\n              if(err) { return handleError(res, err); }\n              return res.status(204).send('No Content');\n          });\n        });\n    });\n  };\n};\n\nexports.parseLink = class parseLink extends vw.anyCallView{\n  handle(req, res, cb){\n    let link = req.query.link;\n    if(!link || !Is.$url(link, true)){\n      res.status(400).send('');\n      return;\n    }\n  \n    html2json.request(link, {\n      'meta': ['meta', function($meta){\n        return {\n          property: $meta.attr(\"property\") || \"\",\n          name: $meta.attr(\"name\") || \"\",\n          content: $meta.attr(\"content\") || \"\"\n        }\n      }],\n      'link': ['link', function($link){\n        return {\n          href: $link.attr(\"href\") || \"\",\n          rel: $link.attr(\"rel\") || \"\"\n        }\n      }],\n      'title': ['title', function($title){\n        return $title.html();\n      }],\n      'images': ['img', function($img){\n        return $img.attr('src')\n      }]\n    }, function(err, result){\n      if(err){\n        res.status(400);\n      } else {\n        res.status(200).json(result);\n      }\n    });\n  };\n};\n\n\nexports.getSingleDownloadUrl = class getSingleDownloadUrl extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n  handle(req, res, cb){\n    let msgId = req.params.id;\n    let fileKey = querystring.unescape(req.params.fileKey);\n    var src = util.getSrcFromRequest(req);\n\n    if (!msgId || !fileKey) {\n      logger.error(src.id, 'getUploadUrl happen error ');\n      return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n    }\n    let data = {\n      objectId: msgId,\n      objectType: 'message',\n      fileKeys:[fileKey]\n    };\n    Message.findById(msgId, function (err, message){\n      if (err){\n        logger.error(src.id, 'getDownloadUrl happen error ', err);\n        return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.UploadUrlCreateFailed));\n      }\n      req.relPermChecker.checkRelation(req, message.topicId, cst.TypeTopic, (err)=>{\n        if (err){\n          return cb(err);\n        }\n        fileBackend.getDownloadUrls(src, data, function (err, results) {\n          if (err){\n            logger.error(src.id, 'getDownloadUrl happen error ', err);\n            return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.UploadUrlCreateFailed));\n          }\n          return res.redirect(results[0]);\n        });\n      })\n    });\n  }\n};\n\nexports.getPreViewIndexUrl = class getPreViewIndexUrl extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n  handle(req, res, cb){\n    let functionName = '[getPreViewIndexUrl.handle] ';\n    let messageId = req.params.msgId;\n    let fileId = req.params.fileId;\n    let src = util.getSrcFromRequest(req);\n    console.log(src.id, functionName + 'Try to get preview index file by messageId=' + messageId + 'and fileId=' + messageId);\n    dbWp.execute(Message,\n      Message.findOne,\n      src.id,\n      {'_id': messageId, 'content.data.fileId':fileId},\n      { \"topicId\": 1, \"content.data.$\": 1},\n      (err, message) => {\n        if (err || (!message)){\n          if (err){\n            logger.error(src.id, functionName + 'Get message by messageId=' + messageId + 'and fileId=' + fileId, err);\n          }\n          if (!message){\n            logger.warn(src.id, functionName + 'Get message by messageId=' + messageId + 'and fileId=' + fileId + ' no record');\n          }\n          return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.NotExsistedError));\n        }\n        else{\n          req.relPermChecker.checkRelation(req, message.topicId, cst.TypeTopic, (err)=>{\n            if (err){\n              logger.warn(src.id, functionName + 'Get message by messageId=' + messageId + 'and fileId=' + fileId + ' failed no permission');\n              return cb(err);\n            }\n            MessageBk.getPreviewFileUrl(src, message, (err, result)=>{\n              if (err){\n                logger.warn(src.id, functionName + 'Get message by messageId=' + messageId + 'and fileId=' + fileId + 'failed after call getPreviewFileUrl', err);\n                return res.status(cst.HttpErrorStatus).json(err);\n              }\n              if (!result){\n                logger.warn(src.id, functionName + 'Get message by messageId=' + messageId + 'and fileId=' + fileId + 'failed after call getPreviewFileUrl no result');\n                return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.GetPreviewUrlFailed));\n              }\n              res.status(cst.HttpSuccessStatus).json({url: result});\n            })\n          });          \n        }\n    });\n  }\n};\n\nfunction handleError(res, err) {\n  return res.status(500).send(err);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/message/message.controller.js\n **/","/**\n * Broadcast updates to client when the model changes\n */\nimport messageCst from '../../flux/constants/MessageConstants';\nimport SocketConstants from '../../flux/constants/SocketConstants';\nimport logger from '../../modules/logger';\nimport messageEvt from './message.event';\n//Model events to emit\n\nexport function register(socketio) {\n  messageEvt.onFileConverted(function (src, eventObj, cb) {\n    let functionName = '[messageEvt.onFileConverted] ';\n    logger.info(src.id, functionName + 'Will send message update event to topic=' + eventObj.topicId + ' eventtype=' +\n        messageCst.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.MESSAGE_UPDATED + ' payload=', eventObj.payload);\n\n    var data = Object.assign({\n      //_id: eventObj.payload.messageId,\n      category: messageCst.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.MESSAGE_UPDATED,\n    }, eventObj.payload)\n\n    socketio.to('topic_' + data.topicId).emit(\n      SocketConstants.EVENT_NAMESPACE.GROUP_MESSAGE_SENT, data);\n    return cb(null);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/message/message.socket.js\n **/","import { Router } from 'express';\nimport controller from './migrate.controller';\nimport {asView} from '../viewBase/viewBase';\nimport cst from '../../utils/serverConstants';\nconst router = new Router();\n\n\nrouter.post('/', asView(controller.migrate));\nrouter.get('/:id', asView(controller.migrateQuery));\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/migrate/index.js\n **/","import taskqueue from '../taskqueue/taskqueue.backend';\nimport cst from '../../utils/serverConstants';\nimport migrateDB from './migrate.model';\nimport dbWp from '../../utils/dbwrapper';\nimport esErr from '../../errors/errors';\nimport async from 'async';\nimport logger from '../../modules/logger';\nimport relationBK from '../relation/relation.backend';\nimport util from '../../utils/serverHelper';\nimport EventEmitter from 'events';\nimport userBK from '../user/user.backend';\n\nvar QuitHandleTimeout = 20000;\nvar RetyWaitTime = 10000;\nvar batchSize = 20;\nfunction updateMigrateData(src, updatedMigrateData, cb){\n  dbWp.execute(migrateDB, \n               migrateDB.update,\n               src.id,\n               {migrateId: src.migrateId},\n               {migrateData: updatedMigrateData},\n               (err, result)=>{\n    return cb(err);\n  });\n}\n\nfunction endRequestAndLauchAnotherDefer(src, updatedMigrateData, cb){\n  let mgdata = {migrateId: src.migrateId, funcName: src.funcName};\n  updateMigrateData(src, updatedMigrateData, ()=>{\n    taskqueue.launchDefer(src,\n        'migrateTaskHandle',\n         mgdata,\n         {defferOption: true,\n          backoff_seconds: 300,\n          attempts: 3\n    });\n    cb(new esErr.ESErrors(esErr.TaskqueueEndBeforeTimout));\n  });\n}\n\nfunction fillUserRelation(src, migrateData, cb){\n  let startUserId = '';\n  if (!migrateData.fillRelationData.userfillData){\n    migrateData.fillRelationData.userfillData = {};\n  }\n  if (migrateData.fillRelationData.userfillData.finished){\n    return cb(null);\n  }\n  if (migrateData.fillRelationData.userfillData.startUserId){\n    startUserId = migrateData.fillRelationData.userfillData.startUserId;\n  }\n  let userDB = require('../user/user.model');\n  let exeObj = userDB.find();\n  if (startUserId){\n    exeObj = userDB.find({'_id': {'$gt': startUserId}});\n  }\n  exeObj = exeObj.sort({'_id': 1});\n  let queryStream = exeObj.stream();\n  let lastProcessUser = null;\n  let closeManully = false;\n  let esClosedFlag = false;\n  let userCnt = 0;\n  queryStream.on('data', function(userObj){\n    userCnt += 1;\n    if (src.esClosedFlag){\n      logger.info(src.id, 'Should end process asap!');\n      esClosedFlag = src.esClosedFlag;\n      queryStream.destroy();\n      return;\n    }\n    if (util.requestWillEndSoon(src)){\n      if (!closeManully){\n        logger.info(src.id, 'Request will end soon, launch another defer to continue work!');\n        closeManully = true;\n        queryStream.destroy();\n      }\n    }\n    if (userCnt >= batchSize){\n      queryStream.pause();\n    }\n    \n    userBK.afterInsertUpdateUser(src, userObj, (err, result) => {        \n      lastProcessUser = userObj;\n      userCnt -= 1;\n      if (userCnt <= 0 && (!esClosedFlag)){\n        queryStream.resume();\n      }\n    });\n    \n  }).on('error', function(err){\n    //Retry this user after some time!\n    setTimeout(function(){\n      if (lastProcessUser){\n        migrateData.fillRelationData.userfillData.startUserId = lastProcessUser._id;\n      }\n      updateMigrateData(src, migrateData, (err)=>{\n        return cb(new esErr.ESErrors(esErr.TaskqueueRetry));\n      });\n    }, RetyWaitTime);\n    \n  }).on('close', function(){\n    if (esClosedFlag){\n      return cb(new esErr.ESErrors(esErr.TaskqueueEndBeforeTimout));\n    }\n    if (closeManully){\n      setTimeout(function(){\n        if (lastProcessUser){\n          migrateData.fillRelationData.userfillData.startUserId = lastProcessUser._id;\n        }\n        return endRequestAndLauchAnotherDefer(src, migrateData, cb);\n      }, RetyWaitTime);\n    }\n    else{\n      migrateData.fillRelationData.userfillData.finished = true;\n      updateMigrateData(src, migrateData, (err)=>{\n        return cb(null);\n      });\n    }\n  });\n}\n\nfunction fillTopicUserRelation(src, migrateData, cb){\n  let startTopicId = '';\n  if (!migrateData.fillRelationData.topicfillData){\n    migrateData.fillRelationData.topicfillData = {};\n  }\n  if (migrateData.fillRelationData.topicfillData.startTopicId){\n    startTopicId = migrateData.fillRelationData.topicfillData.startTopicId;\n  }\n  let topicDB = require('../topic/topic.model');\n  let exeObj = topicDB.find();\n  if (startTopicId){\n    exeObj = topicDB.find({'_id': {'$gt': startTopicId}});\n  }\n  exeObj = exeObj.sort({'_id': 1});\n  let queryStream = exeObj.stream();\n  let lastProcessTopic = null;\n  let closeManully = false;\n  let topicCnt = 0;\n  let esClosedFlag = false;\n  queryStream.on('data', function(topicObj){\n    topicCnt += 1;\n    if (src.esClosedFlag){\n      logger.info(src.id, 'Should end process asap!');\n      esClosedFlag = src.esClosedFlag;\n      queryStream.destroy();\n      return;\n    }\n    if (util.requestWillEndSoon(src)){\n      //Close the stream \n      if (!closeManully){\n        closeManully = true;\n        queryStream.destroy();\n      }\n    }\n    if (topicCnt >= batchSize){\n      queryStream.pause();\n    }\n    var added_rels = [];\n    for (let memberItem of topicObj.members){\n      if (memberItem.memberType === 'userId'){\n        let added_rel = {\n            target_id: memberItem.member,\n            target_type: cst.TypeUser,\n            initiator_id: topicObj._id,\n            initiator_type: cst.TypeTopic,\n            relation_type: memberItem.role,\n            relationdef_id: (cst.TypeUser + '_' + memberItem.member + '_' + cst.TypeTopic + '_'+ topicObj._id + '_' +  memberItem.role)\n        };\n        added_rels.push(added_rel);\n      }\n    }\n    relationBK.addRelations(src, added_rels, (err, result) => {\n      lastProcessTopic = topicObj;\n      topicCnt -= 1;\n      if (topicCnt <= 0 && (!esClosedFlag)){\n        queryStream.resume();\n      }      \n    });\n  }).on('error', function(err){\n    //Retry this user after some time!\n    setTimeout(function(){\n      if (lastProcessTopic){\n        migrateData.fillRelationData.topicfillData.startTopicId = lastProcessUser._id;\n      }\n      updateMigrateData(src, migrateData, (err)=>{\n        return cb(new esErr.ESErrors(esErr.TaskqueueRetry))\n      });\n    }, RetyWaitTime);\n  }).on('close', function(){\n    if (esClosedFlag){\n      return cb(new esErr.ESErrors(esErr.TaskqueueEndBeforeTimout));\n    }\n    if (closeManully){\n      setTimeout(function(){\n        if (lastProcessTopic){\n          migrateData.fillRelationData.topicfillData.startTopicId = lastProcessTopic._id;\n        }\n        return endRequestAndLauchAnotherDefer(src, migrateData, cb);\n      }, RetyWaitTime);\n    }\n    else{\n      updateMigrateData(src, migrateData, (err)=>{\n        return cb(null);\n      });\n    }\n  });\n}\n\nvar fillRelation = function(src, migrateData, cb){\n  if (!migrateData.fillRelationData){\n    migrateData.fillRelationData = {};\n  }\n  async.waterfall([\n  (interCallBack)=>{\n    //Fill users relation\n    fillUserRelation(src, migrateData, (err, result)=>{\n      interCallBack(err);\n    });\n  },\n    (interCallBack) => {\n      fillTopicUserRelation(src, migrateData, (err, result) => {\n        interCallBack(err);\n      })\n    }\n  ],\n  (err, result) => {\n    cb(err);\n  });\n};\n\nvar cacheTitleIntoTopicUser = function(src, migrateData, cb){\n  var functionName = '[cacheTitleIntoTopicUser] ';\n  var TopicUser = require('../notify/topicuser.model');\n  var Topic = require('../topic/topic.model');\n  var cursorId = '';\n  var LIMIT = 20;\n  var totalTopicNum = -LIMIT;\n  var oneRoundUpdateTopicNum = LIMIT;\n  logger.info(src.id, functionName + 'Begin working');\n  async.whilst(\n    ()=>{\n      totalTopicNum = totalTopicNum + oneRoundUpdateTopicNum;\n      logger.info(src.id, functionName + 'Finish one round with topic number ' + oneRoundUpdateTopicNum + ' total=' + totalTopicNum);\n      if (oneRoundUpdateTopicNum < LIMIT){\n        return false;\n      }\n      return true;\n    },\n    (interCallback)=>{\n      let queryCondition = undefined;\n      if (cursorId){\n        queryCondition = {_id: {$gt: cursorId}};\n      }\n      let exeobj = Topic.find(queryCondition).sort({_id: 1}).limit(LIMIT);\n      dbWp.execute(exeobj, exeobj.exec, src.id, (err, result)=>{\n        if (err){\n          logger.error(src.id, functionName + 'Query for topic happen error', err);\n          return interCallback(err);\n        }\n        async.each(result,\n          (topicObj, interCallback2)=>{\n            dbWp.execute(TopicUser,\n              TopicUser.update, \n              src.id,\n              {targetId: topicObj._id},\n              {$set: {targetType: cst.TypeTopic, title: topicObj.title}},\n              {multi: true},\n              (err, result)=>{\n                interCallback2(err, result);\n              })\n          }, (err, updateResult)=>{\n            if (err){\n              logger.error(src.id, functionName + 'Update topic title happen error', err);\n            }\n            oneRoundUpdateTopicNum = result.length;\n            if (oneRoundUpdateTopicNum >= LIMIT){\n              cursorId = result[oneRoundUpdateTopicNum-1]._id;\n            }\n            interCallback(err);\n          })\n      })\n    },\n    (err, result)=>{\n      if (err){\n        logger.warn(src.id, functionName + 'Update title into topicuser table task happen error', err);\n      }\n      else{\n        logger.info(src.id, functionName + 'Update title into topicuser table task done', err);\n      }      \n      return cb(err, result);\n    }\n  );\n}\n\nvar funcNameMap = {\n    'fillRelation': fillRelation,\n    'cacheTitleIntoTopicUser': cacheTitleIntoTopicUser,\n};\n\nclass TaskeHandleNotifier extends EventEmitter{\n  constructor(){\n    super();\n  } \n}\nvar TaskeHandleNotifierObj = new TaskeHandleNotifier()\n\nvar migrateTaskHandle = function(src, mgdata, cb){\n  logger.info(src.id, \"Begin call handle migrateTaskHandle\");\n  let funcName = mgdata.funcName;\n  if (funcName in funcNameMap){\n    src.migrateId = mgdata.migrateId;\n    src.funcName = funcName;\n    dbWp.execute(migrateDB, migrateDB.findOne, src.id, {migrateId: mgdata.migrateId}, (err, result)=>{\n      if (result){\n        let migrateData = {};\n        if (result.migrateData){\n          migrateData = result.migrateData;\n        }\n        funcNameMap[funcName](src, migrateData, (err, result)=>{\n          if ((!err) || err.code == esErr.TaskNoRetryError){\n            RemoveMigrateTask(src, mgdata.migrateId);\n          }\n          else{\n            if (mgdata.attempt_times >= mgdata.attempts){\n              SetFailedStatusMigrateTask(src, mgdata.migrateId);\n            }\n          }\n          \n          if (cb){\n            return cb(err, result);\n          }\n          setTimeout(function(){\n            TaskeHandleNotifierObj.emit('finish', mgdata);\n          }, 2000);\n        });\n      }\n      else{\n        logger.info(src.id, \"Get error from migrateDB\", err);\n        logger.info(src.id, 'Query migrate data happen error!, end the migrate process');\n        if (cb){\n          return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n        }\n        setTimeout(function(){\n          TaskeHandleNotifierObj.emit('finish', mgdata);\n        }, 2000);\n      }\n    });\n  }\n  else{\n    logger.info(src.id, \"There is no funcname in map \" + funcName);\n    RemoveMigrateTask(src, mgdata.migrateId);\n    if (cb){\n      return cb(new esErr.ESErrors(esErr.TaskNoRetryError));\n    }\n    setTimeout(function(){\n      TaskeHandleNotifierObj.emit('finish', mgdata);\n    }, 2000);\n  }\n};\n\ntaskqueue.registerDeferHandle('migrateTaskHandle', migrateTaskHandle);\n\nfunction RemoveMigrateTask(src, mgId, cb){\n  let exeObj = migrateDB.remove({migrateId: mgId});\n  dbWp.execute(exeObj, exeObj.exec, src.id, (err, result)=>{\n  });\n}\n\nfunction SetFailedStatusMigrateTask(src, mgId, cb){\n  dbWp.execute(migrateDB,\n               migrateDB.update,\n               src.id,\n               {migrateId: src.migrateId},\n               {status: cst.MigrateFailedStatus},\n               (err, result)=>{});\n}\n\nexports.lauchMigrate = function(src, data, cb){\n  let mgdata = {migrateId: src.id, funcName: data.funcName};\n  let deferCallback = function(err, result){\n    if (err){\n      if (cb){\n        return cb(err);\n      }\n      return\n    }\n    let savedData = {\n        migrateId: mgdata.migrateId\n    };\n    dbWp.execute(migrateDB, migrateDB.create, src.id, savedData, (err, result)=>{\n      if (err){\n        if (cb){\n          return cb(new esErr.ESErrors(esErr.RecordMigrageError));\n        }\n      }\n      if(cb){\n        return cb(null, src.fullurl + '/api/migrate/' + result._id);\n      }\n    });\n\n  };\n  taskqueue.launchDefer(src,\n                        'migrateTaskHandle',\n                         mgdata,\n                         {defferOption: true,\n                          backoff_seconds: 300,\n                          attempts: 3,\n                          callback:deferCallback\n  });\n};\n\nexports.migrateQuery = function(src, data, cb){\n  dbWp.execute(migrateDB, migrateDB.findOne, src.id, {'_id': data}, (err, result)=>{\n    if (err){\n      return cb(new esErr.ESErrors(esErr.RecordMigrageError));\n    }\n    if (result){\n      if (result.status == cst.MigrateFailedStatus){\n        return cb(null, {status: 'failed'});\n      }\n      return cb(null, {status: 'in_progressing'}); \n    }\n    else{\n      return cb(null, {status: 'success'});\n    }\n  });\n}\n\nif (require.main === module){\n  var process = require('process');\n  var exescriptName = 'cacheTitleIntoTopicUser';\n  var config = require('../../config');\n  var mongoose = require('mongoose');\n  process.env.DeferType = 'timeout';\n  \n  mongoose.connect(config.mongo.uri, config.mongo.options);\n  mongoose.connection.on('connected', function() {\n    logger.info('MongoDB connected');\n    process.env['mongoUA'] = 'connected';\n    setTimeout(function(){\n      console.log('Migrate from command line ' + exescriptName);\n      exports.lauchMigrate({id: 'migrate_command_request'},\n                           {funcName: exescriptName});\n    }, 6000);\n  });\n  mongoose.connection.on('error', function(err) {\n      logger.error('MongoDB connection error: ' + err);\n      mongoose.disconnect();\n  });\n  mongoose.connection.on('disconnected', function() {\n      logger.warn('MongoDB disconnected! Reconnecting in 3 seconds');\n      process.env['mongoUA'] = 'disconnected';\n  });\n  \n  TaskeHandleNotifierObj.on('finish', (mgdata)=>{\n    setTimeout(function(){\n      console.log('Migrate from command line ' + exescriptName + ' Finished');\n      process.exit(1);\n    }, QuitHandleTimeout);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/migrate/migrate.backend.js\n **/","import vw from '../viewBase/viewBase';\nimport authorize from '../../auth/authorizers';\nimport migrateBK from './migrate.backend';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport querystring from 'querystring';\nimport util from '../../utils/serverHelper';\n\nexports.migrate = class migrateView extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_MIGRATE)];\n  handle(req, res, cb){\n    let data = req.body;\n    var src = util.getSrcFromRequest(req);\n    migrateBK.lauchMigrate(src, data, (err, result)=>{\n      if (err){\n        return res.status(cst.HttpErrorStatus).json(err);\n      }\n      return res.status(cst.HttpSuccessStatus).json({url: querystring.escape(result)});\n    })\n  }\n};\n\nexports.migrateQuery = class migrateQueryView extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_MIGRATE)];\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    let data = req.params['id'];\n    migrateBK.migrateQuery(src, data, (err, result)=>{\n      if (err){\n        return res.status(cst.HttpErrorStatus).json(err);\n      }\n      return res.status(cst.HttpSuccessStatus).json(result);\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/migrate/migrate.controller.js\n **/","var mongoose = require('mongoose'),\n    Schema = mongoose.Schema;\n\nvar MigrateSchema = new Schema({\n    created: {type: Date, default: Date.now},\n    migrateId: {type: String},\n    migrateData: Schema.Types.Mixed,\n    status: {type: String}\n});\n\nmodule.exports = mongoose.model('Migrate', MigrateSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/migrate/migrate.model.js\n **/","import _ from 'lodash';\nimport Topic from '../topic/topic.model';\nimport User from '../user/user.model';\nimport esErr from '../../errors/errors';\nimport logger from '../../modules/logger';\nimport dbWp from '../../utils/dbwrapper';\nimport cst from '../../utils/serverConstants';\nimport ndutil from 'util';\nimport taskqueue from '../taskqueue/taskqueue.backend';\nimport mongoose from 'mongoose';\nimport async from 'async';\nimport TopicUser from '../notify/topicuser.model';\nimport util from '../../utils/serverHelper';\n\nfunction cacheOneRound(src, paramsData, cb){\n  let functionName = '[cacheOneRound] ';\n  let data = paramsData.taskData;\n  let achedObjCompareData = data.cachedObjCompareData;\n  let cachedObjId = data.cachedObjId;\n  let cachedObjType = data.cachedObjType;\n  let cursorId = data.cursorId || '';\n  let LIMIT_RECS = 10;\n  async.waterfall([\n    (interCallback)=>{\n      logger.info(src.id, ndutil.format('%s Get cached Object by id=%s, type=%s', functionName, cachedObjId, cachedObjType));\n      if (cachedObjType == cst.TypeTopic){\n        dbWp.execute(Topic, Topic.findById, src.id, {_id: cachedObjId}, (err, topicObj)=>{\n          if (err){\n            logger.error(src.id, ndutil.format('%s Get topic by id=%s failed.', functionName, cachedObjId), err);\n            return interCallback(new esErr.ESErrors(esErr.NotExsistedError));\n          }\n          else if (!topicObj){\n            logger.warn(src.id, ndutil.format('%s Get topic by id=%s get empty data', functionName, cachedObjId));\n            return interCallback(new esErr.ESErrors(esErr.NotExsistedError));\n          }\n          else{\n            return interCallback(cb, topicObj.title, topicObj);\n          }\n        });\n      }\n      else if (cachedObjType == cst.TypeUser){\n        dbWp.execute(User, User.findById, src.id, {_id: cachedObjId}, (err, userObj)=>{\n          if (err){\n            logger.error(src.id, ndutil.format('%s Get user by id=%s failed.', functionName, cachedObjId), err);\n            return interCallback(new esErr.ESErrors(esErr.NotExsistedError));\n          }\n          else if (!userObj){\n            logger.warn(src.id, ndutil.format('%s Get user by id=%s get empty data', functionName, cachedObjId));\n            return interCallback(new esErr.ESErrors(esErr.NotExsistedError));\n          }\n          else{\n            return interCallback(cb, userObj.username + userObj.displayname, userObj);\n          }\n        });\n      }\n      else{\n        logger.warn(src.id, ndutil.format('%s Not support cache cachedObjType', functionName, cachedObjType));\n        return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n      }\n    },\n    (cachedObjComparedDataR, cachedObj, interCallback)=>{\n      if (cachedObjComparedDataR != achedObjCompareData){\n        logger.info(src.id, ndutil.format('%s cached object been changed again during cache, cancel cache. new cachedObjComparedData=%s, old cachedObjComparedData=%s',\n            functionName, cachedObjComparedDataR, achedObjCompareData));\n        return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n      }\n      else{\n        let queryCondition = {};\n        let shouldUpdateTags = false;\n        if (cachedObjType == cst.TypeTopic){\n          queryCondition.targetId = cachedObjId;\n          queryCondition.targetType = cachedObjType;\n        }\n        else if (cachedObjType == cst.TypeUser){\n          queryCondition.userId = cachedObjId;\n          queryCondition.userType = cachedObjType;\n        }\n        else{\n          logger.warn(src.id, ndutil.format('%s Not support cache cachedObjType', functionName, cachedObjType));\n          return interCallback(new esErr.ESErrors(esErr.TaskNoRetryError));\n        }\n        if(shouldUpdateTags){\n          if (cursorId){\n            queryCondition._id = {$gt: cursorId};\n          }\n          let sortVar = {_id: 1};\n          logger.info(src.id, ndutil.format('%s Will query TopicUser by.', functionName), queryCondition, sortVar, LIMIT_RECS);\n          let exeobj = TopicUser.find(queryCondition).sort(sortVar).limit(LIMIT_RECS);\n          let partialTags = util.getTagsByType(cachedObj, cachedObjType);\n          dbWp.execute(exeobj, exeobj.exec, src.id, (err, data)=>{\n            if (err){\n              logger.error(src.id, ndutil.format('%s Query TopicUser failed', functionName), err);\n              return interCallback(err);\n            }\n            async.each(data, (topicUserObj, interCallback2)=>{\n              if (cachedObjType == cst.TypeTopic){\n                topicUserObj.tags = [for (tagItem of topicUserObj.tags) if (!tagItem.startsWith(cst.topicTagPrefix)) tagItem];\n              }\n              if (cachedObjType == cst.TypeUser){\n                topicUserObj.tags = [for (tagItem of topicUserObj.tags) if (!tagItem.startsWith(cst.userTagPrefix)) tagItem];\n              }\n              topicUserObj.tags = _.concat(topicUserObj.tags, partialTags);\n              logger.info(src.id, ndutil.format('%S Will save topicUser=%s with tags', functionName, topicUserObj._id.toString()), topicUserObj.tags);\n              data.save((err)=>{\n                if (err){\n                  logger.error(src.id, ndutil.format('%S Save topicUser=%s with tags failed', functionName, topicUserObj._id.toString()), err);\n                  return interCallback2(new esErr.ESErrors(esErr.DBError));\n                }\n                else{\n                  return interCallback2(null);\n                }\n              });\n            },(err)=>{\n              if ((!err) && data.length > 0 && data.length >=LIMIT_RECS){\n                data.cursorId = data[data.length-1]._id.toString();\n                return interCallback(err, data.cursorId);\n              }        \n              else{\n                return interCallback(err, '');\n              }\n              \n            });\n          });\n        }\n      }\n    }\n  ],(err, result)=>{\n    if (err){\n      logger.info(src.id, ndutil.format('%s Failed to cache for this round', functionName));\n    }\n    return cb(err, result);\n  });\n}\n\nfunction cacheTopicUserDeferEntry(src, paramsData, cb){\n  let functionName = '[cacheTopicUserDeferEntry] ';  \n  let data = paramsData.data;\n  let taskKey = paramsData.taskKey;\n  logger.info(src.id, ndutil.format(\"%s Begin ToicUser with data\", functionName), paramsData);\n  async.whilst(\n      ()=>{\n        if (util.requestWillEndSoon(src)){\n          logger.info(src.id, functionName + 'This request will end soon, create another taskqueue to continue working');\n          taskqueue.launchDefer(src,\n            taskKey,\n            data,\n            {defferOption: true,\n             backoff_seconds: 300,\n             attempts: 3,\n             callback:(err, result)=>{\n               if(!err){\n                 logger.info(src.id, ndutil.format('%s trigger a task to do cache work successfuly', functionName));\n               }\n               else{\n                 logger.error(src.id, ndutil.format('%s trigger a task to do cache work failed', functionName), err);\n               }\n             }\n          });\n          return false;\n        }\n        return continueVar;\n      },\n      (interCallback)=>{\n        cacheOneRound(src, paramsData, (err, result)=>{\n          if (!result){\n            continueVar = false;\n          }\n          return interCallback(err, result);\n        });\n      },\n      (err, result)=>{\n        logger.info(src.id, ndutil.format(\"%s This task of cachcing ToicpUser finished\", functionName));\n        return cb(err, result);\n      }\n    );\n}\n\nfunction cacheTopicToTopicUserDefer(src, data, cb){\n  let functionName = '[cacheTopicToTopicUserDefer] ';  \n  logger.info(src.id, ndutil.format(\"%s Begin cache topic info to ToicUser with data\", functionName), data);\n  let continueVar = true;\n  let paramsData = {\n   taskData: data,\n   taskKey: 'cacheTopicToTopicUserDefer'\n  };\n  cacheTopicUserDeferEntry(src, paramsData, (err, result)=>{\n    if ((!err) && (!result)){\n      logger.info(src.id, ndutil.format(\"%s Update topicuser's title information\", functionName));\n      let updateCondition={\n        targetId: data.cachedObjId,\n        targetType: data.cachedObjType,\n      }\n      dbWp.execute(TopicUser,\n        TopicUser.update,\n        src.id,\n        updateCondition,\n        {'$set': {'title': data.cachedObjCompareData}},\n        {multi: true},\n        (err, userObj)=>{\n          if (err){\n            logger.error(src.id, ndutil.format(\"%s Update topic user title happen error\", functionName), err);\n          }\n          return cb(err, result);\n      });\n    }\n    else{\n      return cb(err, result);\n    }\n  });\n}\n\nfunction cacheUserToTopicUserDefer(src, data, cb){\n  let functionName = '[cacheUserToTopicUserDefer] ';  \n  logger.info(src.id, ndutil.format(\"%s Begin cache topic info to ToicUser with data\", functionName), data);\n  let continueVar = true;\n  let paramsData = {\n   taskData: data,\n   taskKey: 'cacheUserToTopicUserDefer'\n  };\n  cacheTopicUserDeferEntry(src, paramsData, cb);\n}\n\n\ntaskqueue.registerDeferHandle('cacheTopicToTopicUserDefer', cacheTopicToTopicUserDefer);\ntaskqueue.registerDeferHandle('cacheUserToTopicUserDefer', cacheUserToTopicUserDefer);\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/notify/topicuser.backend.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './sync.controller';\nimport config from '../../config';\nimport auth from '../../auth/auth.service';\nimport {asView} from '../viewBase/viewBase';\nconst router = new Router();\n\nrouter.post('/users', asView(controller.syncUsers));\nrouter.post('/companies', asView(controller.syncCompanies));\nrouter.post('/permissiongroup', asView(controller.syncPermissionGroup));\n// router.get('/:id/colleagues/topics', asView(controller.listTopicsForColleagues));\n\n\n\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/sync/index.js\n **/","'use strict';\n\nimport User from '../user/user.model'\nimport passport from 'passport'\nimport config from '../../config'\nimport jwt from 'jsonwebtoken'\nimport escapeStringRegexp from 'escape-string-regexp'\nimport mongoose from 'mongoose'\nimport emailCtrl from '../../modules/email/email.controller'\nimport util from '../../utils/serverHelper';\nimport logger from '../../modules/logger/index'\nimport auth from '../../auth/auth.service'\nimport vw from '../viewBase/viewBase'\nimport userBz from '../user/user.backend'\nimport esErr from '../../errors/errors'\nimport cst from '../../utils/serverConstants'\nimport syncBz from './sync.backend.js';\nimport permGp from '../../auth/permissiongroup.model';\nimport dbWp from '../../utils/dbwrapper';\n\nvar ObjectId = mongoose.Schema.Types.ObjectId;\n\nvar validationError = function(res, err) {\n  return res.status(422).json(err);\n};\n\nexports.syncUsers = class syncUsers extends vw.serverCallView{\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    let data = {users: req.body};\n    src.fn = '[syncUsers]';\n    logger.info(src.id, '[syncUsers]Start syncing users from ' + config.getEsnaLink(src.domain));\n    syncBz.syncUsers(src, data, function (err, result) {\n      if (err) {\n        logger.error(src.id, '[syncUsers]Error syncing users', err);\n        return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.BadRequestError));\n      }\n      logger.info(src.id, '[syncUsers]Sync finished : ');\n      res.status(cst.HttpSuccessStatus).send(result);\n    });\n  };\n};\n\nexports.syncCompanies = class syncCompanies extends vw.serverCallView{\n    handle(req, res, cb){\n        var src = util.getSrcFromRequest(req);\n        src.fn ='[syncCompanies]';\n        let data = {companies: req.body};\n\n        logger.info(src.id, '[syncCompanies]Start syncing companies from ' + config.getEsnaLink(src.domain) + ' with payload', data);\n        syncBz.syncCompanies(src, data, function (err, result) {\n            if (err) {\n              logger.error(src.id, '[syncCompanies]Error syncing companies', err);\n              return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.BadRequestError));\n            }\n            logger.info(src.id, '[syncCompanies]Sync finished : ');\n            logger.debug(src.id, '[syncCompanies]Sync result to onesna:', result);\n            res.status(cst.HttpSuccessStatus).send(result);\n        });\n    };\n};\n/**\n * Authentication callback\n */\nexports.authCallback = function(req, res, next) {\n  res.redirect('/');\n};\n\nexports.syncPermissionGroup = class syncPermissionGroup extends vw.serverCallView{\n  handle(req, res, cb){\n    var src = util.getSrcFromRequest(req);\n    var postData = {\n      ndbid: req.body.id || '',\n      description: req.body.description || '',\n      name: req.body.name || '',\n      type: req.body.type || '',\n      permission_name: req.body.permission_name || '',\n      permissions: req.body.permissions || []\n    };\n    if (!postData.permission_name){\n      return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.BadRequestError));\n    }\n    dbWp.execute(permGp,\n                 permGp.findOneAndUpdate,\n                 src,\n                 {permission_name: postData.permission_name},\n                 postData,\n                 {upsert: true, new: true},\n                 (err, result)=>{\n     if (err){\n       logger.error(src, 'syncPermissionGroup happen error', err);\n       return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SysUnkownError));\n     }\n     else{\n       res.status(cst.HttpSuccessStatus).json(result.toJSON());\n     }\n   });\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/sync/sync.controller.js\n **/","/**\n * author: Eric Ding\n */\nimport { Router } from 'express';\nimport controller from './task.controller';\nimport {asView} from '../viewBase/viewBase';\nconst router = new Router();\n\nrouter.get('/:taskId/messages', asView(controller.listMessagesView));\nrouter.delete('/:taskId', asView(controller.deleteTask));\n\nexport default router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/task/index.js\n **/","/**\n * author: Eric Ding\n */\nimport mongoose from 'mongoose';\nimport dbWp from '../../utils/dbwrapper';\nimport TopicMessage from '../message/message.model';\n\nexports.listMessagesByTask = function(src, data, cb){\n  let matchCondition = {\n    \"parentMsg._id\": mongoose.Types.ObjectId(data.taskId)\n  };\n\n  let sort = {_id: -1};\n  if (data.page <= 1){\n    delete data.nextRefObjId;\n    delete data.prevRefObjId;\n    data.page = 1;\n  }\n  let includeEqual = data.includeEqual || false;\n  delete data.includeEqual;\n  if (data.nextRefObjId){\n    if (includeEqual){\n      matchCondition[\"_id\"] = {$lte: mongoose.Types.ObjectId(data.nextRefObjId)};\n    }\n    else{\n      matchCondition[\"_id\"] = {$lt: mongoose.Types.ObjectId(data.nextRefObjId)};\n    } \n    sort = {_id: -1};\n  }\n  else if(data.prevRefObjId){\n    if (includeEqual){\n      matchCondition[\"_id\"] = {$gte: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    else{\n      matchCondition[\"_id\"] = {$gt: mongoose.Types.ObjectId(data.prevRefObjId)};\n    }\n    sort = {_id: 1};\n  }\n  var exeobj = TopicMessage.find(matchCondition).sort(sort).limit(data.size + 1);\n  dbWp.execute(exeobj,\n    exeobj.exec,\n    src.id,\n    function(err, results){\n      if (err){\n        logger.error(src.id, 'listCommentsByTask happen error', err.message);\n        return cb(null, {results:[]});\n      }\n      if (results.length > data.size){\n        if (data.prevRefObjId){\n          results = results.reverse();          \n          return cb(null, {results:results.slice(1, data.size + 1), havingNextPage: true});\n        }\n        return cb(null, {results:results.slice(0, data.size), havingNextPage: true});\n      }\n      else{\n        if (data.prevRefObjId){\n          results = results.reverse();        \n        }        \n        return cb(null, {results:results, havingNextPage: false});\n      }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/task/task.backend.js\n **/","/**\n * author: Eric Ding\n */\n\nimport vw from '../viewBase/viewBase';\nimport messageBk from '../message/message.backend';\nimport taskBk from './task.backend';\nimport util from '../../utils/serverHelper';\nimport cst from '../../utils/serverConstants';\nimport esErr from '../../errors/errors';\nimport TopicMessage from '../message/message.model';\nimport async from 'async';\nimport dbWp from '../../utils/dbwrapper';\nimport logger from '../../modules/logger/index';\nimport MessageConstants from '../../flux/constants/MessageConstants';\nimport MessageEvent from '../message/message.event';\nimport authorize from '../../auth/authorizers';\n\nexports.deleteTask = class deleteTask extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  handle(req, res, cb){\n    \n    var src = util.getSrcFromRequest(req);\n    var task = req.message;\n    req.relPermChecker.checkRelation(src, task.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n      task.remove(function (err, result) {\n        if (err) {\n          logger.error(req.id, 'Error deleting task', err);\n          return cb(res, new esErr.ESErrors(esErr.ServerInternalError));\n        }\n        MessageEvent.emitCardDeleted(src, task);\n        return res.status(cst.HttpSuccessStatus).send();\n      });\n    });\n  };\n};\n\nclass listMessagesView extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_TASK_READ)];\n  _listMessages(req, queryData, cb){\n    var self = this;\n    taskBk.listMessagesByTask(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'listCommentsView call _listComments happen error', err.message);\n        return cb(err)\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._listMessages(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._listMessages(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n      delete queryData.taskId;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });  \n  }\n  \n  handle(req, res, cb){\n    //Be care don't need embed parent message\n    let queryData = {\n      taskId: req.params.taskId,\n      size: util.getListOfItemCaps(req.query.size, 30),\n      page: parseInt(req.query.page) || 1,\n      nextRefObjId: req.query.nextRefObjId,\n      prevRefObjId: req.query.prevRefObjId,\n    };\n    \n    var self = this;\n    async.waterfall([\n      (internalCallback) => {\n        dbWp.execute(TopicMessage, TopicMessage.findOne, req.id, {_id: req.params.taskId}, (err, taskMsg) => {\n          if (err){\n            logger.error(req.id, err.message);\n          }\n          return internalCallback(err, taskMsg);\n        });\n      },\n      (taskMsg, internalCallback) => {\n        if (!taskMsg){\n          logger.error(req.id, \"task with _id=\" +  req.params.taskId + \" not exited\");\n          return internalCallback(new esErr.ESErrors(esErr.NotExsistedError));\n        }\n        if (taskMsg.category !== MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK){\n          return internalCallback(new esErr.ESErrors(esErr.MessageUnexpectedCategory));\n        }\n        req.relPermChecker.checkRelation(req, taskMsg.topicId, cst.TypeTopic, (err)=>{\n          return internalCallback(err, taskMsg);\n        });\n      },\n      (taskMsg, internalCallback) => {\n        self._listMessages(req, queryData, internalCallback);\n      },        \n      (data, internalCallback) => {\n        messageBk.toDownloadableClientFormatMessagesIngoreParentMsg(req, data.results.results, (err, convertedResults) => {\n          if (err){\n            return internalCallback(err);\n          }\n          data.results.results = convertedResults;\n          return internalCallback(null, data);\n        });\n      }\n    ],(err, data) => {\n      if (err){\n        logger.error(req.id, \"listCommentsView happen error\", err)\n        if (err.code == esErr.AuthorizeErrorPermission){\n          return cb(err);\n        }\n        return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n      }\n      return res.json(util.createPagination(req, data));\n    });\n  }\n  \n}\nexports.listMessagesView = listMessagesView;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/task/task.controller.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './taskqueue.controller';\nimport config from '../../config';\nimport auth from '../../auth/auth.service';\nimport {asView} from '../viewBase/viewBase';\nimport cst from '../../utils/serverConstants';\nconst router = new Router();\n\n\nrouter.post('/runner', asView(controller.runner));\nrouter.post('/syncSenderOfMessages', asView(controller.syncSenderOfMessages));\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/taskqueue/index.js\n **/","import esErr from '../../errors/errors';\nimport logger from '../../modules/logger/index';\nimport auth from '../../auth/auth.service';\nimport vw from '../viewBase/viewBase';\nimport tkjbobk from './taskqueue.backend';\nimport cst from '../../utils/serverConstants';\nimport util from '../../utils/serverHelper';\nimport ndUtil from 'util';\n\nfunction ChangeTimeoutOfReqTask(req, inWaitSeconds){\n  let waitSeconds = inWaitSeconds || cst.taskRequestTimeoutSeconds;\n  req.taskRequestTimeout = Date.now() + waitSeconds * 1000;\n  req.clearTimeout();\n  let tmout = setTimeout(function(){\n    req.timedout = true;\n    req.emit('timeout', waitSeconds * 1000);\n  }, waitSeconds * 1000);\n  return tmout;\n}\n\nexports.runner = class runner extends vw.serverCallView{\n  handle(req, res, cb){\n    let tmout = ChangeTimeoutOfReqTask(req, this.waitforSeconds);\n    logger.info(req.id, 'Task queue will run a task');\n    var src = util.getSrcFromRequest(req);\n    req.connection.on('close', () => {\n      logger.warn(req.id, 'Connection is closed');\n      src.esClosedFlag = true;\n    });\n    src.taskRequestTimeout = req.taskRequestTimeout;\n    tkjbobk.runner(src, req.body, (err, result) => {\n      clearTimeout(tmout);\n      if (err){\n        logger.warn(req.id, 'Task queue runner happen error', err);\n        if (err.code == esErr.SysAlreadyRegisterDeferError || \n            err.code == esErr.TaskNoRetryError ||\n            err.code == esErr.TaskqueueEndBeforeTimout){\n          //Never try again\n          return res.status(cst.HttpErrorTaskQueueNeverTry).json(err);\n        }\n        else{\n          return res.status(cst.HttpErrorStatus).json(err);\n        }\n      }\n      else{\n        logger.info(req.id, 'Task queue runner finish successfuly');\n        return res.status(cst.HttpSuccessStatus).json({status: 'success'});\n      }\n    });\n  }\n};\n\nexports.syncSenderOfMessages = class syncSenderOfMessages extends exports.runner{}\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/taskqueue/taskqueue.controller.js\n **/","'use strict';\nimport _ from 'lodash';\nimport querystring from 'querystring';\nimport Topic from './topic.model';\nimport config from '../../config';\nimport escapeStringRegexp from 'escape-string-regexp';\nimport mongoose from 'mongoose';\nimport emailCtrl from '../../modules/email/sendgrid';\nimport logger from '../../modules/logger/index';\nimport auth from '../../auth/auth.service';\nimport vw from '../viewBase/viewBase';\nimport topicBz from './topic.backend';\nimport userBz from '../user/user.backend';\nimport esErr from '../../errors/errors';\nimport cst from '../../utils/serverConstants';\nimport TopicInvite from './topicInvite.model';\nimport messageBk from '../message/message.backend';\nimport util from '../../utils/serverHelper';\nimport MessageConstants from '../../flux/constants/MessageConstants';\nimport authorize from '../../auth/authorizers';\nimport NotifyEvent from '../notify/notify.event';\nimport NotifyBackend from '../notify/notify.backend';\nimport ga from \"../../modules/analytics/google\";\nimport gaCst from \"../../modules/analytics/google/constants\";\nimport TopicEvent from './topic.event';\n\n// Get list of topics\n\nexports.index = class index extends vw.DeveloperAdminView{\n  \thandle(req, res, cb){\n\t  Topic.find(function (err, topics) {\n\t\tif(err) { return handleError(res, esErr); }\n\t\treturn res.status(cst.HttpSuccessStatus).json(topics);\n\t  });\n\t};\n};\n\n// Get a single Topic\n\nexports.show = class show extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n\thandle(req, res, cb){\n\t\tvar src = util.getSrcFromRequest(req);\n\t\tTopic.findById(req.params.topicId, function (err, topic) {\n  \t\tif (err) {\n  \t\t\tlogger.error(req.id, 'Error finding topic', err);\n  \t\t\treturn handleError(res, new esErr.ESErrors(esErr.BadRequestError));\n  \t\t}\n  \t\tif(!topic) { return res.status(cst.HttpErrorStatus).send('Not Found'); }\n  \t\treq.relPermChecker.checkRelation(req, topic, cst.TypeTopic, (err)=>{\n  \t\t  if (err){\n  \t\t    return cb(err);\n  \t\t  }\n  \t\t  return res.json(topic);\n  \t\t});\n\t\t});\n\t};\n};\n\nexports.join = class join extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n\thandle(req, res, cb){\n\t  var src = util.getSrcFromRequest(req);\n  \tvar me = req.user || req.anonymousUser;\n  \n  \tvar data = {\n  \t\tuser: me,\n  \t\ttopicId: req.params.topicId\n  \t};\n  \ttopicBz.joinTopic(src, data, function (err, result) {\n  \t  if (err) {\n  \t\t  if (err.code == esErr.AuthorizeErrorPermission){\n  \t\t    return cb(err)\n  \t\t  }\n  \t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n  \t\t}\n  \t\tresult.topic = result.topic.toJSON();\n  \t\tresult.topic.restrict = topicBz.convertTopicRestrictToStringList(src, result.topic);\n  \t\treturn res.status(cst.HttpSuccessStatus).send(result);\n  \t});\n\t};\n};\n\nexports.create = class create extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_CREATE)];\n\thandle(req, res, cb){\n\t\tlogger.info(req.id , 'begin Creating Topic');\n    Topic.create(req.body, function(err, topic) {\n\t\tif (err) {\n\t\t\tlogger.error(req.id, 'Error creating topic', err);\n\t\t\treturn handleError(res, new esErr.ESErrors(esErr.ServerInternalError));\n\t\t}\n\t\tif (!topic) {\n\t\t  return res.status(cst.HttpNotFoundStatus).json(esErr.NotExsistedError);\n\t\t}\n\t\treturn res.status(201).json(topic);\n\t });\n\t};\n};\n// Creates a new Topic in the DB.\n\n// Updates an existing Topic in the DB.\nexports.update = class update extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n\thandle(req, res, cb){\n\t\tif(req.body._id) { delete req.body._id; }\n\t\tTopic.findById(req.params.topicId, function (err, topic) {\n  \t\tif (err) {\n  \t\t\tlogger.error(req.id, 'Error finding topic', err);\n  \t\t\treturn handleError(res, new esErr.ESErrors(esErr.BadRequestError));\n  \t\t}\n  \t\tif(!topic) { return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.NotExsistedError)); }\n  \t\treq.relPermChecker.checkRelation(req, topic, cst.TypeTopic, (err)=>{\n  \t\t  if (err){\n          return cb(err);\n        }\n  \t\t  var updated = _.merge(topic, req.body);\n  \t\t  var src = util.getSrcFromRequest(req); \n        updated.save(function (err) {\n          if (err) { return handleError(res, err); }\n          TopicEvent.emitTopicUpdated(src, updated, topic);\n          return res.status(cst.HttpSuccessStatus).json(topic);\n        });\n  \t\t});\n\t\t});\n\t};\n};\n\nexports.getInvite = class getInvite extends vw.ViewBase{\n\tstatic AUTHORIZERS = [authorize.isInviteCreatorByParams];\n  \thandle(req, res, cb){\n\t \tTopicInvite.findById(req.params.inviteId, function (err, invite) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(req.id, 'Error finding topic', err);\n\t\t\t\treturn handleError(res, new esErr.ESErrors(esErr.BadRequestError));\n\t\t\t}\n\t\t\tif(!invite) { return res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.NotExsistedError)); }\n\t\t\treturn res.status(cst.HttpSuccessStatus).json(invite);\n\t\t});\n\t};\n};\n\nexports.searchTopics = class searchTopics extends vw.ViewBase{\n  \thandle(req, res, cb){\n  \t\tvar str,\n  \t\t\tskip,\n  \t\t\tlimit,\n  \t\t\tquery = [];\n  \t\tif (req.query) {\n\t\t\tstr = req.query.search;\n\t  \t\tskip = req.query.skip;\n\t  \t\tlimit = req.query.limit;\n  \t\t}\n\n\t \tif (str) {\n\t\t  \tstr = escapeStringRegexp(str);\n\t\t  \tquery.push({\n\t\t\t\t$match: {\n\t\t\t\t\t$or: [\n\t\t\t\t\t\t{ title: {$regex: str, $options: 'i'} }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t});\n\t \t}\n\n\t\tquery.push({\n\t\t\t$project: {\n\t\t\t\t_id: 1,\n\t\t\t\ttitle: 1,\n\t\t\t\td: 1,\n\t\t\t\tmembers: 1\n\t\t\t}\n\t\t});\n\n\t\tif (skip) {\n\t \t\tquery.push({$skip:skip});\n\t \t}\n\n\t \tif (limit) {\n\t \t\tquery.push({$limit:limit});\n\t \t}\n\n\t \tTopic.aggregate(query, function (err, topics) {\n\t\t  \tif (err) {\n\t\t\t\tlogger.error(req.id, 'Error searching topic', err);\n\t\t\t\treturn handleError(res, new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t  \treturn res.status(cst.HttpSuccessStatus).json({data: topics});\n\t  \t});\n\t};\n};\n\nexports.newTopic = class newTopic extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_CREATE), authorize.isApprovedAuthorizer];\n\thandle(req, res, cb){\n\t\tif (!req.body || !req.body.topic || !req.body.invitees) {\n\t\t  \treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\t\tif (!req.user) {\n\t\t\treturn res.status(cst.HttpUnauthorizedStatus).send(new esErr.ESErrors(esErr.AuthenticateFailed));\n\t\t}\n\t\tvar src = util.getSrcFromRequest(req),\n\t\t\tdata = {\n\t\t\tcreator: req.user,\n\t\t\tinvitees: req.body.invitees,\n\t\t\ttopic: req.body.topic,\n\t\t\tstartDateTime: req.body.startDateTime,\n\t\t\tendDateTime: req.body.endDateTime,\n\t\t\tnow: Date.now(),\n\t\t\tmembers:[],\n\t\t\tinformChannel: req.body.informChannel || 'server'\n\t\t};\n\n\t\ttopicBz.newTopic(src, data, function (err, data) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(req.id, 'Error creating topic', err);\n\t\t\t\treturn handleError(res, new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t\treturn res.status(cst.HttpSuccessStatus).json(data);\n\t\t});\n\t};\n};\n\nexports.getMembersOfTopic = class getMembersOfTopic extends vw.anyCallView {\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n\thandle(req, res, cb){\n\t\tif (!req.params || !req.params.topicId) {\n\t\t\treturn res.status(cst.HttpErrorStatus).send('Bad request');\n\t\t}\n\t\treq.relPermChecker.checkRelation(req, req.params.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n  \t\tvar src = util.getSrcFromRequest(req);\n  \t\tvar page = Number(req.query.page) || 1,\n          \tsize = util.getListOfItemCaps(parseInt(req.query.size), 20),\n        \tsize = size > 30 ? 30: size,\n          \tapiRoute = config.getLink(req.esDomain) + '/api/topics/' + req.params.topicId + '/members';\n  \t\tvar data = {\n  \t\t\ttopicId: req.params.topicId,\n  \t\t\tpagination: {\n  \t\t        skip: (page-1)*size,\n  \t\t        limit: size,\n  \t\t        apiRoute: apiRoute\n  \t\t    },\n  \t\t    search: req.query.search\n  \t\t};\n  \t\ttopicBz.getUsersOfTopic(src, data, function (err, result) {\n  \t\t\tif (err) {\n  \t\t\t\tlogger.error(err);\n  \t\t\t\tif (err.code == esErr.AuthorizeErrorPermission){\n  \t\t\t\t  return cb(err)\n  \t\t\t\t}\n  \t\t\t\treturn res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n  \t\t\t}\n  \t\t\tvar returnData = {\n  \t\t        data: result.data,\n  \t\t        from: (page - 1) * size + 1,\n  \t\t        to: (page - 1) * size + result.data.length\n  \t\t      };\n  \t\t    if (result.hasNext) {\n  \t\t        returnData.nextPageUrl = apiRoute + '?page=' + (page + 1) + '&size=' + size;\n  \t\t    }\n  \t\t    if (page > 1) {\n  \t\t      \treturnData.previousPageUrl = apiRoute + '?page=' + (page - 1) + '&size=' + size;\n  \t\t    }\n  \t\t    return res.status(cst.HttpSuccessStatus).json(returnData);\n  \t\t});\n\t\t});\n\t}\n};\n\nexports.quitTopic = class quitTopic extends vw.ViewBase{\n  \thandle(req, res, cb){\n\t\tif (!req.params || !req.params.topicId) {\n\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\t\tTopic.findById(req.params.topicId, function (err, topic) {\n\t\t\tif (err) {\n\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t\tif (!topic) {\n\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.NotExsistedError));\n\t\t\t}\n\n\t\t\tif (req.user) {\n\t\t\t\ttopicBz.userQuitTopic(req.user, topic, function (err, result) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t\t\t}\n\t\t\t\t\treturn res.status(cst.HttpSuccessStatus).send(result);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(req.anonymous) {\n\t\t\t\ttopicBz.anonymousQuitTopic(req.anonymous, topic, function (err, result) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t\t\t}\n\t\t\t\t\treturn res.status(cst.HttpSuccessStatus).send(result);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n};\n\nexports.removeFromTopic = class removeFromTopic extends vw.ViewBase{\n  \thandle(req, res, cb){\n\t\tif (!req.params || !req.params.tid || !req.params.uid) {\n\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\t\tTopic.findById(req.params.topicId, function (err, topic) {\n\t\t\tif (err) {\n\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t\tif (!topic) {\n\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.NotExsistedError));\n\t\t\t}\n\n\t\t\ttopicBz.quitTopicById(req.params.uid, topic, function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t\t}\n\t\t\t\treturn res.status(cst.HttpSuccessStatus).send(result);\n\t\t\t})\n\t\t});\n\t}\n};\n\n\nexports.addToTopic = class addToTopic extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE), authorize.isApprovedAuthorizer];\n\thandle(req, res, cb){\n  \tif (!req.body || !req.params || !req.params.topicId || !req.body.invitees) {\n  \t  \treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n  \t}\n  \n  \tvar src = util.getSrcFromRequest(req);\n  \tsrc.fn = '[addToTopic]';\n  \tTopic.findById(req.params.topicId, function (err, topic) {\n  \t\tif (err || (!topic)) {\n  \t\t\tlogger.error(src.id, src.fn + 'Error find topic :' + req.params.topicId, err);\n  \t\t\treturn res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n  \t\t}\n  \t\treq.relPermChecker.checkRelation(req, topic, cst.TypeTopic, (err)=>{\n        if (err){\n          return cb(err);\n        }\n      \tvar src = {\n          id: req.id,\n          type: 'req',\n          domain: req.esDomain\n      \t};\n    \t\tvar data = {\n    \t\t\tcreator: req.user,\n    \t        invitees: req.body.invitees,\n    \t        topic: topic,\n    \t        startDateTime: req.body.startDateTime,\n    \t        endDateTime: req.body.endDateTime,\n    \t        now: Date.now(),\n    \t\t\tmembers:[],\n    \t\t\tinformChannel: req.body.informChannel || 'server'\n    \t\t};\n    \n    \t\ttopicBz.addToTopic(src, data, function (err, result) {\n    \t\t\tif (err) {\n    \t\t\t\tlogger.error(src.id, src.fn + 'Error add to topic :' + req.params.topicId, err);\n    \t\t\t\treturn res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n    \t\t\t}\n    \t\t\treturn res.status(cst.HttpSuccessStatus).json(result);\n    \t\t});\n  \t\t});\n  \t});\n\t};\n};\n\nexports.joinTopicFromInvite = class joinTopicFromInvite extends vw.anyCall4001View{\n  \thandle(req, res, cb){\n\t\tif (!req.params || !req.params.inviteId) {\n\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n\t\t}\n\n\t\tvar src = util.getSrcFromRequest(req);\n\t\tvar data = {\n\t\t\tinviteId: req.params.inviteId,\n\t\t\tuser: req.anonymousUser || req.user || undefined,\n\t\t\tanonymous: req.anonymousUser\n\t\t}\n\t\ttopicBz.joinTopicFromInvite(src, data, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, 'Error join topic with inviteId: ' + req.params.inviteId, err);\n\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t\tlogger.info(src.id, 'This is the entry info of this user :', result);\n\t\t\treturn res.status(cst.HttpSuccessStatus).send(result);\n\t\t});\n\t};\n};\n\nexports.deleteInvite = class deleteInvite extends vw.ViewBase{\n\tstatic AUTHORIZERS = [authorize.isInviteCreatorByParams];\n\n  \thandle(req, res, cb){\n\t\tvar src = util.getSrcFromRequest(req);\n\n\t\treq.invite.remove(function (err, invite) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, 'Error delete inviteId : ', req.invite._id, err);\n\t\t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t\tlogger.info(src.id, 'Deleting Invite Successful :', req.invite._id);\n\t\t\treturn res.status(cst.HttpSuccessStatus).send();\n\t\t});\n\t};\n};\n\nexports.updateInvite = class updateInvite extends vw.ViewBase{\n\tstatic AUTHORIZERS = [authorize.isInviteCreatorByParams];\n\n  \thandle(req, res, cb){\n  \t\tif (!req.body) {\n  \t\t\tlogger.error(req.id, '[updateInvite] No request body for post api');\n  \t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n  \t\t}\n\n  \t\tvar postInvite = req.body.data;\n  \t\tif (postInvite && postInvite._id.toString() !== req.invite._id.toString()) {\n  \t\t\tlogger.error(req.id,  '[updateInvite] update Invite id does not match in url');\n  \t\t\treturn res.status(cst.HttpErrorStatus).send(new esErr.ESErrors(esErr.BadRequestError));\n  \t\t}\n\t\tvar src = util.getSrcFromRequest(req);\n\n\t\tvar data = {\n\t\t\ttopic: req.topic,\n\t\t\tcreator: req.me,\n\t\t\toldInvite: req.invite,\n\t\t\tnewInvite: postInvite,\n\t\t\tinformChannel: req.body.informChannel\n\t\t};\n\n\t\ttopicBz.updateInvite(src, data, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\tlogger.error(src.id, src.fn + 'Error update invite :' + postInvite._id, err);\n\t\t\t\treturn res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.ServerInternalError));\n\t\t\t}\n\t\t\treturn res.status(cst.HttpSuccessStatus).json(result);\n\t\t});\n\t};\n};\n\n\nfunction handleError(res, err) {\n  return res.status(cst.HttpErrorStatus).send(err);\n}\n\nclass ListMessageByRefView extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_READ)];\n  _queryByRef(req, queryData, cb){\n    var self = this;\n    messageBk.queryByRef(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'ListMessageByRefView call _queryByRef happen error', err.message);\n        return cb(err);\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._queryByRef(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._queryByRef(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n      delete queryData.topicId;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });\n  }\n\n  handle(req, res, cb){\n    let queryData = {\n        topicId: req.params.topicId,\n        refTime: req.query.refTime,\n        direction: req.query.direction || cst.DirectionAfter,\n        size: util.getListOfItemCaps(parseInt(req.query.size), 30),\n        nextRefObjId: req.query.nextRefObjId,\n        prevRefObjId: req.query.prevRefObjId,\n        page: parseInt(req.query.page) || 1,\n        begObjectId: req.query.begObjectId\n    };\n    var src = util.getSrcFromRequest(req);\n    if (queryData.nextRefObjId && queryData.prevRefObjId){\n      logger.error(src.id, 'ListMessageByRefView don\\'t accept nextRefObjId and prevRefObjId together');\n      return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n    }\n\n    this._queryByRef(src, queryData, (err, data) => {\n      messageBk.toDownloadableClientFormatMessages(src, data.results.results, (err, convertedResults) => {\n        if (err){\n          return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n        }\n        data.results.results = convertedResults;\n        return res.json(util.createPagination(req, data));\n      });\n    });\n  }\n}\n\nexports.ListMessageByRefView = ListMessageByRefView;\n\n\n\nclass ListOfTopicTasksView extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n\t_listTopic(req, queryData, cb){\n\t\tvar self = this;\n\t\tmessageBk.listTaskByTopic(req, queryData, (err, results) =>{\n\t\t  if (err){\n            logger.error(req.id, 'ListOfTopicTasksView call _listTopic happen error', err.message);\n            return cb(err);\n          }\n\t\t  if (queryData.prev && results.results.length < queryData.size){\n            queryData.page = 1;\n            delete queryData.prev;\n            return self._listTopic(req, queryData, cb);\n          }\n          else if(results.results.length === 0 && queryData.page > 1 && (!queryData.prev)){\n            queryData.page -= 1;\n            return self._listTopic(req, queryData, (err, data) => {\n            if (data.results){\n              data.results.havingNextPage = false;\n            }\n            return cb(null, data);\n            });\n          }\n      delete queryData.topicId;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });\n\t}\n\n\thandle(req, res, cb){\n\t  req.relPermChecker.checkRelation(req, req.params.topicId, cst.TypeTopic, (err)=>{\n\t    if (err){\n\t      return cb(err);\n\t    }\n  \t  let queryData = {\n  \t\t\ttopicId: req.params.topicId,\n  \t\t\tsize: util.getListOfItemCaps(parseInt(req.query.size), 30),\n  \t\t\tpage: parseInt(req.query.page) || 1,\n  \t\t\tcategory: MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK,\n  \t\t\tprev: req.query.prev || false,\n  \t\t};\n  \t\tlet orderVal = [[\"content.dueDate\", 1]];\n  \t\tif (req.query.order){\n  \t\t  try{\n  \t\t    let order_obj = JSON.parse(querystring.unescape(req.query.order));\n  \t\t    if (order_obj.length > 0){\n  \t\t      orderVal = [];\n  \t\t      for (let order_item of order_obj){\n  \t\t        if (order_item.value == 'desc'){\n  \t\t          orderVal.push([order_item.by, -1]);\n  \t\t        }\n  \t\t        else{\n  \t\t          orderVal.push([order_item.by, 1]);\n  \t\t        }\n  \t\t      }\n  \t\t    }\n  \t\t  }\n  \t\t  catch(e){\n  \t\t    logger.info(req.id, 'Parse order happen error = %s' + e + ' .Still use default order value');\n  \t\t    orderVal = [[\"content.dueDate\", 1]];\n  \t\t  }\n  \t\t}\n  \t\tqueryData.order = orderVal;\n  \n  \t\tlet filterVal = {};\n  \t\tif (req.query.filter){\n  \t\t  try{\n  \t\t    let filterObj = JSON.parse(querystring.unescape(req.query.filter));\n  \t\t    if( Object.prototype.toString.call(filterObj) === '[object Array]'){\n  \t\t      for (let filterItem of filterObj){\n  \t\t        filterVal[filterItem.by] = filterItem.value;\n  \t\t      }\n  \t\t    }\n  \t\t    else{\n  \t\t      filterVal[filterObj.by] = filterObj.value;\n  \t\t    }\n  \t\t  }\n  \t\t  catch(e){\n  \t\t    logger.info(req.id, 'Parse filter happen error = %s' + e + ' .Still use default order value');\n  \t\t    filterVal = {};\n  \t\t  }\n  \t\t}\n  \t\tqueryData.filter = filterVal;\n  \t\tvar src = util.getSrcFromRequest(req);\n  \t\tthis._listTopic(src, queryData, (err, data) => {\n  \t\t\tmessageBk.toDownloadableClientFormatMessages(src, data.results.results, (err, convertedResults) => {\n      \t      if (err){\n      \t\t\treturn res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n      \t\t  }\n      \t\t  data.results.results = convertedResults;\n      \t\t  if (req.query.order){\n      \t\t    data.queryData.order = req.query.order;\n      \t\t  }\n      \t\t  else{\n      \t\t\tdelete data.queryData.order;\n      \t\t  }\n      \t\t  if (req.query.filter){\n                  data.queryData.filter = req.query.filter;\n                }\n                else{\n                  delete data.queryData.filter;\n                }\n      \t      return res.json(util.createPaginationByPage(req, data));\n  \t\t\t});\n  \t\t});\n\t  });\n\t}\n}\nexports.ListOfTopicTasksView = ListOfTopicTasksView;\n\nclass ListOfTopicIdeasView extends vw.anyCallView{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  _listTopic(req, queryData, cb){\n    var self = this;\n    messageBk.listIdeaByTopic(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'ListOfTopicIdeasView call _listTopic happen error', err.message);\n        return cb(err);\n      }\n      if (queryData.prev && results.results.length < queryData.size){\n        queryData.page = 1;\n        delete queryData.prev;\n        return self._listTopic(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.page > 1 &&(!queryData.prev)){\n        queryData.page -= 1;\n        return self._listTopic(req, queryData, (err, data) => {\n        if (data.results){\n          data.results.havingNextPage = false;\n        }\n        return cb(null, data);\n        });\n      }\n\n      delete queryData.topicId;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });\n  }\n\n  handle(req, res, cb){\n    req.relPermChecker.checkRelation(req, req.params.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n      let queryData = {\n          topicId: req.params.topicId,\n          size: util.getListOfItemCaps(parseInt(req.query.size), 30),\n          page: parseInt(req.query.page) || 1,  \n          category: MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA,\n          prev: req.query.prev || false,\n        };\n        let orderVal = [[\"modified\", -1]];\n        if (req.query.order){\n          try{\n            let order_obj = JSON.parse(querystring.unescape(req.query.order));\n            if (order_obj.length > 0){\n              orderVal = [];\n              for (let order_item of order_obj){\n                if (order_item.value == 'desc'){\n                  orderVal.push([order_item.by, -1]);\n                }\n                else{\n                  orderVal.push([order_item.by, 1]);\n                }\n              }\n            }\n          }\n          catch(e){\n            logger.info(req.id, 'Parse order happen error = %s' + e + ' .Still use default order value');\n            orderVal = [[\"modified\", -1]];\n          }\n        }\n        queryData.order = orderVal;\n        \n        let filterVal = {};\n        if (req.query.filter){\n          try{\n            let filterObj = JSON.parse(querystring.unescape(req.query.filter));\n            if( Object.prototype.toString.call(filterObj) === '[object Array]'){\n              for (let filterItem of filterObj){\n                filterVal[filterItem.by] = filterItem.value;\n              }\n            }\n            else{\n              filterVal[filterObj.by] = filterObj.value;\n            }\n          }\n          catch(e){\n            logger.info(req.id, 'Parse filter happen error = %s' + e + ' .Still use default order value');\n            filterVal = {};\n          }\n        }\n        queryData.filter = filterVal;\n        var src = util.getSrcFromRequest(req);\n        this._listTopic(src, queryData, (err, data) => {\n          messageBk.toDownloadableClientFormatMessages(src, data.results.results, (err, convertedResults) => {\n            if (err){\n              return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n            }\n            data.results.results = convertedResults;\n            if (req.query.order){\n              data.queryData.order = req.query.order;\n            }\n            else{\n              delete data.queryData.order;\n            }\n            if (req.query.filter){\n              data.queryData.filter = req.query.filter;\n            }\n            else{\n              delete data.queryData.filter;\n            }\n            let parentInfos = [];\n            \n            for (let msgItem of data.results.results){\n              parentInfos.push({'_id': msgItem._id, 'size': 1, 'chatCount': msgItem.chatCount, 'likeCount': msgItem.likeCount});\n            }\n            \n            messageBk.getLatestMessageByParent(src, parentInfos, (err, results) => {\n              if (err){\n                logger.warn(req.id, 'ListOfTopicIdeasView to get latest message happen error', err);\n                return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n              }\n              for (let msgIdx in data.results.results){\n                let msgItem = data.results.results[msgIdx];\n                //let lastestMsgs = results[msgIdx].data;\n                let chatMessagesCount = results[msgIdx].chatCount;\n                let likeMessagesCount = results[msgIdx].likeCount;\n//                if (lastestMsgs && lastestMsgs.length > 0){\n//                  msgItem.latestMessages = lastestMsgs;\n//                }\n//                else{\n//                  msgItem.latestMessages = [];                \n//                }\n                if(chatMessagesCount){\n                  msgItem.chatMessagesCount = chatMessagesCount;\n                }\n                else{\n                  msgItem.chatMessagesCount = 0\n                }\n                if(likeMessagesCount){\n                  msgItem.likeMessagesCount = likeMessagesCount;\n                }\n                else{\n                  msgItem.likeMessagesCount = 0\n                }\n              }\n              return res.json(util.createPaginationByPage(req, data));\n            });\n          });\n        });\n      });\n    }\n};\n\nexports.ListOfTopicIdeasView = ListOfTopicIdeasView;\n\nclass addTaskView extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  \n  handle(req, res, cb){\n    req.relPermChecker.checkRelation(req, req.params.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n     //req.body should be a task category\n     let postData = req.body;\n     postData.category = MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK;\n     postData.sender = {_id:req.user._id, type:cst.TypeUser, username: req.user.username, displayname: req.user.displayname, picture_url: util.getPicture_url(req.user.picturefile)};\n     postData.topicId = req.params.topicId;\n     var src = util.getSrcFromRequest(req);\n     messageBk.addMessagetoNoSenderPublicInfo(src, postData, function(err, result){\n       if (err){\n         return res.status(cst.HttpErrorStatus).json(err);\n       }\n       result.sender = _.extend(result.sender, req.user.profile);\n       return res.status(cst.HttpSuccessStatus).json({'data': [result]});\n     });\n   });\n  }\n}\nexports.addTaskView = addTaskView;\n\nclass addIdeaView extends vw.ViewBase{\n  static AUTHORIZERS = [new authorize.PermissionAuthorizer(authorize.pm.PERM_TOPIC_UPDATE)];\n  handle(req, res, cb){\n   req.relPermChecker.checkRelation(req, req.params.topicId, cst.TypeTopic, (err)=>{\n      if (err){\n        return cb(err);\n      }\n     //req.body should be a task category\n     let postData = req.body;\n     postData.category = MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA;\n     postData.sender = {_id:req.user._id, type:cst.TypeUser, username: req.user.username, displayname: req.user.displayname, picture_url: util.getPicture_url(req.user.picturefile)};\n     postData.topicId = req.params.topicId;\n     var src = util.getSrcFromRequest(req);\n     messageBk.addMessagetoNoSenderPublicInfo(src, postData, function(err, result){\n       if (err){\n         return res.status(cst.HttpErrorStatus).json(err);\n       }\n       result.sender = _.extend(result.sender, req.user.profile);\n  \n       return res.status(cst.HttpSuccessStatus).json({'data': [result]});\n     });\n  });\n  }\n}\nexports.addIdeaView = addIdeaView;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/topic/topic.controller.js\n **/","'use strict';\n\n//Version 1.0\n\nimport { Router } from 'express';\nimport controller from './user.controller';\nvar config = require('../../config');\nimport auth from '../../auth/auth.service';\nimport {asView} from '../viewBase/viewBase';\nconst router = new Router();\n\nrouter.get('/me', asView(controller.MeInfoView));\nrouter.get('/me/topics', asView(controller.listTopicsForMe));\nrouter.get('/me/spaces', asView(controller.listTopicsForMe));\n//router.get('/:id/topics', asView(controller.listTopicsForUser));\nrouter.get('/:id/colleagues/', asView(controller.SearchColleaguesView));\n//router.get('/:id', asView(controller.show));\nrouter.get('/me/tasks', asView(controller.listTasksForMe));\nrouter.get('/me/tasks/assigned', asView(controller.listAssignedTasksForMe));\nrouter.get('/me/ideas', asView(controller.listIdeasForMe));\nrouter.get('/me/attachments/natives', asView(controller.listNativesForMe));\n\n// router.get('/:id/colleagues/topics', asView(controller.listTopicsForColleagues));\n\n\n\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/user/index.js\n **/","'use strict';\n\nimport User from './user.model';\nimport passport from 'passport'\n//import config from '../../config'\nimport jwt from 'jsonwebtoken'\nimport escapeStringRegexp from 'escape-string-regexp'\nimport mongoose from 'mongoose'\nimport emailCtrl from '../../modules/email/email.controller'\nimport logger from '../../modules/logger/index'\nimport auth from '../../auth/auth.service'\nimport vw from '../viewBase/viewBase'\nimport userBz from './user.backend'\nimport esErr from '../../errors/errors'\nimport cst from '../../utils/serverConstants'\nimport messageBk from '../message/message.backend';\nimport util from '../../utils/serverHelper';\nimport MessageConstants from '../../flux/constants/MessageConstants';\nimport ga from \"../../modules/analytics/google\";\nimport gaCst from \"../../modules/analytics/google/constants\";\n\nvar ObjectId = mongoose.Schema.Types.ObjectId;\n\nexports.MeInfoView = class MeInfoView extends vw.anyCallView{\n  handle(req, res, cb){\n    logger.info(req.id , 'begin MeInfoView');\n    if (req.anonymousUser){\n      req.anonymousUser.secret = undefined;\n      return res.json(req.anonymousUser);\n    }\n    else if (req.user){\n\t    //var user = req.user.toJSON();\t    \n\t    User.findOne({'_id': req.user._id}, (err, user)=>{\n\t      if (user){\n  \t      user.secret = undefined;\n  \t      user.permissions = req.user.extendPermissions;\n  \t      return res.json(user);\n\t      }\n\t      else{\n\t        return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SysUnkownError));\n\t      }\n\t    })\n\t    //user.permissions = req.user.extendPermissions;\n\t    //return res.json(user);\n    }\n    else{\n      return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SysUnkownError));\n    }\n  }\n};\n\nexports.SearchColleaguesView = class SearchColleaguesView extends vw.regUserCallView{\n  handle(req, res, cb){\n    logger.info(req.id, 'begin SearchColleaguesView');\n    var str;\n    var query = [];\n    if (req.query) {\n      str = req.query.search;\n    }\n    if (str) {\n      str = escapeStringRegexp(str);\n    }\n    var src = util.getSrcFromRequest(req);\n    var data = {\n      search: str,\n      user: req.user\n    };\n    userBz.searchColleagues(src, data, function(err, users){\n      return res.status(cst.HttpSuccessStatus).json(users);\n    })\n  }\n};\n\nexports.listTopicsForMe = class listTopicsForMe extends vw.anyCallView{\n  handle(req, res, cb){\n    var me = req.user || req.anonymousUser;\n    logger.info(req.id, me.aType + ' begin listTopicsForMe :' + me.username + ' with userId: ' + me._id);\n    var page = Number(req.query.page) || 1,\n        size = Number(req.query.size) || 10,\n        size = size > 20 ? 20: size,\n        src = util.getSrcFromRequest(req),\n        apiRoute = '/api/users/me/spaces';\n\n    var data = {\n      user: me,\n      pagination: {\n        skip: (page-1)*size,\n        limit: size,\n        apiRoute: apiRoute\n      },\n      search: req.query.search,\n      order: req.query.orderBy\n    };\n\n    var callback = function(err, result) {\n      if (err || !result) {\n        return res.status(cst.HttpSuccessStatus).json({data: []});\n      }\n      var returnData = {\n        data: result.data,\n        from: (page - 1) * size + 1,\n        to: (page - 1) * size + result.data.length\n      }\n      if (result.hasNext) {\n        returnData.nextPageUrl = apiRoute + '?page=' + (page + 1) + '&size=' + size;\n        if (data.search) {\n          returnData.nextPageUrl += '&search=' + data.search;\n        }\n        if (data.filterType){\n          returnData.nextPageUrl += '&filtertype=' + data.filterType;\n        }\n      }\n      if (page > 1) {\n        returnData.previousPageUrl = apiRoute + '?page=' + (page - 1) + '&size=' + size;\n        if (data.search) {\n          returnData.previousPageUrl += '&search=' + data.search;\n        }\n        if (data.filterType){\n          returnData.previousPageUrl += '&filtertype=' + data.filterType;\n        }\n      }\n      return res.status(cst.HttpSuccessStatus).json(returnData);\n    }\n\n    if (data.search && data.search.length > 0) {\n      userBz.listTopicsForMe(src, data, callback);\n    } else {\n      let fillType = req.query.filtertype || 'all';\n      data.filterType = fillType;\n      userBz.listRecentAccessedTopicsForMe(src, data, callback);\n    }    \n  }\n};\n\nexports.listTopicsForUser = class listTopicsForUser extends vw.DeveloperAdminView{\n  handle(req, res, cb){\n    \n    if (!req.user) {\n      return res.status(cst.HttpUnauthorizedStatus).json(new esErr.ESErrors(esErr.AuthenticateFailed));\n    }\n    logger.info(req.id, ' begin listTopicsForUser with userId: ' + req.params.id);\n\n    if (!req.params || !req.params.id) {\n      return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.BadRequestError));\n    }\n\n    var page = Number(req.query.page) || 1,\n        size = Number(req.query.size) || 10,\n        src = util.getSrcFromRequest(req),\n        apiRoute = '/api/users/' + req.params.id + '/spaces';\n\n    var data = {\n      pagination: {\n        skip: (page-1)*size,\n        limit: size,\n        apiRoute: apiRoute\n      },\n      search: req.query.search,\n      objId: req.params.id\n    };\n\n    userBz.listTopicsForMe(src, data, function(err, result){\n      if (err || !result) {\n        return res.status(cst.HttpSuccessStatus).json([]);\n      }\n      var returnData = {\n        data: result.data,\n        from: (page - 1) * size + 1,\n        to: (page - 1) * size + result.data.length\n      }\n      if (result.hasNext) {\n        returnData.nextPageUrl = apiRoute + '?page=' + (page + 1) + '&size=' + size;\n        if (data.search) {\n          returnData.nextPageUrl += '&search=' + data.search;\n        }\n      }\n      if (page > 1) {\n        returnData.previousPageUrl = apiRoute + '?page=' + (page - 1) + '&size=' + size;\n        if (data.search) {\n          returnData.previousPageUrl += '&search=' + data.search;\n        }\n      }\n      return res.status(cst.HttpSuccessStatus).json(returnData);\n    });\n  }\n};\n\nvar validationError = function(res, err) {\n  return res.status(422).json(err);\n};\n\n/**\n * Get list of users using mini-mongo\n * restriction: 'admin'\n */\nexports.index = function(req, res) {\n  var func = 'user.controller[mongo]';\n  try{\n    var limit = req.query.limit || 20;\n    var skip = req.query.skip || 0;\n    limit = {limit: limit};\n    skip = {skip: skip};\n\n    var selector = req.query.selector;\n    if(selector){\n      selector = JSON.parse(selector);\n    }\n\n    if(selector._id == 'me'){\n      selector._id = req.user._id;\n    }\n\n    console.log(func, 'after', 'limit', limit, 'selector', selector);\n    if(selector._id){\n      User.findById(selector._id, function (err, user) {\n        if (err) return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.BadRequestError));\n        console.log(func, 'user', user.profile);\n        if (!user) return res.status(cst.HttpUnauthorizedStatus).send('Unauthorized');\n        return res.status(cst.HttpSuccessStatus).json([user.profile]);\n      });\n    }\n    else {\n      User.find(selector, limit, skip, function (err, users) {//, '-salt -hashedPassword'\n        console.log(func, 'users', users);\n        if(err) return res.status(cst.HttpErrorStatus).send(err);\n        res.status(cst.HttpSuccessStatus).json(users);\n      })\n    }\n\n\n  }\n  catch(err){\n    console.error(func, err);\n  }\n\n};\n\n/**\n * Get a single user\n */\nexports.show = class show extends vw.ViewBase{\n    handle(req, res, cb){\n        var userId = req.params.id;\n\n        User.findById(userId, function (err, user) {\n            if (err) {\n              logger.error(err);\n              return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.BadRequestError));\n            }\n            if (!user) return res.status(cst.HttpUnauthorizedStatus).send('Unauthorized');\n            res.json(user.profile);\n        });\n    };\n};\n/**\n * Authentication callback\n */\nexports.authCallback = function(req, res, next) {\n  res.redirect('/');\n};\n\nexports.listTasksForMe = class listTasksForMe extends vw.regUserCallView{\n  _listTopic(req, queryData, cb){\n    var self = this;    \n    userBz.listTasksByUserId(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'listTasksForMe call _listTopic happen error', err.message);\n        return cb(err);\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._listTopic(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._listTopic(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n\n      delete queryData.sender;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });  \n  }\n  \n  handle(req, res, cb){\n    let queryData = {\n      sender: req.user._id,\n      size: parseInt(req.query.size) || 30,\n      page: parseInt(req.query.page) || 1,\n      nextRefObjId: req.query.nextRefObjId,\n      prevRefObjId: req.query.prevRefObjId,\n      category: MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK\n    };\n\n    this._listTopic(req, queryData, (err, data) => {\n      messageBk.toDownloadableClientFormatMessages(req, data.results.results, (err, convertedResults) => {\n        messageBk.fillTopicTitleInMsgs(req, convertedResults, (err, convertedResults)=>{\n          if (err){\n            return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n          }\n          data.results.results = convertedResults;\n          return res.json(util.createPagination(req, data));\n        })        \n      });\n    });\n  }\n};\n\nexports.listAssignedTasksForMe = class listAssignedTasksForMe extends vw.regUserCallView{\n  _listTopic(req, queryData, cb){\n    var self = this;    \n    userBz.listAssignedTaskByTopic(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'listTasksForMe call _listTopic happen error', err.message);\n        return cb(err);\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._listTopic(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._listTopic(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n\n      delete queryData.assignee;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });  \n  }\n  \n  handle(req, res, cb){   \n    let queryData = {\n      assignee: req.user._id,\n      size: parseInt(req.query.size) || 30,\n      page: parseInt(req.query.page) || 1,\n      nextRefObjId: req.query.nextRefObjId,\n      prevRefObjId: req.query.prevRefObjId,\n      category: MessageConstants.ACTIVITY_CATEGORY_TYPES.TASK\n    };\n\n    this._listTopic(req, queryData, (err, data) => {\n      messageBk.toDownloadableClientFormatMessages(req, data.results.results, (err, convertedResults) => {\n        if (err){\n          return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n        }\n        data.results.results = convertedResults;\n        return res.json(util.createPagination(req, data));\n      });\n    });\n  }\n};\n\nexports.listIdeasForMe = class listIdeasForMe extends vw.regUserCallView{\n  _listTopic(req, queryData, cb){\n    var self = this;    \n    userBz.listIdeasByUserId(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'listIdeaByUserId call _listTopic happen error', err.message);\n        return cb(err);\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._listTopic(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._listTopic(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n\n      delete queryData.sender;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });  \n  }\n  \n  handle(req, res, cb){\n    let queryData = {\n      sender: req.user._id,\n      size: parseInt(req.query.size) || 30,\n      page: parseInt(req.query.page) || 1,\n      nextRefObjId: req.query.nextRefObjId,\n      prevRefObjId: req.query.prevRefObjId, \n      category: MessageConstants.ACTIVITY_CATEGORY_TYPES.IDEA\n    };\n\n    this._listTopic(req, queryData, (err, data) => {\n      messageBk.toDownloadableClientFormatMessages(req, data.results.results, (err, convertedResults) => {\n        messageBk.fillTopicTitleInMsgs(req, convertedResults, (err, convertedResults)=>{\n          if (err){\n            return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n          }\n          data.results.results = convertedResults;\n          return res.json(util.createPagination(req, data));\n        })        \n      });\n    });\n  }\n};\n\nexports.listNativesForMe = class listNativesForMe extends vw.ViewBase{\n  _listTopic(req, queryData, cb){\n    var self = this;    \n    userBz.listNativesByUserId(req, queryData, (err, results) =>{\n      if (err){\n        logger.error(req.id, 'listIdeaByUserId call _listTopic happen error', err.message);\n        return cb(err);\n      }\n      if (queryData.prevRefObjId && results.results.length < queryData.size){\n        delete queryData.prevRefObjId;\n        queryData.page = 1;\n        return self._listTopic(req, queryData, cb);\n      }\n      else if(results.results.length === 0 && queryData.nextRefObjId){\n        queryData.prevRefObjId = queryData.nextRefObjId;\n        delete queryData.nextRefObjId;\n        queryData.page -= 1;\n        queryData.includeEqual = true;\n        return self._listTopic(req, queryData, (err, data) => {\n          if (data.results){\n            data.results.havingNextPage = false;\n          }\n          return cb(null, data);\n        });\n      }\n\n      delete queryData.sender;\n      let data = {\n          queryData: queryData,\n          results: results\n      };\n      return cb(null, data);\n    });  \n  }\n  \n  handle(req, res, cb){\n    let me = req.user || req.anonymousUser;\n    let queryData = {\n      sender: me,\n      size: parseInt(req.query.size) || 30,\n      page: parseInt(req.query.page) || 1,\n      nextRefObjId: req.query.nextRefObjId,\n      prevRefObjId: req.query.prevRefObjId,     \n    };\n\n    this._listTopic(req, queryData, (err, data) => {\n      messageBk.toDownloadableClientFormatMessages(req, data.results.results, (err, convertedResults) => {\n        messageBk.fillTopicTitleInMsgs(req, convertedResults, (err, convertedResults)=>{\n          if (err){\n            return res.json({data:[], total:0, nextPageUrl:'', previousPageUrl:''});\n          }\n          data.results.results = convertedResults;\n          return res.json(util.createPagination(req, data));\n        })        \n      });\n    });\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/api/user/user.controller.js\n **/","'use strict';\n\nvar express = require('express');\nvar passport = require('passport');\nvar config = require('../config');\nvar User = require('../api/user/user.model');\n\n// Passport Configuration\nrequire('./local/passport').setup(User, config);\n\nvar router = express.Router();\n\nrouter.use('/local', require('./local'));\nrouter.use('/oauth', require('./oauth'));\n\nmodule.exports = router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/index.js\n **/","'use strict';\n\nimport passport from 'passport';\nimport auth from '../auth.service';\nimport { Router } from 'express';\n\nconst router =  new Router();\nrouter.post('/', function(req, res, next) {\n  passport.authenticate('local', function (err, user, info) {\n    var error = err || info;\n    if (error) return res.status(401).json(error);\n    if (!user) return res.status(404).json({message: 'Something went wrong, please try again.'});\n\n    var token = auth.signToken(user._id, user.role);\n    res.json({token: token});\n  })(req, res, next)\n});\n\nmodule.exports = router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/local/index.js\n **/","import passport from 'passport';\nimport { Strategy } from 'passport-local';\n\nexports.setup = function (User, config) {\n  passport.use(new Strategy({\n      usernameField: 'username',\n      passwordField: 'password' // this is the virtual field on the model\n    },\n    function(username, password, done) {\n      console.log('this is email and paswowrds',username, password);\n      User.findOne({\n        username: username.toLowerCase()\n      }, function(err, user) {\n        if (err) return done(err);\n\n        if (!user) {\n          return done(null, false, { message: 'This email is not registered.' });\n        }\n        if (!user.authenticate(password)) {\n          return done(null, false, { message: 'This password is not correct.' });\n        }\n        return done(null, user);\n      });\n    }\n  ));\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/local/passport.js\n **/","/**\n * http://usejsdoc.org/\n */\n\nimport OAuthAccessTokens from './accessToken.model';\nimport User from '../../../api/user/user.model';\nimport config from '../../../config';\nimport auth from '../../auth.service.js';\nimport logger from '../../../modules/logger';\nimport vw from '../../../api/viewBase/viewBase';\nimport esErr from '../../../errors/errors';\nimport dbWp from '../../../utils/dbwrapper';\nimport async from 'async';\n\nexports.sync_add_accesstoken = function(src, data, cb){\n    var accesstoken = data.token;\n    var onesnaUser = data.onesnaUser;\n    async.waterfall([\n        function(callback){\n            dbWp.execute(User, User.findOne, src.id, {ndbid: accesstoken.userId}, callback);\n        },\n        function(user, callback){\n            if (!user || user.lastupdatetime !== onesnaUser.lastupdatetime){\n                onesnaUser.ndbid = onesnaUser.id;\n                onesnaUser.secret = onesnaUser.security_token;\n                delete onesnaUser.id;\n                logger.info(src.id, 'User need insert or update by new data ' + onesnaUser.username);\n                dbWp.execute(User, User.findOneAndUpdate, src.id, {ndbid: onesnaUser.ndbid},onesnaUser, {upsert: true, new: true}, (err, savedUser)=>{\n                  if (!err){\n                    return callback(null, savedUser);\n                  }\n                  else if (err.code == esErr.DBErrorDuplicateKey){\n                    //Under ndbid unique and username unique condition, happen such error only possible be username duplicate\n                    //To avoid problem of endless loop, get user by username and replace secret in memory to make verify pass\n                    logger.info(reqid, 'Happen duplicate username ' + onesnaUser.username + '. Get user by same username from db!');\n                    dbWp.execute(User, User.findOne, reqid, {username: onesnaUser.username}, (err, savedUser)=>{\n                      if (err || (!savedUser)){\n                        logger.error(reqid, 'Failed to get user by username ' + onesnaUser.username);\n                        return cb(new esErr.ESErrors(esErr.SyncAddAccessTokenFailed));\n                      }\n                      return callback(null, savedUser);\n                    });\n                  }\n                  else{\n                    return callback(err, savedUser);\n                  }\n                });\n            }\n            else{\n                return callback(null, user);\n            }\n        },\n        function(saved, callback){\n            if (!saved) {\n                logger.info(src.id, 'Insert or update user failed');\n                return callback(new esErr.ESErrors(esErr.SyncAddAccessTokenFailed));\n            }\n            dbWp.execute(OAuthAccessTokens,\n                         OAuthAccessTokens.create,\n                         src.id,\n                         {\n                            accessToken: accesstoken.token,\n                            clientId: accesstoken.clientId,\n                            userId: saved._id,\n                            expires: accesstoken.expires,\n                            scope: accesstoken.scope\n                         },\n                         callback);\n        },\n        function(access_token, callback){\n            return callback(null, access_token);\n        }\n    ], function(err, result){\n        return cb(err, result);\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/oauth/accessToken/accessToken.backend.js\n **/","import OAuthAccessTokens from './accessToken.model';\nimport OAuthAccessTokensBackend from './accessToken.backend';\nimport User from '../../../api/user/user.model';\nimport config from '../../../config';\nimport auth from '../../auth.service.js';\nimport logger from '../../../modules/logger';\nimport vw from '../../../api/viewBase/viewBase';\nimport esErr from '../../../errors/errors';\nimport cst from '../../../utils/serverConstants';\nimport dbWp from '../../../utils/dbwrapper';\n\nexports.deleteTokens = class deleteTokens extends vw.serverCallView{   \n    handle(req, res, cb){\n        if (!req.body || !req.body.accesstokens) {\n            logger.error(req.id, 'Bad request, missing token');\n            return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SyncDeleteAccessTokenInvalidData));\n        }\n        let src = {\n            reqId: req.id,\n            type: 'req',\n            domain: req.esDomain,\n        };\n        dbWp.execute(OAuthAccessTokens,\n                     OAuthAccessTokens.remove,\n                     req.id,\n                     {\n                        accessToken: {\n                        $in: req.body.accesstokens\n                        }\n                     },\n                     function(err, result){\n                         if (err) {\n                             logger.error(src.id, 'Error while deleting tokens ', req.body.accesstoken, err);\n                             return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SyncDeleteAccessTokenFailed));\n                         }\n                         return res.status(cst.HttpSuccessStatus).json({});\n                     });\n                     \n    }\n};\n    \nexports.newToken = class newToken extends vw.serverCallView{\n    handle(req, res, cb){\n        if (!req.body || !req.body.accesstoken) {\n            logger.error(req.id, 'Bad request, missing token');\n            return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SyncAddAccessTokenInvalidData));\n        }\n        var token = req.body.accesstoken;\n        if (!token.token || !token.clientId || !token.userId || !token.expires || !token.scope) {\n            logger.error(req.id, 'Bad request without accesstoken, please check payload');\n            return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SyncAddAccessTokenInvalidData));\n        }\n        var onesnaUser = req.body.user;\n        if (!onesnaUser){\n            logger.error(req.id, 'Bad request with out user, please check payload');\n            return res.status(cst.HttpErrorStatus).json(new esErr.ESErrors(esErr.SyncAddAccessTokenInvalidData));\n        }\n        let src = {\n            reqId: req.id,\n            type: 'req',\n            domain: req.esDomain,\n        };\n        let data = {\n           token: token,\n           onesnaUser: onesnaUser\n        };\n        OAuthAccessTokensBackend.sync_add_accesstoken(src, data, function(err, result){\n            if (err){\n                logger.error(src.id, 'Error syncing accesstoken for this user ',data, err);\n                return res.status(cst.HttpErrorStatus).json(err);\n            }\n            return res.status(cst.HttpSuccessStatus).json({});\n        });\n    }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/oauth/accessToken/accessToken.controller.js\n **/","'use strict';\n\nimport passport from 'passport';\nimport auth from '../auth.service';\nimport { Router } from 'express';\nimport accessToken from './accessToken/accessToken.controller';\nconst router =  new Router();\nimport vW from '../../api/viewBase/viewBase';\n\nrouter.post('/accesstokens/add', vW.asView(accessToken.newToken));\nrouter.post('/accesstokens/delete', vW.asView(accessToken.deleteTokens));\n\n\nmodule.exports = router;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/oauth/index.js\n **/","var siteAdminList = [\n   'ericd@esna.com',\n   'zackc@esna.com',\n   'rayg@esna.com',\n   'andreasi@esna.com',\n   'mo@esna.com',\n   'harryh@esna.com',\n   'mehdi@esna.com'];\n\nmodule.exports = function(inUsername){\n  if (siteAdminList.indexOf(inUsername) >= 0){\n    return true;\n  }\n  return false;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/siteAdmin-config.js\n **/","import xtend from 'xtend';\nimport config from '../config';\nimport jwt from 'jsonwebtoken';\n\nimport User from '../api/user/user.model';\nimport Anonymous from '../api/anonymous/anonymous.model';\nimport logger from '../modules/logger';\nimport request from 'request';\nimport { Oauth2Authenticator } from './auth.service';\nimport { OAuthAuthorizer } from './authorizers';\nimport cst from '../utils/serverConstants';\nimport {socketCache} from './lru';\nimport _ from 'lodash';\nimport esErr from  '../errors/errors';\n\nfunction UnauthorizedError (code, error) {\n    Error.call(this, error.message);\n    this.message = error.message;\n    this.inner = error;\n    this.data = {\n        message: this.message,\n        code: code,\n        type: \"UnauthorizedError\"\n    };\n}\n\nUnauthorizedError.prototype = Object.create(Error.prototype);\nUnauthorizedError.prototype.constructor = UnauthorizedError;\n\nfunction getTokenSecret (token, cb) {\n    if (!token) {\n        return cb({ message: 'Can not find a valid token' });\n    }\n    var payload = jwt.decode(token);\n    var uid = payload.user_id;\n    // for Anonymous token\n    if (payload.anonymous_id) {\n        Anonymous.findById(payload.anonymous_id, function (err, anonymous) {\n            if (err || !anonymous) return cb(null);\n            if (anonymous) {\n                var secret = (new Buffer(anonymous.secret, 'utf-8')).toString('binary');\n                return cb(anonymous, secret);\n            }\n        });\n    } else {\n        // for Onesna token\n        User.findOne({ndbid: uid}, function (err, user) {\n            if (err || !user) return cb(null);\n            if (user) {\n                var secret = (new Buffer(user.secret, 'utf-8')).toString('binary')\n                return cb(user, secret + config.commonSecretJwt, token);\n            }\n        });\n    }\n}\n\n\nfunction noQsMethod(options) {\n    return function (socket) {\n        var server = this;\n\n        if (!server.$emit) {\n            //then is socket.io 1.0\n            var Namespace = Object.getPrototypeOf(server.server.sockets).constructor;\n            if (!~Namespace.events.indexOf('authenticated')) {\n                Namespace.events.push('authenticated');\n            }\n        }\n\n        var auth_timeout = setTimeout(function () {\n            socket.disconnect('unauthorized');\n        }, options.timeout || 5000);\n\n        socket.on('authenticate', function (data) {\n            clearTimeout(auth_timeout);\n            getTokenSecret(token, function(user, secret){\n                jwt.verify(token, secret, options, function(err, decoded) {\n                    if (err) {\n                        return socket.disconnect('unauthorized');\n                    }\n                    data.user = user;\n                    data.decoded_token = xtend({_id: user._id}, decoded);\n                    socket.emit('authenticated');\n                    if (server.$emit) {\n                        server.$emit('authenticated', socket);\n                    } else {\n                        server.server.sockets.emit('authenticated', socket);\n                    }\n                });\n            });\n        });\n\n    };\n}\n\nfunction authorize(options, onConnection) {\n    var defaults = {\n        success: function(data, accept){\n            if (data.request) {\n                accept();\n            } else {\n                accept(null, true);\n            }\n        },\n        fail: function(error, data, accept){\n            if (data.request) {\n                accept(error);\n            } else {\n                accept(null, false);\n            }\n        }\n    };\n\n    var auth = xtend(defaults, options);\n\n    if (!options.handshake) {\n        return noQsMethod(options);\n    }\n\n    return function(data, accept){\n        var token, error;\n        var req = data.request || data;\n        var authorization_header = (req.headers || {}).authorization;\n        var method;\n\n        if (authorization_header) {\n            var parts = authorization_header.split(' ');\n            if (parts.length == 2) {\n                var scheme = parts[0],\n                    credentials = parts[1];\n\n                if (/^Bearer$/i.test(scheme)) {\n                    token = credentials;\n                }\n            } else {\n                error = new UnauthorizedError('credentials_bad_format', {\n                    message: 'Format is Authorization: Bearer [token]'\n                });\n                return auth.fail(error, data, accept);\n            }\n        }\n\n        //get the token from query string\n        if (req._query && req._query.token) {\n            token = req._query.token;\n            //here check token type\n            method = req._query.tokenType || 'jwt';\n        }\n        else if (req.query && req.query.token) {\n            token = req.query.token;\n        }\n\n        if (!token) {\n            error = new UnauthorizedError('credentials_required', {\n                message: 'No Authorization header was found'\n            });\n            return auth.fail(error, data, accept);\n        }\n\n        if (method === 'jwt') {\n            var cacheToken = 'jwt ' + token;\n            if (cacheToken && socketCache.get(cacheToken)) {\n              var cachedObj = socketCache.get(cacheToken);\n              _.assign(data, cachedObj);\n              logger.info(req.id, 'Got user/anonymous from cache');\n              auth.success(data, accept);\n            } else {\n                getTokenSecret(token, function(user, secret){\n                    jwt.verify(token, secret, options, function(err, decoded) {\n                        if (err) {\n                            error = new UnauthorizedError('invalid_token', err);\n                            return auth.fail(error, data, accept);\n                        }\n                        logger.info('socket jwt decoded:', decoded);\n\n                        if (user.aType === 'user') {\n                            data.user = user;\n                        }\n                        if (user.aType === 'anonymous') {\n                            data.anonymousUser = user;\n                        }\n                        data.decoded_token = xtend({_id: user._id}, decoded);\n                        socketCache.set(cacheToken, {user: data.user, anonymousUser: data.anonymousUser, decoded_token: data.decoded_token});\n                        auth.success(data, accept);\n                    });\n                });\n            }\n        } else if (method === 'oauth') {\n            var cacheToken = 'Bearer ' + token;\n            if (cacheToken && socketCache.get(cacheToken)) {\n              var cachedObj = socketCache.get(cacheToken);\n              _.assign(data, cachedObj);\n              logger.info(req.id, '[SocketOauthAuth]Got user/anonymous from cache', cacheToken);\n              return auth.success(data, accept);\n            } else {\n              var oauthAuthen = new Oauth2Authenticator();\n              var oauthAuthor = new OAuthAuthorizer()\n              oauthAuthen.verify(token, function(err, user){\n                  if (err){\n                      return auth.fail(err, data, accept);\n                  }\n                  let scope = oauthAuthen.accessToken.scope;\n\n                  if (oauthAuthor.scopesCompareOtherScopes(scope, [cst.OAuth2ScopeLogan]) == cst.IncludeScope){\n                    data.user = user;\n                    socketCache.set(cacheToken, {user: user});\n                    return auth.success(data, accept);\n                  } else {\n                    return auth.fail(new esErr.ESErrors(esErr.AuthorizeErrorOauth2), data, accept);\n                  }\n              });\n            }\n        }\n    }\n};\n\nexports.authorize = authorize;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/auth/socket.auth.js\n **/","/**\n * Created by ericd on 01/12/2015.\n */\n'use strict';\n\nvar uuid =require('node-uuid');\nvar logger = require('../modules/logger');\nvar morgan = require('morgan');\nvar os = require(\"os\");\nvar errorHandler = require('errorhandler');\nvar config = require('./environment');\nvar async = require('async');\nvar pmx = require('pmx');\nvar winstonStream = {\n        write: function(message, encoding){\n            logger.info(message);\n        }\n    };\n\nconst WORLDWIDEWEBHEADER = 'www.';\nmorgan.token('id', function getId(req){\n        return req.id;\n    })\n\nmorgan.format('logan-onServer', function developmentFormatLine(tokens, req, res) {\n// get the status code if response written\n    var status = res._header\n      ? res.statusCode\n      : undefined\n\n    // get status color\n    var color = status >= 500 ? 31 // red\n      : status >= 400 ? 33 // yellow\n      : status >= 300 ? 36 // cyan\n      : status >= 200 ? 32 // green\n      : 0 // no color\n\n    // get colored function\n    var fn = developmentFormatLine[color]\n\n    if (!fn) {\n      // compile\n      fn = developmentFormatLine[color] = morgan.compile('MorganRequest :id :remote-addr - :remote-user [:date] \\x1b[0m:method :url \\x1b['\n        + color + 'm:status \\x1b[0m:response-time ms - :res[content-length]\\x1b[0m :referrer :user-agent')\n    }\n\n    return fn(tokens, req, res);\n});\n\n \nmorgan.format('logan-dev', function developmentFormatLine(tokens, req, res) {\n// get the status code if response written\n    var status = res._header\n      ? res.statusCode\n      : undefined\n\n    // get status color\n    var color = status >= 500 ? 31 // red\n      : status >= 400 ? 33 // yellow\n      : status >= 300 ? 36 // cyan\n      : status >= 200 ? 32 // green\n      : 0 // no color\n\n    // get colored function\n    var fn = developmentFormatLine[color]\n\n    if (!fn) {\n      // compile\n      fn = developmentFormatLine[color] = morgan.compile(':id \\x1b[0m:method :url \\x1b['\n        + color + 'm:status \\x1b[0m:response-time ms - :res[content-length]\\x1b[0m')\n    }\n\n    return fn(tokens, req, res)\n});\n\nvar appendReqId = function (req, res, next) {\n    req.id = uuid.v4();\n    if (next) {\n      next();\n    }\n};\n\nvar appendHost = function (req, res, next) {\n    res.header('Logan-Host',os.hostname());\n    if (next) {\n      next();\n    }\n};\n\nvar appendVersion = function (req, res, next) {\n    res.header('Logan-Version',config.version);\n    if (next) {\n      next();\n    }\n};\n\nvar getDomainFromHost = function(req, res, next){\n    var domain = req.hostname;\n    if (domain.startsWith(WORLDWIDEWEBHEADER)){\n        domain = domain.substr(WORLDWIDEWEBHEADER.length);\n    }\n    req.esDomain = domain;\n    if (next) {\n        next();\n    }\n};\n\nvar getProcessMeta = function(req, res, next){\n    var meta = {\n        host: os.hostname(),\n        version: config.version,\n        pid: process.pid,\n        platform: process.platform,\n        deployment_type: config.env\n    };\n   \n    req.meta = meta;\n    if (next) {\n        next();\n    }\n};\n\nvar checkSysUA = function (req, res, next) {\n    if (process.env['mongoUA'] === 'disconnected') {\n        logger.error(req.id, 'Database connection stopped');\n        return res.status(cst.HttpCriticalErrorStatus).json('Database connection Error');\n    }\n    if (next) {\n        next();\n    }\n};\n\nfunction parallel(middlewares) {\n  return function (req, res, next) {\n    async.each(middlewares, function (mw, cb) {\n      mw(req, res, cb);\n    }, next);\n  };\n};\n\nmodule.exports = function(app) {\n    var env = app.get('env');\n    app.use(parallel([\n      appendReqId,\n      appendHost,\n      appendVersion,\n      getDomainFromHost,\n      getProcessMeta\n      \n    ]));\n    app.use(checkSysUA);\n    app.set('appPath', config.root + '/build');\n\n    \n    // CORS configuration\n    // -----------------------------------------------------------------------------\n    \n    // var cors = {\n    //   origin: config.allowOrigins\n    // };\n\n    // app.use(function(req, res, next) {\n    //     var origin = cors.origin.indexOf(req.header('origin').toLowerCase()) > -1 ? req.headers.origin : cors.origin[0];\n    //     res.header('Access-Control-Allow-Origin', origin);\n    //     res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');\n    //     res.header('Access-Control-Allow-Headers', 'Content-Type');\n    //     next();\n    // });\n\n    app.use(morgan('logan-onServer',{stream:winstonStream}));\n    if ('logan-production' === env || 'logan-staging' === env) {\n        // app.use(pmx.expressErrorHandler());\n    }\n    if ('development' === env || 'logan-testing' === env) {\n        app.use(pmx.expressErrorHandler());\n    }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/customizedMiddlewares.js\n **/","var ns = '[ClientEnvironment]';\n\nimport Log from 'ZSLogger';\n\nconst ClientEnvironment = {};\n\nClientEnvironment.defaultChatEventServer = 'localhost';\nClientEnvironment.defaultLocalhostPort = '';  //can be set to 8080 for local SEWebsever test.\n\nClientEnvironment.defaultLoginPageURLParams = '&product_name=zangspaces&login_view=google,office365,salesforce,native_expanded';\n\nClientEnvironment.SERVER_TYPES = {\n\tlocalhost: 'localhost',\n\tdataServer: 'dataServer',\n\teventServer: 'eventServer',\n\tloginServer: 'loginServer',\n\twcsServer: 'wcsServer'\n}\n\n\nClientEnvironment.LOCAL_TESTING_PORTS = {\n\tfrom: 5000,\n\tto: 5100\n}\nClientEnvironment.serversSubdomains = {\n\tlocalhost: {\n    environmentGUID: 'c182f6b2-5a21-4b66-9633-1969e0d0a6bd',\n\t\tdataServer: {\n\t\t\tsubdomain: '',\n\t\t\tport: '',\n\t\t},\n\t\teventServer: {\n\t\t\tsubdomain: '',\n\t\t\tport: '',\n\t\t},\n\t\tloginServer: {\n\t\t\tsubdomain: '',\n\t\t\tport: '',\n\t\t},\n\t\twcsServer: {\n\t\t\tsubdomain: 'wcs.onesna.com',\n\t\t\tport: '',\n\t\t}\n\t},\n\n\tloganlocal: {\n\tga: \"UA-77749335-1\",\n    environmentGUID: 'adba6ebc-0d04-45c0-9e93-5a81371b1dd9',\n\t\tdataServer: {\n\t\t\tsubdomain: 'loganlocal',\n\t\t\tport: '',\n\t\t},\n\t\teventServer: {\n\t\t\tsubdomain: 'loganlocal-socket',\n\t\t\tport: '',\n\t\t},\n\t\tloginServer: {\n\t\t\tsubdomain: 'onesnatesting',\n\t\t\tport: '',\n\t\t},\n\t\twcsServer: {\n\t\t\tsubdomain: 'wcs.onesna.com', //'wcs.onesna.com',\n\t\t\tport: '',\n\t\t}\n\t},\n\n\tlogantesting: {\n    environmentGUID: 'c899837d-fa1e-4652-a23b-a13328f146bf',\n    ga: \"UA-77334981-2\",\n\t\tdataServer: {\n\t\t\tsubdomain: 'logantesting',\n\t\t\tport: '',\n\t\t},\n\t\teventServer: {\n\t\t\tsubdomain: 'logantesting-socket',\n\t\t\tport: '',\n\t\t},\n\t\tloginServer: {\n\t\t\tsubdomain: 'onesnatesting',\n\t\t\tport: '',\n\t\t},\n\t\twcsServer: {\n\t\t\tsubdomain: 'wcstesting.onesna.com',\n\t\t\tport: '',\n\t\t}\n\t},\n\n\tloganstaging: {\n    environmentGUID: 'a22c8891-38f6-4778-be98-bda35b1d99c7',\n\t\tdataServer: {\n\t\t\tsubdomain: 'loganstaging',\n\t\t\tport: '',\n\t\t},\n\t\teventServer: {\n\t\t\tsubdomain: 'loganstaging-socket',\n\t\t\tport: '',\n\t\t},\n\t\tloginServer: {\n\t\t\tsubdomain: 'onesnastaging',\n\t\t\tport: '',\n\t\t},\n\t\twcsServer: {\n\t\t\tsubdomain: 'wcs.onesna.com',\n\t\t\tport: '',\n\t\t}\n\t},\n\n\tlogan: {\n    environmentGUID: 'f1eb721d-3a98-485d-9365-8bd6882c3081',\n    ga: \"UA-77334981-1\",\n\t\tdataServer: {\n\t\t\tsubdomain: 'logan',\n\t\t\tport: '',\n\t\t},\n\t\teventServer: {\n\t\t\tsubdomain: 'logan-socket',\n\t\t\tport: '',\n\t\t},\n\t\tloginServer: {\n\t\t\tsubdomain: 'www',\n\t\t\tport: '',\n\t\t},\n\t\twcsServer: {\n\t\t\tsubdomain: 'wcs.onesna.com',\n\t\t\tport: '',\n\t\t}\n\t}\n};\n\nClientEnvironment.isLocalTesting = function(port, endpointType) {\n\treturn (port >= ClientEnvironment.LOCAL_TESTING_PORTS.from\n\t&& port <= ClientEnvironment.LOCAL_TESTING_PORTS.to\n\t&& endpointType != ClientEnvironment.SERVER_TYPES.loginServer);\n};\n\nClientEnvironment.getGUID = function(){\n  Log.log(ns + '[getGUID]');\n  let parts = window.location.hostname.split('.');\n  let i=0;\n  for(; i<parts.length;i++){\n    let part = parts[i];\n    let cand = part.split('-');\n    if(cand.length>0)\n      return ClientEnvironment.serversSubdomains[cand[0]].environmentGUID;\n    if(ClientEnvironment.serversSubdomains[part])\n      return ClientEnvironment.serversSubdomains[part].environmentGUID;\n  }\n};\n\nClientEnvironment.getServerRootUrl = function(endpointType, location){\n\tvar func = ns + '[getServerMode]';\n\tif(!location){\n\t\tlocation = window.location;\n\t}\n\tvar hostname = location.hostname;\n\tLog.log(func, 'endpointType', endpointType, 'hostname', hostname);\n\n\tvar candidate = '';\n\tvar socketPref = '';\n\tvar subDomain = 'localhost';\n\tvar domain = 'localhost';\n\tif (hostname.indexOf('localhost') < 0) {\n\t\tvar hst = hostname.split('.');\n\t\tLog.log(func, 'hst', hst);\n\t\tsubDomain = hst[0];\n\t\tif(hst.length>0){\n\t\t\thst.splice(0, 1);\n\t\t}\n\n\n\t\tvar candidateTag = subDomain.replace('-socket', '');\n\t\tvar socketTag = subDomain.replace('-candidate', '');\n\n\t\tvar lstCandid = candidateTag.split('-');\n\t\tif(lstCandid.length>1){\n\t\t\tsubDomain = lstCandid[0];\n\t\t\tcandidate = '-' + lstCandid[1];\n\t\t}\n\n\t\tvar lstSock = socketTag.split('-');\n\t\tif(lstSock.length>1){\n\t\t\tsubDomain = lstSock[0];\n\t\t\tsocketPref = '-' + lstSock[1];\n\t\t}\n\n\n\t\tLog.log(func, 'hst', hst);\n\t\tvar domain = hst.join('.');\n\t}\n\tLog.log(func, 'domain', domain);\n\tLog.log(func, 'subDomain', subDomain);\n\tLog.log(func, 'candidate', candidate, 'socketPref', socketPref);\n\n\tif(endpointType==ClientEnvironment.SERVER_TYPES.loginServer){\n\t\tcandidate = '';\n\t\tsocketPref = '';\n\t}\n\n\tif(endpointType==ClientEnvironment.SERVER_TYPES.eventServer){\n\t\tsocketPref = '';\n\t}\n\tLog.log(func, 'candidate', candidate, 'socketPref', socketPref);\n\n\n\tvar subObj = ClientEnvironment.serversSubdomains[subDomain];\n\tif(subObj) {\n\t\tsubObj = subObj[endpointType];\n\t\tLog.log(func, 'subObj', subObj);\n\t\tvar port = '';\n\t\tvar url = '';\n\t\tif(ClientEnvironment.isLocalTesting(location.port, endpointType)){\n\t\t\tsubObj.port = location.port;\n\t\t}\n\t\tif(subObj.port){\n\t\t\tport=':' + subObj.port;\n\t\t}\n\n\t\tif(subObj.subdomain=='localhost'){\n\t\t\turl = location.protocol + '//' + subObj.subdomain + port;// + '/';\n\t\t}\n\t\telse {\n\t\t\turl = location.protocol + '//' + subObj.subdomain + socketPref + candidate + '.' + domain + port;// + '/';\n\t\t}\n\n\t\tif(endpointType==ClientEnvironment.SERVER_TYPES.wcsServer){\n\t\t\turl = subObj.subdomain;\n\t\t}\n\n\t\tLog.log(func, 'url', url);\n\t\treturn url\n\t}\n};\n\nClientEnvironment.getGoogleAnalyticKey = function(location){\n var func = ns + '[getGoogleAnalyticKey]';\n if(!location){\n  location = window.location;\n }\n var hostname = location.hostname;\n Log.log(func, 'hostname', hostname);\n\n var candidate = '';\n var socketPref = '';\n var subDomain = 'localhost';\n var domain = 'localhost';\n if (hostname.indexOf('localhost') < 0) {\n  var hst = hostname.split('.');\n  Log.log(func, 'hst', hst);\n  subDomain = hst[0];\n  if(hst.length>0){\n   hst.splice(0, 1);\n  }\n\n\n  var candidateTag = subDomain.replace('-socket', '');\n  var socketTag = subDomain.replace('-candidate', '');\n\n  var lstCandid = candidateTag.split('-');\n  if(lstCandid.length>1){\n   subDomain = lstCandid[0];\n   candidate = '-' + lstCandid[1];\n  }\n\n  var lstSock = socketTag.split('-');\n  if(lstSock.length>1){\n   subDomain = lstSock[0];\n   socketPref = '-' + lstSock[1];\n  }\n\n\n  Log.log(func, 'hst', hst);\n  var domain = hst.join('.');\n }\n Log.log(func, 'domain', domain);\n Log.log(func, 'subDomain', subDomain);\n Log.log(func, 'candidate', candidate, 'socketPref', socketPref);\n\n var subObj = ClientEnvironment.serversSubdomains[subDomain];\n if(subObj) {\n  return subObj.ga;\n }\n return null;\n};\n\nexport default ClientEnvironment;\n\n//https://developers.google.com/drive/web/quickstart/js\n//ClientEnvironment.loginServer= {\n//\t'localhost': {\n//\t\t'endpoint': 'https://onesnatesting.appspot.com/' //'http://localhost:8080/'\n//\t},\n//\t'testing':{\n//\t\t'endpoint': 'https://onesnatesting.appspot.com/'\n//\t},\n//\t'staging': {\n//\t\t'endpoint': 'https://onesnastaging.appspot.com/'\n//\t},\n//\t'production': {\n//\t\t'endpoint': 'https://www.onesna.com/'\n//\t}\n//};\n//\n//ClientEnvironment.dataServer= {\n//\t'localhost': {\n//\t\t'endpoint': 'http://logan.onesnatesting.appspot.com:5000/'\n//\t},\n//\t'testing':{\n//\t\t'endpoint': 'https://onesnatesting.appspot.com/'\n//\t},\n//\t'staging': {\n//\t\t'endpoint': 'https://logan.onesnastaging.appspot.com/'\n//\t},\n//\t'production': {\n//\t\t'endpoint': 'https://www.onesna.com/'\n//\t}\n//};\n//\n//ClientEnvironment.chatEventServer = {\n//\t'localhost': {\n//\t\t'endpoint':       ['http://logan.onesnatesting.appspot.com:5000']\n//\t},\n//\t'testing':{\n//\t\t'endpoint':       ['https://esnachat-test.azurewebsites.net']\n//\t},\n//\t'staging': {\n//\t\t'endpoint':       ['https://esnachat-staging.azurewebsites.net']\n//\t},\n//\t'production': {\n//\t\t'endpoint':       ['https://esnachat-1.azurewebsites.net', 'https://esnachat-2.azurewebsites.net' ]\n//\t}\n//};\n//\n//ClientEnvironment.getDefaultServerMode = function(url, port) {\n//\tLog.log('url', url);\n//\tif(port==5000){\n//\t\treturn 'localhost';\n//\t}\n//\n//\tif (url) {\n//\t\tif (url.indexOf('staging') > 0) {\n//\t\t\treturn 'staging';\n//\t\t}\n//\t\tif (url.indexOf('test') > 0) {\n//\t\t\treturn 'test';\n//\t\t}\n//\t\tif (url.indexOf('onesna.com') > 0) {\n//\t\t\treturn 'production';\n//\t\t}\n//\t}\n//\n//\treturn 'localhost';\n//};\n//\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/clientEnvironment.js\n **/","// Development specific configuration\n// ==================================\nvar util = require('./config-helper');\n\nmodule.exports = {\n  // MongoDB connection options\n  env: 'development',\n  ESNA_API_KEY: \"b05f5eaa-42be-4830-a7b1-d44e7119c9e0\",\n  socketServers: ['http://logan.onesnatesting.appspot.com:5000'],\n  port: process.env.PORT || 5000,\n  esnaSubdomain:'onesnatesting',\n  mongo: {\n    uri: process.env.DB_URI || 'mongodb://esnadb:esna1234@ds055574.mongolab.com:55574/dev',\n    //uri: 'mongodb://127.0.0.1:27017/logan-dev',\n    options: {\n            db: {\n                safe: true\n            },\n            server:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            },\n            replset:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            }\n        }\n  },\n  logDB: {\n    uri: process.env.LOGDB_URI || 'mongodb://esnadb:esna1234@ds055574.mongolab.com:55574/dev',\n    //uri: 'mongodb://127.0.0.1:27017/logan-dev',\n    options: {\n        db: {\n            safe: true\n        },\n        server:{\n            socketOptions:{\n                keepAlive:1,\n                connectTimeoutMS:30000\n            }\n        },\n        replset:{\n            socketOptions:{\n                keepAlive:1,\n                connectTimeoutMS:30000\n            }\n        }\n    },\n    logSize: 150000000\n  },\n  redis: {\n    host: process.env['REDIS_HOST'] || 'pub-redis-14647.us-east-1-3.7.ec2.redislabs.com',\n    port: process.env['REDIS_PORT'] || 14647,\n    auth: process.env['REDIS_AUTH'] || 'logantesting',\n    ssl: false\n  },\n  getLink: function (domain) {\n    return 'http://' + domain + ':' + this.port;\n  },\n  getEsnaLink: function (domain) {\n    var iss = util.getIssFromHostname(domain);\n    return process.env.ESNA_LINK || 'https://' + this.esnaSubdomain + '.' + iss;\n  },\n  logLevel: process.env['LOG_LEVEL'] || 'silly',\n  mongoLog: true,\n  logRoutes: true,\n  googleAnalyticsId: process.env['GA'] || \"UA-77749335-1\",\n  sslServer: process.env['sslServer'] || false,\n  SubDomains: {\n    'socket': '',\n    'task': ''\n  },\n  gcloudKey: require('path').normalize(__dirname + '/..') + '/private/gcskey_testing.json',\n  projectId: 'onesnatesting',\n  bucket: 'onesnatesting',\n  tempExtneralBucket: 'onesnatesting_temp_external',\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/development.js\n **/","// Production specific configuration\n// =================================\nvar util = require('./config-helper');\nvar fs = require('fs');\nvar keyPem = fs.readFileSync(process.env['DB_KEY_PATH']);\n\n\nexport default {\n  env: 'logan-production',\n  getLink: function (domain) {\n    return 'https://' + domain;\n  },\n  getEsnaLink: function (domain) {\n    var iss = util.getIssFromHostname(domain);\n    return 'https://www.' + iss;\n  },\n  // Server IP\n  ip:       process.env.OPENSHIFT_NODEJS_IP ||\n            process.env.IP ||\n            undefined,\n\n  // Server port\n  port:     process.env.OPENSHIFT_NODEJS_PORT ||\n            process.env.PORT ||\n            8080,\n\n  // MongoDB connection options\n  mongo: {\n    uri:    process.env.DB_URI,\n    options: {\n            db: {\n                safe: true\n            },\n            server:{\n                sslValidate:true,\n                sslCA:keyPem,\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            },\n            replset:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            }\n        }\n  },\n  logDB: {\n    uri:    process.env.LOGDB_URI,\n    options: {\n            db: {\n                safe: true\n            },\n            server:{\n                sslValidate:true,\n                sslCA:keyPem,\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            },\n            replset:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            }\n        },\n    logSize: 1000000000\n  },\n  redis: {\n    host: process.env['REDIS_HOST'],\n    port: process.env['REDIS_PORT'],\n    auth: process.env['REDIS_AUTH'],\n    ssl: (process.env['REDIS_KEY_PATH'] && process.env['REDIS_CERT_PATH']) ? {\n      key: fs.readFileSync(process.env['REDIS_KEY_PATH']),\n      cert: fs.readFileSync(process.env['REDIS_CERT_PATH'])\n    } : !(process.env['REDIS_USE_SSL']==='false')\n  },\n  mongoLog: true,\n  viewId: 121556116,\n  googleAnalyticsId: \"UA-77334981-1\",\n  useRedis: process.env['USE_REDIS'] || true,\n  logLevel: process.env['LOG_LEVEL'] || 'info',\n  projectId: 'esna.com:onesna-all',\n  gcloudKey: process.env['GCLOUD_KEY_PATH'],\n  ESNA_API_KEY: process.env['ESNA_API_KEY'],\n  SubDomains: {\n    'socket': 'socket',\n    'task': 'processtask',\n    'candidate': {\n      'socket': '',\n      'task': 'processtask',\n    }\n  },\n  bucket: 'onesna',\n  tempExtneralBucket: 'onesna_temp_external',\n  logglyToken: 'eaa77580-ba2d-4d69-abbf-71d657662dbc',\n  logglySubdomain: 'logantesting'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/logan-production.js\n **/","// Stagging specific configuration\n// =================================\nvar util = require('./config-helper');\nexport default {\n  env: 'logan-staging',\n  esnaSubdomain: 'onesnastaging',\n  getLink: function (domain) {\n    return 'https://' + domain;\n  },\n  getEsnaLink: function (domain) {\n    var iss = util.getIssFromHostname(domain);\n    return 'https://' + this.esnaSubdomain + '.' + iss;\n  },\n  // Server IP\n  ip:       process.env.OPENSHIFT_NODEJS_IP ||\n            process.env.IP ||\n            undefined,\n\n  // Server port\n  port:     process.env.OPENSHIFT_NODEJS_PORT ||\n            process.env.PORT ||\n            8080,\n\n  // MongoDB connection options\n  mongo: {\n    uri:    process.env.DB_URI || 'mongodb://zack:zack@ds061474.mongolab.com:61474/logan-staging',\n    options: {\n            db: {\n                safe: true\n            },\n            server:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            },\n            replset:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            }\n        }\n  },\n  logDB: {\n    uri:    process.env.LOGDB_URI || 'mongodb://zack:zack@ds061474.mongolab.com:61474/logan-staging',\n    options: {\n        db: {\n            safe: true\n        },\n        server:{\n            socketOptions:{\n                keepAlive:1,\n                connectTimeoutMS:30000\n            }\n        },\n        replset:{\n            socketOptions:{\n                keepAlive:1,\n                connectTimeoutMS:30000\n            }\n        }\n    },\n    logSize: 150000000\n  },\n  redis: {\n    host: process.env['REDIS_HOST'] || 'pub-redis-14647.us-east-1-3.7.ec2.redislabs.com',\n    port: process.env['REDIS_PORT'] || 14647,\n    auth: process.env['REDIS_AUTH'] || 'logantesting',\n    ssl: false\n  },\n  mongoLog: true,\n  logLevel: process.env['LOG_LEVEL'] || 'debug',\n  projectId: 'onesnastaging',\n  gcloudKey: process.env['GCLOUD_KEY_PATH'] || require('path').resolve('./private/gcskey_staging.json'),\n  ESNA_API_KEY: process.env['ESNA_API_KEY'] || 'a7e2709c-b1ae-479a-a7ce-f3fab32a3a01',\n  bucket: 'onesnastaging',\n  tempExtneralBucket: 'onesnastaging_temp_external',\n  logglyToken: 'eaa77580-ba2d-4d69-abbf-71d657662dbc',\n  logglySubdomain: 'logantesting'\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/logan-staging.js\n **/","// Test specific configuration\n// ===========================\nvar util = require('./config-helper');\nexport default {\n\tenv: 'logan-testing',\n\tesnaSubdomain: 'onesnatesting',\n  getLink: function (domain) {\n    return 'https://' + domain;\n  },\n  getEsnaLink: function (domain) {\n    var iss = util.getIssFromHostname(domain);\n    return 'https://' + this.esnaSubdomain + '.' + iss;\n  },\n \n  ip:     process.env.OPENSHIFT_NODEJS_IP ||\n          process.env.IP ||\n          undefined,\n\n  // Server port\n  port:   process.env.OPENSHIFT_NODEJS_PORT ||\n          process.env.PORT ||\n          8080,\n  // MongoDB connection options\n\tmongo: {\n\t \turi: process.env.DB_URI || 'mongodb://zack:zack@ds061954.mongolab.com:61954/logan-testing',\n\t \toptions: {\n            db: {\n                safe: true\n            },\n            server:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            },\n            replset:{\n                socketOptions:{\n                    keepAlive:1,\n                    connectTimeoutMS:30000\n                }\n            }\n        }\n\t},\n  logDB: {\n    uri: process.env.LOGDB_URI || 'mongodb://zack:zack@ds061954.mongolab.com:61954/logan-testing',\n    options: {\n        db: {\n            safe: true\n        },\n        server:{\n            socketOptions:{\n                keepAlive:1,\n                connectTimeoutMS:30000\n            }\n        },\n        replset:{\n            socketOptions:{\n                keepAlive:1,\n                connectTimeoutMS:30000\n            }\n        }\n    },\n    logSize: 150000000\n  },\n  redis: {\n    host: process.env['REDIS_HOST'] || 'pub-redis-14647.us-east-1-3.7.ec2.redislabs.com',\n    port: process.env['REDIS_PORT'] || 14647,\n    auth: process.env['REDIS_AUTH'] || 'logantesting',\n    ssl: false\n  },\n\tmongoLog: true,\n  viewId: 121513396,\n  googleAnalyticsId: \"UA-77334981-2\",\n  useRedis: process.env['USE_REDIS'] || true,\n  logLevel: process.env['LOG_LEVEL'] || 'silly',\n\tprojectId: 'onesnatesting',\n  gcloudKey: process.env['GCLOUD_KEY_PATH'] || require('path').resolve('./private/gcskey_testing.json'),\n  ESNA_API_KEY: process.env['ESNA_API_KEY'] || 'b05f5eaa-42be-4830-a7b1-d44e7119c9e0',\n  SubDomains: {\n    'socket': '',\n    'task': ''\n  },\n  bucket: 'onesnatesting',\n  tempExtneralBucket: 'onesnatesting_temp_external',\n  logglyToken: 'eaa77580-ba2d-4d69-abbf-71d657662dbc',\n  logglySubdomain: 'logantesting'\n};\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/environment/logan-testing.js\n **/","/**\n * Express configuration\n */\n\n'use strict';\n\nvar express = require('express'),\n    compression = require('compression'),\n    bodyParser = require('body-parser'),\n    methodOverride = require('method-override'),\n    cookieParser = require('cookie-parser'),\n    path = require('path'),\n    session = require('express-session'),\n    MongoStore = require('connect-mongo')(session),\n    config = require('./environment'),\n    passport = require('passport'),\n    logger = require('../modules/logger'),\n    mongoose = require('mongoose');\n\nfunction haltOnTimedout(req, res, next){\n  if (!req.timedout) next();\n}\n\nmodule.exports = function(app) {\n  app.use(compression());\n  app.use(express.static(path.join(__dirname, 'public')));\n\n  app.use(function (req, res, next) {\n    if (req.url.match(/^\\/(css|js|img|font)\\/.+/)) {\n      logger.debug('setting cache ' + req.url);\n        res.setHeader('Cache-Control', 'public, max-age=3600');\n    }\n    next();\n  });\n  app.use(bodyParser.urlencoded({ extended: false }));\n  app.use(bodyParser.json());\n  app.use(haltOnTimedout);\n  app.use(methodOverride());\n  //app.use(cookieParser());\n  app.use(passport.initialize());\n  app.set('etag', false);\n\n\n//  app.use(function (req, res, next) {\n//    session({\n//        secret: config.secrets.session,\n//        resave: true,\n//        saveUninitialized: true,\n//        store: new MongoStore({mongooseConnection: mongoose.connection})\n//    });\n//    next();\n//  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/config-env/express.js\n **/","/*! React Starter Kit | MIT License | http://www.reactstarterkit.com/ */\n\nimport { join } from 'path';\nimport { Router } from 'express';\nimport jade from 'jade';\nimport fm from 'front-matter';\nimport fs from '../utils/fs';\n\n// A folder with Jade/Markdown/HTML content pages\nconst CONTENT_DIR = join(__dirname, './content');\n\n// Extract 'front matter' metadata and generate HTML\nconst parseJade = (path, jadeContent) => {\n  const fmContent = fm(jadeContent);\n  const htmlContent = jade.render(fmContent.body);\n  return Object.assign({ path, content: htmlContent }, fmContent.attributes);\n};\n\nconst router = new Router();\n\nrouter.get('/', async (req, res, next) => {\n  try {\n    const path = req.query.path;\n\n    if (!path || path === 'undefined') {\n      res.status(400).send({error: `The 'path' query parameter cannot be empty.`});\n      return;\n    }\n\n    let fileName = join(CONTENT_DIR, (path === '/' ? '/index' : path) + '.jade');\n    if (!await fs.exists(fileName)) {\n      fileName = join(CONTENT_DIR, path + '/index.jade');\n    }\n\n    if (!await fs.exists(fileName)) {\n      res.status(404).send({error: `The page '${path}' is not found.`});\n    } else {\n      const source = await fs.readFile(fileName, { encoding: 'utf8' });\n      const content = parseJade(path, source);\n      res.status(200).send(content);\n    }\n  } catch (err) {\n    next(err);\n  }\n});\n\nexport default router;\n\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/content/content.js\n **/","import keyMirror from '../../../node_modules/react-interpolate-component/node_modules/fbjs/lib/keyMirror';\nimport _ from 'underscore';\n\nimport Translate from '../../components/Translate';\nimport MeetingConstants from './MeetingConstants';\n\nvar ns = '[PresenceConstants]';\nconst PresenceConstants = {};\n\nPresenceConstants.IDEA_DEFAULT_DATA = {\n\tbodyText: '',\n\tdescription: '',\n\tdata: []\n};\n\nPresenceConstants.ACTIONS = keyMirror({\n\tEDIT_IDEA: null,\n\tCREATE_IDEA: null,\n\tARRIVED_IDEA: null\n});\n\nPresenceConstants.API = {\n\tTOPIC_IDEA_ADD: '/api/topics/:topicId/ideas',\n\tIDEA_UPDATE: '/api/messages/:msgId',\n\tIDEA_MESSAGES: '/api/ideas/:ideaId/messages',\n};\n\nPresenceConstants.getUserDefaultPresences = function(options){\n\tvar func = ns + '[getUserDefaultPresences] ';\n\toptions = _.assign({\n\t\trole: MeetingConstants.getUserTopicRole(options.topic, options.user)\n\t}, options);\n\treturn PresenceConstants.getUserDefaultPresencesWithRole(options);\n}\n\nPresenceConstants.getUserDefaultPresencesWithRole = function(options){\n\tvar func = ns + '[getUserDefaultPresencesWithRole] ';\n\toptions = _.assign({\n\t\toffline: true,\n\t\tidle: true,\n\t\tmediaSession: options.mediaSession || PresenceConstants.getDefaultMediaSessionPresence(),\n\t\tdesktop: false\n\t}, options);\n\n\tvar data = {\n\t\toffline: options.offline,\n\t\trole: options.role,\n\t\tmediaSession: options.mediaSession,\n\t\tidle: options.idle,\n\t\tdesktop: options.desktop\n\t}\n\treturn data;\n}\n\nPresenceConstants.getDefaultMediaSessionPresence = function () {\n\treturn {video: false, audio: false, connected: false, screenshare: false};\n};\n\nexport default PresenceConstants\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/flux/constants/PresenceConstants.js\n **/","'use strict';\n\nvar logger = require('../../logger');\nvar config = require('../../../config');\nvar google = require('googleapis');\nvar fs = require('fs');\nvar key = JSON.parse(fs.readFileSync(config.gcloudKey, 'utf8'));\nvar scopes = [\n\t'https://www.googleapis.com/auth/analytics.edit',\n\t'https://www.googleapis.com/auth/analytics.manage.users'\n];\n\n\nvar jwtClient = new google.auth.JWT(key.client_email, null, key.private_key, scopes, null);\n\nexport default jwtClient;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/analytics/google/config.js\n **/","'use strict';\n\nexport default require('./gcs.service.js');\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/modules/file/gcs/index.js\n **/","/**\n * Socket.io configuration\n */\n\n'use strict';\nimport config from './config-env/environment/index';\nimport socketioAuth from './auth/socket.auth';\nimport logger from './modules/logger';\nimport _ from 'underscore';\nimport os from 'os';\nimport msgbk from './api/message/message.backend';\nimport topicbk from './api/topic/topic.backend';\nimport redis_adapter from 'socket.io-redis';\nimport SocketConstants from './flux/constants/SocketConstants';\nimport MessageConstants from './flux/constants/MessageConstants';\nimport PresenceConstants from './flux/constants/PresenceConstants';\nimport MediaSessionManager from './utils/P2PMediaSession/MediaSessionManager';\nimport util from './utils/serverHelper';\n\nvar ns = '[socketio]';\nvar io = require('socket.io');\n// import ga from \"./modules/analytics/google\";\n// import gaCst from \"./modules/analytics/google/constants\";\n\nvar totalSocketCount = 0;\nvar metadata = {\n\n}\n\nvar adapter;\nvar pub = require('redis').createClient(config.redis.port,config.redis.host, { tls: config.redis.ssl, auth_pass:config.redis.auth});\nvar sub = require('redis').createClient(config.redis.port,config.redis.host, { return_buffers: true, auth_pass:config.redis.auth, tls: config.redis.ssl});\n\nadapter = redis_adapter({\n  pubClient: pub,\n  subClient: sub\n});\n\nadapter.pubClient.on('error', function(){\n  logger.warn('pub connection lost');\n});\nadapter.subClient.on('error', function(){\n  logger.warn('sub connection lost');\n});\n\nadapter.prototype.on('error', function(){\n  logger.error('Redis adapter connection lost');\n});\n\n// When the user disconnects.. perform this\nfunction onDisconnect(socket) {\n}\n\n// When the user connects.. perform this\nfunction onConnect(socket) {\n    // When the client emits 'info', this listens and executes\n    socket.on('info', function (data) {\n        console.info('[%s] %s', socket.address, JSON.stringify(data, null, 2));\n    });\n\n    socket.on('newmessage', function (data) {\n        console.log('i got this piece of message', data);\n    });\n\n    // Insert sockets below\n    require('api/message/message.socket.js').register(socket);\n    require('api/user/user.socket.js').register(socket);\n}\n\nexports.initialize = function (server) {\n  // socket.io (v1.x.x) is powered by debug.\n  // In order to see all the debug output, set DEBUG (in server/config/local.env.js) to including the desired scope.\n  //\n  // ex: DEBUG: \"http*,socket.io:socket\"\n\n  // We can authenticate socket.io users and access their token through socket.handshake.decoded_token\n  //\n  // 1. You will need to send the token in `client/components/socket/socket.service.js`\n  //\n  // 2. Require authentication here:\n\n\n\n\n  io = io.listen(server);\n\n  //io.configure(function() {\n  //  io.set('transports', ['websocket']);\n  //});\n\n\n  //refernces for how to setup transport types:\n  // http://stackoverflow.com/questions/28238628/socket-io-1-x-use-websockets-only\n  // http://stackoverflow.com/questions/23962047/socket-io-v1-0-x-unknown-transport-polling\n  // io.set('heartbeat interval', 25);\n  // io.set('heartbeat timeout', 60);\n\n  //io.set('transports', ['websocket']);\n\n  if (config.useRedis) {\n    io.adapter(adapter);\n  }\n  const IO_NAME_SPACE = '/chat';\n  var self = this;\n  this.chat = io.of(IO_NAME_SPACE);\n  this.chat.use(socketioAuth.authorize({\n    handshake: true\n  }));\n\n  self.mediaSessionManager = new MediaSessionManager();\n\n  self.socketPartyLeaves = function(socket, channelName) {\n    var func = ns + '[socketPartyLeaves]';\n    var sessionId = null;\n    if (socket.channelSessionData && socket.channelSessionData[channelName]) {\n      sessionId = socket.channelSessionData[channelName].sessionId;\n      logger.info(func, 'about to delete mediasession', sessionId);\n      delete socket.channelSessionData[channelName];\n    }\n\n    if(socket.logan_channels && socket.logan_channels[channelName]){\n      var topicId = socket.logan_channels[channelName].channel._id;\n      var user = self.getSocketUserInfo(socket);\n      var data = {\n        sender: user,\n        topicId: topicId//notify everybody else in the room that I joined the room\n      }\n\n      var payload = _.assign({\n      origin: 'server',\n        category: MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.PartyLeaves,\n        content: {\n          emitedby: 'server',\n          sessionId: sessionId,\n          data: []\n        }\n      }, data);\n\n      console.log(func, '$channelName:', channelName, payload);\n      socket.broadcast.to(channelName).emit(SocketConstants.EVENT_NAMESPACE.PRESENCE_EVENT_RESPONSE, payload);\n      \n      delete socket.logan_channels[channelName];\n    }    \n  }\n\n  self.hasTopicAccess = function(socket, topicId, cb) {\n    var func = ns + '[hasTopicAccess]';\n    try {\n      if (topicId) {\n        var user = self.getSocketUserInfo(socket);\n        var data = {\n          user: user,\n          topicId: topicId//notify everybody else in the room that I joined the room\n        }\n        topicbk.hasTopicAccess(data, function (err, topicAccess) {\n          logger.info(func, err, 'topicId:', topicId, topicAccess.role);\n          cb(err, topicAccess);\n        });\n      }\n    }\n    catch (err2) {\n      logger.error(func, err2, socket.metadata);\n    }\n  }\n\n  self.socketRequestPartiesPresence = function(socket, channelName, topicAccess) {\n    var func = ns + '[socketRequestPartiesPresence]';\n    var topicId = socket.logan_channels[channelName].channel._id;\n    var user = self.getSocketUserInfo(socket);\n    var data = {\n      sender: user,\n      topicId: topicId//notify everybody else in the room that I joined the room\n    }\n\n    var sessionId = null;\n    if (socket.channelSessionData && socket.channelSessionData[channelName]) {\n      sessionId = socket.channelSessionData[channelName].sessionId;\n    }\n\n    var payload = _.assign({\n      category: MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.RequestPartiesPresence,\n      content: {\n        sessionId: sessionId,\n        data: []\n      }\n      //content: _.assign({\n      //  sessionId: sessionId,\n      //  data: []\n      //}, PresenceConstants.getUserDefaultPresencesWithRole({\n      //  role: topicAccess.role,\n      //  offline: false\n      //}))\n    }, data);\n\n    logger.info(func, '$channelName:', channelName, payload);\n    //io.of(IO_NAME_SPACE).to(channelName).emit(SocketConstants.EVENT_NAMESPACE.SEND_PRESENCE_EVENT, payload)\n    socket.broadcast.to(channelName).emit(SocketConstants.EVENT_NAMESPACE.PRESENCE_EVENT_RESPONSE, payload);\n  }\n\n\n  self.getSocketUserInfo = function (socket) {\n    if(!socket){\n      return {};\n    }\n    return {\n      _id: socket.metadata.connector,\n      username: socket.metadata.connector_email,\n      displayname: socket.metadata.connector_displayname,\n      picture_url: socket.metadata.connector_picture_url,\n      type: socket.metadata.connectorType\n    }\n  }\n\n  //  ver 1.x way -- http://socket.io/docs/migrating-from-0-9/\n  this.chat.use(function (socket, next) {\n    var handshakeData = socket.request;\n    logger.info('socket use() decoded_token:', socket.decoded_token);\n\n    // make sure the handshake data looks good as before\n    // if error do this:\n    // next(new Error('not authorized');\n    // else just call next\n    next();\n\n  });\n  \n  require('./api/message/message.socket').register(this.chat);\n  \n  this.chat.on('connection', function (socket) {\n    // socket.request.headers.hostname = os.hostname(); \n    socket.metadata = {};\n    try {\n      socket.metadata = JSON.parse(JSON.stringify(metadata));\n      totalSocketCount = totalSocketCount + 1;\n      socket.metadata.socketid = socket.id;\n      let user = socket.anonymousUser || socket.user;\n      socket.metadata.connector = user? user._id.toString() : undefined;\n      socket.metadata.connector_email = user.username;\n      socket.metadata.connector_displayname = user.displayname;\n      socket.metadata.connector_picture_url = user.picture_url;\n      socket.metadata.connectorType = user.aType;\n      socket.metadata.transportType = socket.conn.transport.name;\n\n      socket.channelSessionData = socket.channelSessionData || {};\n\n     \n      // //google analytics\n      // socket.metadata.connectionStart = Date.now();\n      // ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_onConnect, label: socket.metadata.connector});\n      // //\n      logger.info('1 socket connectino established, totalSocketCount: ', totalSocketCount, socket.metadata);\n\n      //  connection means authentication already passed, notify client the logged in success with basic userinfo\n      //      socket.emit ('s_loggedin', {\n      //        userid: socket.decoded_token.userid,\n      //        username: socket.decoded_token.username\n      //      });\n\n      //everyone automatically joins a special room named after userid upon connection\n      // socket.join(socket.decoded_token.userid);\n    }\n    catch (err) {\n      logger.error('socket meta data initiation error', err, socket.metadata);\n    }\n\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.ERROR, function () {\n      socket.metadata.status = 'error';\n      logger.error('Error happened in socket-io', 'totalSocketCount: ', totalSocketCount, socket.metadata);\n    });\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.CONNECTION_ERROR, function () {\n      socket.metadata.status = 'connection_error';\n      logger.error('Error happened during connecting to socketio', 'totalSocketCount: ', totalSocketCount, socket.metadata);\n    });\n\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.ON_DISCONNECT, function (payload) {\n      var func = ns + '[' + SocketConstants.EVENT_NAMESPACE.ON_DISCONNECT + ']';\n      totalSocketCount = totalSocketCount - 1;\n      //      socket.metadata.totalSocketCount = totalSocketCount;\n      try {\n        socket.metadata.status = 'disconnected';\n        // //google analytics\n        // var duration = Date.now() - socket.metadata.connectionStart;\n        // ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_onDisconnect, label: socket.metadata.connector, value: duration});\n        // delete socket.metadata.connectionStart;\n        // //\n        var user = self.getSocketUserInfo(socket);\n        logger.info(func, 'totalSocketCount: ', totalSocketCount, user);\n        for (var channel in socket.logan_channels) {\n          if (socket.logan_channels.hasOwnProperty(channel)) {\n            var channelName = socket.logan_channels[channel].name;\n            // do stuff\n            logger.info(func, 'ABOUT TO EMIT DISCONNECTIONS:');\n            logger.info(func, '1 socket disconnect, leave room: %s, socket.id: %s, username: %s',\n              socket.logan_channels[channel], socket.id, user.username);\n\n            self.socketPartyLeaves(socket, channelName);\n          }\n        }\n      }\n      catch (err) {\n        logger.error(func, err, socket.metadata);\n      }\n    });\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.SUBSCRIBE_CHANNEL, function (data) {\n      socket.logan_channels = socket.logan_channels || {};\n\n       try {\n        var channel = data.channel;\n        let logData = JSON.parse(JSON.stringify(socket.metadata));\n        logData.chanel = channel;\n\n        logger.info(SocketConstants.EVENT_NAMESPACE.SUBSCRIBE_CHANNEL, 'ABOUT TO JOIN CHANNEL-------------------------------------:', logData);\n\n        var channelName = SocketConstants.getChannelName(channel);\n         self.hasTopicAccess(socket, channel._id, function(err, topicAccess){\n           if(topicAccess){\n             socket.join(channelName);\n             socket.logan_channels[channelName] = {name: channelName, channel: channel};\n             socket.emit(SocketConstants.EVENT_NAMESPACE.CHANNEL_SUBSCRIBED, {channel: channel});   //notify myself joined successfully\n             var user = self.getSocketUserInfo();\n             socket.channelSessionData[channelName] = socket.channelSessionData[channelName] || self.mediaSessionManager.startUserMediaSession(data.topicId, user);\n             self.socketRequestPartiesPresence(socket, channelName, topicAccess);\n           }\n           else{\n             logger.error('Invalid Channel Name', channel, err);\n           }\n         });\n         //google analytics\n         // ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_joinRoom, label: channelName});\n         //\n      }\n      catch (err) {\n        logger.error(SocketConstants.EVENT_NAMESPACE.SUBSCRIBE_CHANNEL, err, socket.metadata);\n      }\n    });\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.UNSUBSCRIBE_CHANNEL, function(data){\n      socket.logan_channels = socket.logan_channels || {};\n\n      try{\n        var channel = data.channel;\n        var channelName = SocketConstants.getChannelName(channel);\n        if(channelName) {\n          let logData = JSON.parse(JSON.stringify(socket.metadata));\n          logData.chanel = channel;\n          logger.info(SocketConstants.EVENT_NAMESPACE.UNSUBSCRIBE_CHANNEL, 'channel:', logData);\n          socket.leave(channelName);\n          socket.emit(SocketConstants.EVENT_NAMESPACE.CHANNEL_UNSUBSCRIBED, {channel: channel});   //notify myself joined successfully\n          self.socketPartyLeaves(socket, channelName);\n        }\n      }\n      catch(err){\n        logger.error(SocketConstants.EVENT_NAMESPACE.UNSUBSCRIBE_CHANNEL, err,  socket.metadata);\n      }\n    });\n\n//SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE, function (data) {\n      try {\n        //data.datetime = new Date().toISOString();\n\n        //1. should check whether the sender is authorized to send the message\n        //2. set the sender of the message regardless of the original data\n        //3. set created/update of the message before saving\n        //4. before emiting the message, resolve message object with helper fields like: sender.displayname, sender.picture_url, and image links?\n        //5. echo/broadcast the saved message with mongoDB ID\n        //in case of failure it should throw SEND_GROUP_MESSAGE_FAILED.\n\n        //echo back to sender\n          //also echo back my own message\n          socket.metadata.transportType = socket.conn.transport.name;\n          let addMessagetoDownloadableClientFormatMessageBegtm = Date.now();\n          let src = util.getSrcFromSocket(socket);\n          let userObj = self.getSocketUserInfo(socket);\n          data.sender.username = userObj.username;\n          data.sender.displayname = userObj.displayname;\n          data.sender.picture_url = userObj.picture_url;\n          msgbk.addMessageWhenNoIdtoDownloadableClientFormatMessage(src, data, function(err, sentMsg){\n            let addMessagetoDownloadableClientFormatMessageEndtm = Date.now();\n            // logger.debug(\"addMessagetoDownloadableClientFormatMessage consume time \",\n            //             addMessagetoDownloadableClientFormatMessageEndtm - addMessagetoDownloadableClientFormatMessageBegtm);\n            if (err){\n              logger.error(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE, err, socket.metadata);\n              return socket.emit(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE_FAILED, data);\n            }\n            var channelName = 'topic_' + data.topicId;\n            let logData = JSON.parse(JSON.stringify(socket.metadata));\n            logData.channelName = channelName;\n            logger.info(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE, 'about to emit: ', logData);\n            socket.emit(SocketConstants.EVENT_NAMESPACE.GROUP_MESSAGE_SENT, sentMsg);\n            //broadcast to everybody in the room the chat message\n            // //google analytics\n            // ga.postMessageEvent(sentMsg);\n            // //\n            socket.in(channelName).broadcast.emit(SocketConstants.EVENT_NAMESPACE.GROUP_MESSAGE_SENT, sentMsg);\n          });\n          //socket.emit(EVENT_NAMESPACE.SEND_GROUP_MESSAGE, data);\n\n        //var channelName = 'topic_' + data.topicId;\n        //logger.info(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE, 'channelName:', channelName, socket.metadata);\n        //broadcast to everybody in the room the chat message\n        //socket.in(channelName).broadcast.emit(SocketConstants.EVENT_NAMESPACE.GROUP_MESSAGE_SENT, data);\n      }\n      catch (err) {\n        logger.error(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE, err, socket.metadata);\n        return socket.emit(SocketConstants.EVENT_NAMESPACE.SEND_GROUP_MESSAGE_FAILED, data);\n      }\n    });\n\n\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.START_MEDIA_SESSION, async function (data) {\n      var func = ns + '[' + SocketConstants.EVENT_NAMESPACE.SEND_MEDIA_SESSION_EVENTS + ']';\n      try {\n        socket.metadata.transportType = socket.conn.transport.name;\n       \n        \n        if(!data || !data.topicId) {\n          return;\n        }\n        var user = self.getSocketUserInfo(socket);\n        logger.info(func, ' user: ', user);\n\n        var channelName = 'topic_' + data.topicId;\n        var sessionData = self.mediaSessionManager.startUserMediaSession(data.topicId, user);\n        logger.info(func, 'startUserMediaSession.then: ', sessionData);\n\n        if(!socket.channelSessionData){\n          socket.channelSessionData = {}\n        }\n        socket.channelSessionData[channelName] = sessionData;\n\n        //echo back the session data.\n        socket.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, {\n          topicId: data.topicId,\n          sender: user,\n          category: MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.MediaSessionReady,\n          content: sessionData\n        });\n\n        setTimeout(function(){\n          //we probalby need to delay this\n          //let others know this user is ready to receive calsl\n          socket.in(channelName).broadcast.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, {\n            topicId: data.topicId,\n            sender: user,\n            category: MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.READY,\n            content: {\n              sessionId: sessionData.sessionId\n            }\n          });\n        }, 1000);\n      }\n      catch (err) {\n        logger.error(func, err, socket.metadata);\n        return socket.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, {error: err});\n      }\n    });\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.SEND_MEDIA_SESSION_EVENTS, async function (data) {\n      var func = ns + '[' + SocketConstants.EVENT_NAMESPACE.SEND_MEDIA_SESSION_EVENTS + ']';\n      try {\n        logger.info(func, 'begin', data);\n        // //google analytics\n        // if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.TracksStatus) {\n        //   if (!socket.metadata.videoStart) {\n        //     // ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_onVideoStart, label: socket.metadata.connector});\n        //     socket.metadata.videoStart = Date.now();\n        //   }\n        // } else if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.EndVideoChat) {\n        //   let duration = socket.metadata.videoStart? Date.now() - socket.metadata.videoStart: 0;\n        //   ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_onVideoEnd, label: socket.metadata.connector, value: duration});\n        //   delete socket.metadata.videoStart;\n        // } else if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.StartScreenShare) {\n        //    if (!socket.metadata.sreenShareStart) {\n        //     // ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_onScreenShareStart, label: socket.metadata.connector});\n        //     socket.metadata.sreenShareStart = Date.now();\n        //   }\n        // } else if (data.category === MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.StopScreenShare) {\n        //   let duration = socket.metadata.sreenShareStart? Date.now() - socket.metadata.sreenShareStart: 0;\n        //   ga.postEvent({category: gaCst.c_Socket, action: gaCst.a_onScreenShareEnd, label: socket.metadata.connector, value: duration});\n        //   delete socket.metadata.sreenShareStart;\n        // }\n        // //\n        socket.metadata.transportType = socket.conn.transport.name;\n        if(!data || !data.topicId) {\n          return;\n        }\n        var user = self.getSocketUserInfo(socket);\n        var channelName = 'topic_' + data.topicId;\n        socket.channelSessionData = socket.channelSessionData || {};\n        socket.channelSessionData[channelName] = socket.channelSessionData[channelName] || self.mediaSessionManager.startUserMediaSession(data.topicId, user);\n\n        var sessionData = socket.channelSessionData[channelName];\n        if(!sessionData) {\n          socket.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, {\n            topicId: data.topicId,\n            sender: user,\n            category: MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.InvalidMediaSession\n          });\n          logger.error(func, 'invalid session');\n          return;\n        }\n\n        logger.info(func, 'got sessionData: ', sessionData);\n        if(self.mediaSessionManager.processScreenShareAppRequests(data.topicId, user, data, sessionData, function(err, result){\n            logger.info(func, 'processScreenShareAppRequests.then', err);\n            if(result){\n              logger.info(func, ' result from processScreenShareAppRequests we have ScreenShareAppEvent result: ');\n              //socket.channelSessionData[channelName] = sessionData;\n              var payload = {\n                topicId: data.topicId,\n                sender: user,\n                category: data.category,\n                content: _.assign({\n                  sessionId: sessionData.sessionId\n                }, result)\n              };\n              payload.content = payload.content || {};\n              payload.content.sessionId = sessionData.sessionId;\n              logger.info(func, 'about to emit back: ');\n              socket.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, payload);\n            }\n          }))\n        {\n          return;\n        }\n\n        if(self.mediaSessionManager.processScreenShareAppEvent(data.topicId, user, data, sessionData, function(err, result){\n            logger.info(func, 'processScreenShareAppEvent.then', err, result);\n            if(!err){\n              result.content = result.content || {};\n              result.content.sessionId = sessionData.sessionId;\n              logger.info(func, 'about to broadcast processScreenShareAppEvent: ', result);\n              socket.in(channelName).broadcast.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, result);\n            }\n          }))\n        {\n          return;\n        }\n\n        var payload = _.assign({\n          topicId: data.topicId,\n          sender: user,\n          content: {},\n        }, data);\n        payload.content.sessionId = sessionData.sessionId;\n        logger.info(func, 'about to broadcast to others: ', payload);\n        //let others know this user is ready to receive calsl\n        socket.in(channelName).broadcast.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, payload);\n\n        //msgbk.addMessageWhenNoIdtoDownloadableClientFormatMessage({}, data, function(err, sentMsg){\n        //\n        //});\n      }\n      catch (err) {\n        logger.error(func, err, socket.metadata);\n        return socket.emit(SocketConstants.EVENT_NAMESPACE.MEDIA_SESSION_RESPONSE, {error: err});\n      }\n    });\n\n\n    socket.on(SocketConstants.EVENT_NAMESPACE.SEND_PRESENCE_EVENT, async function (data) {\n      var func = ns + '[' + SocketConstants.EVENT_NAMESPACE.SEND_PRESENCE_EVENT + ']';\n      try {\n        logger.info(func, 'begin', data);\n        socket.metadata.transportType = socket.conn.transport.name;\n        if(!data || !data.topicId) {\n          return;\n        }\n        var user = self.getSocketUserInfo(socket);\n        var channelName = 'topic_' + data.topicId;\n        socket.channelSessionData = socket.channelSessionData || {};\n        socket.channelSessionData[channelName] = socket.channelSessionData[channelName] || self.mediaSessionManager.startUserMediaSession(data.topicId, user);\n\n        var sessionData = socket.channelSessionData[channelName];\n        if(!sessionData) {\n          socket.emit(SocketConstants.EVENT_NAMESPACE.PRESENCE_EVENT_RESPONSE, {\n            topicId: data.topicId,\n            sender: user,\n            category: MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.InvalidMediaSession\n          });\n          logger.error(func, 'invalid session');\n          return;\n        }\n\n\n        var payload = _.assign({\n          topicId: data.topicId,\n          sender: user,\n          content: {},\n        }, data);\n        payload.content.sessionId = sessionData.sessionId;\n        logger.info(func, 'about to broadcast to others: ', payload);\n        //let others know this user is ready to receive calsl\n        socket.in(channelName).broadcast.emit(SocketConstants.EVENT_NAMESPACE.PRESENCE_EVENT_RESPONSE, payload);\n\n        //msgbk.addMessageWhenNoIdtoDownloadableClientFormatMessage({}, data, function(err, sentMsg){\n        //\n        //});\n      }\n      catch (err) {\n        logger.error(func, err, socket.metadata);\n        return socket.emit(SocketConstants.EVENT_NAMESPACE.PRESENCE_EVENT_RESPONSE, {error: err});\n      }\n    });\n\n\n    /*socket.on(SocketConstants.EVENT_NAMESPACE.SEND_DIRECT_MESSAGE, function (data) {\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token._id) {\n          logger.info(SocketConstants.EVENT_NAMESPACE.DIRECT_MESSAGE_SENT, 'touser: %s, message: %s...',\n            data.touser.username, data.message.body.substring(0, 15), metadata);\n          socket.emit(SocketConstants.EVENT_NAMESPACE.DIRECT_MESSAGE_SENT, data);  //echo back to myself\n          socket.in(data.touser.id).broadcast.emit(SocketConstants.EVENT_NAMESPACE.DIRECT_MESSAGE_SENT, data);\n        }\n        else {\n          logger.info(SocketConstants.EVENT_NAMESPACE.DIRECT_MESSAGE_SENT, 'fromuser: %s (%s) is not loggedin user, touser: %s, message: %s...',\n            data.sender.username, data.sender.id, data.touser.username, data.message.body.substring(0, 15), metadata);\n          socket.emit(SocketConstants.EVENT_NAMESPACE.DIRECT_MESSAGE_SEND_FAILED, data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error(SocketConstants.EVENT_NAMESPACE.DIRECT_MESSAGE_SENT, err, socket.metadata);\n      }\n    });*/\n\n\n\n\n    /*\n    socket.on('c_invitejoin', function (data) {\n      //invite touser to join the room\n      //      data = {\n      //        fromuser: {\n      //          userid: userid,\n      //          username: username\n      //        },\n      //        touser: {\n      //          userid: userid,\n      //          username: username\n      //        }\n      //        room: {\n      //          roomname: roomname\n      //        }\n      //        datetime: datetime in ISOString\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_invitejoin, data:', data, metadata);\n          socket.in(data.touser.id).broadcast.emit('s_invitejoin', data);\n        }\n        else {\n          logger.info('c_invitejoin, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_invitejoin_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_invitejoin', err, socket.metadata);\n      }\n    });\n\n    socket.on('c_readmsg', function (data) {\n      //    the user read the message (usually put mouse/keyboard focus on the room window), need\n      //    to notify other devices of the same user to mark the room read\n      //      { fromuser: {\n      //                    userid: 'afgdhfhlslfjxlldfl5670443',\n      //                    username: 'zackc@esna.com'\n      //                  },\n      //        room: {\n      //          roomname: 'room_123'\n      //        },\n      //        datetime: '2014-08-12T19:27:35.976Z'\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_readmsg, data: ', data, metadata);\n\n          socket.emit('s_readmsg', data);  //echo back to myself\n          //broadcast to all connected devices from the same user\n          socket.in(data.sender.id).broadcast.emit('s_readmsg', data);\n        }\n        else {\n          logger.info('c_readmsg, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_readmsg_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_readmsg: ', err, socket.metadata);\n      }\n    });\n\n    socket.on('c_readprivatemsg', function (data) {\n      //    the user read the private message (usually put mouse/keyboard focus on the room window), need\n      //    to notify other devices of the same user to mark the room read\n      //      data = {\n      //        fromuser: {\n      //          userid: userid,\n      //          username: username\n      //        },\n      //        touser: {\n      //          userid: userid,\n      //          username: username\n      //        }\n      //        datetime: datetime in ISOString\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_readprivatemsg, data:', data, metadata);\n          socket.in(data.sender.id).broadcast.emit('s_readprivatemsg', data);\n        }\n        else {\n          logger.info('c_readprivatemsg, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_readprivatemsg_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_readprivatemsg', err, socket.metadata);\n      }\n    });\n\n\n    socket.on('c_privatetyping', function (data) {\n      //      data = {\n      //        fromuser: {\n      //          userid: userid,\n      //          username: username\n      //        },\n      //        touser: {\n      //          userid: userid,\n      //          username: username\n      //        }\n      //        datetime: datetime in ISOString\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_privatetyping, data:', data, metadata);\n          socket.in(data.touser.id).broadcast.emit('s_privatetyping', data);\n        }\n        else {\n          logger.info('c_privatetyping, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_privatetyping_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_privatetyping', err, socket.metadata);\n      }\n    });\n\n    socket.on('c_stop_privatetyping', function (data) {\n      //      data = {\n      //        fromuser: {\n      //          userid: userid,\n      //          username: username\n      //        },\n      //        touser: {\n      //          userid: userid,\n      //          username: username\n      //        },\n      //        datetime: datetime in ISOString\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_stop_privatetyping, data:', data, metadata);\n          socket.in(data.touser.id).broadcast.emit('s_stop_privatetyping', data);\n        }\n        else {\n          logger.info('c_stop_privatetyping, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_stop_privatetyping_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_stop_privatetyping', err, socket.metadata);\n      }\n    });\n\n    socket.on('c_typing', function (data) {\n      //    message received from client is json object:\n      //      { fromuser: {\n      //                    userid: 'afgdhfhlslfjxlldfl5670443',\n      //                    username: 'zackc@esna.com'\n      //                  },\n      //        room: {\n      //          roomname: 'room_123'\n      //        },\n      //        datetime: '2014-08-12T19:27:35.976Z'\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_typing, data: ', data, socket.metadata);\n          //broadcast to everybody in the room the typing\n          socket.in('topic_' + data.topic.id).broadcast.emit('s_typing', data);\n        }\n        else {\n          logger.info('c_typing, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_typing_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_typing: ', err, socket.metadata);\n      }\n    });\n\n    socket.on('c_stop_typing', function (data) {\n      //    message received from client is json object:\n      //      { fromuser: {\n      //                    userid: 'afgdhfhlslfjxlldfl5670443',\n      //                    username: 'zackc@esna.com'\n      //                  },\n      //        room: {\n      //          roomname: 'room_123'\n      //        },\n      //        datetime: '2014-08-12T19:27:35.976Z'\n      //      }\n\n\n      try {\n        data.datetime = new Date().toISOString();\n        if (data.sender.id === socket.decoded_token.userid) {\n          logger.info('c_stop_typing, data:', data, socket.metadata);\n          //broadcast to everybody in the room the typing\n          socket.in('topic_' + data.topic.id).broadcast.emit('s_stop_typing', data);\n        }\n        else {\n          logger.info('c_stop_typing, fromuser: %s (%s) is not loggedin user, data:',\n            data.sender.username, data.sender.id, data, metadata);\n          socket.emit('s_stop_typing_fail', data);  //echo back to myself\n        }\n      }\n      catch (err) {\n        logger.error('c_stop_typing', err, socket.metadata);\n      }\n    });\n\n*/\n\n\n\n\n\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/socketio.js\n **/","var ns = '[MediaSessionManager]';\nimport _ from 'underscore';\nimport async from 'async';\nimport config from '../../config-env/environment/index';\nimport fileBackend from '../../api/file/file.backend';\nimport gcsService from '../../modules/file/gcs/gcs.service';\nimport logger from '../../modules/logger';\nimport utilExtended from '../../modules/utils/index';\nimport SocketConstants from '../../flux/constants/SocketConstants';\nimport MessageConstants from '../../flux/constants/MessageConstants';\nimport memcache from '../../modules/memcache';\n\n\nimport utils from '../Utils';\n\nconst SCREEN_SHARE_KEY_PREFIX = 'screen_share_files';\n\nconst DEFAULT_UPLOAD_URL_DURATION = 60 * 60; //1 hour min\nconst DEFAULT_DOWNLOAD_URL_DURATION = 60 * 60; //1min\nconst MAX_NUMBER_OF_SCREEN_FILES = 10;\nfunction MediaSessionLockKey(sid){\n\treturn 'MediaSessionLock:' + sid;\n}\n\n\nclass MediaSessionManager {\n\tconstructor(options) {\n\t\tthis.confSessions = {};//this shouldbe a mem-db;\n\t}\n\n\tstartUserMediaSession(topicId, user) {\n\t\tvar userMediaSession = {\n\t\t\tsessionId: utils.GUID(),\n\t\t\ttopicId: topicId,\n\t\t\tjoined: new Date()\n\t\t}\n\t\treturn userMediaSession;\n\t}\n\n\tgetTempFileKey(user, prefix=''){\n\t\treturn prefix + utils.GUID();\n\t}\n\n\tgetTempFileUploadUrl(user, fileObj, cb, expiration){\n\t\treturn gcsService.getUploadSignedUrl({}, {file: fileObj}, cb, expiration);\n\t}\n\n\tgetTempFileDownloadUrl(user, fileKey, cb, expiration){\n\t\treturn gcsService.getDownloadSignedUrl({}, {key: fileKey}, cb, expiration);\n\t}\n\n\n\n\tgetNextAvailableFileIndex(topicId, user, sessionData) {\n\t\tlet func = ns + '[getNextAvailableFileIndex]';\n\t\tvar nextIndex = sessionData.screenshare.activeFile + 1;\n\t\tif(sessionData.screenshare.files.length < MAX_NUMBER_OF_SCREEN_FILES){\n\t\t\tnextIndex = sessionData.screenshare.files.length;\n\t\t\tvar newTempFile = {\n\t\t\t\tuploadUrl: null,\n\t\t\t\tdownloadUrl: null,\n\t\t\t\tfileIndex: nextIndex,\n\t\t\t\tfileKey: 'screen_' + topicId + '/' + nextIndex,//.getTempFileKey(user, 'screen_' + topicId + '/'),\n\t\t\t\texpires: null\n\t\t\t};\n\t\t\tsessionData.screenshare.files[nextIndex] = newTempFile;\n\t\t\tlogger.debug(func, 'allocating a file in the pool nextIndex:', nextIndex);\n\t\t\treturn nextIndex;\n\t\t}\n\n\t\tif(nextIndex >= MAX_NUMBER_OF_SCREEN_FILES){\n\t\t\tnextIndex = 0;\n\t\t}\n\n\t\tlogger.debug(func, 'nextIndex', nextIndex);\n\t\treturn nextIndex;\n\t}\n\n\n\n\tgenerateScreenShareSignedUrls(topicId, user, contentType, cb) {\n\t\tlet func = ns + '[generateScreenShareSignedUrls]';\n\t\tvar expiration = utils.getSecondsFromNow(DEFAULT_UPLOAD_URL_DURATION);\n\t\tcontentType = contentType || '';\n\t\tvar dt = new Date();\n\t\tconsole.log(func, expiration);\n\t\tconsole.log(func, dt, dt.toISOString());\n\t\tvar result = {\n\t\t\tfiles: [],\n\t\t\texpires: expiration.toISOString()\n\t\t};\n\n\t\tvar screenFiles = {};\n\n\t\tvar files = [];\n\t\tvar fileKeys = [];\n\n\t\tlogger.info(func, 'begin:', topicId);\n\t\tfor (var i = 0; i < MAX_NUMBER_OF_SCREEN_FILES; i++) {\n\t\t\tvar nextIndex = i + 1;\n\t\t\tvar fileKey = 'screen_' + topicId + '/' + nextIndex;\n\t\t\tscreenFiles[fileKey] = {fileKey: fileKey};\n\t\t\tfileKeys.push(fileKey);\n\t\t\tfiles.push({\n\t\t\t\tfileKey: fileKey,\n\t\t\t\t'Content-Type': contentType\n\t\t\t});\n\t\t}\n\n\t\t//logger.info(func, 'files:', files);\n\n\t\tfileBackend.getUploadSignedUrls({}, {files: files}, expiration, function (err, uploadResults) {\n\t\t\tif (err) {\n\t\t\t\treturn cb(err, null);\n\t\t\t}\n\t\t\tfileBackend.getDownloadSignedUrls({}, {fileKeys: fileKeys}, expiration, function (err, downloadResults) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn cb(err, null);\n\t\t\t\t}\n\n\t\t\t\tfor (var f in uploadResults) {\n\t\t\t\t\tscreenFiles[uploadResults[f].fileKey].uploadUrl = uploadResults[f].url;\n\t\t\t\t}\n\n\t\t\t\tfor (var f in downloadResults) {\n\t\t\t\t\tscreenFiles[downloadResults[f].fileKey].downloadUrl = downloadResults[f].url;\n\t\t\t\t}\n\n\t\t\t\tfor (var f in screenFiles) {\n\t\t\t\t\tvar file = {\n\t\t\t\t\t\tfileKey: screenFiles[f].fileKey,\n\t\t\t\t\t\tuploadUrl: screenFiles[f].uploadUrl,\n\t\t\t\t\t\tdownloadUrl: screenFiles[f].downloadUrl\n\t\t\t\t\t}\n\t\t\t\t\tresult.files.push(file);\n\t\t\t\t}\n\n\t\t\t\tcb(null, result);\n\n\t\t\t})\n\t\t});\n\t}\n\n\tgetScreenShareMemcacheKey (topicId){\n\t\treturn SCREEN_SHARE_KEY_PREFIX + '_' + topicId;\n\t}\n\tprocessScreenShareAppRequests(topicId, user, data, sessionData, cb){\n\t\tlet func = ns + '[processScreenShareAppRequests]';\n\t\tlet self = this;\n\t\tsessionData.screenshare = sessionData.screenshare || {files: [], activeFile: 0};\n\t\tswitch(data.category){\n\t\t\tcase MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.StartScreenShare:\n\t\t\t\tvar redKey = this.getScreenShareMemcacheKey(topicId);\n\t\t\t\t//logger.info(func, 'about to clear redKey:', redKey);\n\t\t\t\t//memcache.del({}, redKey, function(err, result){\n\t\t\t\t//\n\t\t\t\t//});\n\t\t\t\tbreak;\n\n\t\t\tcase MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.ScreenShareUploadUrl:\n\t\t\t\tvar redKey = this.getScreenShareMemcacheKey(topicId);\n\t\t\t\tlogger.info(func, ' redKey:', redKey);\n\t\t\t\tvar contentType  = null;\n\t\t\t\tif(data && data.content){\n\t\t\t\t\tcontentType = data.content['Content-Type'];\n\t\t\t\t}\n\t\t\t\tlogger.info(func, redKey, ' about to generate urls contentType:', contentType);\n\t\t\t\tself.generateScreenShareSignedUrls(topicId, user, contentType, function(err, screenSignedData){\n\t\t\t\t\tif(err){\n\t\t\t\t\t\treturn cb(err);\n\t\t\t\t\t}\n\t\t\t\t\tcb(null, screenSignedData);\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t}\n\n\n\tprocessScreenShareAppEvent(topicId, user, data, sessionData, cb)\n\t{\n\t\tlet func = ns + '[processScreenShareAppEvent]';\n\t\tlet self = this;\n\t\tswitch (data.category) {\n\t\t\tcase MessageConstants.ACTIVITY_CATEGORY_TYPES.APP_EVENTS.VIDEO.ScreenShareData:\n\t\t\t\tif(data.content.image){\n\t\t\t\t\tcb(null, data);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tvar fileIndex = data.content.fileIndex;\n\t\t\t\tlogger.debug(func, 'file exists fileIndex:', fileIndex, sessionData.screenshare.files[fileIndex]);\n\t\t\t\tif(fileIndex && sessionData.screenshare.files[fileIndex]){\n\t\t\t\t\tdata.content = data.content || {};\n\t\t\t\t\tdata.content.image = sessionData.screenshare.files[fileIndex].downloadUrl;\n\t\t\t\t\tcb(null, data);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\n\n\n\nexport default MediaSessionManager;\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/P2PMediaSession/MediaSessionManager.js\n **/","/*! React Starter Kit | MIT License | http://www.reactstarterkit.com/ */\n\nimport fs from 'fs';\n\nconst exists = filename => new Promise(resolve => {\n  fs.exists(filename, resolve);\n});\n\nconst readFile = filename => new Promise((resolve, reject) => {\n  fs.readFile(filename, 'utf8', (err, data) => {\n    if (err) {\n      reject(err);\n    } else {\n      resolve(data);\n    }\n  });\n});\n\nexport default { exists, readFile };\n\n\n\n/** WEBPACK FOOTER **\n ** C:/escloud/Logan/src/utils/fs.js\n **/","module.exports = {\n\t\"version\": \"20160503195303\"\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config-env/version.json\n ** module id = 152\n ** module chunks = 0\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react-interpolate-component/~/fbjs/lib/invariant.js\n ** module id = 153\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 154\n ** module chunks = 0\n **/","var map = {\n\t\"./el\": 65,\n\t\"./el.js\": 65,\n\t\"./en\": 53,\n\t\"./en.js\": 53\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 155;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/_locale ^\\.\\/.*$\n ** module id = 155\n ** module chunks = 0\n **/","var map = {\n\t\"./clientEnvironment.js\": 139,\n\t\"./config-helper.js\": 38,\n\t\"./development.js\": 140,\n\t\"./index.js\": 27,\n\t\"./logan-production.js\": 141,\n\t\"./logan-staging.js\": 142,\n\t\"./logan-testing.js\": 143\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 156;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config-env/environment ^\\.\\/.*\\.js$\n ** module id = 156\n ** module chunks = 0\n **/","module.exports = require(\"agenda\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"agenda\"\n ** module id = 157\n ** module chunks = 0\n **/","module.exports = require(\"api/message/message.socket.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"api/message/message.socket.js\"\n ** module id = 158\n ** module chunks = 0\n **/","module.exports = require(\"api/user/user.socket.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"api/user/user.socket.js\"\n ** module id = 159\n ** module chunks = 0\n **/","module.exports = require(\"babel-core/polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-core/polyfill\"\n ** module id = 160\n ** module chunks = 0\n **/","module.exports = require(\"body-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 161\n ** module chunks = 0\n **/","module.exports = require(\"child_process\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"child_process\"\n ** module id = 162\n ** module chunks = 0\n **/","module.exports = require(\"cloudconvert\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cloudconvert\"\n ** module id = 163\n ** module chunks = 0\n **/","module.exports = require(\"cloudconvert/lib/process\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cloudconvert/lib/process\"\n ** module id = 164\n ** module chunks = 0\n **/","module.exports = require(\"composable-middleware\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"composable-middleware\"\n ** module id = 165\n ** module chunks = 0\n **/","module.exports = require(\"compression\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"compression\"\n ** module id = 166\n ** module chunks = 0\n **/","module.exports = require(\"connect-mongo\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"connect-mongo\"\n ** module id = 167\n ** module chunks = 0\n **/","module.exports = require(\"connect-timeout\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"connect-timeout\"\n ** module id = 168\n ** module chunks = 0\n **/","module.exports = require(\"cookie-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cookie-parser\"\n ** module id = 169\n ** module chunks = 0\n **/","module.exports = require(\"counterpart\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"counterpart\"\n ** module id = 170\n ** module chunks = 0\n **/","module.exports = require(\"errorhandler\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"errorhandler\"\n ** module id = 171\n ** module chunks = 0\n **/","module.exports = require(\"events\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"events\"\n ** module id = 172\n ** module chunks = 0\n **/","module.exports = require(\"express-jwt\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-jwt\"\n ** module id = 173\n ** module chunks = 0\n **/","module.exports = require(\"express-session\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-session\"\n ** module id = 174\n ** module chunks = 0\n **/","module.exports = require(\"front-matter\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"front-matter\"\n ** module id = 175\n ** module chunks = 0\n **/","module.exports = require(\"gcloud\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"gcloud\"\n ** module id = 176\n ** module chunks = 0\n **/","module.exports = require(\"googleapis\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"googleapis\"\n ** module id = 177\n ** module chunks = 0\n **/","module.exports = require(\"html-to-json\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"html-to-json\"\n ** module id = 178\n ** module chunks = 0\n **/","module.exports = require(\"http\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"http\"\n ** module id = 179\n ** module chunks = 0\n **/","module.exports = require(\"https\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"https\"\n ** module id = 180\n ** module chunks = 0\n **/","module.exports = require(\"jade\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jade\"\n ** module id = 181\n ** module chunks = 0\n **/","module.exports = require(\"jquery\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 182\n ** module chunks = 0\n **/","module.exports = require(\"lru-cache\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lru-cache\"\n ** module id = 183\n ** module chunks = 0\n **/","module.exports = require(\"method-override\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"method-override\"\n ** module id = 184\n ** module chunks = 0\n **/","module.exports = require(\"mongoose-integer\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongoose-integer\"\n ** module id = 185\n ** module chunks = 0\n **/","module.exports = require(\"newrelic\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"newrelic\"\n ** module id = 186\n ** module chunks = 0\n **/","module.exports = require(\"passport-local\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-local\"\n ** module id = 187\n ** module chunks = 0\n **/","module.exports = require(\"react-dom/server\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-dom/server\"\n ** module id = 188\n ** module chunks = 0\n **/","module.exports = require(\"react-translate-component\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-translate-component\"\n ** module id = 189\n ** module chunks = 0\n **/","module.exports = require(\"sendgrid\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"sendgrid\"\n ** module id = 190\n ** module chunks = 0\n **/","module.exports = require(\"socket.io\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"socket.io\"\n ** module id = 191\n ** module chunks = 0\n **/","module.exports = require(\"socket.io-redis\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"socket.io-redis\"\n ** module id = 192\n ** module chunks = 0\n **/","module.exports = require(\"trycatch\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"trycatch\"\n ** module id = 193\n ** module chunks = 0\n **/","module.exports = require(\"url\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"url\"\n ** module id = 194\n ** module chunks = 0\n **/","module.exports = require(\"winston\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"winston\"\n ** module id = 195\n ** module chunks = 0\n **/","module.exports = require(\"winston-loggly\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"winston-loggly\"\n ** module id = 196\n ** module chunks = 0\n **/","module.exports = require(\"xtend\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"xtend\"\n ** module id = 197\n ** module chunks = 0\n **/"],"sourceRoot":""}